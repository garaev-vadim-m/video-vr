(function(){const Wn=document.createElement("link").relList;if(Wn&&Wn.supports&&Wn.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))T(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const x of o.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&T(x)}).observe(document,{childList:!0,subtree:!0});function B(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function T(t){if(t.ep)return;t.ep=!0;const o=B(t);fetch(t.href,o)}})();var Di=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ii($r){return $r&&$r.__esModule&&Object.prototype.hasOwnProperty.call($r,"default")?$r.default:$r}var ki={exports:{}};(function($r,Wn){(function(T,t){$r.exports=t()})(window,function(){return function(B){var T={};function t(o){if(T[o])return T[o].exports;var x=T[o]={i:o,l:!1,exports:{}};return B[o].call(x.exports,x,x.exports,t),x.l=!0,x.exports}return t.m=B,t.c=T,t.d=function(o,x,f){t.o(o,x)||Object.defineProperty(o,x,{enumerable:!0,get:f})},t.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},t.t=function(o,x){if(x&1&&(o=t(o)),x&8||x&4&&typeof o=="object"&&o&&o.__esModule)return o;var f=Object.create(null);if(t.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:o}),x&2&&typeof o!="string")for(var h in o)t.d(f,h,(function(w){return o[w]}).bind(null,h));return f},t.n=function(o){var x=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(x,"a",x),x},t.o=function(o,x){return Object.prototype.hasOwnProperty.call(o,x)},t.p="dist/",t(t.s="./src/main.js")}({"./node_modules/babel-runtime/core-js/array/from.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/array/from.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/get-iterator.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/get-iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/json/stringify.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/json/stringify.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/assign.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/create.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/define-property.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/object/get-own-property-descriptor.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/keys.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/object/keys.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/symbol/index.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol/iterator.js":function(B,T,t){B.exports={default:t("./node_modules/core-js/library/fn/symbol/iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/classCallCheck.js":function(B,T,t){T.__esModule=!0,T.default=function(o,x){if(!(o instanceof x))throw new TypeError("Cannot call a class as a function")}},"./node_modules/babel-runtime/helpers/createClass.js":function(B,T,t){T.__esModule=!0;var o=t("./node_modules/babel-runtime/core-js/object/define-property.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=function(){function h(w,p){for(var y=0;y<p.length;y++){var c=p[y];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),(0,x.default)(w,c.key,c)}}return function(w,p,y){return p&&h(w.prototype,p),y&&h(w,y),w}}()},"./node_modules/babel-runtime/helpers/extends.js":function(B,T,t){T.__esModule=!0;var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default||function(h){for(var w=1;w<arguments.length;w++){var p=arguments[w];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(h[y]=p[y])}return h}},"./node_modules/babel-runtime/helpers/inherits.js":function(B,T,t){T.__esModule=!0;var o=t("./node_modules/babel-runtime/core-js/object/set-prototype-of.js"),x=y(o),f=t("./node_modules/babel-runtime/core-js/object/create.js"),h=y(f),w=t("./node_modules/babel-runtime/helpers/typeof.js"),p=y(w);function y(c){return c&&c.__esModule?c:{default:c}}T.default=function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof d>"u"?"undefined":(0,p.default)(d)));c.prototype=(0,h.default)(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(x.default?(0,x.default)(c,d):c.__proto__=d)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":function(B,T,t){T.__esModule=!0;var o=t("./node_modules/babel-runtime/helpers/typeof.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=function(h,w){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&((typeof w>"u"?"undefined":(0,x.default)(w))==="object"||typeof w=="function")?w:h}},"./node_modules/babel-runtime/helpers/toConsumableArray.js":function(B,T,t){T.__esModule=!0;var o=t("./node_modules/babel-runtime/core-js/array/from.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=function(h){if(Array.isArray(h)){for(var w=0,p=Array(h.length);w<h.length;w++)p[w]=h[w];return p}else return(0,x.default)(h)}},"./node_modules/babel-runtime/helpers/typeof.js":function(B,T,t){T.__esModule=!0;var o=t("./node_modules/babel-runtime/core-js/symbol/iterator.js"),x=p(o),f=t("./node_modules/babel-runtime/core-js/symbol.js"),h=p(f),w=typeof h.default=="function"&&typeof x.default=="symbol"?function(y){return typeof y}:function(y){return y&&typeof h.default=="function"&&y.constructor===h.default&&y!==h.default.prototype?"symbol":typeof y};function p(y){return y&&y.__esModule?y:{default:y}}T.default=typeof h.default=="function"&&w(x.default)==="symbol"?function(y){return typeof y>"u"?"undefined":w(y)}:function(y){return y&&typeof h.default=="function"&&y.constructor===h.default&&y!==h.default.prototype?"symbol":typeof y>"u"?"undefined":w(y)}},"./node_modules/clappr-zepto/zepto.js":function(B,T){var t=function(){var o,x,f,h,w=[],p=w.concat,y=w.filter,c=w.slice,d=window.document,C={},b={},u={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},g=/^\s*<(\w+|!)[^>]*>/,s=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,l=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,S=/^(?:body|html)$/i,E=/([A-Z])/g,O=["val","css","html","text","data","width","height","offset"],P=["after","prepend","before","append"],A=d.createElement("table"),D=d.createElement("tr"),M={tr:d.createElement("tbody"),tbody:A,thead:A,tfoot:A,td:D,th:D,"*":d.createElement("div")},L=/complete|loaded|interactive/,V=/^[\w-]*$/,j={},N=j.toString,G={},K,k,J=d.createElement("div"),se={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},te=Array.isArray||function(H){return H instanceof Array};G.matches=function(H,m){if(!m||!H||H.nodeType!==1)return!1;var F=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.matchesSelector;if(F)return F.call(H,m);var X,le=H.parentNode,ve=!le;return ve&&(le=J).appendChild(H),X=~G.qsa(le,m).indexOf(H),ve&&J.removeChild(H),X};function oe(H){return H==null?String(H):j[N.call(H)]||"object"}function re(H){return oe(H)=="function"}function ee(H){return H!=null&&H==H.window}function Z(H){return H!=null&&H.nodeType==H.DOCUMENT_NODE}function ge(H){return oe(H)=="object"}function Te(H){return ge(H)&&!ee(H)&&Object.getPrototypeOf(H)==Object.prototype}function we(H){var m=!!H&&"length"in H&&H.length,F=f.type(H);return F!="function"&&!ee(H)&&(F=="array"||m===0||typeof m=="number"&&m>0&&m-1 in H)}function Le(H){return y.call(H,function(m){return m!=null})}function Ce(H){return H.length>0?f.fn.concat.apply([],H):H}K=function(H){return H.replace(/-+(.)?/g,function(m,F){return F?F.toUpperCase():""})};function be(H){return H.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}k=function(H){return y.call(H,function(m,F){return H.indexOf(m)==F})};function Ge(H){return H in b?b[H]:b[H]=new RegExp("(^|\\s)"+H+"(\\s|$)")}function Ke(H,m){return typeof m=="number"&&!u[be(H)]?m+"px":m}function je(H){var m,F;return C[H]||(m=d.createElement(H),d.body.appendChild(m),F=getComputedStyle(m,"").getPropertyValue("display"),m.parentNode.removeChild(m),F=="none"&&(F="block"),C[H]=F),C[H]}function Ze(H){return"children"in H?c.call(H.children):f.map(H.childNodes,function(m){if(m.nodeType==1)return m})}function Be(H,m){var F,X=H?H.length:0;for(F=0;F<X;F++)this[F]=H[F];this.length=X,this.selector=m||""}G.fragment=function(H,m,F){var X,le,ve;return s.test(H)&&(X=f(d.createElement(RegExp.$1))),X||(H.replace&&(H=H.replace(l,"<$1></$2>")),m===o&&(m=g.test(H)&&RegExp.$1),m in M||(m="*"),ve=M[m],ve.innerHTML=""+H,X=f.each(c.call(ve.childNodes),function(){ve.removeChild(this)})),Te(F)&&(le=f(X),f.each(F,function(Se,ye){O.indexOf(Se)>-1?le[Se](ye):le.attr(Se,ye)})),X},G.Z=function(H,m){return new Be(H,m)},G.isZ=function(H){return H instanceof G.Z},G.init=function(H,m){var F;if(H)if(typeof H=="string")if(H=H.trim(),H[0]=="<"&&g.test(H))F=G.fragment(H,RegExp.$1,m),H=null;else{if(m!==o)return f(m).find(H);F=G.qsa(d,H)}else{if(re(H))return f(d).ready(H);if(G.isZ(H))return H;if(te(H))F=Le(H);else if(ge(H))F=[H],H=null;else if(g.test(H))F=G.fragment(H.trim(),RegExp.$1,m),H=null;else{if(m!==o)return f(m).find(H);F=G.qsa(d,H)}}else return G.Z();return G.Z(F,H)},f=function(H,m){return G.init(H,m)};function Oe(H,m,F){for(x in m)F&&(Te(m[x])||te(m[x]))?(Te(m[x])&&!Te(H[x])&&(H[x]={}),te(m[x])&&!te(H[x])&&(H[x]=[]),Oe(H[x],m[x],F)):m[x]!==o&&(H[x]=m[x])}f.extend=function(H){var m,F=c.call(arguments,1);return typeof H=="boolean"&&(m=H,H=F.shift()),F.forEach(function(X){Oe(H,X,m)}),H},G.qsa=function(H,m){var F,X=m[0]=="#",le=!X&&m[0]==".",ve=X||le?m.slice(1):m,Se=V.test(ve);return H.getElementById&&Se&&X?(F=H.getElementById(ve))?[F]:[]:H.nodeType!==1&&H.nodeType!==9&&H.nodeType!==11?[]:c.call(Se&&!X&&H.getElementsByClassName?le?H.getElementsByClassName(ve):H.getElementsByTagName(m):H.querySelectorAll(m))};function ze(H,m){return m==null?f(H):f(H).filter(m)}f.contains=d.documentElement.contains?function(H,m){return H!==m&&H.contains(m)}:function(H,m){for(;m&&(m=m.parentNode);)if(m===H)return!0;return!1};function We(H,m,F,X){return re(m)?m.call(H,F,X):m}function gt(H,m,F){F==null?H.removeAttribute(m):H.setAttribute(m,F)}function at(H,m){var F=H.className||"",X=F&&F.baseVal!==o;if(m===o)return X?F.baseVal:F;X?F.baseVal=m:H.className=m}function _e(H){try{return H&&(H=="true"||(H=="false"?!1:H=="null"?null:+H+""==H?+H:/^[\[\{]/.test(H)?f.parseJSON(H):H))}catch{return H}}f.type=oe,f.isFunction=re,f.isWindow=ee,f.isArray=te,f.isPlainObject=Te,f.isEmptyObject=function(H){var m;for(m in H)return!1;return!0},f.isNumeric=function(H){var m=Number(H),F=typeof H;return H!=null&&F!="boolean"&&(F!="string"||H.length)&&!isNaN(m)&&isFinite(m)||!1},f.inArray=function(H,m,F){return w.indexOf.call(m,H,F)},f.camelCase=K,f.trim=function(H){return H==null?"":String.prototype.trim.call(H)},f.uuid=0,f.support={},f.expr={},f.noop=function(){},f.map=function(H,m){var F,X=[],le,ve;if(we(H))for(le=0;le<H.length;le++)F=m(H[le],le),F!=null&&X.push(F);else for(ve in H)F=m(H[ve],ve),F!=null&&X.push(F);return Ce(X)},f.each=function(H,m){var F,X;if(we(H)){for(F=0;F<H.length;F++)if(m.call(H[F],F,H[F])===!1)return H}else for(X in H)if(m.call(H[X],X,H[X])===!1)return H;return H},f.grep=function(H,m){return y.call(H,m)},window.JSON&&(f.parseJSON=JSON.parse),f.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(H,m){j["[object "+m+"]"]=m.toLowerCase()}),f.fn={constructor:G.Z,length:0,forEach:w.forEach,reduce:w.reduce,push:w.push,sort:w.sort,splice:w.splice,indexOf:w.indexOf,concat:function(){var H,m,F=[];for(H=0;H<arguments.length;H++)m=arguments[H],F[H]=G.isZ(m)?m.toArray():m;return p.apply(G.isZ(this)?this.toArray():this,F)},map:function(H){return f(f.map(this,function(m,F){return H.call(m,F,m)}))},slice:function(){return f(c.apply(this,arguments))},ready:function(H){return L.test(d.readyState)&&d.body?H(f):d.addEventListener("DOMContentLoaded",function(){H(f)},!1),this},get:function(H){return H===o?c.call(this):this[H>=0?H:H+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(H){return w.every.call(this,function(m,F){return H.call(m,F,m)!==!1}),this},filter:function(H){return re(H)?this.not(this.not(H)):f(y.call(this,function(m){return G.matches(m,H)}))},add:function(H,m){return f(k(this.concat(f(H,m))))},is:function(H){return this.length>0&&G.matches(this[0],H)},not:function(H){var m=[];if(re(H)&&H.call!==o)this.each(function(X){H.call(this,X)||m.push(this)});else{var F=typeof H=="string"?this.filter(H):we(H)&&re(H.item)?c.call(H):f(H);this.forEach(function(X){F.indexOf(X)<0&&m.push(X)})}return f(m)},has:function(H){return this.filter(function(){return ge(H)?f.contains(this,H):f(this).find(H).size()})},eq:function(H){return H===-1?this.slice(H):this.slice(H,+H+1)},first:function(){var H=this[0];return H&&!ge(H)?H:f(H)},last:function(){var H=this[this.length-1];return H&&!ge(H)?H:f(H)},find:function(H){var m,F=this;return H?typeof H=="object"?m=f(H).filter(function(){var X=this;return w.some.call(F,function(le){return f.contains(le,X)})}):this.length==1?m=f(G.qsa(this[0],H)):m=this.map(function(){return G.qsa(this,H)}):m=f(),m},closest:function(H,m){var F=[],X=typeof H=="object"&&f(H);return this.each(function(le,ve){for(;ve&&!(X?X.indexOf(ve)>=0:G.matches(ve,H));)ve=ve!==m&&!Z(ve)&&ve.parentNode;ve&&F.indexOf(ve)<0&&F.push(ve)}),f(F)},parents:function(H){for(var m=[],F=this;F.length>0;)F=f.map(F,function(X){if((X=X.parentNode)&&!Z(X)&&m.indexOf(X)<0)return m.push(X),X});return ze(m,H)},parent:function(H){return ze(k(this.pluck("parentNode")),H)},children:function(H){return ze(this.map(function(){return Ze(this)}),H)},contents:function(){return this.map(function(){return this.contentDocument||c.call(this.childNodes)})},siblings:function(H){return ze(this.map(function(m,F){return y.call(Ze(F.parentNode),function(X){return X!==F})}),H)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(H){return f.map(this,function(m){return m[H]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=je(this.nodeName))})},replaceWith:function(H){return this.before(H).remove()},wrap:function(H){var m=re(H);if(this[0]&&!m)var F=f(H).get(0),X=F.parentNode||this.length>1;return this.each(function(le){f(this).wrapAll(m?H.call(this,le):X?F.cloneNode(!0):F)})},wrapAll:function(H){if(this[0]){f(this[0]).before(H=f(H));for(var m;(m=H.children()).length;)H=m.first();f(H).append(this)}return this},wrapInner:function(H){var m=re(H);return this.each(function(F){var X=f(this),le=X.contents(),ve=m?H.call(this,F):H;le.length?le.wrapAll(ve):X.append(ve)})},unwrap:function(){return this.parent().each(function(){f(this).replaceWith(f(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(H){return this.each(function(){var m=f(this);(H===o?m.css("display")=="none":H)?m.show():m.hide()})},prev:function(H){return f(this.pluck("previousElementSibling")).filter(H||"*")},next:function(H){return f(this.pluck("nextElementSibling")).filter(H||"*")},html:function(H){return 0 in arguments?this.each(function(m){var F=this.innerHTML;f(this).empty().append(We(this,H,m,F))}):0 in this?this[0].innerHTML:null},text:function(H){return 0 in arguments?this.each(function(m){var F=We(this,H,m,this.textContent);this.textContent=F==null?"":""+F}):0 in this?this.pluck("textContent").join(""):null},attr:function(H,m){var F;return typeof H=="string"&&!(1 in arguments)?0 in this&&this[0].nodeType==1&&(F=this[0].getAttribute(H))!=null?F:o:this.each(function(X){if(this.nodeType===1)if(ge(H))for(x in H)gt(this,x,H[x]);else gt(this,H,We(this,m,X,this.getAttribute(H)))})},removeAttr:function(H){return this.each(function(){this.nodeType===1&&H.split(" ").forEach(function(m){gt(this,m)},this)})},prop:function(H,m){return H=se[H]||H,1 in arguments?this.each(function(F){this[H]=We(this,m,F,this[H])}):this[0]&&this[0][H]},removeProp:function(H){return H=se[H]||H,this.each(function(){delete this[H]})},data:function(H,m){var F="data-"+H.replace(E,"-$1").toLowerCase(),X=1 in arguments?this.attr(F,m):this.attr(F);return X!==null?_e(X):o},val:function(H){return 0 in arguments?(H==null&&(H=""),this.each(function(m){this.value=We(this,H,m,this.value)})):this[0]&&(this[0].multiple?f(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(H){if(H)return this.each(function(F){var X=f(this),le=We(this,H,F,X.offset()),ve=X.offsetParent().offset(),Se={top:le.top-ve.top,left:le.left-ve.left};X.css("position")=="static"&&(Se.position="relative"),X.css(Se)});if(!this.length)return null;if(d.documentElement!==this[0]&&!f.contains(d.documentElement,this[0]))return{top:0,left:0};var m=this[0].getBoundingClientRect();return{left:m.left+window.pageXOffset,top:m.top+window.pageYOffset,width:Math.round(m.width),height:Math.round(m.height)}},css:function(H,m){if(arguments.length<2){var F=this[0];if(typeof H=="string")return F?F.style[K(H)]||getComputedStyle(F,"").getPropertyValue(H):void 0;if(te(H)){if(!F)return;var X={},le=getComputedStyle(F,"");return f.each(H,function(Se,ye){X[ye]=F.style[K(ye)]||le.getPropertyValue(ye)}),X}}var ve="";if(oe(H)=="string")!m&&m!==0?this.each(function(){this.style.removeProperty(be(H))}):ve=be(H)+":"+Ke(H,m);else for(x in H)!H[x]&&H[x]!==0?this.each(function(){this.style.removeProperty(be(x))}):ve+=be(x)+":"+Ke(x,H[x])+";";return this.each(function(){this.style.cssText+=";"+ve})},index:function(H){return H?this.indexOf(f(H)[0]):this.parent().children().indexOf(this[0])},hasClass:function(H){return H?w.some.call(this,function(m){return this.test(at(m))},Ge(H)):!1},addClass:function(H){return H?this.each(function(m){if("className"in this){h=[];var F=at(this),X=We(this,H,m,F);X.split(/\s+/g).forEach(function(le){f(this).hasClass(le)||h.push(le)},this),h.length&&at(this,F+(F?" ":"")+h.join(" "))}}):this},removeClass:function(H){return this.each(function(m){if("className"in this){if(H===o)return at(this,"");h=at(this),We(this,H,m,h).split(/\s+/g).forEach(function(F){h=h.replace(Ge(F)," ")}),at(this,h.trim())}})},toggleClass:function(H,m){return H?this.each(function(F){var X=f(this),le=We(this,H,F,at(this));le.split(/\s+/g).forEach(function(ve){(m===o?!X.hasClass(ve):m)?X.addClass(ve):X.removeClass(ve)})}):this},scrollTop:function(H){if(this.length){var m="scrollTop"in this[0];return H===o?m?this[0].scrollTop:this[0].pageYOffset:this.each(m?function(){this.scrollTop=H}:function(){this.scrollTo(this.scrollX,H)})}},scrollLeft:function(H){if(this.length){var m="scrollLeft"in this[0];return H===o?m?this[0].scrollLeft:this[0].pageXOffset:this.each(m?function(){this.scrollLeft=H}:function(){this.scrollTo(H,this.scrollY)})}},position:function(){if(this.length){var H=this[0],m=this.offsetParent(),F=this.offset(),X=S.test(m[0].nodeName)?{top:0,left:0}:m.offset();return F.top-=parseFloat(f(H).css("margin-top"))||0,F.left-=parseFloat(f(H).css("margin-left"))||0,X.top+=parseFloat(f(m[0]).css("border-top-width"))||0,X.left+=parseFloat(f(m[0]).css("border-left-width"))||0,{top:F.top-X.top,left:F.left-X.left}}},offsetParent:function(){return this.map(function(){for(var H=this.offsetParent||d.body;H&&!S.test(H.nodeName)&&f(H).css("position")=="static";)H=H.offsetParent;return H})}},f.fn.detach=f.fn.remove,["width","height"].forEach(function(H){var m=H.replace(/./,function(F){return F[0].toUpperCase()});f.fn[H]=function(F){var X,le=this[0];return F===o?ee(le)?le["inner"+m]:Z(le)?le.documentElement["scroll"+m]:(X=this.offset())&&X[H]:this.each(function(ve){le=f(this),le.css(H,We(this,F,ve,le[H]()))})}});function Me(H,m){m(H);for(var F=0,X=H.childNodes.length;F<X;F++)Me(H.childNodes[F],m)}return P.forEach(function(H,m){var F=m%2;f.fn[H]=function(){var X,le=f.map(arguments,function(ye){var Re=[];return X=oe(ye),X=="array"?(ye.forEach(function(Ie){if(Ie.nodeType!==o)return Re.push(Ie);if(f.zepto.isZ(Ie))return Re=Re.concat(Ie.get());Re=Re.concat(G.fragment(Ie))}),Re):X=="object"||ye==null?ye:G.fragment(ye)}),ve,Se=this.length>1;return le.length<1?this:this.each(function(ye,Re){ve=F?Re:Re.parentNode,Re=m==0?Re.nextSibling:m==1?Re.firstChild:m==2?Re:null;var Ie=f.contains(d.documentElement,ve);le.forEach(function(ke){if(Se)ke=ke.cloneNode(!0);else if(!ve)return f(ke).remove();ve.insertBefore(ke,Re),Ie&&Me(ke,function($e){if($e.nodeName!=null&&$e.nodeName.toUpperCase()==="SCRIPT"&&(!$e.type||$e.type==="text/javascript")&&!$e.src){var qe=$e.ownerDocument?$e.ownerDocument.defaultView:window;qe.eval.call(qe,$e.innerHTML)}})})})},f.fn[F?H+"To":"insert"+(m?"Before":"After")]=function(X){return f(X)[H](this),this}}),G.Z.prototype=Be.prototype=f.fn,G.uniq=k,G.deserializeValue=_e,f.zepto=G,f}();window.Zepto=t,window.$===void 0&&(window.$=t),function(o){var x=+new Date,f=window.document,h,w,p=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,c=/^(?:text|application)\/xml/i,d="application/json",C="text/html",b=/^\s*$/,u=f.createElement("a");u.href=window.location.href;function g(k,J,se){var te=o.Event(J);return o(k).trigger(te,se),!te.isDefaultPrevented()}function s(k,J,se,te){if(k.global)return g(J||f,se,te)}o.active=0;function l(k){k.global&&o.active++===0&&s(k,null,"ajaxStart")}function S(k){k.global&&!--o.active&&s(k,null,"ajaxStop")}function E(k,J){var se=J.context;if(J.beforeSend.call(se,k,J)===!1||s(J,se,"ajaxBeforeSend",[k,J])===!1)return!1;s(J,se,"ajaxSend",[k,J])}function O(k,J,se,te){var oe=se.context,re="success";se.success.call(oe,k,re,J),te&&te.resolveWith(oe,[k,re,J]),s(se,oe,"ajaxSuccess",[J,se,k]),A(re,J,se)}function P(k,J,se,te,oe){var re=te.context;te.error.call(re,se,J,k),oe&&oe.rejectWith(re,[se,J,k]),s(te,re,"ajaxError",[se,te,k||J]),A(J,se,te)}function A(k,J,se){var te=se.context;se.complete.call(te,J,k),s(se,te,"ajaxComplete",[J,se]),S(se)}function D(k,J,se){if(se.dataFilter==M)return k;var te=se.context;return se.dataFilter.call(te,k,J)}function M(){}o.ajaxJSONP=function(k,J){if(!("type"in k))return o.ajax(k);var se=k.jsonpCallback,te=(o.isFunction(se)?se():se)||"Zepto"+x++,oe=f.createElement("script"),re=window[te],ee,Z=function(we){o(oe).triggerHandler("error",we||"abort")},ge={abort:Z},Te;return J&&J.promise(ge),o(oe).on("load error",function(we,Le){clearTimeout(Te),o(oe).off().remove(),we.type=="error"||!ee?P(null,Le||"error",ge,k,J):O(ee[0],ge,k,J),window[te]=re,ee&&o.isFunction(re)&&re(ee[0]),re=ee=void 0}),E(ge,k)===!1?(Z("abort"),ge):(window[te]=function(){ee=arguments},oe.src=k.url.replace(/\?(.+)=\?/,"?$1="+te),f.head.appendChild(oe),k.timeout>0&&(Te=setTimeout(function(){Z("timeout")},k.timeout)),ge)},o.ajaxSettings={type:"GET",beforeSend:M,success:M,error:M,complete:M,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:d,xml:"application/xml, text/xml",html:C,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:M};function L(k){return k&&(k=k.split(";",2)[0]),k&&(k==C?"html":k==d?"json":y.test(k)?"script":c.test(k)&&"xml")||"text"}function V(k,J){return J==""?k:(k+"&"+J).replace(/[&?]{1,2}/,"?")}function j(k){k.processData&&k.data&&o.type(k.data)!="string"&&(k.data=o.param(k.data,k.traditional)),k.data&&(!k.type||k.type.toUpperCase()=="GET"||k.dataType=="jsonp")&&(k.url=V(k.url,k.data),k.data=void 0)}o.ajax=function(k){var J=o.extend({},k||{}),se=o.Deferred&&o.Deferred(),te,oe;for(h in o.ajaxSettings)J[h]===void 0&&(J[h]=o.ajaxSettings[h]);l(J),J.crossDomain||(te=f.createElement("a"),te.href=J.url,te.href=te.href,J.crossDomain=u.protocol+"//"+u.host!=te.protocol+"//"+te.host),J.url||(J.url=window.location.toString()),(oe=J.url.indexOf("#"))>-1&&(J.url=J.url.slice(0,oe)),j(J);var re=J.dataType,ee=/\?.+=\?/.test(J.url);if(ee&&(re="jsonp"),(J.cache===!1||(!k||k.cache!==!0)&&(re=="script"||re=="jsonp"))&&(J.url=V(J.url,"_="+Date.now())),re=="jsonp")return ee||(J.url=V(J.url,J.jsonp?J.jsonp+"=?":J.jsonp===!1?"":"callback=?")),o.ajaxJSONP(J,se);var Z=J.accepts[re],ge={},Te=function(Ke,je){ge[Ke.toLowerCase()]=[Ke,je]},we=/^([\w-]+:)\/\//.test(J.url)?RegExp.$1:window.location.protocol,Le=J.xhr(),Ce=Le.setRequestHeader,be;if(se&&se.promise(Le),J.crossDomain||Te("X-Requested-With","XMLHttpRequest"),Te("Accept",Z||"*/*"),(Z=J.mimeType||Z)&&(Z.indexOf(",")>-1&&(Z=Z.split(",",2)[0]),Le.overrideMimeType&&Le.overrideMimeType(Z)),(J.contentType||J.contentType!==!1&&J.data&&J.type.toUpperCase()!="GET")&&Te("Content-Type",J.contentType||"application/x-www-form-urlencoded"),J.headers)for(w in J.headers)Te(w,J.headers[w]);if(Le.setRequestHeader=Te,Le.onreadystatechange=function(){if(Le.readyState==4){Le.onreadystatechange=M,clearTimeout(be);var Ke,je=!1;if(Le.status>=200&&Le.status<300||Le.status==304||Le.status==0&&we=="file:"){if(re=re||L(J.mimeType||Le.getResponseHeader("content-type")),Le.responseType=="arraybuffer"||Le.responseType=="blob")Ke=Le.response;else{Ke=Le.responseText;try{Ke=D(Ke,re,J),re=="script"?(0,eval)(Ke):re=="xml"?Ke=Le.responseXML:re=="json"&&(Ke=b.test(Ke)?null:o.parseJSON(Ke))}catch(Ze){je=Ze}if(je)return P(je,"parsererror",Le,J,se)}O(Ke,Le,J,se)}else P(Le.statusText||null,Le.status?"error":"abort",Le,J,se)}},E(Le,J)===!1)return Le.abort(),P(null,"abort",Le,J,se),Le;var Ge="async"in J?J.async:!0;if(Le.open(J.type,J.url,Ge,J.username,J.password),J.xhrFields)for(w in J.xhrFields)Le[w]=J.xhrFields[w];for(w in ge)Ce.apply(Le,ge[w]);return J.timeout>0&&(be=setTimeout(function(){Le.onreadystatechange=M,Le.abort(),P(null,"timeout",Le,J,se)},J.timeout)),Le.send(J.data?J.data:null),Le};function N(k,J,se,te){return o.isFunction(J)&&(te=se,se=J,J=void 0),o.isFunction(se)||(te=se,se=void 0),{url:k,data:J,success:se,dataType:te}}o.get=function(){return o.ajax(N.apply(null,arguments))},o.post=function(){var k=N.apply(null,arguments);return k.type="POST",o.ajax(k)},o.getJSON=function(){var k=N.apply(null,arguments);return k.dataType="json",o.ajax(k)},o.fn.load=function(k,J,se){if(!this.length)return this;var te=this,oe=k.split(/\s/),re,ee=N(k,J,se),Z=ee.success;return oe.length>1&&(ee.url=oe[0],re=oe[1]),ee.success=function(ge){te.html(re?o("<div>").html(ge.replace(p,"")).find(re):ge),Z&&Z.apply(te,arguments)},o.ajax(ee),this};var G=encodeURIComponent;function K(k,J,se,te){var oe,re=o.isArray(J),ee=o.isPlainObject(J);o.each(J,function(Z,ge){oe=o.type(ge),te&&(Z=se?te:te+"["+(ee||oe=="object"||oe=="array"?Z:"")+"]"),!te&&re?k.add(ge.name,ge.value):oe=="array"||!se&&oe=="object"?K(k,ge,se,Z):k.add(Z,ge)})}o.param=function(k,J){var se=[];return se.add=function(te,oe){o.isFunction(oe)&&(oe=oe()),oe==null&&(oe=""),this.push(G(te)+"="+G(oe))},K(se,k,J),se.join("&").replace(/%20/g,"+")}}(t),function(o){o.Callbacks=function(x){x=o.extend({},x);var f,h,w,p,y,c,d=[],C=!x.once&&[],b=function(g){for(f=x.memory&&g,h=!0,c=p||0,p=0,y=d.length,w=!0;d&&c<y;++c)if(d[c].apply(g[0],g[1])===!1&&x.stopOnFalse){f=!1;break}w=!1,d&&(C?C.length&&b(C.shift()):f?d.length=0:u.disable())},u={add:function(){if(d){var g=d.length,s=function(l){o.each(l,function(S,E){typeof E=="function"?(!x.unique||!u.has(E))&&d.push(E):E&&E.length&&typeof E!="string"&&s(E)})};s(arguments),w?y=d.length:f&&(p=g,b(f))}return this},remove:function(){return d&&o.each(arguments,function(g,s){for(var l;(l=o.inArray(s,d,l))>-1;)d.splice(l,1),w&&(l<=y&&--y,l<=c&&--c)}),this},has:function(g){return!!(d&&(g?o.inArray(g,d)>-1:d.length))},empty:function(){return y=d.length=0,this},disable:function(){return d=C=f=void 0,this},disabled:function(){return!d},lock:function(){return C=void 0,f||u.disable(),this},locked:function(){return!C},fireWith:function(g,s){return d&&(!h||C)&&(s=s||[],s=[g,s.slice?s.slice():s],w?C.push(s):b(s)),this},fire:function(){return u.fireWith(this,arguments)},fired:function(){return!!h}};return u}}(t),function(o){var x=Array.prototype.slice;function f(h){var w=[["resolve","done",o.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",o.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",o.Callbacks({memory:1})]],p="pending",y={state:function(){return p},always:function(){return c.done(arguments).fail(arguments),this},then:function(){var d=arguments;return f(function(C){o.each(w,function(b,u){var g=o.isFunction(d[b])&&d[b];c[u[1]](function(){var s=g&&g.apply(this,arguments);if(s&&o.isFunction(s.promise))s.promise().done(C.resolve).fail(C.reject).progress(C.notify);else{var l=this===y?C.promise():this,S=g?[s]:arguments;C[u[0]+"With"](l,S)}})}),d=null}).promise()},promise:function(d){return d!=null?o.extend(d,y):y}},c={};return o.each(w,function(d,C){var b=C[2],u=C[3];y[C[1]]=b.add,u&&b.add(function(){p=u},w[d^1][2].disable,w[2][2].lock),c[C[0]]=function(){return c[C[0]+"With"](this===c?y:this,arguments),this},c[C[0]+"With"]=b.fireWith}),y.promise(c),h&&h.call(c,c),c}o.when=function(h){var w=x.call(arguments),p=w.length,y=0,c=p!==1||h&&o.isFunction(h.promise)?p:0,d=c===1?h:f(),C,b,u,g=function(s,l,S){return function(E){l[s]=this,S[s]=arguments.length>1?x.call(arguments):E,S===C?d.notifyWith(l,S):--c||d.resolveWith(l,S)}};if(p>1)for(C=new Array(p),b=new Array(p),u=new Array(p);y<p;++y)w[y]&&o.isFunction(w[y].promise)?w[y].promise().done(g(y,u,w)).fail(d.reject).progress(g(y,b,C)):--c;return c||d.resolveWith(u,w),d.promise()},o.Deferred=f}(t),function(o){var x=1,f,h=Array.prototype.slice,w=o.isFunction,p=function(N){return typeof N=="string"},y={},c={},d="onfocusin"in window,C={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};c.click=c.mousedown=c.mouseup=c.mousemove="MouseEvents";function u(N){return N._zid||(N._zid=x++)}function g(N,G,K,k){if(G=s(G),G.ns)var J=l(G.ns);return(y[u(N)]||[]).filter(function(se){return se&&(!G.e||se.e==G.e)&&(!G.ns||J.test(se.ns))&&(!K||u(se.fn)===u(K))&&(!k||se.sel==k)})}function s(N){var G=(""+N).split(".");return{e:G[0],ns:G.slice(1).sort().join(" ")}}function l(N){return new RegExp("(?:^| )"+N.replace(" "," .* ?")+"(?: |$)")}function S(N,G){return N.del&&!d&&N.e in C||!!G}function E(N){return b[N]||d&&C[N]||N}function O(N,G,K,k,J,se,te){var oe=u(N),re=y[oe]||(y[oe]=[]);G.split(/\s/).forEach(function(ee){if(ee=="ready")return o(document).ready(K);var Z=s(ee);Z.fn=K,Z.sel=J,Z.e in b&&(K=function(Te){var we=Te.relatedTarget;if(!we||we!==this&&!o.contains(this,we))return Z.fn.apply(this,arguments)}),Z.del=se;var ge=se||K;Z.proxy=function(Te){if(Te=V(Te),!Te.isImmediatePropagationStopped()){Te.data=k;var we=ge.apply(N,Te._args==f?[Te]:[Te].concat(Te._args));return we===!1&&(Te.preventDefault(),Te.stopPropagation()),we}},Z.i=re.length,re.push(Z),"addEventListener"in N&&N.addEventListener(E(Z.e),Z.proxy,S(Z,te))})}function P(N,G,K,k,J){var se=u(N);(G||"").split(/\s/).forEach(function(te){g(N,te,K,k).forEach(function(oe){delete y[se][oe.i],"removeEventListener"in N&&N.removeEventListener(E(oe.e),oe.proxy,S(oe,J))})})}o.event={add:O,remove:P},o.proxy=function(N,G){var K=2 in arguments&&h.call(arguments,2);if(w(N)){var k=function(){return N.apply(G,K?K.concat(h.call(arguments)):arguments)};return k._zid=u(N),k}else{if(p(G))return K?(K.unshift(N[G],N),o.proxy.apply(null,K)):o.proxy(N[G],N);throw new TypeError("expected function")}},o.fn.bind=function(N,G,K){return this.on(N,G,K)},o.fn.unbind=function(N,G){return this.off(N,G)},o.fn.one=function(N,G,K,k){return this.on(N,G,K,k,1)};var A=function(){return!0},D=function(){return!1},M=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,L={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function V(N,G){return(G||!N.isDefaultPrevented)&&(G||(G=N),o.each(L,function(K,k){var J=G[K];N[K]=function(){return this[k]=A,J&&J.apply(G,arguments)},N[k]=D}),N.timeStamp||(N.timeStamp=Date.now()),(G.defaultPrevented!==f?G.defaultPrevented:"returnValue"in G?G.returnValue===!1:G.getPreventDefault&&G.getPreventDefault())&&(N.isDefaultPrevented=A)),N}function j(N){var G,K={originalEvent:N};for(G in N)!M.test(G)&&N[G]!==f&&(K[G]=N[G]);return V(K,N)}o.fn.delegate=function(N,G,K){return this.on(G,N,K)},o.fn.undelegate=function(N,G,K){return this.off(G,N,K)},o.fn.live=function(N,G){return o(document.body).delegate(this.selector,N,G),this},o.fn.die=function(N,G){return o(document.body).undelegate(this.selector,N,G),this},o.fn.on=function(N,G,K,k,J){var se,te,oe=this;return N&&!p(N)?(o.each(N,function(re,ee){oe.on(re,G,K,ee,J)}),oe):(!p(G)&&!w(k)&&k!==!1&&(k=K,K=G,G=f),(k===f||K===!1)&&(k=K,K=f),k===!1&&(k=D),oe.each(function(re,ee){J&&(se=function(Z){return P(ee,Z.type,k),k.apply(this,arguments)}),G&&(te=function(Z){var ge,Te=o(Z.target).closest(G,ee).get(0);if(Te&&Te!==ee)return ge=o.extend(j(Z),{currentTarget:Te,liveFired:ee}),(se||k).apply(Te,[ge].concat(h.call(arguments,1)))}),O(ee,N,k,K,G,te||se)}))},o.fn.off=function(N,G,K){var k=this;return N&&!p(N)?(o.each(N,function(J,se){k.off(J,G,se)}),k):(!p(G)&&!w(K)&&K!==!1&&(K=G,G=f),K===!1&&(K=D),k.each(function(){P(this,N,K,G)}))},o.fn.trigger=function(N,G){return N=p(N)||o.isPlainObject(N)?o.Event(N):V(N),N._args=G,this.each(function(){N.type in C&&typeof this[N.type]=="function"?this[N.type]():"dispatchEvent"in this?this.dispatchEvent(N):o(this).triggerHandler(N,G)})},o.fn.triggerHandler=function(N,G){var K,k;return this.each(function(J,se){K=j(p(N)?o.Event(N):N),K._args=G,K.target=se,o.each(g(se,N.type||N),function(te,oe){if(k=oe.proxy(K),K.isImmediatePropagationStopped())return!1})}),k},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(N){o.fn[N]=function(G){return 0 in arguments?this.bind(N,G):this.trigger(N)}}),o.Event=function(N,G){p(N)||(G=N,N=G.type);var K=document.createEvent(c[N]||"Events"),k=!0;if(G)for(var J in G)J=="bubbles"?k=!!G[J]:K[J]=G[J];return K.initEvent(N,k,!0),V(K)}}(t),function(){try{getComputedStyle(void 0)}catch{var o=getComputedStyle;window.getComputedStyle=function(f,h){try{return o(f,h)}catch{return null}}}}(),function(o){var x=o.zepto,f=x.qsa,h=x.matches;function w(b){return b=o(b),!!(b.width()||b.height())&&b.css("display")!=="none"}var p=o.expr[":"]={visible:function(){if(w(this))return this},hidden:function(){if(!w(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(b){if(b===0)return this},last:function(b,u){if(b===u.length-1)return this},eq:function(b,u,g){if(b===g)return this},contains:function(b,u,g){if(o(this).text().indexOf(g)>-1)return this},has:function(b,u,g){if(x.qsa(this,g).length)return this}},y=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),c=/^\s*>/,d="Zepto"+ +new Date;function C(b,u){b=b.replace(/=#\]/g,'="#"]');var g,s,l=y.exec(b);if(l&&l[2]in p&&(g=p[l[2]],s=l[3],b=l[1],s)){var S=Number(s);isNaN(S)?s=s.replace(/^["']|["']$/g,""):s=S}return u(b,g,s)}x.qsa=function(b,u){return C(u,function(g,s,l){try{var S;!g&&s?g="*":c.test(g)&&(S=o(b).addClass(d),g="."+d+" "+g);var E=f(b,g)}catch(O){throw console.error("error performing selector: %o",u),O}finally{S&&S.removeClass(d)}return s?x.uniq(o.map(E,function(O,P){return s.call(O,P,E,l)})):E})},x.matches=function(b,u){return C(u,function(g,s,l){return(!g||h(b,g))&&(!s||s.call(b,null,l)===b)})}}(t),B.exports=t},"./node_modules/core-js/library/fn/array/from.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.string.iterator.js"),t("./node_modules/core-js/library/modules/es6.array.from.js"),B.exports=t("./node_modules/core-js/library/modules/_core.js").Array.from},"./node_modules/core-js/library/fn/get-iterator.js":function(B,T,t){t("./node_modules/core-js/library/modules/web.dom.iterable.js"),t("./node_modules/core-js/library/modules/es6.string.iterator.js"),B.exports=t("./node_modules/core-js/library/modules/core.get-iterator.js")},"./node_modules/core-js/library/fn/json/stringify.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_core.js"),x=o.JSON||(o.JSON={stringify:JSON.stringify});B.exports=function(h){return x.stringify.apply(x,arguments)}},"./node_modules/core-js/library/fn/object/assign.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.object.assign.js"),B.exports=t("./node_modules/core-js/library/modules/_core.js").Object.assign},"./node_modules/core-js/library/fn/object/create.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.object.create.js");var o=t("./node_modules/core-js/library/modules/_core.js").Object;B.exports=function(f,h){return o.create(f,h)}},"./node_modules/core-js/library/fn/object/define-property.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.object.define-property.js");var o=t("./node_modules/core-js/library/modules/_core.js").Object;B.exports=function(f,h,w){return o.defineProperty(f,h,w)}},"./node_modules/core-js/library/fn/object/get-own-property-descriptor.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js");var o=t("./node_modules/core-js/library/modules/_core.js").Object;B.exports=function(f,h){return o.getOwnPropertyDescriptor(f,h)}},"./node_modules/core-js/library/fn/object/keys.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.object.keys.js"),B.exports=t("./node_modules/core-js/library/modules/_core.js").Object.keys},"./node_modules/core-js/library/fn/object/set-prototype-of.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),B.exports=t("./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/fn/symbol/index.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.symbol.js"),t("./node_modules/core-js/library/modules/es6.object.to-string.js"),t("./node_modules/core-js/library/modules/es7.symbol.async-iterator.js"),t("./node_modules/core-js/library/modules/es7.symbol.observable.js"),B.exports=t("./node_modules/core-js/library/modules/_core.js").Symbol},"./node_modules/core-js/library/fn/symbol/iterator.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.string.iterator.js"),t("./node_modules/core-js/library/modules/web.dom.iterable.js"),B.exports=t("./node_modules/core-js/library/modules/_wks-ext.js").f("iterator")},"./node_modules/core-js/library/modules/_a-function.js":function(B,T){B.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}},"./node_modules/core-js/library/modules/_add-to-unscopables.js":function(B,T){B.exports=function(){}},"./node_modules/core-js/library/modules/_an-object.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_is-object.js");B.exports=function(x){if(!o(x))throw TypeError(x+" is not an object!");return x}},"./node_modules/core-js/library/modules/_array-includes.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_to-iobject.js"),x=t("./node_modules/core-js/library/modules/_to-length.js"),f=t("./node_modules/core-js/library/modules/_to-index.js");B.exports=function(h){return function(w,p,y){var c=o(w),d=x(c.length),C=f(y,d),b;if(h&&p!=p){for(;d>C;)if(b=c[C++],b!=b)return!0}else for(;d>C;C++)if((h||C in c)&&c[C]===p)return h||C||0;return!h&&-1}}},"./node_modules/core-js/library/modules/_classof.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_cof.js"),x=t("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),f=o(function(){return arguments}())=="Arguments",h=function(w,p){try{return w[p]}catch{}};B.exports=function(w){var p,y,c;return w===void 0?"Undefined":w===null?"Null":typeof(y=h(p=Object(w),x))=="string"?y:f?o(p):(c=o(p))=="Object"&&typeof p.callee=="function"?"Arguments":c}},"./node_modules/core-js/library/modules/_cof.js":function(B,T){var t={}.toString;B.exports=function(o){return t.call(o).slice(8,-1)}},"./node_modules/core-js/library/modules/_core.js":function(B,T){var t=B.exports={version:"2.4.0"};typeof __e=="number"&&(__e=t)},"./node_modules/core-js/library/modules/_create-property.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-dp.js"),x=t("./node_modules/core-js/library/modules/_property-desc.js");B.exports=function(f,h,w){h in f?o.f(f,h,x(0,w)):f[h]=w}},"./node_modules/core-js/library/modules/_ctx.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_a-function.js");B.exports=function(x,f,h){if(o(x),f===void 0)return x;switch(h){case 1:return function(w){return x.call(f,w)};case 2:return function(w,p){return x.call(f,w,p)};case 3:return function(w,p,y){return x.call(f,w,p,y)}}return function(){return x.apply(f,arguments)}}},"./node_modules/core-js/library/modules/_defined.js":function(B,T){B.exports=function(t){if(t==null)throw TypeError("Can't call method on  "+t);return t}},"./node_modules/core-js/library/modules/_descriptors.js":function(B,T,t){B.exports=!t("./node_modules/core-js/library/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/library/modules/_dom-create.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_is-object.js"),x=t("./node_modules/core-js/library/modules/_global.js").document,f=o(x)&&o(x.createElement);B.exports=function(h){return f?x.createElement(h):{}}},"./node_modules/core-js/library/modules/_enum-bug-keys.js":function(B,T){B.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/library/modules/_enum-keys.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-keys.js"),x=t("./node_modules/core-js/library/modules/_object-gops.js"),f=t("./node_modules/core-js/library/modules/_object-pie.js");B.exports=function(h){var w=o(h),p=x.f;if(p)for(var y=p(h),c=f.f,d=0,C;y.length>d;)c.call(h,C=y[d++])&&w.push(C);return w}},"./node_modules/core-js/library/modules/_export.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_global.js"),x=t("./node_modules/core-js/library/modules/_core.js"),f=t("./node_modules/core-js/library/modules/_ctx.js"),h=t("./node_modules/core-js/library/modules/_hide.js"),w="prototype",p=function(y,c,d){var C=y&p.F,b=y&p.G,u=y&p.S,g=y&p.P,s=y&p.B,l=y&p.W,S=b?x:x[c]||(x[c]={}),E=S[w],O=b?o:u?o[c]:(o[c]||{})[w],P,A,D;b&&(d=c);for(P in d)A=!C&&O&&O[P]!==void 0,!(A&&P in S)&&(D=A?O[P]:d[P],S[P]=b&&typeof O[P]!="function"?d[P]:s&&A?f(D,o):l&&O[P]==D?function(M){var L=function(V,j,N){if(this instanceof M){switch(arguments.length){case 0:return new M;case 1:return new M(V);case 2:return new M(V,j)}return new M(V,j,N)}return M.apply(this,arguments)};return L[w]=M[w],L}(D):g&&typeof D=="function"?f(Function.call,D):D,g&&((S.virtual||(S.virtual={}))[P]=D,y&p.R&&E&&!E[P]&&h(E,P,D)))};p.F=1,p.G=2,p.S=4,p.P=8,p.B=16,p.W=32,p.U=64,p.R=128,B.exports=p},"./node_modules/core-js/library/modules/_fails.js":function(B,T){B.exports=function(t){try{return!!t()}catch{return!0}}},"./node_modules/core-js/library/modules/_global.js":function(B,T){var t=B.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=t)},"./node_modules/core-js/library/modules/_has.js":function(B,T){var t={}.hasOwnProperty;B.exports=function(o,x){return t.call(o,x)}},"./node_modules/core-js/library/modules/_hide.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-dp.js"),x=t("./node_modules/core-js/library/modules/_property-desc.js");B.exports=t("./node_modules/core-js/library/modules/_descriptors.js")?function(f,h,w){return o.f(f,h,x(1,w))}:function(f,h,w){return f[h]=w,f}},"./node_modules/core-js/library/modules/_html.js":function(B,T,t){B.exports=t("./node_modules/core-js/library/modules/_global.js").document&&document.documentElement},"./node_modules/core-js/library/modules/_ie8-dom-define.js":function(B,T,t){B.exports=!t("./node_modules/core-js/library/modules/_descriptors.js")&&!t("./node_modules/core-js/library/modules/_fails.js")(function(){return Object.defineProperty(t("./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/library/modules/_iobject.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_cof.js");B.exports=Object("z").propertyIsEnumerable(0)?Object:function(x){return o(x)=="String"?x.split(""):Object(x)}},"./node_modules/core-js/library/modules/_is-array-iter.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_iterators.js"),x=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),f=Array.prototype;B.exports=function(h){return h!==void 0&&(o.Array===h||f[x]===h)}},"./node_modules/core-js/library/modules/_is-array.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_cof.js");B.exports=Array.isArray||function(f){return o(f)=="Array"}},"./node_modules/core-js/library/modules/_is-object.js":function(B,T){B.exports=function(t){return typeof t=="object"?t!==null:typeof t=="function"}},"./node_modules/core-js/library/modules/_iter-call.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_an-object.js");B.exports=function(x,f,h,w){try{return w?f(o(h)[0],h[1]):f(h)}catch(y){var p=x.return;throw p!==void 0&&o(p.call(x)),y}}},"./node_modules/core-js/library/modules/_iter-create.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-create.js"),x=t("./node_modules/core-js/library/modules/_property-desc.js"),f=t("./node_modules/core-js/library/modules/_set-to-string-tag.js"),h={};t("./node_modules/core-js/library/modules/_hide.js")(h,t("./node_modules/core-js/library/modules/_wks.js")("iterator"),function(){return this}),B.exports=function(w,p,y){w.prototype=o(h,{next:x(1,y)}),f(w,p+" Iterator")}},"./node_modules/core-js/library/modules/_iter-define.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_library.js"),x=t("./node_modules/core-js/library/modules/_export.js"),f=t("./node_modules/core-js/library/modules/_redefine.js"),h=t("./node_modules/core-js/library/modules/_hide.js"),w=t("./node_modules/core-js/library/modules/_has.js"),p=t("./node_modules/core-js/library/modules/_iterators.js"),y=t("./node_modules/core-js/library/modules/_iter-create.js"),c=t("./node_modules/core-js/library/modules/_set-to-string-tag.js"),d=t("./node_modules/core-js/library/modules/_object-gpo.js"),C=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),b=!([].keys&&"next"in[].keys()),u="@@iterator",g="keys",s="values",l=function(){return this};B.exports=function(S,E,O,P,A,D,M){y(O,E,P);var L=function(ee){if(!b&&ee in G)return G[ee];switch(ee){case g:return function(){return new O(this,ee)};case s:return function(){return new O(this,ee)}}return function(){return new O(this,ee)}},V=E+" Iterator",j=A==s,N=!1,G=S.prototype,K=G[C]||G[u]||A&&G[A],k=K||L(A),J=A?j?L("entries"):k:void 0,se=E=="Array"&&G.entries||K,te,oe,re;if(se&&(re=d(se.call(new S)),re!==Object.prototype&&(c(re,V,!0),!o&&!w(re,C)&&h(re,C,l))),j&&K&&K.name!==s&&(N=!0,k=function(){return K.call(this)}),(!o||M)&&(b||N||!G[C])&&h(G,C,k),p[E]=k,p[V]=l,A)if(te={values:j?k:L(s),keys:D?k:L(g),entries:J},M)for(oe in te)oe in G||f(G,oe,te[oe]);else x(x.P+x.F*(b||N),E,te);return te}},"./node_modules/core-js/library/modules/_iter-detect.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),x=!1;try{var f=[7][o]();f.return=function(){x=!0},Array.from(f,function(){throw 2})}catch{}B.exports=function(h,w){if(!w&&!x)return!1;var p=!1;try{var y=[7],c=y[o]();c.next=function(){return{done:p=!0}},y[o]=function(){return c},h(y)}catch{}return p}},"./node_modules/core-js/library/modules/_iter-step.js":function(B,T){B.exports=function(t,o){return{value:o,done:!!t}}},"./node_modules/core-js/library/modules/_iterators.js":function(B,T){B.exports={}},"./node_modules/core-js/library/modules/_keyof.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-keys.js"),x=t("./node_modules/core-js/library/modules/_to-iobject.js");B.exports=function(f,h){for(var w=x(f),p=o(w),y=p.length,c=0,d;y>c;)if(w[d=p[c++]]===h)return d}},"./node_modules/core-js/library/modules/_library.js":function(B,T){B.exports=!0},"./node_modules/core-js/library/modules/_meta.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_uid.js")("meta"),x=t("./node_modules/core-js/library/modules/_is-object.js"),f=t("./node_modules/core-js/library/modules/_has.js"),h=t("./node_modules/core-js/library/modules/_object-dp.js").f,w=0,p=Object.isExtensible||function(){return!0},y=!t("./node_modules/core-js/library/modules/_fails.js")(function(){return p(Object.preventExtensions({}))}),c=function(g){h(g,o,{value:{i:"O"+ ++w,w:{}}})},d=function(g,s){if(!x(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!f(g,o)){if(!p(g))return"F";if(!s)return"E";c(g)}return g[o].i},C=function(g,s){if(!f(g,o)){if(!p(g))return!0;if(!s)return!1;c(g)}return g[o].w},b=function(g){return y&&u.NEED&&p(g)&&!f(g,o)&&c(g),g},u=B.exports={KEY:o,NEED:!1,fastKey:d,getWeak:C,onFreeze:b}},"./node_modules/core-js/library/modules/_object-assign.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-keys.js"),x=t("./node_modules/core-js/library/modules/_object-gops.js"),f=t("./node_modules/core-js/library/modules/_object-pie.js"),h=t("./node_modules/core-js/library/modules/_to-object.js"),w=t("./node_modules/core-js/library/modules/_iobject.js"),p=Object.assign;B.exports=!p||t("./node_modules/core-js/library/modules/_fails.js")(function(){var y={},c={},d=Symbol(),C="abcdefghijklmnopqrst";return y[d]=7,C.split("").forEach(function(b){c[b]=b}),p({},y)[d]!=7||Object.keys(p({},c)).join("")!=C})?function(c,d){for(var C=h(c),b=arguments.length,u=1,g=x.f,s=f.f;b>u;)for(var l=w(arguments[u++]),S=g?o(l).concat(g(l)):o(l),E=S.length,O=0,P;E>O;)s.call(l,P=S[O++])&&(C[P]=l[P]);return C}:p},"./node_modules/core-js/library/modules/_object-create.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_an-object.js"),x=t("./node_modules/core-js/library/modules/_object-dps.js"),f=t("./node_modules/core-js/library/modules/_enum-bug-keys.js"),h=t("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),w=function(){},p="prototype",y=function(){var c=t("./node_modules/core-js/library/modules/_dom-create.js")("iframe"),d=f.length,C="<",b=">",u;for(c.style.display="none",t("./node_modules/core-js/library/modules/_html.js").appendChild(c),c.src="javascript:",u=c.contentWindow.document,u.open(),u.write(C+"script"+b+"document.F=Object"+C+"/script"+b),u.close(),y=u.F;d--;)delete y[p][f[d]];return y()};B.exports=Object.create||function(d,C){var b;return d!==null?(w[p]=o(d),b=new w,w[p]=null,b[h]=d):b=y(),C===void 0?b:x(b,C)}},"./node_modules/core-js/library/modules/_object-dp.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_an-object.js"),x=t("./node_modules/core-js/library/modules/_ie8-dom-define.js"),f=t("./node_modules/core-js/library/modules/_to-primitive.js"),h=Object.defineProperty;T.f=t("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(p,y,c){if(o(p),y=f(y,!0),o(c),x)try{return h(p,y,c)}catch{}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(p[y]=c.value),p}},"./node_modules/core-js/library/modules/_object-dps.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-dp.js"),x=t("./node_modules/core-js/library/modules/_an-object.js"),f=t("./node_modules/core-js/library/modules/_object-keys.js");B.exports=t("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function(w,p){x(w);for(var y=f(p),c=y.length,d=0,C;c>d;)o.f(w,C=y[d++],p[C]);return w}},"./node_modules/core-js/library/modules/_object-gopd.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-pie.js"),x=t("./node_modules/core-js/library/modules/_property-desc.js"),f=t("./node_modules/core-js/library/modules/_to-iobject.js"),h=t("./node_modules/core-js/library/modules/_to-primitive.js"),w=t("./node_modules/core-js/library/modules/_has.js"),p=t("./node_modules/core-js/library/modules/_ie8-dom-define.js"),y=Object.getOwnPropertyDescriptor;T.f=t("./node_modules/core-js/library/modules/_descriptors.js")?y:function(d,C){if(d=f(d),C=h(C,!0),p)try{return y(d,C)}catch{}if(w(d,C))return x(!o.f.call(d,C),d[C])}},"./node_modules/core-js/library/modules/_object-gopn-ext.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_to-iobject.js"),x=t("./node_modules/core-js/library/modules/_object-gopn.js").f,f={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(p){try{return x(p)}catch{return h.slice()}};B.exports.f=function(y){return h&&f.call(y)=="[object Window]"?w(y):x(o(y))}},"./node_modules/core-js/library/modules/_object-gopn.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-keys-internal.js"),x=t("./node_modules/core-js/library/modules/_enum-bug-keys.js").concat("length","prototype");T.f=Object.getOwnPropertyNames||function(h){return o(h,x)}},"./node_modules/core-js/library/modules/_object-gops.js":function(B,T){T.f=Object.getOwnPropertySymbols},"./node_modules/core-js/library/modules/_object-gpo.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_has.js"),x=t("./node_modules/core-js/library/modules/_to-object.js"),f=t("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),h=Object.prototype;B.exports=Object.getPrototypeOf||function(w){return w=x(w),o(w,f)?w[f]:typeof w.constructor=="function"&&w instanceof w.constructor?w.constructor.prototype:w instanceof Object?h:null}},"./node_modules/core-js/library/modules/_object-keys-internal.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_has.js"),x=t("./node_modules/core-js/library/modules/_to-iobject.js"),f=t("./node_modules/core-js/library/modules/_array-includes.js")(!1),h=t("./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");B.exports=function(w,p){var y=x(w),c=0,d=[],C;for(C in y)C!=h&&o(y,C)&&d.push(C);for(;p.length>c;)o(y,C=p[c++])&&(~f(d,C)||d.push(C));return d}},"./node_modules/core-js/library/modules/_object-keys.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-keys-internal.js"),x=t("./node_modules/core-js/library/modules/_enum-bug-keys.js");B.exports=Object.keys||function(h){return o(h,x)}},"./node_modules/core-js/library/modules/_object-pie.js":function(B,T){T.f={}.propertyIsEnumerable},"./node_modules/core-js/library/modules/_object-sap.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_export.js"),x=t("./node_modules/core-js/library/modules/_core.js"),f=t("./node_modules/core-js/library/modules/_fails.js");B.exports=function(h,w){var p=(x.Object||{})[h]||Object[h],y={};y[h]=w(p),o(o.S+o.F*f(function(){p(1)}),"Object",y)}},"./node_modules/core-js/library/modules/_property-desc.js":function(B,T){B.exports=function(t,o){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:o}}},"./node_modules/core-js/library/modules/_redefine.js":function(B,T,t){B.exports=t("./node_modules/core-js/library/modules/_hide.js")},"./node_modules/core-js/library/modules/_set-proto.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_is-object.js"),x=t("./node_modules/core-js/library/modules/_an-object.js"),f=function(h,w){if(x(h),!o(w)&&w!==null)throw TypeError(w+": can't set as prototype!")};B.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(h,w,p){try{p=t("./node_modules/core-js/library/modules/_ctx.js")(Function.call,t("./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2),p(h,[]),w=!(h instanceof Array)}catch{w=!0}return function(c,d){return f(c,d),w?c.__proto__=d:p(c,d),c}}({},!1):void 0),check:f}},"./node_modules/core-js/library/modules/_set-to-string-tag.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_object-dp.js").f,x=t("./node_modules/core-js/library/modules/_has.js"),f=t("./node_modules/core-js/library/modules/_wks.js")("toStringTag");B.exports=function(h,w,p){h&&!x(h=p?h:h.prototype,f)&&o(h,f,{configurable:!0,value:w})}},"./node_modules/core-js/library/modules/_shared-key.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_shared.js")("keys"),x=t("./node_modules/core-js/library/modules/_uid.js");B.exports=function(f){return o[f]||(o[f]=x(f))}},"./node_modules/core-js/library/modules/_shared.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_global.js"),x="__core-js_shared__",f=o[x]||(o[x]={});B.exports=function(h){return f[h]||(f[h]={})}},"./node_modules/core-js/library/modules/_string-at.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_to-integer.js"),x=t("./node_modules/core-js/library/modules/_defined.js");B.exports=function(f){return function(h,w){var p=String(x(h)),y=o(w),c=p.length,d,C;return y<0||y>=c?f?"":void 0:(d=p.charCodeAt(y),d<55296||d>56319||y+1===c||(C=p.charCodeAt(y+1))<56320||C>57343?f?p.charAt(y):d:f?p.slice(y,y+2):(d-55296<<10)+(C-56320)+65536)}}},"./node_modules/core-js/library/modules/_to-index.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_to-integer.js"),x=Math.max,f=Math.min;B.exports=function(h,w){return h=o(h),h<0?x(h+w,0):f(h,w)}},"./node_modules/core-js/library/modules/_to-integer.js":function(B,T){var t=Math.ceil,o=Math.floor;B.exports=function(x){return isNaN(x=+x)?0:(x>0?o:t)(x)}},"./node_modules/core-js/library/modules/_to-iobject.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_iobject.js"),x=t("./node_modules/core-js/library/modules/_defined.js");B.exports=function(f){return o(x(f))}},"./node_modules/core-js/library/modules/_to-length.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_to-integer.js"),x=Math.min;B.exports=function(f){return f>0?x(o(f),9007199254740991):0}},"./node_modules/core-js/library/modules/_to-object.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_defined.js");B.exports=function(x){return Object(o(x))}},"./node_modules/core-js/library/modules/_to-primitive.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_is-object.js");B.exports=function(x,f){if(!o(x))return x;var h,w;if(f&&typeof(h=x.toString)=="function"&&!o(w=h.call(x))||typeof(h=x.valueOf)=="function"&&!o(w=h.call(x))||!f&&typeof(h=x.toString)=="function"&&!o(w=h.call(x)))return w;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/_uid.js":function(B,T){var t=0,o=Math.random();B.exports=function(x){return"Symbol(".concat(x===void 0?"":x,")_",(++t+o).toString(36))}},"./node_modules/core-js/library/modules/_wks-define.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_global.js"),x=t("./node_modules/core-js/library/modules/_core.js"),f=t("./node_modules/core-js/library/modules/_library.js"),h=t("./node_modules/core-js/library/modules/_wks-ext.js"),w=t("./node_modules/core-js/library/modules/_object-dp.js").f;B.exports=function(p){var y=x.Symbol||(x.Symbol=f?{}:o.Symbol||{});p.charAt(0)!="_"&&!(p in y)&&w(y,p,{value:h.f(p)})}},"./node_modules/core-js/library/modules/_wks-ext.js":function(B,T,t){T.f=t("./node_modules/core-js/library/modules/_wks.js")},"./node_modules/core-js/library/modules/_wks.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_shared.js")("wks"),x=t("./node_modules/core-js/library/modules/_uid.js"),f=t("./node_modules/core-js/library/modules/_global.js").Symbol,h=typeof f=="function",w=B.exports=function(p){return o[p]||(o[p]=h&&f[p]||(h?f:x)("Symbol."+p))};w.store=o},"./node_modules/core-js/library/modules/core.get-iterator-method.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_classof.js"),x=t("./node_modules/core-js/library/modules/_wks.js")("iterator"),f=t("./node_modules/core-js/library/modules/_iterators.js");B.exports=t("./node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(h){if(h!=null)return h[x]||h["@@iterator"]||f[o(h)]}},"./node_modules/core-js/library/modules/core.get-iterator.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_an-object.js"),x=t("./node_modules/core-js/library/modules/core.get-iterator-method.js");B.exports=t("./node_modules/core-js/library/modules/_core.js").getIterator=function(f){var h=x(f);if(typeof h!="function")throw TypeError(f+" is not iterable!");return o(h.call(f))}},"./node_modules/core-js/library/modules/es6.array.from.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_ctx.js"),x=t("./node_modules/core-js/library/modules/_export.js"),f=t("./node_modules/core-js/library/modules/_to-object.js"),h=t("./node_modules/core-js/library/modules/_iter-call.js"),w=t("./node_modules/core-js/library/modules/_is-array-iter.js"),p=t("./node_modules/core-js/library/modules/_to-length.js"),y=t("./node_modules/core-js/library/modules/_create-property.js"),c=t("./node_modules/core-js/library/modules/core.get-iterator-method.js");x(x.S+x.F*!t("./node_modules/core-js/library/modules/_iter-detect.js")(function(d){Array.from(d)}),"Array",{from:function(C){var b=f(C),u=typeof this=="function"?this:Array,g=arguments.length,s=g>1?arguments[1]:void 0,l=s!==void 0,S=0,E=c(b),O,P,A,D;if(l&&(s=o(s,g>2?arguments[2]:void 0,2)),E!=null&&!(u==Array&&w(E)))for(D=E.call(b),P=new u;!(A=D.next()).done;S++)y(P,S,l?h(D,s,[A.value,S],!0):A.value);else for(O=p(b.length),P=new u(O);O>S;S++)y(P,S,l?s(b[S],S):b[S]);return P.length=S,P}})},"./node_modules/core-js/library/modules/es6.array.iterator.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_add-to-unscopables.js"),x=t("./node_modules/core-js/library/modules/_iter-step.js"),f=t("./node_modules/core-js/library/modules/_iterators.js"),h=t("./node_modules/core-js/library/modules/_to-iobject.js");B.exports=t("./node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",function(w,p){this._t=h(w),this._i=0,this._k=p},function(){var w=this._t,p=this._k,y=this._i++;return!w||y>=w.length?(this._t=void 0,x(1)):p=="keys"?x(0,y):p=="values"?x(0,w[y]):x(0,[y,w[y]])},"values"),f.Arguments=f.Array,o("keys"),o("values"),o("entries")},"./node_modules/core-js/library/modules/es6.object.assign.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_export.js");o(o.S+o.F,"Object",{assign:t("./node_modules/core-js/library/modules/_object-assign.js")})},"./node_modules/core-js/library/modules/es6.object.create.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_export.js");o(o.S,"Object",{create:t("./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.define-property.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_export.js");o(o.S+o.F*!t("./node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:t("./node_modules/core-js/library/modules/_object-dp.js").f})},"./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_to-iobject.js"),x=t("./node_modules/core-js/library/modules/_object-gopd.js").f;t("./node_modules/core-js/library/modules/_object-sap.js")("getOwnPropertyDescriptor",function(){return function(h,w){return x(o(h),w)}})},"./node_modules/core-js/library/modules/es6.object.keys.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_to-object.js"),x=t("./node_modules/core-js/library/modules/_object-keys.js");t("./node_modules/core-js/library/modules/_object-sap.js")("keys",function(){return function(h){return x(o(h))}})},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_export.js");o(o.S,"Object",{setPrototypeOf:t("./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/core-js/library/modules/es6.object.to-string.js":function(B,T){},"./node_modules/core-js/library/modules/es6.string.iterator.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_string-at.js")(!0);t("./node_modules/core-js/library/modules/_iter-define.js")(String,"String",function(x){this._t=String(x),this._i=0},function(){var x=this._t,f=this._i,h;return f>=x.length?{value:void 0,done:!0}:(h=o(x,f),this._i+=h.length,{value:h,done:!1})})},"./node_modules/core-js/library/modules/es6.symbol.js":function(B,T,t){var o=t("./node_modules/core-js/library/modules/_global.js"),x=t("./node_modules/core-js/library/modules/_has.js"),f=t("./node_modules/core-js/library/modules/_descriptors.js"),h=t("./node_modules/core-js/library/modules/_export.js"),w=t("./node_modules/core-js/library/modules/_redefine.js"),p=t("./node_modules/core-js/library/modules/_meta.js").KEY,y=t("./node_modules/core-js/library/modules/_fails.js"),c=t("./node_modules/core-js/library/modules/_shared.js"),d=t("./node_modules/core-js/library/modules/_set-to-string-tag.js"),C=t("./node_modules/core-js/library/modules/_uid.js"),b=t("./node_modules/core-js/library/modules/_wks.js"),u=t("./node_modules/core-js/library/modules/_wks-ext.js"),g=t("./node_modules/core-js/library/modules/_wks-define.js"),s=t("./node_modules/core-js/library/modules/_keyof.js"),l=t("./node_modules/core-js/library/modules/_enum-keys.js"),S=t("./node_modules/core-js/library/modules/_is-array.js"),E=t("./node_modules/core-js/library/modules/_an-object.js"),O=t("./node_modules/core-js/library/modules/_to-iobject.js"),P=t("./node_modules/core-js/library/modules/_to-primitive.js"),A=t("./node_modules/core-js/library/modules/_property-desc.js"),D=t("./node_modules/core-js/library/modules/_object-create.js"),M=t("./node_modules/core-js/library/modules/_object-gopn-ext.js"),L=t("./node_modules/core-js/library/modules/_object-gopd.js"),V=t("./node_modules/core-js/library/modules/_object-dp.js"),j=t("./node_modules/core-js/library/modules/_object-keys.js"),N=L.f,G=V.f,K=M.f,k=o.Symbol,J=o.JSON,se=J&&J.stringify,te="prototype",oe=b("_hidden"),re=b("toPrimitive"),ee={}.propertyIsEnumerable,Z=c("symbol-registry"),ge=c("symbols"),Te=c("op-symbols"),we=Object[te],Le=typeof k=="function",Ce=o.QObject,be=!Ce||!Ce[te]||!Ce[te].findChild,Ge=f&&y(function(){return D(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a!=7})?function(H,m,F){var X=N(we,m);X&&delete we[m],G(H,m,F),X&&H!==we&&G(we,m,X)}:G,Ke=function(H){var m=ge[H]=D(k[te]);return m._k=H,m},je=Le&&typeof k.iterator=="symbol"?function(H){return typeof H=="symbol"}:function(H){return H instanceof k},Ze=function(m,F,X){return m===we&&Ze(Te,F,X),E(m),F=P(F,!0),E(X),x(ge,F)?(X.enumerable?(x(m,oe)&&m[oe][F]&&(m[oe][F]=!1),X=D(X,{enumerable:A(0,!1)})):(x(m,oe)||G(m,oe,A(1,{})),m[oe][F]=!0),Ge(m,F,X)):G(m,F,X)},Be=function(m,F){E(m);for(var X=l(F=O(F)),le=0,ve=X.length,Se;ve>le;)Ze(m,Se=X[le++],F[Se]);return m},Oe=function(m,F){return F===void 0?D(m):Be(D(m),F)},ze=function(m){var F=ee.call(this,m=P(m,!0));return this===we&&x(ge,m)&&!x(Te,m)?!1:F||!x(this,m)||!x(ge,m)||x(this,oe)&&this[oe][m]?F:!0},We=function(m,F){if(m=O(m),F=P(F,!0),!(m===we&&x(ge,F)&&!x(Te,F))){var X=N(m,F);return X&&x(ge,F)&&!(x(m,oe)&&m[oe][F])&&(X.enumerable=!0),X}},gt=function(m){for(var F=K(O(m)),X=[],le=0,ve;F.length>le;)!x(ge,ve=F[le++])&&ve!=oe&&ve!=p&&X.push(ve);return X},at=function(m){for(var F=m===we,X=K(F?Te:O(m)),le=[],ve=0,Se;X.length>ve;)x(ge,Se=X[ve++])&&(!F||x(we,Se))&&le.push(ge[Se]);return le};Le||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var m=C(arguments.length>0?arguments[0]:void 0),F=function(X){this===we&&F.call(Te,X),x(this,oe)&&x(this[oe],m)&&(this[oe][m]=!1),Ge(this,m,A(1,X))};return f&&be&&Ge(we,m,{configurable:!0,set:F}),Ke(m)},w(k[te],"toString",function(){return this._k}),L.f=We,V.f=Ze,t("./node_modules/core-js/library/modules/_object-gopn.js").f=M.f=gt,t("./node_modules/core-js/library/modules/_object-pie.js").f=ze,t("./node_modules/core-js/library/modules/_object-gops.js").f=at,f&&!t("./node_modules/core-js/library/modules/_library.js")&&w(we,"propertyIsEnumerable",ze,!0),u.f=function(H){return Ke(b(H))}),h(h.G+h.W+h.F*!Le,{Symbol:k});for(var _e="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Me=0;_e.length>Me;)b(_e[Me++]);for(var _e=j(b.store),Me=0;_e.length>Me;)g(_e[Me++]);h(h.S+h.F*!Le,"Symbol",{for:function(H){return x(Z,H+="")?Z[H]:Z[H]=k(H)},keyFor:function(m){if(je(m))return s(Z,m);throw TypeError(m+" is not a symbol!")},useSetter:function(){be=!0},useSimple:function(){be=!1}}),h(h.S+h.F*!Le,"Object",{create:Oe,defineProperty:Ze,defineProperties:Be,getOwnPropertyDescriptor:We,getOwnPropertyNames:gt,getOwnPropertySymbols:at}),J&&h(h.S+h.F*(!Le||y(function(){var H=k();return se([H])!="[null]"||se({a:H})!="{}"||se(Object(H))!="{}"})),"JSON",{stringify:function(m){if(!(m===void 0||je(m))){for(var F=[m],X=1,le,ve;arguments.length>X;)F.push(arguments[X++]);return le=F[1],typeof le=="function"&&(ve=le),(ve||!S(le))&&(le=function(Se,ye){if(ve&&(ye=ve.call(this,Se,ye)),!je(ye))return ye}),F[1]=le,se.apply(J,F)}}}),k[te][re]||t("./node_modules/core-js/library/modules/_hide.js")(k[te],re,k[te].valueOf),d(k,"Symbol"),d(Math,"Math",!0),d(o.JSON,"JSON",!0)},"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js":function(B,T,t){t("./node_modules/core-js/library/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/library/modules/es7.symbol.observable.js":function(B,T,t){t("./node_modules/core-js/library/modules/_wks-define.js")("observable")},"./node_modules/core-js/library/modules/web.dom.iterable.js":function(B,T,t){t("./node_modules/core-js/library/modules/es6.array.iterator.js");for(var o=t("./node_modules/core-js/library/modules/_global.js"),x=t("./node_modules/core-js/library/modules/_hide.js"),f=t("./node_modules/core-js/library/modules/_iterators.js"),h=t("./node_modules/core-js/library/modules/_wks.js")("toStringTag"),w=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var y=w[p],c=o[y],d=c&&c.prototype;d&&!d[h]&&x(d,h,y),f[y]=f.Array}},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/container/public/style.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.container[data-container] {
  position: absolute;
  background-color: black;
  height: 100%;
  width: 100%;
  max-width: 100%; }
  .container[data-container] .chromeless {
    cursor: default; }

[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {
  cursor: pointer; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/core/public/style.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`[data-player] {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-transform: translate3d(0, 0, 0);
          transform: translate3d(0, 0, 0);
  position: relative;
  margin: 0;
  padding: 0;
  border: 0;
  font-style: normal;
  font-weight: normal;
  text-align: center;
  overflow: hidden;
  font-size: 100%;
  font-family: "Roboto", "Open Sans", Arial, sans-serif;
  text-shadow: 0 0 0;
  box-sizing: border-box; }
  [data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,
  [data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,
  [data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,
  [data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,
  [data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,
  [data-player] b, [data-player] u, [data-player] i, [data-player] center,
  [data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,
  [data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,
  [data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,
  [data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,
  [data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,
  [data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,
  [data-player] time, [data-player] mark, [data-player] audio, [data-player] video {
    margin: 0;
    padding: 0;
    border: 0;
    font: inherit;
    font-size: 100%;
    vertical-align: baseline; }
  [data-player] table {
    border-collapse: collapse;
    border-spacing: 0; }
  [data-player] caption, [data-player] th, [data-player] td {
    text-align: left;
    font-weight: normal;
    vertical-align: middle; }
  [data-player] q, [data-player] blockquote {
    quotes: none; }
    [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {
      content: "";
      content: none; }
  [data-player] a img {
    border: none; }
  [data-player]:focus {
    outline: 0; }
  [data-player] * {
    max-width: none;
    box-sizing: inherit;
    float: none; }
  [data-player] div {
    display: block; }
  [data-player].fullscreen {
    width: 100% !important;
    height: 100% !important;
    top: 0;
    left: 0; }
  [data-player].nocursor {
    cursor: none; }

.clappr-style {
  display: none !important; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/base_flash_playback/public/flash.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.clappr-flash-playback[data-flash-playback] {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  pointer-events: none; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html5_video/public/style.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`[data-html5-video] {
  position: absolute;
  height: 100%;
  width: 100%;
  display: block; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html_img/public/style.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`[data-html-img] {
  max-width: 100%;
  max-height: 100%; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/no_op/public/style.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`[data-no-op] {
  position: absolute;
  height: 100%;
  width: 100%;
  text-align: center; }

[data-no-op] p[data-no-op-msg] {
  position: absolute;
  text-align: center;
  font-size: 25px;
  left: 0;
  right: 0;
  color: white;
  padding: 10px;
  /* center vertically */
  top: 50%;
  -webkit-transform: translateY(-50%);
          transform: translateY(-50%);
  max-height: 100%;
  overflow: auto; }

[data-no-op] canvas[data-no-op-canvas] {
  background-color: #777;
  height: 100%;
  width: 100%; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/closed_captions/public/closed_captions.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.cc-controls[data-cc-controls] {
  float: right;
  position: relative;
  display: none; }
  .cc-controls[data-cc-controls].available {
    display: block; }
  .cc-controls[data-cc-controls] .cc-button {
    padding: 6px !important; }
    .cc-controls[data-cc-controls] .cc-button.enabled {
      display: block;
      opacity: 1.0; }
      .cc-controls[data-cc-controls] .cc-button.enabled:hover {
        opacity: 1.0;
        text-shadow: none; }
  .cc-controls[data-cc-controls] > ul {
    list-style-type: none;
    position: absolute;
    bottom: 25px;
    border: 1px solid black;
    display: none;
    background-color: #e6e6e6; }
  .cc-controls[data-cc-controls] li {
    font-size: 10px; }
    .cc-controls[data-cc-controls] li[data-title] {
      background-color: #c3c2c2;
      padding: 5px; }
    .cc-controls[data-cc-controls] li a {
      color: #444;
      padding: 2px 10px;
      display: block;
      text-decoration: none; }
      .cc-controls[data-cc-controls] li a:hover {
        background-color: #555;
        color: white; }
        .cc-controls[data-cc-controls] li a:hover a {
          color: white;
          text-decoration: none; }
    .cc-controls[data-cc-controls] li.current a {
      color: #f00; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/dvr_controls/public/dvr_controls.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.dvr-controls[data-dvr-controls] {
  display: inline-block;
  float: left;
  color: #fff;
  line-height: 32px;
  font-size: 10px;
  font-weight: bold;
  margin-left: 6px; }
  .dvr-controls[data-dvr-controls] .live-info {
    cursor: default;
    font-family: "Roboto", "Open Sans", Arial, sans-serif;
    text-transform: uppercase; }
    .dvr-controls[data-dvr-controls] .live-info:before {
      content: "";
      display: inline-block;
      position: relative;
      width: 7px;
      height: 7px;
      border-radius: 3.5px;
      margin-right: 3.5px;
      background-color: #ff0101; }
    .dvr-controls[data-dvr-controls] .live-info.disabled {
      opacity: 0.3; }
      .dvr-controls[data-dvr-controls] .live-info.disabled:before {
        background-color: #fff; }
  .dvr-controls[data-dvr-controls] .live-button {
    cursor: pointer;
    outline: none;
    display: none;
    border: 0;
    color: #fff;
    background-color: transparent;
    height: 32px;
    padding: 0;
    opacity: 0.7;
    font-family: "Roboto", "Open Sans", Arial, sans-serif;
    text-transform: uppercase;
    transition: all 0.1s ease; }
    .dvr-controls[data-dvr-controls] .live-button:before {
      content: "";
      display: inline-block;
      position: relative;
      width: 7px;
      height: 7px;
      border-radius: 3.5px;
      margin-right: 3.5px;
      background-color: #fff; }
    .dvr-controls[data-dvr-controls] .live-button:hover {
      opacity: 1;
      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }

.dvr .dvr-controls[data-dvr-controls] .live-info {
  display: none; }

.dvr .dvr-controls[data-dvr-controls] .live-button {
  display: block; }

.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
  background-color: #005aff; }

.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
  background-color: #ff0101; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/error_screen/public/error_screen.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`div.player-error-screen {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: #CCCACA;
  position: absolute;
  top: 0;
  height: 100%;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 2000;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center; }
  div.player-error-screen__content[data-error-screen] {
    font-size: 14px;
    color: #CCCACA;
    margin-top: 45px; }
  div.player-error-screen__title[data-error-screen] {
    font-weight: bold;
    line-height: 30px;
    font-size: 18px; }
  div.player-error-screen__message[data-error-screen] {
    width: 90%;
    margin: 0 auto; }
  div.player-error-screen__code[data-error-screen] {
    font-size: 13px;
    margin-top: 15px; }
  div.player-error-screen__reload {
    cursor: pointer;
    width: 30px;
    margin: 15px auto 0; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/media_control/public/media-control.scss":function(B,T,t){var o=t("./node_modules/css-loader/lib/url/escape.js");T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.media-control-notransition {
  transition: none !important; }

.media-control[data-media-control] {
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 9999;
  pointer-events: none; }
  .media-control[data-media-control].dragging {
    pointer-events: auto;
    cursor: -webkit-grabbing !important;
    cursor: grabbing !important;
    cursor: url(`+o(t("./src/plugins/media_control/public/closed-hand.cur"))+`), move; }
    .media-control[data-media-control].dragging * {
      cursor: -webkit-grabbing !important;
      cursor: grabbing !important;
      cursor: url(`+o(t("./src/plugins/media_control/public/closed-hand.cur"))+`), move; }
  .media-control[data-media-control] .media-control-background[data-background] {
    position: absolute;
    height: 40%;
    width: 100%;
    bottom: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
    transition: opacity 0.6s ease-out; }
  .media-control[data-media-control] .media-control-icon {
    line-height: 0;
    letter-spacing: 0;
    speak: none;
    color: #fff;
    opacity: 0.5;
    vertical-align: middle;
    text-align: left;
    transition: all 0.1s ease; }
  .media-control[data-media-control] .media-control-icon:hover {
    color: white;
    opacity: 0.75;
    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }
  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {
    opacity: 0; }
  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {
    bottom: -50px; }
    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {
      opacity: 0; }
  .media-control[data-media-control] .media-control-layer[data-controls] {
    position: absolute;
    bottom: 7px;
    width: 100%;
    height: 32px;
    font-size: 0;
    vertical-align: middle;
    pointer-events: auto;
    transition: bottom 0.4s ease-out; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {
      position: absolute;
      top: 0;
      left: 4px;
      height: 100%; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {
      height: 100%;
      text-align: center;
      line-height: 32px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {
      position: absolute;
      top: 0;
      right: 4px;
      height: 100%; }
    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {
      background-color: transparent;
      border: 0;
      margin: 0 6px;
      padding: 0;
      cursor: pointer;
      display: inline-block;
      width: 32px;
      height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {
        width: 100%;
        height: 22px; }
        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {
          fill: white; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {
        outline: none; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {
        float: left;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {
        float: right;
        background-color: transparent;
        border: 0;
        height: 100%; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {
        background-color: transparent;
        border: 0;
        cursor: default;
        display: none;
        float: right;
        height: 100%; }
        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {
          display: block;
          opacity: 1.0; }
          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {
            opacity: 1.0;
            text-shadow: none; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {
        float: left; }
      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {
        float: left; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {
      display: inline-block;
      font-size: 10px;
      color: white;
      cursor: default;
      line-height: 32px;
      position: relative; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {
      margin: 0 6px 0 7px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {
      color: rgba(255, 255, 255, 0.5);
      margin-right: 6px; }
      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {
        content: "|";
        margin-right: 7px; }
    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {
      position: absolute;
      top: -20px;
      left: 0;
      display: inline-block;
      vertical-align: middle;
      width: 100%;
      height: 25px;
      cursor: pointer; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {
        width: 100%;
        height: 1px;
        position: relative;
        top: 12px;
        background-color: #666666; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {
          position: absolute;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          background-color: #c2c2c2;
          transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {
          position: absolute;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          background-color: #005aff;
          transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {
          opacity: 0;
          position: absolute;
          top: -3px;
          width: 5px;
          height: 7px;
          background-color: rgba(255, 255, 255, 0.5);
          transition: opacity 0.1s ease; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {
        opacity: 1; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {
        cursor: default; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {
          opacity: 0; }
      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {
        position: absolute;
        -webkit-transform: translateX(-50%);
                transform: translateX(-50%);
        top: 2px;
        left: 0;
        width: 20px;
        height: 20px;
        opacity: 1;
        transition: all 0.1s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {
          position: absolute;
          left: 6px;
          top: 6px;
          width: 8px;
          height: 8px;
          border-radius: 10px;
          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);
          background-color: white; }
    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {
      float: right;
      display: inline-block;
      height: 32px;
      cursor: pointer;
      margin: 0 6px;
      box-sizing: border-box; }
      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {
        float: left;
        bottom: 0; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {
          background-color: transparent;
          border: 0;
          box-sizing: content-box;
          width: 32px;
          height: 32px;
          opacity: 0.5; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {
            opacity: 0.75; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {
            height: 24px;
            position: relative;
            top: 3px; }
            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {
              fill: white; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {
            margin-left: 2px; }
      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {
        float: left;
        position: relative;
        overflow: hidden;
        top: 6px;
        width: 42px;
        height: 18px;
        padding: 3px 0;
        transition: width .2s ease-out; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {
          height: 1px;
          position: relative;
          top: 7px;
          margin: 0 3px;
          background-color: #666666; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #c2c2c2;
            transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #005aff;
            transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {
            opacity: 0;
            position: absolute;
            top: -3px;
            width: 5px;
            height: 7px;
            background-color: rgba(255, 255, 255, 0.5);
            transition: opacity 0.1s ease; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {
          position: absolute;
          -webkit-transform: translateX(-50%);
                  transform: translateX(-50%);
          top: 0px;
          left: 0;
          width: 20px;
          height: 20px;
          opacity: 1;
          transition: all 0.1s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {
            position: absolute;
            left: 6px;
            top: 6px;
            width: 8px;
            height: 8px;
            border-radius: 10px;
            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);
            background-color: white; }
        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {
          float: left;
          width: 4px;
          padding-left: 2px;
          height: 12px;
          opacity: 0.5;
          box-shadow: inset 2px 0 0 white;
          transition: -webkit-transform .2s ease-out;
          transition: transform .2s ease-out;
          transition: transform .2s ease-out, -webkit-transform .2s ease-out; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {
            box-shadow: inset 2px 0 0 #fff;
            opacity: 1; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {
            padding-left: 0; }
          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {
            -webkit-transform: scaleY(1.5);
                    transform: scaleY(1.5); }
  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {
    width: 0;
    height: 12px;
    top: 9px;
    padding: 0; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/poster/public/poster.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.player-poster[data-poster] {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  position: absolute;
  height: 100%;
  width: 100%;
  z-index: 998;
  top: 0;
  left: 0;
  background-color: #000;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: 50% 50%; }
  .player-poster[data-poster].clickable {
    cursor: pointer; }
  .player-poster[data-poster]:hover .play-wrapper[data-poster] {
    opacity: 1; }
  .player-poster[data-poster] .play-wrapper[data-poster] {
    width: 100%;
    height: 25%;
    margin: 0 auto;
    opacity: 0.75;
    transition: opacity 0.1s ease; }
    .player-poster[data-poster] .play-wrapper[data-poster] svg {
      height: 100%; }
      .player-poster[data-poster] .play-wrapper[data-poster] svg path {
        fill: #fff; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/seek_time/public/seek_time.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.seek-time[data-seek-time] {
  position: absolute;
  white-space: nowrap;
  height: 20px;
  line-height: 20px;
  font-size: 0;
  left: -100%;
  bottom: 55px;
  background-color: rgba(2, 2, 2, 0.5);
  z-index: 9999;
  transition: opacity 0.1s ease; }
  .seek-time[data-seek-time].hidden[data-seek-time] {
    opacity: 0; }
  .seek-time[data-seek-time] [data-seek-time] {
    display: inline-block;
    color: white;
    font-size: 10px;
    padding-left: 7px;
    padding-right: 7px;
    vertical-align: top; }
  .seek-time[data-seek-time] [data-duration] {
    display: inline-block;
    color: rgba(255, 255, 255, 0.5);
    font-size: 10px;
    padding-right: 7px;
    vertical-align: top; }
    .seek-time[data-seek-time] [data-duration]:before {
      content: "|";
      margin-right: 7px; }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/spinner_three_bounce/public/spinner.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.spinner-three-bounce[data-spinner] {
  position: absolute;
  margin: 0 auto;
  width: 70px;
  text-align: center;
  z-index: 999;
  left: 0;
  right: 0;
  margin-left: auto;
  margin-right: auto;
  /* center vertically */
  top: 50%;
  -webkit-transform: translateY(-50%);
          transform: translateY(-50%); }
  .spinner-three-bounce[data-spinner] > div {
    width: 18px;
    height: 18px;
    background-color: #FFFFFF;
    border-radius: 100%;
    display: inline-block;
    -webkit-animation: bouncedelay 1.4s infinite ease-in-out;
            animation: bouncedelay 1.4s infinite ease-in-out;
    /* Prevent first frame from flickering when animation starts */
    -webkit-animation-fill-mode: both;
            animation-fill-mode: both; }
  .spinner-three-bounce[data-spinner] [data-bounce1] {
    -webkit-animation-delay: -0.32s;
            animation-delay: -0.32s; }
  .spinner-three-bounce[data-spinner] [data-bounce2] {
    -webkit-animation-delay: -0.16s;
            animation-delay: -0.16s; }

@-webkit-keyframes bouncedelay {
  0%, 80%, 100% {
    -webkit-transform: scale(0);
            transform: scale(0); }
  40% {
    -webkit-transform: scale(1);
            transform: scale(1); } }

@keyframes bouncedelay {
  0%, 80%, 100% {
    -webkit-transform: scale(0);
            transform: scale(0); }
  40% {
    -webkit-transform: scale(1);
            transform: scale(1); } }
`,""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/watermark/public/watermark.scss":function(B,T,t){T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`.clappr-watermark[data-watermark] {
  position: absolute;
  min-width: 70px;
  max-width: 200px;
  width: 12%;
  text-align: center;
  z-index: 10; }

.clappr-watermark[data-watermark] a {
  outline: none;
  cursor: pointer; }

.clappr-watermark[data-watermark] img {
  max-width: 100%; }

.clappr-watermark[data-watermark-bottom-left] {
  bottom: 10px;
  left: 10px; }

.clappr-watermark[data-watermark-bottom-right] {
  bottom: 10px;
  right: 42px; }

.clappr-watermark[data-watermark-top-left] {
  top: 10px;
  left: 10px; }

.clappr-watermark[data-watermark-top-right] {
  top: 10px;
  right: 37px; }
`,""])},"./node_modules/css-loader/lib/css-base.js":function(B,T){B.exports=function(x){var f=[];return f.toString=function(){return this.map(function(w){var p=t(w,x);return w[2]?"@media "+w[2]+"{"+p+"}":p}).join("")},f.i=function(h,w){typeof h=="string"&&(h=[[null,h,""]]);for(var p={},y=0;y<this.length;y++){var c=this[y][0];typeof c=="number"&&(p[c]=!0)}for(y=0;y<h.length;y++){var d=h[y];(typeof d[0]!="number"||!p[d[0]])&&(w&&!d[2]?d[2]=w:w&&(d[2]="("+d[2]+") and ("+w+")"),f.push(d))}},f};function t(x,f){var h=x[1]||"",w=x[3];if(!w)return h;if(f&&typeof btoa=="function"){var p=o(w),y=w.sources.map(function(c){return"/*# sourceURL="+w.sourceRoot+c+" */"});return[h].concat(y).concat([p]).join(`
`)}return[h].join(`
`)}function o(x){var f=btoa(unescape(encodeURIComponent(JSON.stringify(x)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,"+f;return"/*# "+h+" */"}},"./node_modules/css-loader/lib/url/escape.js":function(B,T){B.exports=function(o){return typeof o!="string"?o:(/^['"].*['"]$/.test(o)&&(o=o.slice(1,-1)),/["'() \t\n]/.test(o)?'"'+o.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':o)}},"./node_modules/hls.js/dist/hls.js":function(B,T,t){typeof window<"u"&&function(x,f){B.exports=f()}(this,function(){return function(o){var x={};function f(h){if(x[h])return x[h].exports;var w=x[h]={i:h,l:!1,exports:{}};return o[h].call(w.exports,w,w.exports,f),w.l=!0,w.exports}return f.m=o,f.c=x,f.d=function(h,w,p){f.o(h,w)||Object.defineProperty(h,w,{enumerable:!0,get:p})},f.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},f.t=function(h,w){if(w&1&&(h=f(h)),w&8||w&4&&typeof h=="object"&&h&&h.__esModule)return h;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:h}),w&2&&typeof h!="string")for(var y in h)f.d(p,y,(function(c){return h[c]}).bind(null,y));return p},f.n=function(h){var w=h&&h.__esModule?function(){return h.default}:function(){return h};return f.d(w,"a",w),w},f.o=function(h,w){return Object.prototype.hasOwnProperty.call(h,w)},f.p="/dist/",f(f.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(o,x,f){var h=Object.prototype.hasOwnProperty,w="~";function p(){}Object.create&&(p.prototype=Object.create(null),new p().__proto__||(w=!1));function y(b,u,g){this.fn=b,this.context=u,this.once=g||!1}function c(b,u,g,s,l){if(typeof g!="function")throw new TypeError("The listener must be a function");var S=new y(g,s||b,l),E=w?w+u:u;return b._events[E]?b._events[E].fn?b._events[E]=[b._events[E],S]:b._events[E].push(S):(b._events[E]=S,b._eventsCount++),b}function d(b,u){--b._eventsCount===0?b._events=new p:delete b._events[u]}function C(){this._events=new p,this._eventsCount=0}C.prototype.eventNames=function(){var u=[],g,s;if(this._eventsCount===0)return u;for(s in g=this._events)h.call(g,s)&&u.push(w?s.slice(1):s);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(g)):u},C.prototype.listeners=function(u){var g=w?w+u:u,s=this._events[g];if(!s)return[];if(s.fn)return[s.fn];for(var l=0,S=s.length,E=new Array(S);l<S;l++)E[l]=s[l].fn;return E},C.prototype.listenerCount=function(u){var g=w?w+u:u,s=this._events[g];return s?s.fn?1:s.length:0},C.prototype.emit=function(u,g,s,l,S,E){var O=w?w+u:u;if(!this._events[O])return!1;var P=this._events[O],A=arguments.length,D,M;if(P.fn){switch(P.once&&this.removeListener(u,P.fn,void 0,!0),A){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,g),!0;case 3:return P.fn.call(P.context,g,s),!0;case 4:return P.fn.call(P.context,g,s,l),!0;case 5:return P.fn.call(P.context,g,s,l,S),!0;case 6:return P.fn.call(P.context,g,s,l,S,E),!0}for(M=1,D=new Array(A-1);M<A;M++)D[M-1]=arguments[M];P.fn.apply(P.context,D)}else{var L=P.length,V;for(M=0;M<L;M++)switch(P[M].once&&this.removeListener(u,P[M].fn,void 0,!0),A){case 1:P[M].fn.call(P[M].context);break;case 2:P[M].fn.call(P[M].context,g);break;case 3:P[M].fn.call(P[M].context,g,s);break;case 4:P[M].fn.call(P[M].context,g,s,l);break;default:if(!D)for(V=1,D=new Array(A-1);V<A;V++)D[V-1]=arguments[V];P[M].fn.apply(P[M].context,D)}}return!0},C.prototype.on=function(u,g,s){return c(this,u,g,s,!1)},C.prototype.once=function(u,g,s){return c(this,u,g,s,!0)},C.prototype.removeListener=function(u,g,s,l){var S=w?w+u:u;if(!this._events[S])return this;if(!g)return d(this,S),this;var E=this._events[S];if(E.fn)E.fn===g&&(!l||E.once)&&(!s||E.context===s)&&d(this,S);else{for(var O=0,P=[],A=E.length;O<A;O++)(E[O].fn!==g||l&&!E[O].once||s&&E[O].context!==s)&&P.push(E[O]);P.length?this._events[S]=P.length===1?P[0]:P:d(this,S)}return this},C.prototype.removeAllListeners=function(u){var g;return u?(g=w?w+u:u,this._events[g]&&d(this,g)):(this._events=new p,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=w,C.EventEmitter=C,o.exports=C},"./node_modules/url-toolkit/src/url-toolkit.js":function(o,x,f){(function(h){var w=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,p=/^([^\/?#]*)(.*)$/,y=/(?:\/|^)\.(?=\/)/g,c=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(C,b,u){if(u=u||{},C=C.trim(),b=b.trim(),!b){if(!u.alwaysNormalize)return C;var g=d.parseURL(C);if(!g)throw new Error("Error trying to parse base URL.");return g.path=d.normalizePath(g.path),d.buildURLFromParts(g)}var s=d.parseURL(b);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return u.alwaysNormalize?(s.path=d.normalizePath(s.path),d.buildURLFromParts(s)):b;var l=d.parseURL(C);if(!l)throw new Error("Error trying to parse base URL.");if(!l.netLoc&&l.path&&l.path[0]!=="/"){var S=p.exec(l.path);l.netLoc=S[1],l.path=S[2]}l.netLoc&&!l.path&&(l.path="/");var E={scheme:l.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(E.netLoc=l.netLoc,s.path[0]!=="/"))if(!s.path)E.path=l.path,s.params||(E.params=l.params,s.query||(E.query=l.query));else{var O=l.path,P=O.substring(0,O.lastIndexOf("/")+1)+s.path;E.path=d.normalizePath(P)}return E.path===null&&(E.path=u.alwaysNormalize?d.normalizePath(s.path):s.path),d.buildURLFromParts(E)},parseURL:function(C){var b=w.exec(C);return b?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(C){for(C=C.split("").reverse().join("").replace(y,"");C.length!==(C=C.replace(c,"")).length;);return C.split("").reverse().join("")},buildURLFromParts:function(C){return C.scheme+C.netLoc+C.path+C.params+C.query+C.fragment}};o.exports=d})()},"./node_modules/webworkify-webpack/index.js":function(o,x,f){function h(u){var g={};function s(S){if(g[S])return g[S].exports;var E=g[S]={i:S,l:!1,exports:{}};return u[S].call(E.exports,E,E.exports,s),E.l=!0,E.exports}s.m=u,s.c=g,s.i=function(S){return S},s.d=function(S,E,O){s.o(S,E)||Object.defineProperty(S,E,{configurable:!1,enumerable:!0,get:O})},s.r=function(S){Object.defineProperty(S,"__esModule",{value:!0})},s.n=function(S){var E=S&&S.__esModule?function(){return S.default}:function(){return S};return s.d(E,"a",E),E},s.o=function(S,E){return Object.prototype.hasOwnProperty.call(S,E)},s.p="/",s.oe=function(S){throw console.error(S),S};var l=s(s.s=ENTRY_MODULE);return l.default||l}var w="[\\.|\\-|\\+|\\w|/|@]+",p="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+w+").*?\\)";function y(u){return(u+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function c(u){return!isNaN(1*u)}function d(u,g,s){var l={};l[s]=[];var S=g.toString(),E=S.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!E)return l;for(var O=E[1],P=new RegExp("(\\\\n|\\W)"+y(O)+p,"g"),A;A=P.exec(S);)A[3]!=="dll-reference"&&l[s].push(A[3]);for(P=new RegExp("\\("+y(O)+'\\("(dll-reference\\s('+w+'))"\\)\\)'+p,"g");A=P.exec(S);)u[A[2]]||(l[s].push(A[1]),u[A[2]]=f(A[1]).m),l[A[2]]=l[A[2]]||[],l[A[2]].push(A[4]);for(var D=Object.keys(l),M=0;M<D.length;M++)for(var L=0;L<l[D[M]].length;L++)c(l[D[M]][L])&&(l[D[M]][L]=1*l[D[M]][L]);return l}function C(u){var g=Object.keys(u);return g.reduce(function(s,l){return s||u[l].length>0},!1)}function b(u,g){for(var s={main:[g]},l={main:[]},S={main:{}};C(s);)for(var E=Object.keys(s),O=0;O<E.length;O++){var P=E[O],A=s[P],D=A.pop();if(S[P]=S[P]||{},!(S[P][D]||!u[P][D])){S[P][D]=!0,l[P]=l[P]||[],l[P].push(D);for(var M=d(u,u[P][D],P),L=Object.keys(M),V=0;V<L.length;V++)s[L[V]]=s[L[V]]||[],s[L[V]]=s[L[V]].concat(M[L[V]])}}return l}o.exports=function(u,g){g=g||{};var s={main:f.m},l=g.all?{main:Object.keys(s.main)}:b(s,u),S="";Object.keys(l).filter(function(D){return D!=="main"}).forEach(function(D){for(var M=0;l[D][M];)M++;l[D].push(M),s[D][M]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",S=S+"var "+D+" = ("+h.toString().replace("ENTRY_MODULE",JSON.stringify(M))+")({"+l[D].map(function(L){return""+JSON.stringify(L)+": "+s[D][L].toString()}).join(",")+`});
`}),S=S+"new (("+h.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+l.main.map(function(D){return""+JSON.stringify(D)+": "+s.main[D].toString()}).join(",")+"}))(self);";var E=new window.Blob([S],{type:"text/javascript"});if(g.bare)return E;var O=window.URL||window.webkitURL||window.mozURL||window.msURL,P=O.createObjectURL(E),A=new window.Worker(P);return A.objectURL=P,A}},"./src/crypt/decrypter.js":function(o,x,f){f.r(x);var h=function(){function S(O,P){this.subtle=O,this.aesIV=P}var E=S.prototype;return E.decrypt=function(P,A){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},A,P)},S}(),w=function(){function S(O,P){this.subtle=O,this.key=P}var E=S.prototype;return E.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},S}(),p=w;function y(S){var E=S.byteLength,O=E&&new DataView(S).getUint8(E-1);return O?S.slice(0,E-O):S}var c=function(){function S(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var E=S.prototype;return E.uint8ArrayToUint32Array_=function(P){for(var A=new DataView(P),D=new Uint32Array(4),M=0;M<4;M++)D[M]=A.getUint32(M*4);return D},E.initTable=function(){var P=this.sBox,A=this.invSBox,D=this.subMix,M=D[0],L=D[1],V=D[2],j=D[3],N=this.invSubMix,G=N[0],K=N[1],k=N[2],J=N[3],se=new Uint32Array(256),te=0,oe=0,re=0;for(re=0;re<256;re++)re<128?se[re]=re<<1:se[re]=re<<1^283;for(re=0;re<256;re++){var ee=oe^oe<<1^oe<<2^oe<<3^oe<<4;ee=ee>>>8^ee&255^99,P[te]=ee,A[ee]=te;var Z=se[te],ge=se[Z],Te=se[ge],we=se[ee]*257^ee*16843008;M[te]=we<<24|we>>>8,L[te]=we<<16|we>>>16,V[te]=we<<8|we>>>24,j[te]=we,we=Te*16843009^ge*65537^Z*257^te*16843008,G[ee]=we<<24|we>>>8,K[ee]=we<<16|we>>>16,k[ee]=we<<8|we>>>24,J[ee]=we,te?(te=Z^se[se[se[Te^Z]]],oe^=se[se[oe]]):te=oe=1}},E.expandKey=function(P){for(var A=this.uint8ArrayToUint32Array_(P),D=!0,M=0;M<A.length&&D;)D=A[M]===this.key[M],M++;if(!D){this.key=A;var L=this.keySize=A.length;if(L!==4&&L!==6&&L!==8)throw new Error("Invalid aes key size="+L);var V=this.ksRows=(L+6+1)*4,j,N,G=this.keySchedule=new Uint32Array(V),K=this.invKeySchedule=new Uint32Array(V),k=this.sBox,J=this.rcon,se=this.invSubMix,te=se[0],oe=se[1],re=se[2],ee=se[3],Z,ge;for(j=0;j<V;j++){if(j<L){Z=G[j]=A[j];continue}ge=Z,j%L===0?(ge=ge<<8|ge>>>24,ge=k[ge>>>24]<<24|k[ge>>>16&255]<<16|k[ge>>>8&255]<<8|k[ge&255],ge^=J[j/L|0]<<24):L>6&&j%L===4&&(ge=k[ge>>>24]<<24|k[ge>>>16&255]<<16|k[ge>>>8&255]<<8|k[ge&255]),G[j]=Z=(G[j-L]^ge)>>>0}for(N=0;N<V;N++)j=V-N,N&3?ge=G[j]:ge=G[j-4],N<4||j<=4?K[N]=ge:K[N]=te[k[ge>>>24]]^oe[k[ge>>>16&255]]^re[k[ge>>>8&255]]^ee[k[ge&255]],K[N]=K[N]>>>0}},E.networkToHostOrderSwap=function(P){return P<<24|(P&65280)<<8|(P&16711680)>>8|P>>>24},E.decrypt=function(P,A,D,M){for(var L=this.keySize+6,V=this.invKeySchedule,j=this.invSBox,N=this.invSubMix,G=N[0],K=N[1],k=N[2],J=N[3],se=this.uint8ArrayToUint32Array_(D),te=se[0],oe=se[1],re=se[2],ee=se[3],Z=new Int32Array(P),ge=new Int32Array(Z.length),Te,we,Le,Ce,be,Ge,Ke,je,Ze,Be,Oe,ze,We,gt,at=this.networkToHostOrderSwap;A<Z.length;){for(Ze=at(Z[A]),Be=at(Z[A+1]),Oe=at(Z[A+2]),ze=at(Z[A+3]),be=Ze^V[0],Ge=ze^V[1],Ke=Oe^V[2],je=Be^V[3],We=4,gt=1;gt<L;gt++)Te=G[be>>>24]^K[Ge>>16&255]^k[Ke>>8&255]^J[je&255]^V[We],we=G[Ge>>>24]^K[Ke>>16&255]^k[je>>8&255]^J[be&255]^V[We+1],Le=G[Ke>>>24]^K[je>>16&255]^k[be>>8&255]^J[Ge&255]^V[We+2],Ce=G[je>>>24]^K[be>>16&255]^k[Ge>>8&255]^J[Ke&255]^V[We+3],be=Te,Ge=we,Ke=Le,je=Ce,We=We+4;Te=j[be>>>24]<<24^j[Ge>>16&255]<<16^j[Ke>>8&255]<<8^j[je&255]^V[We],we=j[Ge>>>24]<<24^j[Ke>>16&255]<<16^j[je>>8&255]<<8^j[be&255]^V[We+1],Le=j[Ke>>>24]<<24^j[je>>16&255]<<16^j[be>>8&255]<<8^j[Ge&255]^V[We+2],Ce=j[je>>>24]<<24^j[be>>16&255]<<16^j[Ge>>8&255]<<8^j[Ke&255]^V[We+3],We=We+3,ge[A]=at(Te^te),ge[A+1]=at(Ce^oe),ge[A+2]=at(Le^re),ge[A+3]=at(we^ee),te=Ze,oe=Be,re=Oe,ee=ze,A=A+4}return M?y(ge.buffer):ge.buffer},E.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},S}(),d=c,C=f("./src/errors.ts"),b=f("./src/utils/logger.js"),u=f("./src/events.js"),g=f("./src/utils/get-self-scope.js"),s=Object(g.getSelfScope)(),l=function(){function S(O,P,A){var D=A===void 0?{}:A,M=D.removePKCS7Padding,L=M===void 0?!0:M;if(this.logEnabled=!0,this.observer=O,this.config=P,this.removePKCS7Padding=L,L)try{var V=s.crypto;V&&(this.subtle=V.subtle||V.webkitSubtle)}catch{}this.disableWebCrypto=!this.subtle}var E=S.prototype;return E.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},E.decrypt=function(P,A,D,M){var L=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(b.logger.log("JS AES decrypt"),this.logEnabled=!1);var V=this.decryptor;V||(this.decryptor=V=new d),V.expandKey(A),M(V.decrypt(P,0,D,this.removePKCS7Padding))}else{this.logEnabled&&(b.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var j=this.subtle;this.key!==A&&(this.key=A,this.fastAesKey=new p(j,A)),this.fastAesKey.expandKey().then(function(N){var G=new h(j,D);G.decrypt(P,N).catch(function(K){L.onWebCryptoError(K,P,A,D,M)}).then(function(K){M(K)})}).catch(function(N){L.onWebCryptoError(N,P,A,D,M)})}},E.onWebCryptoError=function(P,A,D,M,L){this.config.enableSoftwareAES?(b.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(A,D,M,L)):(b.logger.error("decrypting error : "+P.message),this.observer.trigger(u.default.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:P.message}))},E.destroy=function(){var P=this.decryptor;P&&(P.destroy(),this.decryptor=void 0)},S}();x.default=l},"./src/demux/demuxer-inline.js":function(o,x,f){f.r(x);var h=f("./src/events.js"),w=f("./src/errors.ts"),p=f("./src/crypt/decrypter.js"),y=f("./src/polyfills/number-isFinite.js"),c=f("./src/utils/logger.js"),d=f("./src/utils/get-self-scope.js");function C(_e,Me,H,m){var F,X,le,ve,Se,ye=navigator.userAgent.toLowerCase(),Re=m,Ie=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(F=((Me[H+2]&192)>>>6)+1,X=(Me[H+2]&60)>>>2,X>Ie.length-1){_e.trigger(h.default.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+X});return}return ve=(Me[H+2]&1)<<2,ve|=(Me[H+3]&192)>>>6,c.logger.log("manifest codec:"+m+",ADTS data:type:"+F+",sampleingIndex:"+X+"["+Ie[X]+"Hz],channelConfig:"+ve),/firefox/i.test(ye)?X>=6?(F=5,Se=new Array(4),le=X-3):(F=2,Se=new Array(2),le=X):ye.indexOf("android")!==-1?(F=2,Se=new Array(2),le=X):(F=5,Se=new Array(4),m&&(m.indexOf("mp4a.40.29")!==-1||m.indexOf("mp4a.40.5")!==-1)||!m&&X>=6?le=X-3:((m&&m.indexOf("mp4a.40.2")!==-1&&(X>=6&&ve===1||/vivaldi/i.test(ye))||!m&&ve===1)&&(F=2,Se=new Array(2)),le=X)),Se[0]=F<<3,Se[0]|=(X&14)>>1,Se[1]|=(X&1)<<7,Se[1]|=ve<<3,F===5&&(Se[1]|=(le&14)>>1,Se[2]=(le&1)<<7,Se[2]|=8,Se[3]=0),{config:Se,samplerate:Ie[X],channelCount:ve,codec:"mp4a.40."+F,manifestCodec:Re}}function b(_e,Me){return _e[Me]===255&&(_e[Me+1]&246)===240}function u(_e,Me){return _e[Me+1]&1?7:9}function g(_e,Me){return(_e[Me+3]&3)<<11|_e[Me+4]<<3|(_e[Me+5]&224)>>>5}function s(_e,Me){return!!(Me+1<_e.length&&b(_e,Me))}function l(_e,Me){if(s(_e,Me)){var H=u(_e,Me),m=H;Me+5<_e.length&&(m=g(_e,Me));var F=Me+m;if(F===_e.length||F+1<_e.length&&b(_e,F))return!0}return!1}function S(_e,Me,H,m,F){if(!_e.samplerate){var X=C(Me,H,m,F);_e.config=X.config,_e.samplerate=X.samplerate,_e.channelCount=X.channelCount,_e.codec=X.codec,_e.manifestCodec=X.manifestCodec,c.logger.log("parsed codec:"+_e.codec+",rate:"+X.samplerate+",nb channel:"+X.channelCount)}}function E(_e){return 1024*9e4/_e}function O(_e,Me,H,m,F){var X,le,ve,Se=_e.length;if(X=u(_e,Me),le=g(_e,Me),le-=X,le>0&&Me+X+le<=Se)return ve=H+m*F,{headerLength:X,frameLength:le,stamp:ve}}function P(_e,Me,H,m,F){var X=E(_e.samplerate),le=O(Me,H,m,F,X);if(le){var ve=le.stamp,Se=le.headerLength,ye=le.frameLength,Re={unit:Me.subarray(H+Se,H+Se+ye),pts:ve,dts:ve};return _e.samples.push(Re),{sample:Re,length:ye+Se}}}var A=f("./src/demux/id3.js"),D=function(){function _e(H,m,F){this.observer=H,this.config=F,this.remuxer=m}var Me=_e.prototype;return Me.resetInitSegment=function(m,F,X,le){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:F,duration:le,inputTimeScale:9e4}},Me.resetTimeStamp=function(){},_e.probe=function(m){if(!m)return!1;for(var F=A.default.getID3Data(m,0)||[],X=F.length,le=m.length;X<le;X++)if(l(m,X))return c.logger.log("ADTS sync word found !"),!0;return!1},Me.append=function(m,F,X,le){for(var ve=this._audioTrack,Se=A.default.getID3Data(m,0)||[],ye=A.default.getTimeStamp(Se),Re=Object(y.isFiniteNumber)(ye)?ye*90:F*9e4,Ie=0,ke=Re,$e=m.length,qe=Se.length,lt=[{pts:ke,dts:ke,data:Se}];qe<$e-1;)if(s(m,qe)&&qe+5<$e){S(ve,this.observer,m,qe,ve.manifestCodec);var nt=P(ve,m,qe,Re,Ie);if(nt)qe+=nt.length,ke=nt.sample.pts,Ie++;else{c.logger.log("Unable to parse AAC frame");break}}else A.default.isHeader(m,qe)?(Se=A.default.getID3Data(m,qe),lt.push({pts:ke,dts:ke,data:Se}),qe+=Se.length):qe++;this.remuxer.remux(ve,{samples:[]},{samples:lt,inputTimeScale:9e4},{samples:[]},F,X,le)},Me.destroy=function(){},_e}(),M=D,L=f("./src/demux/mp4demuxer.js"),V={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(Me,H,m,F,X){if(!(m+24>H.length)){var le=this.parseHeader(H,m);if(le&&m+le.frameLength<=H.length){var ve=le.samplesPerFrame*9e4/le.sampleRate,Se=F+X*ve,ye={unit:H.subarray(m,m+le.frameLength),pts:Se,dts:Se};return Me.config=[],Me.channelCount=le.channelCount,Me.samplerate=le.sampleRate,Me.samples.push(ye),{sample:ye,length:le.frameLength}}}},parseHeader:function(Me,H){var m=Me[H+1]>>3&3,F=Me[H+1]>>1&3,X=Me[H+2]>>4&15,le=Me[H+2]>>2&3,ve=Me[H+2]>>1&1;if(m!==1&&X!==0&&X!==15&&le!==3){var Se=m===3?3-F:F===3?3:4,ye=V.BitratesMap[Se*14+X-1]*1e3,Re=m===3?0:m===2?1:2,Ie=V.SamplingRateMap[Re*3+le],ke=Me[H+3]>>6===3?1:2,$e=V.SamplesCoefficients[m][F],qe=V.BytesInSlot[F],lt=$e*8*qe,nt=parseInt($e*ye/Ie+ve,10)*qe;return{sampleRate:Ie,channelCount:ke,frameLength:nt,samplesPerFrame:lt}}},isHeaderPattern:function(Me,H){return Me[H]===255&&(Me[H+1]&224)===224&&(Me[H+1]&6)!==0},isHeader:function(Me,H){return!!(H+1<Me.length&&this.isHeaderPattern(Me,H))},probe:function(Me,H){if(H+1<Me.length&&this.isHeaderPattern(Me,H)){var m=4,F=this.parseHeader(Me,H),X=m;F&&F.frameLength&&(X=F.frameLength);var le=H+X;if(le===Me.length||le+1<Me.length&&this.isHeaderPattern(Me,le))return!0}return!1}},j=V,N=function(){function _e(H){this.data=H,this.bytesAvailable=H.byteLength,this.word=0,this.bitsAvailable=0}var Me=_e.prototype;return Me.loadWord=function(){var m=this.data,F=this.bytesAvailable,X=m.byteLength-F,le=new Uint8Array(4),ve=Math.min(4,F);if(ve===0)throw new Error("no bytes available");le.set(m.subarray(X,X+ve)),this.word=new DataView(le.buffer).getUint32(0),this.bitsAvailable=ve*8,this.bytesAvailable-=ve},Me.skipBits=function(m){var F;this.bitsAvailable>m?(this.word<<=m,this.bitsAvailable-=m):(m-=this.bitsAvailable,F=m>>3,m-=F>>3,this.bytesAvailable-=F,this.loadWord(),this.word<<=m,this.bitsAvailable-=m)},Me.readBits=function(m){var F=Math.min(this.bitsAvailable,m),X=this.word>>>32-F;return m>32&&c.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=F,this.bitsAvailable>0?this.word<<=F:this.bytesAvailable>0&&this.loadWord(),F=m-F,F>0&&this.bitsAvailable?X<<F|this.readBits(F):X},Me.skipLZ=function(){var m;for(m=0;m<this.bitsAvailable;++m)if(this.word&2147483648>>>m)return this.word<<=m,this.bitsAvailable-=m,m;return this.loadWord(),m+this.skipLZ()},Me.skipUEG=function(){this.skipBits(1+this.skipLZ())},Me.skipEG=function(){this.skipBits(1+this.skipLZ())},Me.readUEG=function(){var m=this.skipLZ();return this.readBits(m+1)-1},Me.readEG=function(){var m=this.readUEG();return 1&m?1+m>>>1:-1*(m>>>1)},Me.readBoolean=function(){return this.readBits(1)===1},Me.readUByte=function(){return this.readBits(8)},Me.readUShort=function(){return this.readBits(16)},Me.readUInt=function(){return this.readBits(32)},Me.skipScalingList=function(m){var F=8,X=8,le,ve;for(le=0;le<m;le++)X!==0&&(ve=this.readEG(),X=(F+ve+256)%256),F=X===0?F:X},Me.readSPS=function(){var m=0,F=0,X=0,le=0,ve,Se,ye,Re,Ie,ke,$e,qe=this.readUByte.bind(this),lt=this.readBits.bind(this),nt=this.readUEG.bind(this),ft=this.readBoolean.bind(this),_t=this.skipBits.bind(this),Ct=this.skipEG.bind(this),Yt=this.skipUEG.bind(this),Gt=this.skipScalingList.bind(this);if(qe(),ve=qe(),lt(5),_t(3),qe(),Yt(),ve===100||ve===110||ve===122||ve===244||ve===44||ve===83||ve===86||ve===118||ve===128){var mt=nt();if(mt===3&&_t(1),Yt(),Yt(),_t(1),ft())for(ke=mt!==3?8:12,$e=0;$e<ke;$e++)ft()&&($e<6?Gt(16):Gt(64))}Yt();var jt=nt();if(jt===0)nt();else if(jt===1)for(_t(1),Ct(),Ct(),Se=nt(),$e=0;$e<Se;$e++)Ct();Yt(),_t(1),ye=nt(),Re=nt(),Ie=lt(1),Ie===0&&_t(1),_t(1),ft()&&(m=nt(),F=nt(),X=nt(),le=nt());var St=[1,1];if(ft()&&ft()){var Zt=qe();switch(Zt){case 1:St=[1,1];break;case 2:St=[12,11];break;case 3:St=[10,11];break;case 4:St=[16,11];break;case 5:St=[40,33];break;case 6:St=[24,11];break;case 7:St=[20,11];break;case 8:St=[32,11];break;case 9:St=[80,33];break;case 10:St=[18,11];break;case 11:St=[15,11];break;case 12:St=[64,33];break;case 13:St=[160,99];break;case 14:St=[4,3];break;case 15:St=[3,2];break;case 16:St=[2,1];break;case 255:{St=[qe()<<8|qe(),qe()<<8|qe()];break}}}return{width:Math.ceil((ye+1)*16-m*2-F*2),height:(2-Ie)*(Re+1)*16-(Ie?2:4)*(X+le),pixelRatio:St}},Me.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},_e}(),G=N,K=function(){function _e(H,m,F,X){this.decryptdata=F,this.discardEPB=X,this.decrypter=new p.default(H,m,{removePKCS7Padding:!1})}var Me=_e.prototype;return Me.decryptBuffer=function(m,F){this.decrypter.decrypt(m,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,F)},Me.decryptAacSample=function(m,F,X,le){var ve=m[F].unit,Se=ve.subarray(16,ve.length-ve.length%16),ye=Se.buffer.slice(Se.byteOffset,Se.byteOffset+Se.length),Re=this;this.decryptBuffer(ye,function(Ie){Ie=new Uint8Array(Ie),ve.set(Ie,16),le||Re.decryptAacSamples(m,F+1,X)})},Me.decryptAacSamples=function(m,F,X){for(;;F++){if(F>=m.length){X();return}if(!(m[F].unit.length<32)){var le=this.decrypter.isSync();if(this.decryptAacSample(m,F,X,le),!le)return}}},Me.getAvcEncryptedData=function(m){for(var F=Math.floor((m.length-48)/160)*16+16,X=new Int8Array(F),le=0,ve=32;ve<=m.length-16;ve+=160,le+=16)X.set(m.subarray(ve,ve+16),le);return X},Me.getAvcDecryptedUnit=function(m,F){F=new Uint8Array(F);for(var X=0,le=32;le<=m.length-16;le+=160,X+=16)m.set(F.subarray(X,X+16),le);return m},Me.decryptAvcSample=function(m,F,X,le,ve,Se){var ye=this.discardEPB(ve.data),Re=this.getAvcEncryptedData(ye),Ie=this;this.decryptBuffer(Re.buffer,function(ke){ve.data=Ie.getAvcDecryptedUnit(ye,ke),Se||Ie.decryptAvcSamples(m,F,X+1,le)})},Me.decryptAvcSamples=function(m,F,X,le){for(;;F++,X=0){if(F>=m.length){le();return}for(var ve=m[F].units;!(X>=ve.length);X++){var Se=ve[X];if(!(Se.length<=48||Se.type!==1&&Se.type!==5)){var ye=this.decrypter.isSync();if(this.decryptAvcSample(m,F,X,le,Se,ye),!ye)return}}}},_e}(),k=K,J={video:1,audio:2,id3:3,text:4},se=function(){function _e(H,m,F,X){this.observer=H,this.config=F,this.typeSupported=X,this.remuxer=m,this.sampleAes=null}var Me=_e.prototype;return Me.setDecryptData=function(m){m!=null&&m.key!=null&&m.method==="SAMPLE-AES"?this.sampleAes=new k(this.observer,this.config,m,this.discardEPB):this.sampleAes=null},_e.probe=function(m){var F=_e._syncOffset(m);return F<0?!1:(F&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+F+", junk ahead ?"),!0)},_e._syncOffset=function(m){for(var F=Math.min(1e3,m.length-564),X=0;X<F;){if(m[X]===71&&m[X+188]===71&&m[X+2*188]===71)return X;X++}return-1},_e.createTrack=function(m,F){return{container:m==="video"||m==="audio"?"video/mp2t":void 0,type:m,id:J[m],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:m==="video"?0:void 0,isAAC:m==="audio"?!0:void 0,duration:m==="audio"?F:void 0}},Me.resetInitSegment=function(m,F,X,le){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=_e.createTrack("video",le),this._audioTrack=_e.createTrack("audio",le),this._id3Track=_e.createTrack("id3",le),this._txtTrack=_e.createTrack("text",le),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=F,this.videoCodec=X,this._duration=le},Me.resetTimeStamp=function(){},Me.append=function(m,F,X,le){var ve,Se=m.length,ye,Re,Ie,ke,$e,qe=!1;this.contiguous=X;var lt=this.pmtParsed,nt=this._avcTrack,ft=this._audioTrack,_t=this._id3Track,Ct=nt.pid,Yt=ft.pid,Gt=_t.pid,mt=this._pmtId,jt=nt.pesData,St=ft.pesData,Zt=_t.pesData,er=this._parsePAT,Qt=this._parsePMT,ar=this._parsePES,ur=this._parseAVCPES.bind(this),yr=this._parseAACPES.bind(this),dr=this._parseMPEGPES.bind(this),Er=this._parseID3PES.bind(this),mr=_e._syncOffset(m);for(Se-=(Se+mr)%188,ve=mr;ve<Se;ve+=188)if(m[ve]===71){if(ye=!!(m[ve+1]&64),Re=((m[ve+1]&31)<<8)+m[ve+2],Ie=(m[ve+3]&48)>>4,Ie>1){if(ke=ve+5+m[ve+4],ke===ve+188)continue}else ke=ve+4;switch(Re){case Ct:ye&&(jt&&($e=ar(jt))&&ur($e,!1),jt={data:[],size:0}),jt&&(jt.data.push(m.subarray(ke,ve+188)),jt.size+=ve+188-ke);break;case Yt:ye&&(St&&($e=ar(St))&&(ft.isAAC?yr($e):dr($e)),St={data:[],size:0}),St&&(St.data.push(m.subarray(ke,ve+188)),St.size+=ve+188-ke);break;case Gt:ye&&(Zt&&($e=ar(Zt))&&Er($e),Zt={data:[],size:0}),Zt&&(Zt.data.push(m.subarray(ke,ve+188)),Zt.size+=ve+188-ke);break;case 0:ye&&(ke+=m[ke]+1),mt=this._pmtId=er(m,ke);break;case mt:ye&&(ke+=m[ke]+1);var cr=Qt(m,ke,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,this.sampleAes!=null);Ct=cr.avc,Ct>0&&(nt.pid=Ct),Yt=cr.audio,Yt>0&&(ft.pid=Yt,ft.isAAC=cr.isAAC),Gt=cr.id3,Gt>0&&(_t.pid=Gt),qe&&!lt&&(c.logger.log("reparse from beginning"),qe=!1,ve=mr-188),lt=this.pmtParsed=!0;break;case 17:case 8191:break;default:qe=!0;break}}else this.observer.trigger(h.default.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});jt&&($e=ar(jt))?(ur($e,!0),nt.pesData=null):nt.pesData=jt,St&&($e=ar(St))?(ft.isAAC?yr($e):dr($e),ft.pesData=null):(St&&St.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),ft.pesData=St),Zt&&($e=ar(Zt))?(Er($e),_t.pesData=null):_t.pesData=Zt,this.sampleAes==null?this.remuxer.remux(ft,nt,_t,this._txtTrack,F,X,le):this.decryptAndRemux(ft,nt,_t,this._txtTrack,F,X,le)},Me.decryptAndRemux=function(m,F,X,le,ve,Se,ye){if(m.samples&&m.isAAC){var Re=this;this.sampleAes.decryptAacSamples(m.samples,0,function(){Re.decryptAndRemuxAvc(m,F,X,le,ve,Se,ye)})}else this.decryptAndRemuxAvc(m,F,X,le,ve,Se,ye)},Me.decryptAndRemuxAvc=function(m,F,X,le,ve,Se,ye){if(F.samples){var Re=this;this.sampleAes.decryptAvcSamples(F.samples,0,0,function(){Re.remuxer.remux(m,F,X,le,ve,Se,ye)})}else this.remuxer.remux(m,F,X,le,ve,Se,ye)},Me.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},Me._parsePAT=function(m,F){return(m[F+10]&31)<<8|m[F+11]},Me._parsePMT=function(m,F,X,le){var ve,Se,ye,Re,Ie={audio:-1,avc:-1,id3:-1,isAAC:!0};for(ve=(m[F+1]&15)<<8|m[F+2],Se=F+3+ve-4,ye=(m[F+10]&15)<<8|m[F+11],F+=12+ye;F<Se;){switch(Re=(m[F+1]&31)<<8|m[F+2],m[F]){case 207:if(!le){c.logger.log("unknown stream type:"+m[F]);break}case 15:Ie.audio===-1&&(Ie.audio=Re);break;case 21:Ie.id3===-1&&(Ie.id3=Re);break;case 219:if(!le){c.logger.log("unknown stream type:"+m[F]);break}case 27:Ie.avc===-1&&(Ie.avc=Re);break;case 3:case 4:X?Ie.audio===-1&&(Ie.audio=Re,Ie.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:c.logger.warn("HEVC stream type found, not supported for now");break;default:c.logger.log("unknown stream type:"+m[F]);break}F+=((m[F+3]&15)<<8|m[F+4])+5}return Ie},Me._parsePES=function(m){var F=0,X,le,ve,Se,ye,Re,Ie,ke,$e,qe=m.data;if(!m||m.size===0)return null;for(;qe[0].length<19&&qe.length>1;){var lt=new Uint8Array(qe[0].length+qe[1].length);lt.set(qe[0]),lt.set(qe[1],qe[0].length),qe[0]=lt,qe.splice(1,1)}if(X=qe[0],ve=(X[0]<<16)+(X[1]<<8)+X[2],ve===1){if(Se=(X[4]<<8)+X[5],Se&&Se>m.size-6||(le=X[7],le&192&&(Ie=(X[9]&14)*536870912+(X[10]&255)*4194304+(X[11]&254)*16384+(X[12]&255)*128+(X[13]&254)/2,Ie>4294967295&&(Ie-=8589934592),le&64?(ke=(X[14]&14)*536870912+(X[15]&255)*4194304+(X[16]&254)*16384+(X[17]&255)*128+(X[18]&254)/2,ke>4294967295&&(ke-=8589934592),Ie-ke>60*9e4&&(c.logger.warn(Math.round((Ie-ke)/9e4)+"s delta between PTS and DTS, align them"),Ie=ke)):ke=Ie),ye=X[8],$e=ye+9,m.size<=$e))return null;m.size-=$e,Re=new Uint8Array(m.size);for(var nt=0,ft=qe.length;nt<ft;nt++){X=qe[nt];var _t=X.byteLength;if($e)if($e>_t){$e-=_t;continue}else X=X.subarray($e),_t-=$e,$e=0;Re.set(X,F),F+=_t}return Se&&(Se-=ye+3),{data:Re,pts:Ie,dts:ke,len:Se}}else return null},Me.pushAccesUnit=function(m,F){if(m.units.length&&m.frame){var X=F.samples,le=X.length;if(isNaN(m.pts))if(le){var ve=X[le-1];m.pts=ve.pts,m.dts=ve.dts}else{F.dropped++;return}!this.config.forceKeyFrameOnDiscontinuity||m.key===!0||F.sps&&(le||this.contiguous)?(m.id=le,X.push(m)):F.dropped++}m.debug.length&&c.logger.log(m.pts+"/"+m.dts+":"+m.debug)},Me._parseAVCPES=function(m,F){var X=this,le=this._avcTrack,ve=this._parseAVCNALu(m.data),Se,ye=this.avcSample,Re,Ie=!1,ke,$e=this.pushAccesUnit.bind(this),qe=function(nt,ft,_t,Ct){return{key:nt,pts:ft,dts:_t,units:[],debug:Ct}};m.data=null,ye&&ve.length&&!le.audFound&&($e(ye,le),ye=this.avcSample=qe(!1,m.pts,m.dts,"")),ve.forEach(function(lt){switch(lt.type){case 1:Re=!0,ye||(ye=X.avcSample=qe(!0,m.pts,m.dts,"")),ye.frame=!0;var nt=lt.data;if(Ie&&nt.length>4){var ft=new G(nt).readSliceType();(ft===2||ft===4||ft===7||ft===9)&&(ye.key=!0)}break;case 5:Re=!0,ye||(ye=X.avcSample=qe(!0,m.pts,m.dts,"")),ye.key=!0,ye.frame=!0;break;case 6:Re=!0,Se=new G(X.discardEPB(lt.data)),Se.readUByte();for(var _t=0,Ct=0,Yt=!1,Gt=0;!Yt&&Se.bytesAvailable>1;){_t=0;do Gt=Se.readUByte(),_t+=Gt;while(Gt===255);Ct=0;do Gt=Se.readUByte(),Ct+=Gt;while(Gt===255);if(_t===4&&Se.bytesAvailable!==0){Yt=!0;var mt=Se.readUByte();if(mt===181){var jt=Se.readUShort();if(jt===49){var St=Se.readUInt();if(St===1195456820){var Zt=Se.readUByte();if(Zt===3){var er=Se.readUByte(),Qt=Se.readUByte(),ar=31&er,ur=[er,Qt];for(ke=0;ke<ar;ke++)ur.push(Se.readUByte()),ur.push(Se.readUByte()),ur.push(Se.readUByte());X._insertSampleInOrder(X._txtTrack.samples,{type:3,pts:m.pts,bytes:ur})}}}}}else if(_t===5&&Se.bytesAvailable!==0){if(Yt=!0,Ct>16){var yr=[];for(ke=0;ke<16;ke++)yr.push(Se.readUByte().toString(16)),(ke===3||ke===5||ke===7||ke===9)&&yr.push("-");var dr=Ct-16,Er=new Uint8Array(dr);for(ke=0;ke<dr;ke++)Er[ke]=Se.readUByte();X._insertSampleInOrder(X._txtTrack.samples,{pts:m.pts,payloadType:_t,uuid:yr.join(""),userDataBytes:Er,userData:Object(A.utf8ArrayToStr)(Er.buffer)})}}else if(Ct<Se.bytesAvailable)for(ke=0;ke<Ct;ke++)Se.readUByte()}break;case 7:if(Re=!0,Ie=!0,!le.sps){Se=new G(lt.data);var mr=Se.readSPS();le.width=mr.width,le.height=mr.height,le.pixelRatio=mr.pixelRatio,le.sps=[lt.data],le.duration=X._duration;var cr=lt.data.subarray(1,4),hr="avc1.";for(ke=0;ke<3;ke++){var qt=cr[ke].toString(16);qt.length<2&&(qt="0"+qt),hr+=qt}le.codec=hr}break;case 8:Re=!0,le.pps||(le.pps=[lt.data]);break;case 9:Re=!1,le.audFound=!0,ye&&$e(ye,le),ye=X.avcSample=qe(!1,m.pts,m.dts,"");break;case 12:Re=!1;break;default:Re=!1,ye&&(ye.debug+="unknown NAL "+lt.type+" ");break}if(ye&&Re){var Gr=ye.units;Gr.push(lt)}}),F&&ye&&($e(ye,le),this.avcSample=null)},Me._insertSampleInOrder=function(m,F){var X=m.length;if(X>0){if(F.pts>=m[X-1].pts)m.push(F);else for(var le=X-1;le>=0;le--)if(F.pts<m[le].pts){m.splice(le,0,F);break}}else m.push(F)},Me._getLastNalUnit=function(){var m=this.avcSample,F;if(!m||m.units.length===0){var X=this._avcTrack,le=X.samples;m=le[le.length-1]}if(m){var ve=m.units;F=ve[ve.length-1]}return F},Me._parseAVCNALu=function(m){var F=0,X=m.byteLength,le,ve,Se=this._avcTrack,ye=Se.naluState||0,Re=ye,Ie=[],ke,$e,qe=-1,lt;for(ye===-1&&(qe=0,lt=m[0]&31,ye=0,F=1);F<X;){if(le=m[F++],!ye){ye=le?0:1;continue}if(ye===1){ye=le?0:2;continue}if(!le)ye=3;else if(le===1){if(qe>=0)ke={data:m.subarray(qe,F-ye-1),type:lt},Ie.push(ke);else{var nt=this._getLastNalUnit();if(nt&&(Re&&F<=4-Re&&nt.state&&(nt.data=nt.data.subarray(0,nt.data.byteLength-Re)),ve=F-ye-1,ve>0)){var ft=new Uint8Array(nt.data.byteLength+ve);ft.set(nt.data,0),ft.set(m.subarray(0,ve),nt.data.byteLength),nt.data=ft}}F<X?($e=m[F]&31,qe=F,lt=$e,ye=0):ye=-1}else ye=0}if(qe>=0&&ye>=0&&(ke={data:m.subarray(qe,X),type:lt,state:ye},Ie.push(ke)),Ie.length===0){var _t=this._getLastNalUnit();if(_t){var Ct=new Uint8Array(_t.data.byteLength+m.byteLength);Ct.set(_t.data,0),Ct.set(m,_t.data.byteLength),_t.data=Ct}}return Se.naluState=ye,Ie},Me.discardEPB=function(m){for(var F=m.byteLength,X=[],le=1,ve,Se;le<F-2;)m[le]===0&&m[le+1]===0&&m[le+2]===3?(X.push(le+2),le+=2):le++;if(X.length===0)return m;ve=F-X.length,Se=new Uint8Array(ve);var ye=0;for(le=0;le<ve;ye++,le++)ye===X[0]&&(ye++,X.shift()),Se[le]=m[ye];return Se},Me._parseAACPES=function(m){var F=this._audioTrack,X=m.data,le=m.pts,ve=0,Se=this.aacOverFlow,ye=this.aacLastPTS,Re,Ie,ke,$e,qe;if(Se){var lt=new Uint8Array(Se.byteLength+X.byteLength);lt.set(Se,0),lt.set(X,Se.byteLength),X=lt}for(ke=ve,qe=X.length;ke<qe-1&&!s(X,ke);ke++);if(ke){var nt,ft;if(ke<qe-1?(nt="AAC PES did not start with ADTS header,offset:"+ke,ft=!1):(nt="no ADTS header found in AAC PES",ft=!0),c.logger.warn("parsing error:"+nt),this.observer.trigger(h.default.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:ft,reason:nt}),ft)return}if(S(F,this.observer,X,ke,this.audioCodec),Ie=0,Re=E(F.samplerate),Se&&ye){var _t=ye+Re;Math.abs(_t-le)>1&&(c.logger.log("AAC: align PTS for overlapping frames by "+Math.round((_t-le)/90)),le=_t)}for(;ke<qe;)if(s(X,ke)){if(ke+5<qe){var Ct=P(F,X,ke,le,Ie);if(Ct){ke+=Ct.length,$e=Ct.sample.pts,Ie++;continue}}break}else ke++;ke<qe?Se=X.subarray(ke,qe):Se=null,this.aacOverFlow=Se,this.aacLastPTS=$e},Me._parseMPEGPES=function(m){for(var F=m.data,X=F.length,le=0,ve=0,Se=m.pts;ve<X;)if(j.isHeader(F,ve)){var ye=j.appendFrame(this._audioTrack,F,ve,Se,le);if(ye)ve+=ye.length,le++;else break}else ve++},Me._parseID3PES=function(m){this._id3Track.samples.push(m)},_e}(),te=se,oe=function(){function _e(H,m,F){this.observer=H,this.config=F,this.remuxer=m}var Me=_e.prototype;return Me.resetInitSegment=function(m,F,X,le){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:F,duration:le,inputTimeScale:9e4}},Me.resetTimeStamp=function(){},_e.probe=function(m){var F,X,le=A.default.getID3Data(m,0);if(le&&A.default.getTimeStamp(le)!==void 0){for(F=le.length,X=Math.min(m.length-1,F+100);F<X;F++)if(j.probe(m,F))return c.logger.log("MPEG Audio sync word found !"),!0}return!1},Me.append=function(m,F,X,le){for(var ve=A.default.getID3Data(m,0),Se=A.default.getTimeStamp(ve),ye=Se?90*Se:F*9e4,Re=ve.length,Ie=m.length,ke=0,$e=0,qe=this._audioTrack,lt=[{pts:ye,dts:ye,data:ve}];Re<Ie;)if(j.isHeader(m,Re)){var nt=j.appendFrame(qe,m,Re,ye,ke);if(nt)Re+=nt.length,$e=nt.sample.pts,ke++;else break}else A.default.isHeader(m,Re)?(ve=A.default.getID3Data(m,Re),lt.push({pts:$e,dts:$e,data:ve}),Re+=ve.length):Re++;this.remuxer.remux(qe,{samples:[]},{samples:lt,inputTimeScale:9e4},{samples:[]},F,X,le)},Me.destroy=function(){},_e}(),re=oe,ee=function(){function _e(){}return _e.getSilentFrame=function(H,m){switch(H){case"mp4a.40.2":if(m===1)return new Uint8Array([0,200,0,128,35,128]);if(m===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(m===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(m===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(m===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(m===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(m===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(m===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(m===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},_e}(),Z=ee,ge=Math.pow(2,32)-1,Te=function(){function _e(){}return _e.init=function(){_e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var H;for(H in _e.types)_e.types.hasOwnProperty(H)&&(_e.types[H]=[H.charCodeAt(0),H.charCodeAt(1),H.charCodeAt(2),H.charCodeAt(3)]);var m=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),F=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);_e.HDLR_TYPES={video:m,audio:F};var X=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),le=new Uint8Array([0,0,0,0,0,0,0,0]);_e.STTS=_e.STSC=_e.STCO=le,_e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),_e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),_e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),_e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var ve=new Uint8Array([105,115,111,109]),Se=new Uint8Array([97,118,99,49]),ye=new Uint8Array([0,0,0,1]);_e.FTYP=_e.box(_e.types.ftyp,ve,ye,ve,Se),_e.DINF=_e.box(_e.types.dinf,_e.box(_e.types.dref,X))},_e.box=function(H){for(var m=Array.prototype.slice.call(arguments,1),F=8,X=m.length,le=X,ve;X--;)F+=m[X].byteLength;for(ve=new Uint8Array(F),ve[0]=F>>24&255,ve[1]=F>>16&255,ve[2]=F>>8&255,ve[3]=F&255,ve.set(H,4),X=0,F=8;X<le;X++)ve.set(m[X],F),F+=m[X].byteLength;return ve},_e.hdlr=function(H){return _e.box(_e.types.hdlr,_e.HDLR_TYPES[H])},_e.mdat=function(H){return _e.box(_e.types.mdat,H)},_e.mdhd=function(H,m){m*=H;var F=Math.floor(m/(ge+1)),X=Math.floor(m%(ge+1));return _e.box(_e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,H>>24&255,H>>16&255,H>>8&255,H&255,F>>24,F>>16&255,F>>8&255,F&255,X>>24,X>>16&255,X>>8&255,X&255,85,196,0,0]))},_e.mdia=function(H){return _e.box(_e.types.mdia,_e.mdhd(H.timescale,H.duration),_e.hdlr(H.type),_e.minf(H))},_e.mfhd=function(H){return _e.box(_e.types.mfhd,new Uint8Array([0,0,0,0,H>>24,H>>16&255,H>>8&255,H&255]))},_e.minf=function(H){return H.type==="audio"?_e.box(_e.types.minf,_e.box(_e.types.smhd,_e.SMHD),_e.DINF,_e.stbl(H)):_e.box(_e.types.minf,_e.box(_e.types.vmhd,_e.VMHD),_e.DINF,_e.stbl(H))},_e.moof=function(H,m,F){return _e.box(_e.types.moof,_e.mfhd(H),_e.traf(F,m))},_e.moov=function(H){for(var m=H.length,F=[];m--;)F[m]=_e.trak(H[m]);return _e.box.apply(null,[_e.types.moov,_e.mvhd(H[0].timescale,H[0].duration)].concat(F).concat(_e.mvex(H)))},_e.mvex=function(H){for(var m=H.length,F=[];m--;)F[m]=_e.trex(H[m]);return _e.box.apply(null,[_e.types.mvex].concat(F))},_e.mvhd=function(H,m){m*=H;var F=Math.floor(m/(ge+1)),X=Math.floor(m%(ge+1)),le=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,H>>24&255,H>>16&255,H>>8&255,H&255,F>>24,F>>16&255,F>>8&255,F&255,X>>24,X>>16&255,X>>8&255,X&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return _e.box(_e.types.mvhd,le)},_e.sdtp=function(H){var m=H.samples||[],F=new Uint8Array(4+m.length),X,le;for(le=0;le<m.length;le++)X=m[le].flags,F[le+4]=X.dependsOn<<4|X.isDependedOn<<2|X.hasRedundancy;return _e.box(_e.types.sdtp,F)},_e.stbl=function(H){return _e.box(_e.types.stbl,_e.stsd(H),_e.box(_e.types.stts,_e.STTS),_e.box(_e.types.stsc,_e.STSC),_e.box(_e.types.stsz,_e.STSZ),_e.box(_e.types.stco,_e.STCO))},_e.avc1=function(H){var m=[],F=[],X,le,ve;for(X=0;X<H.sps.length;X++)le=H.sps[X],ve=le.byteLength,m.push(ve>>>8&255),m.push(ve&255),m=m.concat(Array.prototype.slice.call(le));for(X=0;X<H.pps.length;X++)le=H.pps[X],ve=le.byteLength,F.push(ve>>>8&255),F.push(ve&255),F=F.concat(Array.prototype.slice.call(le));var Se=_e.box(_e.types.avcC,new Uint8Array([1,m[3],m[4],m[5],255,224|H.sps.length].concat(m).concat([H.pps.length]).concat(F))),ye=H.width,Re=H.height,Ie=H.pixelRatio[0],ke=H.pixelRatio[1];return _e.box(_e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ye>>8&255,ye&255,Re>>8&255,Re&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Se,_e.box(_e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),_e.box(_e.types.pasp,new Uint8Array([Ie>>24,Ie>>16&255,Ie>>8&255,Ie&255,ke>>24,ke>>16&255,ke>>8&255,ke&255])))},_e.esds=function(H){var m=H.config.length;return new Uint8Array([0,0,0,0,3,23+m,0,1,0,4,15+m,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([m]).concat(H.config).concat([6,1,2]))},_e.mp4a=function(H){var m=H.samplerate;return _e.box(_e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,H.channelCount,0,16,0,0,0,0,m>>8&255,m&255,0,0]),_e.box(_e.types.esds,_e.esds(H)))},_e.mp3=function(H){var m=H.samplerate;return _e.box(_e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,H.channelCount,0,16,0,0,0,0,m>>8&255,m&255,0,0]))},_e.stsd=function(H){return H.type==="audio"?!H.isAAC&&H.codec==="mp3"?_e.box(_e.types.stsd,_e.STSD,_e.mp3(H)):_e.box(_e.types.stsd,_e.STSD,_e.mp4a(H)):_e.box(_e.types.stsd,_e.STSD,_e.avc1(H))},_e.tkhd=function(H){var m=H.id,F=H.duration*H.timescale,X=H.width,le=H.height,ve=Math.floor(F/(ge+1)),Se=Math.floor(F%(ge+1));return _e.box(_e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,m>>24&255,m>>16&255,m>>8&255,m&255,0,0,0,0,ve>>24,ve>>16&255,ve>>8&255,ve&255,Se>>24,Se>>16&255,Se>>8&255,Se&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,X>>8&255,X&255,0,0,le>>8&255,le&255,0,0]))},_e.traf=function(H,m){var F=_e.sdtp(H),X=H.id,le=Math.floor(m/(ge+1)),ve=Math.floor(m%(ge+1));return _e.box(_e.types.traf,_e.box(_e.types.tfhd,new Uint8Array([0,0,0,0,X>>24,X>>16&255,X>>8&255,X&255])),_e.box(_e.types.tfdt,new Uint8Array([1,0,0,0,le>>24,le>>16&255,le>>8&255,le&255,ve>>24,ve>>16&255,ve>>8&255,ve&255])),_e.trun(H,F.length+16+20+8+16+8+8),F)},_e.trak=function(H){return H.duration=H.duration||4294967295,_e.box(_e.types.trak,_e.tkhd(H),_e.mdia(H))},_e.trex=function(H){var m=H.id;return _e.box(_e.types.trex,new Uint8Array([0,0,0,0,m>>24,m>>16&255,m>>8&255,m&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},_e.trun=function(H,m){var F=H.samples||[],X=F.length,le=12+16*X,ve=new Uint8Array(le),Se,ye,Re,Ie,ke,$e;for(m+=8+le,ve.set([0,0,15,1,X>>>24&255,X>>>16&255,X>>>8&255,X&255,m>>>24&255,m>>>16&255,m>>>8&255,m&255],0),Se=0;Se<X;Se++)ye=F[Se],Re=ye.duration,Ie=ye.size,ke=ye.flags,$e=ye.cts,ve.set([Re>>>24&255,Re>>>16&255,Re>>>8&255,Re&255,Ie>>>24&255,Ie>>>16&255,Ie>>>8&255,Ie&255,ke.isLeading<<2|ke.dependsOn,ke.isDependedOn<<6|ke.hasRedundancy<<4|ke.paddingValue<<1|ke.isNonSync,ke.degradPrio&61440,ke.degradPrio&15,$e>>>24&255,$e>>>16&255,$e>>>8&255,$e&255],12+16*Se);return _e.box(_e.types.trun,ve)},_e.initSegment=function(H){_e.types||_e.init();var m=_e.moov(H),F;return F=new Uint8Array(_e.FTYP.byteLength+m.byteLength),F.set(_e.FTYP),F.set(m,_e.FTYP.byteLength),F},_e}(),we=Te,Le=9e4;function Ce(_e,Me,H,m){H===void 0&&(H=1),m===void 0&&(m=!1);var F=_e*Me*H;return m?Math.round(F):F}function be(_e,Me){return Me===void 0&&(Me=!1),Ce(_e,1e3,1/Le,Me)}function Ge(_e,Me){return Me===void 0&&(Me=1),Ce(_e,Le,1/Me)}var Ke=Ge(10),je=Ge(.2),Ze=function(){function _e(H,m,F,X){this.observer=H,this.config=m,this.typeSupported=F;var le=navigator.userAgent;this.isSafari=X&&X.indexOf("Apple")>-1&&le&&!le.match("CriOS"),this.ISGenerated=!1}var Me=_e.prototype;return Me.destroy=function(){},Me.resetTimeStamp=function(m){this._initPTS=this._initDTS=m},Me.resetInitSegment=function(){this.ISGenerated=!1},Me.remux=function(m,F,X,le,ve,Se,ye){if(this.ISGenerated||this.generateIS(m,F,ve),this.ISGenerated){var Re=m.samples.length,Ie=F.samples.length,ke=ve,$e=ve;if(Re&&Ie){var qe=(m.samples[0].pts-F.samples[0].pts)/F.inputTimeScale;ke+=Math.max(0,qe),$e+=Math.max(0,-qe)}if(Re){m.timescale||(c.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(m,F,ve));var lt=this.remuxAudio(m,ke,Se,ye);if(Ie){var nt;lt&&(nt=lt.endPTS-lt.startPTS),F.timescale||(c.logger.warn("regenerate InitSegment as video detected"),this.generateIS(m,F,ve)),this.remuxVideo(F,$e,Se,nt,ye)}}else if(Ie){var ft=this.remuxVideo(F,$e,Se,0,ye);ft&&m.codec&&this.remuxEmptyAudio(m,ke,Se,ft)}}X.samples.length&&this.remuxID3(X,ve),le.samples.length&&this.remuxText(le,ve),this.observer.trigger(h.default.FRAG_PARSED)},Me.generateIS=function(m,F,X){var le=this.observer,ve=m.samples,Se=F.samples,ye=this.typeSupported,Re="audio/mp4",Ie={},ke={tracks:Ie},$e=this._initPTS===void 0,qe,lt;if($e&&(qe=lt=1/0),m.config&&ve.length&&(m.timescale=m.samplerate,c.logger.log("audio sampling rate : "+m.samplerate),m.isAAC||(ye.mpeg?(Re="audio/mpeg",m.codec=""):ye.mp3&&(m.codec="mp3")),Ie.audio={container:Re,codec:m.codec,initSegment:!m.isAAC&&ye.mpeg?new Uint8Array:we.initSegment([m]),metadata:{channelCount:m.channelCount}},$e&&(qe=lt=ve[0].pts-m.inputTimeScale*X)),F.sps&&F.pps&&Se.length){var nt=F.inputTimeScale;F.timescale=nt,Ie.video={container:"video/mp4",codec:F.codec,initSegment:we.initSegment([F]),metadata:{width:F.width,height:F.height}},$e&&(qe=Math.min(qe,Se[0].pts-nt*X),lt=Math.min(lt,Se[0].dts-nt*X),this.observer.trigger(h.default.INIT_PTS_FOUND,{initPTS:qe}))}Object.keys(Ie).length?(le.trigger(h.default.FRAG_PARSING_INIT_SEGMENT,ke),this.ISGenerated=!0,$e&&(this._initPTS=qe,this._initDTS=lt)):le.trigger(h.default.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},Me.remuxVideo=function(m,F,X,le,ve){var Se=8,ye,Re,Ie,ke,$e,qe,lt,nt=m.timescale,ft=m.samples,_t=[],Ct=ft.length,Yt=this._PTSNormalize,Gt=this._initPTS,mt=this.nextAvcDts,jt=this.isSafari;if(Ct!==0){jt&&(X|=ft.length&&mt&&(ve&&Math.abs(F-mt/nt)<.1||Math.abs(ft[0].pts-mt-Gt)<nt/5)),X||(mt=F*nt),ft.forEach(function(pr){pr.pts=Yt(pr.pts-Gt,mt),pr.dts=Yt(pr.dts-Gt,mt)}),ft.sort(function(pr,wr){var Jr=pr.dts-wr.dts,en=pr.pts-wr.pts;return Jr||en||pr.id-wr.id});var St=ft.reduce(function(pr,wr){return Math.max(Math.min(pr,wr.pts-wr.dts),-1*je)},0);if(St<0){c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+be(St,!0)+" ms to overcome this issue");for(var Zt=0;Zt<ft.length;Zt++)ft[Zt].dts+=St}var er=ft[0];$e=Math.max(er.dts,0),ke=Math.max(er.pts,0);var Qt=$e-mt;X&&Qt&&(Qt>1?c.logger.log("AVC: "+be(Qt,!0)+" ms hole between fragments detected,filling it"):Qt<-1&&c.logger.log("AVC: "+be(-Qt,!0)+" ms overlapping between fragments detected"),$e=mt,ft[0].dts=$e,ke=Math.max(ke-Qt,mt),ft[0].pts=ke,c.logger.log("Video: PTS/DTS adjusted: "+be(ke,!0)+"/"+be($e,!0)+", delta: "+be(Qt,!0)+" ms")),er=ft[ft.length-1],lt=Math.max(er.dts,0),qe=Math.max(er.pts,0,lt),jt&&(ye=Math.round((lt-$e)/(ft.length-1)));for(var ar=0,ur=0,yr=0;yr<Ct;yr++){for(var dr=ft[yr],Er=dr.units,mr=Er.length,cr=0,hr=0;hr<mr;hr++)cr+=Er[hr].data.length;ur+=cr,ar+=mr,dr.length=cr,jt?dr.dts=$e+yr*ye:dr.dts=Math.max(dr.dts,$e),dr.pts=Math.max(dr.pts,dr.dts)}var qt=ur+4*ar+8;try{Re=new Uint8Array(qt)}catch{this.observer.trigger(h.default.ERROR,{type:w.ErrorTypes.MUX_ERROR,details:w.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:qt,reason:"fail allocating video mdat "+qt});return}var Gr=new DataView(Re.buffer);Gr.setUint32(0,qt),Re.set(we.types.mdat,4);for(var xr=0;xr<Ct;xr++){for(var sr=ft[xr],br=sr.units,_r=0,kr=void 0,Vr=0,Nr=br.length;Vr<Nr;Vr++){var Dr=br[Vr],Fr=Dr.data,Qe=Dr.data.byteLength;Gr.setUint32(Se,Qe),Se+=4,Re.set(Fr,Se),Se+=Qe,_r+=4+Qe}if(jt)kr=Math.max(0,ye*Math.round((sr.pts-sr.dts)/ye));else{if(xr<Ct-1)ye=ft[xr+1].dts-sr.dts;else{var Lr=this.config,Cr=sr.dts-ft[xr>0?xr-1:xr].dts;if(Lr.stretchShortVideoTrack){var Rr=Lr.maxBufferHole,jr=Math.floor(Rr*nt),zr=(le?ke+le*nt:this.nextAudioPts)-sr.pts;zr>jr?(ye=zr-Cr,ye<0&&(ye=Cr),c.logger.log("It is approximately "+be(zr,!1)+" ms to the next segment; using duration "+be(ye,!1)+" ms for the last video frame.")):ye=Cr}else ye=Cr}kr=Math.round(sr.pts-sr.dts)}_t.push({size:_r,duration:ye,cts:kr,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:sr.key?2:1,isNonSync:sr.key?0:1}})}this.nextAvcDts=lt+ye;var Ir=m.dropped;if(m.nbNalu=0,m.dropped=0,_t.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Xr=_t[0].flags;Xr.dependsOn=2,Xr.isNonSync=0}m.samples=_t,Ie=we.moof(m.sequenceNumber++,$e,m),m.samples=[];var Zr={data1:Ie,data2:Re,startPTS:ke/nt,endPTS:(qe+ye)/nt,startDTS:$e/nt,endDTS:this.nextAvcDts/nt,type:"video",hasAudio:!1,hasVideo:!0,nb:_t.length,dropped:Ir};return this.observer.trigger(h.default.FRAG_PARSING_DATA,Zr),Zr}},Me.remuxAudio=function(m,F,X,le){var ve=m.inputTimeScale,Se=m.timescale,ye=ve/Se,Re=m.isAAC?1024:1152,Ie=Re*ye,ke=this._PTSNormalize,$e=this._initPTS,qe=!m.isAAC&&this.typeSupported.mpeg,lt,nt,ft,_t,Ct,Yt,Gt=qe?0:8,mt=m.samples,jt=[],St=this.nextAudioPts;if(X|=mt.length&&St&&(le&&Math.abs(F-St/ve)<.1||Math.abs(mt[0].pts-St-$e)<20*Ie),mt.forEach(function(Rr){Rr.pts=Rr.dts=ke(Rr.pts-$e,F*ve)}),mt=mt.filter(function(Rr){return Rr.pts>=0}),mt.length!==0){if(X||(le?St=F*ve:St=mt[0].pts),m.isAAC)for(var Zt=this.config.maxAudioFramesDrift,er=0,Qt=St;er<mt.length;){var ar=mt[er],ur,yr=ar.pts;if(ur=yr-Qt,ur<=-Zt*Ie)c.logger.warn("Dropping 1 audio frame @ "+be(Qt,!0)+" ms due to "+be(ur,!0)+" ms overlap."),mt.splice(er,1);else if(ur>=Zt*Ie&&ur<Ke&&Qt){var dr=Math.round(ur/Ie);c.logger.warn("Injecting "+dr+" audio frames @ "+be(Qt,!0)+" ms due to "+be(Qt,!0)+" ms gap.");for(var Er=0;Er<dr;Er++){var mr=Math.max(Qt,0);nt=Z.getSilentFrame(m.manifestCodec||m.codec,m.channelCount),nt||(c.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),nt=ar.unit.subarray()),mt.splice(er,0,{unit:nt,pts:mr,dts:mr}),Qt+=Ie,er++}ar.pts=ar.dts=Qt,Qt+=Ie,er++}else ar.pts=ar.dts=Qt,Qt+=Ie,er++}for(var cr=mt.length,hr=0;cr--;)hr+=mt[cr].unit.byteLength;for(var qt=0,Gr=mt.length;qt<Gr;qt++){var xr=mt[qt],sr=xr.unit,br=xr.pts;if(Yt!==void 0)lt.duration=Math.round((br-Yt)/ye);else{var _r=br-St,kr=0;if(X&&m.isAAC&&_r){if(_r>0&&_r<Ke)kr=Math.round((br-St)/Ie),c.logger.log(be(_r,!0)+" ms hole between AAC samples detected,filling it"),kr>0&&(nt=Z.getSilentFrame(m.manifestCodec||m.codec,m.channelCount),nt||(nt=sr.subarray()),hr+=kr*nt.length);else if(_r<-12){c.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+be(St,!0)+" ms / "+be(br,!0)+" ms / "+be(-_r,!0)+" ms"),hr-=sr.byteLength;continue}br=St}if(Ct=br,hr>0){hr+=Gt;try{ft=new Uint8Array(hr)}catch{this.observer.trigger(h.default.ERROR,{type:w.ErrorTypes.MUX_ERROR,details:w.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:hr,reason:"fail allocating audio mdat "+hr});return}if(!qe){var Vr=new DataView(ft.buffer);Vr.setUint32(0,hr),ft.set(we.types.mdat,4)}}else return;for(var Nr=0;Nr<kr;Nr++)nt=Z.getSilentFrame(m.manifestCodec||m.codec,m.channelCount),nt||(c.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),nt=sr.subarray()),ft.set(nt,Gt),Gt+=nt.byteLength,lt={size:nt.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},jt.push(lt)}ft.set(sr,Gt);var Dr=sr.byteLength;Gt+=Dr,lt={size:Dr,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},jt.push(lt),Yt=br}var Fr=0;if(cr=jt.length,cr>=2&&(Fr=jt[cr-2].duration,lt.duration=Fr),cr){this.nextAudioPts=St=Yt+ye*Fr,m.samples=jt,qe?_t=new Uint8Array:_t=we.moof(m.sequenceNumber++,Ct/ye,m),m.samples=[];var Qe=Ct/ve,Lr=St/ve,Cr={data1:_t,data2:ft,startPTS:Qe,endPTS:Lr,startDTS:Qe,endDTS:Lr,type:"audio",hasAudio:!0,hasVideo:!1,nb:cr};return this.observer.trigger(h.default.FRAG_PARSING_DATA,Cr),Cr}return null}},Me.remuxEmptyAudio=function(m,F,X,le){var ve=m.inputTimeScale,Se=m.samplerate?m.samplerate:ve,ye=ve/Se,Re=this.nextAudioPts,Ie=(Re!==void 0?Re:le.startDTS*ve)+this._initDTS,ke=le.endDTS*ve+this._initDTS,$e=1024,qe=ye*$e,lt=Math.ceil((ke-Ie)/qe),nt=Z.getSilentFrame(m.manifestCodec||m.codec,m.channelCount);if(c.logger.warn("remux empty Audio"),!nt){c.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");return}for(var ft=[],_t=0;_t<lt;_t++){var Ct=Ie+_t*qe;ft.push({unit:nt,pts:Ct,dts:Ct})}m.samples=ft,this.remuxAudio(m,F,X)},Me.remuxID3=function(m){var F=m.samples.length,X,le=m.inputTimeScale,ve=this._initPTS,Se=this._initDTS;if(F){for(var ye=0;ye<F;ye++)X=m.samples[ye],X.pts=(X.pts-ve)/le,X.dts=(X.dts-Se)/le;this.observer.trigger(h.default.FRAG_PARSING_METADATA,{samples:m.samples})}m.samples=[]},Me.remuxText=function(m){m.samples.sort(function(ye,Re){return ye.pts-Re.pts});var F=m.samples.length,X,le=m.inputTimeScale,ve=this._initPTS;if(F){for(var Se=0;Se<F;Se++)X=m.samples[Se],X.pts=(X.pts-ve)/le;this.observer.trigger(h.default.FRAG_PARSING_USERDATA,{samples:m.samples})}m.samples=[]},Me._PTSNormalize=function(m,F){var X;if(F===void 0)return m;for(F<m?X=-8589934592:X=8589934592;Math.abs(m-F)>4294967296;)m+=X;return m},_e}(),Be=Ze,Oe=function(){function _e(H){this.observer=H}var Me=_e.prototype;return Me.destroy=function(){},Me.resetTimeStamp=function(){},Me.resetInitSegment=function(){},Me.remux=function(m,F,X,le,ve,Se,ye,Re){var Ie=this.observer,ke="";m&&(ke+="audio"),F&&(ke+="video"),Ie.trigger(h.default.FRAG_PARSING_DATA,{data1:Re,startPTS:ve,startDTS:ve,type:ke,hasAudio:!!m,hasVideo:!!F,nb:1,dropped:0}),Ie.trigger(h.default.FRAG_PARSED)},_e}(),ze=Oe,We=Object(d.getSelfScope)(),gt;try{gt=We.performance.now.bind(We.performance)}catch{c.logger.debug("Unable to use Performance API on this environment"),gt=We.Date.now}var at=function(){function _e(H,m,F,X){this.observer=H,this.typeSupported=m,this.config=F,this.vendor=X}var Me=_e.prototype;return Me.destroy=function(){var m=this.demuxer;m&&m.destroy()},Me.push=function(m,F,X,le,ve,Se,ye,Re,Ie,ke,$e,qe){var lt=this;if(m.byteLength>0&&F!=null&&F.key!=null&&F.method==="AES-128"){var nt=this.decrypter;nt==null&&(nt=this.decrypter=new p.default(this.observer,this.config));var ft=gt();nt.decrypt(m,F.key.buffer,F.iv.buffer,function(_t){var Ct=gt();lt.observer.trigger(h.default.FRAG_DECRYPTED,{stats:{tstart:ft,tdecrypt:Ct}}),lt.pushDecrypted(new Uint8Array(_t),F,new Uint8Array(X),le,ve,Se,ye,Re,Ie,ke,$e,qe)})}else this.pushDecrypted(new Uint8Array(m),F,new Uint8Array(X),le,ve,Se,ye,Re,Ie,ke,$e,qe)},Me.pushDecrypted=function(m,F,X,le,ve,Se,ye,Re,Ie,ke,$e,qe){var lt=this.demuxer;if(!lt||(ye||Re)&&!this.probe(m)){for(var nt=this.observer,ft=this.typeSupported,_t=this.config,Ct=[{demux:te,remux:Be},{demux:L.default,remux:ze},{demux:M,remux:Be},{demux:re,remux:Be}],Yt=0,Gt=Ct.length;Yt<Gt;Yt++){var mt=Ct[Yt],jt=mt.demux.probe;if(jt(m)){var St=this.remuxer=new mt.remux(nt,_t,ft,this.vendor);lt=new mt.demux(nt,St,_t,ft),this.probe=jt;break}}if(!lt){nt.trigger(h.default.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});return}this.demuxer=lt}var Zt=this.remuxer;(ye||Re)&&(lt.resetInitSegment(X,le,ve,ke),Zt.resetInitSegment()),ye&&(lt.resetTimeStamp(qe),Zt.resetTimeStamp(qe)),typeof lt.setDecryptData=="function"&&lt.setDecryptData(F),lt.append(m,Se,Ie,$e)},_e}();x.default=at},"./src/demux/demuxer-worker.js":function(o,x,f){f.r(x);var h=f("./src/demux/demuxer-inline.js"),w=f("./src/events.js"),p=f("./src/utils/logger.js"),y=f("./node_modules/eventemitter3/index.js"),c=function(C){var b=new y.EventEmitter;b.trigger=function(s){for(var l=arguments.length,S=new Array(l>1?l-1:0),E=1;E<l;E++)S[E-1]=arguments[E];b.emit.apply(b,[s,s].concat(S))},b.off=function(s){for(var l=arguments.length,S=new Array(l>1?l-1:0),E=1;E<l;E++)S[E-1]=arguments[E];b.removeListener.apply(b,[s].concat(S))};var u=function(s,l){C.postMessage({event:s,data:l})};C.addEventListener("message",function(g){var s=g.data;switch(s.cmd){case"init":var l=JSON.parse(s.config);C.demuxer=new h.default(b,s.typeSupported,l,s.vendor),Object(p.enableLogs)(l.debug),u("init",null);break;case"demux":C.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS);break}}),b.on(w.default.FRAG_DECRYPTED,u),b.on(w.default.FRAG_PARSING_INIT_SEGMENT,u),b.on(w.default.FRAG_PARSED,u),b.on(w.default.ERROR,u),b.on(w.default.FRAG_PARSING_METADATA,u),b.on(w.default.FRAG_PARSING_USERDATA,u),b.on(w.default.INIT_PTS_FOUND,u),b.on(w.default.FRAG_PARSING_DATA,function(g,s){var l=[],S={event:g,data:s};s.data1&&(S.data1=s.data1.buffer,l.push(s.data1.buffer),delete s.data1),s.data2&&(S.data2=s.data2.buffer,l.push(s.data2.buffer),delete s.data2),C.postMessage(S,l)})};x.default=c},"./src/demux/id3.js":function(o,x,f){f.r(x),f.d(x,"utf8ArrayToStr",function(){return c});var h=f("./src/utils/get-self-scope.js"),w=function(){function d(){}return d.isHeader=function(b,u){return u+10<=b.length&&b[u]===73&&b[u+1]===68&&b[u+2]===51&&b[u+3]<255&&b[u+4]<255&&b[u+6]<128&&b[u+7]<128&&b[u+8]<128&&b[u+9]<128},d.isFooter=function(b,u){return u+10<=b.length&&b[u]===51&&b[u+1]===68&&b[u+2]===73&&b[u+3]<255&&b[u+4]<255&&b[u+6]<128&&b[u+7]<128&&b[u+8]<128&&b[u+9]<128},d.getID3Data=function(b,u){for(var g=u,s=0;d.isHeader(b,u);){s+=10;var l=d._readSize(b,u+6);s+=l,d.isFooter(b,u+10)&&(s+=10),u+=s}if(s>0)return b.subarray(g,g+s)},d._readSize=function(b,u){var g=0;return g=(b[u]&127)<<21,g|=(b[u+1]&127)<<14,g|=(b[u+2]&127)<<7,g|=b[u+3]&127,g},d.getTimeStamp=function(b){for(var u=d.getID3Frames(b),g=0;g<u.length;g++){var s=u[g];if(d.isTimeStampFrame(s))return d._readTimeStamp(s)}},d.isTimeStampFrame=function(b){return b&&b.key==="PRIV"&&b.info==="com.apple.streaming.transportStreamTimestamp"},d._getFrameData=function(b){var u=String.fromCharCode(b[0],b[1],b[2],b[3]),g=d._readSize(b,4),s=10;return{type:u,size:g,data:b.subarray(s,s+g)}},d.getID3Frames=function(b){for(var u=0,g=[];d.isHeader(b,u);){var s=d._readSize(b,u+6);u+=10;for(var l=u+s;u+8<l;){var S=d._getFrameData(b.subarray(u)),E=d._decodeFrame(S);E&&g.push(E),u+=S.size+10}d.isFooter(b,u)&&(u+=10)}return g},d._decodeFrame=function(b){if(b.type==="PRIV")return d._decodePrivFrame(b);if(b.type[0]==="T")return d._decodeTextFrame(b);if(b.type[0]==="W")return d._decodeURLFrame(b)},d._readTimeStamp=function(b){if(b.data.byteLength===8){var u=new Uint8Array(b.data),g=u[3]&1,s=(u[4]<<23)+(u[5]<<15)+(u[6]<<7)+u[7];return s/=45,g&&(s+=4772185884e-2),Math.round(s)}},d._decodePrivFrame=function(b){if(!(b.size<2)){var u=d._utf8ArrayToStr(b.data,!0),g=new Uint8Array(b.data.subarray(u.length+1));return{key:b.type,info:u,data:g.buffer}}},d._decodeTextFrame=function(b){if(!(b.size<2))if(b.type==="TXXX"){var u=1,g=d._utf8ArrayToStr(b.data.subarray(u),!0);u+=g.length+1;var s=d._utf8ArrayToStr(b.data.subarray(u));return{key:b.type,info:g,data:s}}else{var l=d._utf8ArrayToStr(b.data.subarray(1));return{key:b.type,data:l}}},d._decodeURLFrame=function(b){if(b.type==="WXXX"){if(b.size<2)return;var u=1,g=d._utf8ArrayToStr(b.data.subarray(u));u+=g.length+1;var s=d._utf8ArrayToStr(b.data.subarray(u));return{key:b.type,info:g,data:s}}else{var l=d._utf8ArrayToStr(b.data);return{key:b.type,data:l}}},d._utf8ArrayToStr=function(b,u){u===void 0&&(u=!1);var g=y();if(g){var s=g.decode(b);if(u){var l=s.indexOf("\0");return l!==-1?s.substring(0,l):s}return s.replace(/\0/g,"")}for(var S=b.length,E,O,P,A="",D=0;D<S;){if(E=b[D++],E===0&&u)return A;if(E===0||E===3)continue;switch(E>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:A+=String.fromCharCode(E);break;case 12:case 13:O=b[D++],A+=String.fromCharCode((E&31)<<6|O&63);break;case 14:O=b[D++],P=b[D++],A+=String.fromCharCode((E&15)<<12|(O&63)<<6|(P&63)<<0);break}}return A},d}(),p;function y(){var d=Object(h.getSelfScope)();return!p&&typeof d.TextDecoder<"u"&&(p=new d.TextDecoder("utf-8")),p}var c=w._utf8ArrayToStr;x.default=w},"./src/demux/mp4demuxer.js":function(o,x,f){f.r(x);var h=f("./src/utils/logger.js"),w=f("./src/events.js"),p=Math.pow(2,32)-1,y=function(){function c(C,b){this.observer=C,this.remuxer=b}var d=c.prototype;return d.resetTimeStamp=function(b){this.initPTS=b},d.resetInitSegment=function(b,u,g,s){if(b&&b.byteLength){var l=this.initData=c.parseInitSegment(b);u==null&&(u="mp4a.40.5"),g==null&&(g="avc1.42e01e");var S={};l.audio&&l.video?S.audiovideo={container:"video/mp4",codec:u+","+g,initSegment:s?b:null}:(l.audio&&(S.audio={container:"audio/mp4",codec:u,initSegment:s?b:null}),l.video&&(S.video={container:"video/mp4",codec:g,initSegment:s?b:null})),this.observer.trigger(w.default.FRAG_PARSING_INIT_SEGMENT,{tracks:S})}else u&&(this.audioCodec=u),g&&(this.videoCodec=g)},c.probe=function(b){return c.findBox({data:b,start:0,end:Math.min(b.length,16384)},["moof"]).length>0},c.bin2str=function(b){return String.fromCharCode.apply(null,b)},c.readUint16=function(b,u){b.data&&(u+=b.start,b=b.data);var g=b[u]<<8|b[u+1];return g<0?65536+g:g},c.readUint32=function(b,u){b.data&&(u+=b.start,b=b.data);var g=b[u]<<24|b[u+1]<<16|b[u+2]<<8|b[u+3];return g<0?4294967296+g:g},c.writeUint32=function(b,u,g){b.data&&(u+=b.start,b=b.data),b[u]=g>>24,b[u+1]=g>>16&255,b[u+2]=g>>8&255,b[u+3]=g&255},c.findBox=function(b,u){var g=[],s,l,S,E,O,P,A;if(b.data?(P=b.start,E=b.end,b=b.data):(P=0,E=b.byteLength),!u.length)return null;for(s=P;s<E;)l=c.readUint32(b,s),S=c.bin2str(b.subarray(s+4,s+8)),A=l>1?s+l:E,S===u[0]&&(u.length===1?g.push({data:b,start:s+8,end:A}):(O=c.findBox({data:b,start:s+8,end:A},u.slice(1)),O.length&&(g=g.concat(O)))),s=A;return g},c.parseSegmentIndex=function(b){var u=c.findBox(b,["moov"])[0],g=u?u.end:null,s=0,l=c.findBox(b,["sidx"]),S;if(!l||!l[0])return null;S=[],l=l[0];var E=l.data[0];s=E===0?8:16;var O=c.readUint32(l,s);s+=4;var P=0,A=0;E===0?s+=8:s+=16,s+=2;var D=l.end+A,M=c.readUint16(l,s);s+=2;for(var L=0;L<M;L++){var V=s,j=c.readUint32(l,V);V+=4;var N=j&2147483647,G=(j&2147483648)>>>31;if(G===1){console.warn("SIDX has hierarchical references (not supported)");return}var K=c.readUint32(l,V);V+=4,S.push({referenceSize:N,subsegmentDuration:K,info:{duration:K/O,start:D,end:D+N-1}}),D+=N,V+=4,s=V}return{earliestPresentationTime:P,timescale:O,version:E,referencesCount:M,references:S,moovEndOffset:g}},c.parseInitSegment=function(b){var u=[],g=c.findBox(b,["moov","trak"]);return g.forEach(function(s){var l=c.findBox(s,["tkhd"])[0];if(l){var S=l.data[l.start],E=S===0?12:20,O=c.readUint32(l,E),P=c.findBox(s,["mdia","mdhd"])[0];if(P){S=P.data[P.start],E=S===0?12:20;var A=c.readUint32(P,E),D=c.findBox(s,["mdia","hdlr"])[0];if(D){var M=c.bin2str(D.data.subarray(D.start+8,D.start+12)),L={soun:"audio",vide:"video"}[M];if(L){var V=c.findBox(s,["mdia","minf","stbl","stsd"]);if(V.length){V=V[0];var j=c.bin2str(V.data.subarray(V.start+12,V.start+16));h.logger.log("MP4Demuxer:"+L+":"+j+" found")}u[O]={timescale:A,type:L},u[L]={timescale:A,id:O}}}}}}),u},c.getStartDTS=function(b,u){var g,s,l;return g=c.findBox(u,["moof","traf"]),s=[].concat.apply([],g.map(function(S){return c.findBox(S,["tfhd"]).map(function(E){var O,P,A;return O=c.readUint32(E,4),P=b[O].timescale||9e4,A=c.findBox(S,["tfdt"]).map(function(D){var M,L;return M=D.data[D.start],L=c.readUint32(D,4),M===1&&(L*=Math.pow(2,32),L+=c.readUint32(D,8)),L})[0],A/P})})),l=Math.min.apply(null,s),isFinite(l)?l:0},c.offsetStartDTS=function(b,u,g){c.findBox(u,["moof","traf"]).map(function(s){return c.findBox(s,["tfhd"]).map(function(l){var S=c.readUint32(l,4),E=b[S].timescale||9e4;c.findBox(s,["tfdt"]).map(function(O){var P=O.data[O.start],A=c.readUint32(O,4);if(P===0)c.writeUint32(O,4,A-g*E);else{A*=Math.pow(2,32),A+=c.readUint32(O,8),A-=g*E,A=Math.max(A,0);var D=Math.floor(A/(p+1)),M=Math.floor(A%(p+1));c.writeUint32(O,4,D),c.writeUint32(O,8,M)}})})})},d.append=function(b,u,g,s){var l=this.initData;l||(this.resetInitSegment(b,this.audioCodec,this.videoCodec,!1),l=this.initData);var S,E=this.initPTS;if(E===void 0){var O=c.getStartDTS(l,b);this.initPTS=E=O-u,this.observer.trigger(w.default.INIT_PTS_FOUND,{initPTS:E})}c.offsetStartDTS(l,b,E),S=c.getStartDTS(l,b),this.remuxer.remux(l.audio,l.video,null,null,S,g,s,b)},d.destroy=function(){},c}();x.default=y},"./src/errors.ts":function(o,x,f){f.r(x),f.d(x,"ErrorTypes",function(){return h}),f.d(x,"ErrorDetails",function(){return w});var h;(function(p){p.NETWORK_ERROR="networkError",p.MEDIA_ERROR="mediaError",p.KEY_SYSTEM_ERROR="keySystemError",p.MUX_ERROR="muxError",p.OTHER_ERROR="otherError"})(h||(h={}));var w;(function(p){p.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",p.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",p.KEY_SYSTEM_NO_SESSION="keySystemNoSession",p.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",p.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",p.MANIFEST_LOAD_ERROR="manifestLoadError",p.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",p.MANIFEST_PARSING_ERROR="manifestParsingError",p.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",p.LEVEL_LOAD_ERROR="levelLoadError",p.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",p.LEVEL_SWITCH_ERROR="levelSwitchError",p.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",p.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",p.FRAG_LOAD_ERROR="fragLoadError",p.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",p.FRAG_DECRYPT_ERROR="fragDecryptError",p.FRAG_PARSING_ERROR="fragParsingError",p.REMUX_ALLOC_ERROR="remuxAllocError",p.KEY_LOAD_ERROR="keyLoadError",p.KEY_LOAD_TIMEOUT="keyLoadTimeOut",p.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",p.BUFFER_APPEND_ERROR="bufferAppendError",p.BUFFER_APPENDING_ERROR="bufferAppendingError",p.BUFFER_STALLED_ERROR="bufferStalledError",p.BUFFER_FULL_ERROR="bufferFullError",p.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",p.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",p.INTERNAL_EXCEPTION="internalException"})(w||(w={}))},"./src/events.js":function(o,x,f){f.r(x);var h={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};x.default=h},"./src/hls.ts":function(o,x,f){f.r(x);var h={};f.r(h),f.d(h,"newCue",function(){return xe});var w=f("./node_modules/url-toolkit/src/url-toolkit.js"),p=f("./src/errors.ts"),y=f("./src/polyfills/number-isFinite.js"),c=f("./src/events.js"),d=f("./src/utils/logger.js"),C={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},b=function(){function ie(U){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=U,this.onEvent=this.onEvent.bind(this);for(var R=arguments.length,n=new Array(R>1?R-1:0),_=1;_<R;_++)n[_-1]=arguments[_];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var $=ie.prototype;return $.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},$.onHandlerDestroying=function(){},$.onHandlerDestroyed=function(){},$.isEventHandler=function(){return typeof this.handledEvents=="object"&&this.handledEvents.length&&typeof this.onEvent=="function"},$.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(R){if(C[R])throw new Error("Forbidden event-name: "+R);this.hls.on(R,this.onEvent)},this)},$.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(R){this.hls.off(R,this.onEvent)},this)},$.onEvent=function(R,n){this.onEventGeneric(R,n)},$.onEventGeneric=function(R,n){var _=function(Q,de){var Y="on"+Q.replace("hls","");if(typeof this[Y]!="function")throw new Error("Event "+Q+" has no generic handler in this "+this.constructor.name+" class (tried "+Y+")");return this[Y].bind(this,de)};try{_.call(this,R,n).call()}catch(z){d.logger.error("An internal error happened while handling event "+R+'. Error message: "'+z.message+'". Here is a stacktrace:',z),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:R,err:z})}},ie}(),u=b,g;(function(ie){ie.MANIFEST="manifest",ie.LEVEL="level",ie.AUDIO_TRACK="audioTrack",ie.SUBTITLE_TRACK="subtitleTrack"})(g||(g={}));var s;(function(ie){ie.MAIN="main",ie.AUDIO="audio",ie.SUBTITLE="subtitle"})(s||(s={}));var l=f("./src/demux/mp4demuxer.js");function S(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function E(ie,$,U){return $&&S(ie.prototype,$),ie}var O=function(){function ie($,U){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=$,this.reluri=U}return E(ie,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(w.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),ie}();function P(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function A(ie,$,U){return $&&P(ie.prototype,$),ie}var D;(function(ie){ie.AUDIO="audio",ie.VIDEO="video"})(D||(D={}));var M=function(){function ie(){var U;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(U={},U[D.AUDIO]=!1,U[D.VIDEO]=!1,U),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var $=ie.prototype;return $.setByteRange=function(R,n){var _=R.split("@",2),z=[];_.length===1?z[0]=n?n.byteRangeEndOffset:0:z[0]=parseInt(_[1]),z[1]=parseInt(_[0])+z[0],this._byteRange=z},$.addElementaryStream=function(R){this._elementaryStreams[R]=!0},$.hasElementaryStream=function(R){return this._elementaryStreams[R]===!0},$.createInitializationVector=function(R){for(var n=new Uint8Array(16),_=12;_<16;_++)n[_]=R>>8*(15-_)&255;return n},$.setDecryptDataFromLevelKey=function(R,n){var _=R;return R&&R.method&&R.uri&&!R.iv&&(_=new O(R.baseuri,R.reluri),_.method=R.method,_.iv=this.createInitializationVector(n)),_},A(ie,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(w.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(R){this._url=R}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var R=this.sn;typeof R!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&d.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),R=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,R)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(y.isFiniteNumber)(this.programDateTime))return null;var R=Object(y.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+R*1e3}},{key:"encrypted",get:function(){return!!(this.decryptdata&&this.decryptdata.uri!==null&&this.decryptdata.key===null)}}]),ie}();function L(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function V(ie,$,U){return $&&L(ie.prototype,$),ie}var j=function(){function ie($){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=$,this.version=null}return V(ie,[{key:"hasProgramDateTime",get:function(){return!!(this.fragments[0]&&Object(y.isFiniteNumber)(this.fragments[0].programDateTime))}}]),ie}(),N=/^(\d+)x(\d+)$/,G=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,K=function(){function ie(U){typeof U=="string"&&(U=ie.parseAttrList(U));for(var R in U)U.hasOwnProperty(R)&&(this[R]=U[R])}var $=ie.prototype;return $.decimalInteger=function(R){var n=parseInt(this[R],10);return n>Number.MAX_SAFE_INTEGER?1/0:n},$.hexadecimalInteger=function(R){if(this[R]){var n=(this[R]||"0x").slice(2);n=(n.length&1?"0":"")+n;for(var _=new Uint8Array(n.length/2),z=0;z<n.length/2;z++)_[z]=parseInt(n.slice(z*2,z*2+2),16);return _}else return null},$.hexadecimalIntegerAsNumber=function(R){var n=parseInt(this[R],16);return n>Number.MAX_SAFE_INTEGER?1/0:n},$.decimalFloatingPoint=function(R){return parseFloat(this[R])},$.enumeratedString=function(R){return this[R]},$.decimalResolution=function(R){var n=N.exec(this[R]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}},ie.parseAttrList=function(R){var n,_={};for(G.lastIndex=0;(n=G.exec(R))!==null;){var z=n[2],Q='"';z.indexOf(Q)===0&&z.lastIndexOf(Q)===z.length-1&&(z=z.slice(1,-1)),_[n[1]]=z}return _},ie}(),k=K,J={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function se(ie,$){var U=J[$];return!!U&&U[ie.slice(0,4)]===!0}function te(ie,$){return MediaSource.isTypeSupported(($||"video")+'/mp4;codecs="'+ie+'"')}var oe=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,re=/#EXT-X-MEDIA:(.*)/g,ee=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Z=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,ge=/\.(mp4|m4s|m4v|m4a)$/i,Te=function(){function ie(){}return ie.findGroup=function(U,R){for(var n=0;n<U.length;n++){var _=U[n];if(_.id===R)return _}},ie.convertAVC1ToAVCOTI=function(U){var R=U.split("."),n;return R.length>2?(n=R.shift()+".",n+=parseInt(R.shift()).toString(16),n+=("000"+parseInt(R.shift()).toString(16)).substr(-4)):n=U,n},ie.resolve=function(U,R){return w.buildAbsoluteURL(R,U,{alwaysNormalize:!0})},ie.parseMasterPlaylist=function(U,R){var n=[];oe.lastIndex=0;function _(ne,ce){["video","audio"].forEach(function(ue){var Ae=ne.filter(function(Ue){return se(Ue,ue)});if(Ae.length){var Pe=Ae.filter(function(Ue){return Ue.lastIndexOf("avc1",0)===0||Ue.lastIndexOf("mp4a",0)===0});ce[ue+"Codec"]=Pe.length>0?Pe[0]:Ae[0],ne=ne.filter(function(Ue){return Ae.indexOf(Ue)===-1})}}),ce.unknownCodecs=ne}for(var z;(z=oe.exec(U))!=null;){var Q={},de=Q.attrs=new k(z[1]);Q.url=ie.resolve(z[2],R);var Y=de.decimalResolution("RESOLUTION");Y&&(Q.width=Y.width,Q.height=Y.height),Q.bitrate=de.decimalInteger("AVERAGE-BANDWIDTH")||de.decimalInteger("BANDWIDTH"),Q.name=de.NAME,_([].concat((de.CODECS||"").split(/[ ,]+/)),Q),Q.videoCodec&&Q.videoCodec.indexOf("avc1")!==-1&&(Q.videoCodec=ie.convertAVC1ToAVCOTI(Q.videoCodec)),n.push(Q)}return n},ie.parseMasterPlaylistMedia=function(U,R,n,_){_===void 0&&(_=[]);var z,Q=[],de=0;for(re.lastIndex=0;(z=re.exec(U))!==null;){var Y=new k(z[1]);if(Y.TYPE===n){var ne={id:de++,groupId:Y["GROUP-ID"],name:Y.NAME||Y.LANGUAGE,type:n,default:Y.DEFAULT==="YES",autoselect:Y.AUTOSELECT==="YES",forced:Y.FORCED==="YES",lang:Y.LANGUAGE};if(Y.URI&&(ne.url=ie.resolve(Y.URI,R)),_.length){var ce=ie.findGroup(_,ne.groupId);ne.audioCodec=ce?ce.codec:_[0].codec}Q.push(ne)}}return Q},ie.parseLevelPlaylist=function(U,R,n,_,z){var Q=0,de=0,Y=new j(R),ne=0,ce=null,ue=new M,Ae,Pe,Ue,Ye=null;for(ee.lastIndex=0;(Ae=ee.exec(U))!==null;){var tt=Ae[1];if(tt){ue.duration=parseFloat(tt);var ct=(" "+Ae[2]).slice(1);ue.title=ct||null,ue.tagList.push(ct?["INF",tt,ct]:["INF",tt])}else if(Ae[3]){if(Object(y.isFiniteNumber)(ue.duration)){var st=Q++;ue.type=_,ue.start=de,Ue&&(ue.levelkey=Ue),ue.sn=st,ue.level=n,ue.cc=ne,ue.urlId=z,ue.baseurl=R,ue.relurl=(" "+Ae[3]).slice(1),Le(ue,ce),Y.fragments.push(ue),ce=ue,de+=ue.duration,ue=new M}}else if(Ae[4]){var Xe=(" "+Ae[4]).slice(1);ce?ue.setByteRange(Xe,ce):ue.setByteRange(Xe)}else if(Ae[5])ue.rawProgramDateTime=(" "+Ae[5]).slice(1),ue.tagList.push(["PROGRAM-DATE-TIME",ue.rawProgramDateTime]),Ye===null&&(Ye=Y.fragments.length);else{if(Ae=Ae[0].match(Z),!Ae){d.logger.warn("No matches on slow regex match for level playlist!");continue}for(Pe=1;Pe<Ae.length&&!(typeof Ae[Pe]<"u");Pe++);var At=(" "+Ae[Pe+1]).slice(1),It=(" "+Ae[Pe+2]).slice(1);switch(Ae[Pe]){case"#":ue.tagList.push(It?[At,It]:[At]);break;case"PLAYLIST-TYPE":Y.type=At.toUpperCase();break;case"MEDIA-SEQUENCE":Q=Y.startSN=parseInt(At);break;case"TARGETDURATION":Y.targetduration=parseFloat(At);break;case"VERSION":Y.version=parseInt(At);break;case"EXTM3U":break;case"ENDLIST":Y.live=!1;break;case"DIS":ne++,ue.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":ne=parseInt(At);break;case"KEY":{var ut=At,Ut=new k(ut),Lt=Ut.enumeratedString("METHOD"),yt=Ut.URI,Tt=Ut.hexadecimalInteger("IV");Lt&&(Ue=new O(R,yt),yt&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(Lt)>=0&&(Ue.method=Lt,Ue.key=null,Ue.iv=Tt));break}case"START":{var nr=new k(At),dt=nr.decimalFloatingPoint("TIME-OFFSET");Object(y.isFiniteNumber)(dt)&&(Y.startTimeOffset=dt);break}case"MAP":{var ot=new k(At);ue.relurl=ot.URI,ot.BYTERANGE&&ue.setByteRange(ot.BYTERANGE),ue.baseurl=R,ue.level=n,ue.type=_,ue.sn="initSegment",Y.initSegment=ue,ue=new M,ue.rawProgramDateTime=Y.initSegment.rawProgramDateTime;break}default:d.logger.warn("line parsed but not handled: "+Ae);break}}}return ue=ce,ue&&!ue.relurl&&(Y.fragments.pop(),de-=ue.duration),Y.totalduration=de,Y.averagetargetduration=de/Y.fragments.length,Y.endSN=Q-1,Y.startCC=Y.fragments[0]?Y.fragments[0].cc:0,Y.endCC=ne,!Y.initSegment&&Y.fragments.length&&Y.fragments.every(function(Xt){return ge.test(Xt.relurl)})&&(d.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),ue=new M,ue.relurl=Y.fragments[0].relurl,ue.baseurl=R,ue.level=n,ue.type=_,ue.sn="initSegment",Y.initSegment=ue,Y.needSidxRanges=!0),Ye&&we(Y.fragments,Ye),Y},ie}();function we(ie,$){for(var U=ie[$],R=$-1;R>=0;R--){var n=ie[R];n.programDateTime=U.programDateTime-n.duration*1e3,U=n}}function Le(ie,$){ie.rawProgramDateTime?ie.programDateTime=Date.parse(ie.rawProgramDateTime):$&&$.programDateTime&&(ie.programDateTime=$.endProgramDateTime),Object(y.isFiniteNumber)(ie.programDateTime)||(ie.programDateTime=null,ie.rawProgramDateTime=null)}function Ce(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var be=window,Ge=be.performance,Ke=function(ie){Ce($,ie);function $(R){var n;return n=ie.call(this,R,c.default.MANIFEST_LOADING,c.default.LEVEL_LOADING,c.default.AUDIO_TRACK_LOADING,c.default.SUBTITLE_TRACK_LOADING)||this,n.loaders={},n}$.canHaveQualityLevels=function(n){return n!==g.AUDIO_TRACK&&n!==g.SUBTITLE_TRACK},$.mapContextToLevelType=function(n){var _=n.type;switch(_){case g.AUDIO_TRACK:return s.AUDIO;case g.SUBTITLE_TRACK:return s.SUBTITLE;default:return s.MAIN}},$.getResponseUrl=function(n,_){var z=n.url;return(z===void 0||z.indexOf("data:")===0)&&(z=_.url),z};var U=$.prototype;return U.createInternalLoader=function(n){var _=this.hls.config,z=_.pLoader,Q=_.loader,de=z||Q,Y=new de(_);return n.loader=Y,this.loaders[n.type]=Y,Y},U.getInternalLoader=function(n){return this.loaders[n.type]},U.resetInternalLoader=function(n){this.loaders[n]&&delete this.loaders[n]},U.destroyInternalLoaders=function(){for(var n in this.loaders){var _=this.loaders[n];_&&_.destroy(),this.resetInternalLoader(n)}},U.destroy=function(){this.destroyInternalLoaders(),ie.prototype.destroy.call(this)},U.onManifestLoading=function(n){this.load({url:n.url,type:g.MANIFEST,level:0,id:null,responseType:"text"})},U.onLevelLoading=function(n){this.load({url:n.url,type:g.LEVEL,level:n.level,id:n.id,responseType:"text"})},U.onAudioTrackLoading=function(n){this.load({url:n.url,type:g.AUDIO_TRACK,level:null,id:n.id,responseType:"text"})},U.onSubtitleTrackLoading=function(n){this.load({url:n.url,type:g.SUBTITLE_TRACK,level:null,id:n.id,responseType:"text"})},U.load=function(n){var _=this.hls.config;d.logger.debug("Loading playlist of type "+n.type+", level: "+n.level+", id: "+n.id);var z=this.getInternalLoader(n);if(z){var Q=z.context;if(Q&&Q.url===n.url)return d.logger.trace("playlist request ongoing"),!1;d.logger.warn("aborting previous loader for type: "+n.type),z.abort()}var de,Y,ne,ce;switch(n.type){case g.MANIFEST:de=_.manifestLoadingMaxRetry,Y=_.manifestLoadingTimeOut,ne=_.manifestLoadingRetryDelay,ce=_.manifestLoadingMaxRetryTimeout;break;case g.LEVEL:de=0,ce=0,ne=0,Y=_.levelLoadingTimeOut;break;default:de=_.levelLoadingMaxRetry,Y=_.levelLoadingTimeOut,ne=_.levelLoadingRetryDelay,ce=_.levelLoadingMaxRetryTimeout;break}z=this.createInternalLoader(n);var ue={timeout:Y,maxRetry:de,retryDelay:ne,maxRetryDelay:ce},Ae={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return d.logger.debug("Calling internal loader delegate for URL: "+n.url),z.load(n,ue,Ae),!0},U.loadsuccess=function(n,_,z,Q){if(Q===void 0&&(Q=null),z.isSidxRequest){this._handleSidxRequest(n,z),this._handlePlaylistLoaded(n,_,z,Q);return}if(this.resetInternalLoader(z.type),typeof n.data!="string")throw new Error('expected responseType of "text" for PlaylistLoader');var de=n.data;if(_.tload=Ge.now(),de.indexOf("#EXTM3U")!==0){this._handleManifestParsingError(n,z,"no EXTM3U delimiter",Q);return}de.indexOf("#EXTINF:")>0||de.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(n,_,z,Q):this._handleMasterPlaylist(n,_,z,Q)},U.loaderror=function(n,_,z){z===void 0&&(z=null),this._handleNetworkError(_,z,!1,n)},U.loadtimeout=function(n,_,z){z===void 0&&(z=null),this._handleNetworkError(_,z,!0)},U._handleMasterPlaylist=function(n,_,z,Q){var de=this.hls,Y=n.data,ne=$.getResponseUrl(n,z),ce=Te.parseMasterPlaylist(Y,ne);if(!ce.length){this._handleManifestParsingError(n,z,"no level found in manifest",Q);return}var ue=ce.map(function(Ye){return{id:Ye.attrs.AUDIO,codec:Ye.audioCodec}}),Ae=Te.parseMasterPlaylistMedia(Y,ne,"AUDIO",ue),Pe=Te.parseMasterPlaylistMedia(Y,ne,"SUBTITLES");if(Ae.length){var Ue=!1;Ae.forEach(function(Ye){Ye.url||(Ue=!0)}),Ue===!1&&ce[0].audioCodec&&!ce[0].attrs.AUDIO&&(d.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),Ae.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}de.trigger(c.default.MANIFEST_LOADED,{levels:ce,audioTracks:Ae,subtitles:Pe,url:ne,stats:_,networkDetails:Q})},U._handleTrackOrLevelPlaylist=function(n,_,z,Q){var de=this.hls,Y=z.id,ne=z.level,ce=z.type,ue=$.getResponseUrl(n,z),Ae=Object(y.isFiniteNumber)(Y)?Y:0,Pe=Object(y.isFiniteNumber)(ne)?ne:Ae,Ue=$.mapContextToLevelType(z),Ye=Te.parseLevelPlaylist(n.data,ue,Pe,Ue,Ae);if(Ye.tload=_.tload,ce===g.MANIFEST){var tt={url:ue,details:Ye};de.trigger(c.default.MANIFEST_LOADED,{levels:[tt],audioTracks:[],url:ue,stats:_,networkDetails:Q})}if(_.tparsed=Ge.now(),Ye.needSidxRanges){var ct=Ye.initSegment.url;this.load({url:ct,isSidxRequest:!0,type:ce,level:ne,levelDetails:Ye,id:Y,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});return}z.levelDetails=Ye,this._handlePlaylistLoaded(n,_,z,Q)},U._handleSidxRequest=function(n,_){if(typeof n.data=="string")throw new Error("sidx request must be made with responseType of array buffer");var z=l.default.parseSegmentIndex(new Uint8Array(n.data));if(z){var Q=z.references,de=_.levelDetails;Q.forEach(function(Y,ne){var ce=Y.info;if(de){var ue=de.fragments[ne];ue.byteRange.length===0&&ue.setByteRange(String(1+ce.end-ce.start)+"@"+String(ce.start))}}),de&&de.initSegment.setByteRange(String(z.moovEndOffset)+"@0")}},U._handleManifestParsingError=function(n,_,z,Q){this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n.url,reason:z,networkDetails:Q})},U._handleNetworkError=function(n,_,z,Q){z===void 0&&(z=!1),Q===void 0&&(Q=null),d.logger.info("A network error occured while loading a "+n.type+"-type playlist");var de,Y,ne=this.getInternalLoader(n);switch(n.type){case g.MANIFEST:de=z?p.ErrorDetails.MANIFEST_LOAD_TIMEOUT:p.ErrorDetails.MANIFEST_LOAD_ERROR,Y=!0;break;case g.LEVEL:de=z?p.ErrorDetails.LEVEL_LOAD_TIMEOUT:p.ErrorDetails.LEVEL_LOAD_ERROR,Y=!1;break;case g.AUDIO_TRACK:de=z?p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,Y=!1;break;default:Y=!1}ne&&(ne.abort(),this.resetInternalLoader(n.type));var ce={type:p.ErrorTypes.NETWORK_ERROR,details:de,fatal:Y,url:n.url,loader:ne,context:n,networkDetails:_};Q&&(ce.response=Q),this.hls.trigger(c.default.ERROR,ce)},U._handlePlaylistLoaded=function(n,_,z,Q){var de=z.type,Y=z.level,ne=z.id,ce=z.levelDetails;if(!ce||!ce.targetduration){this._handleManifestParsingError(n,z,"invalid target duration",Q);return}var ue=$.canHaveQualityLevels(z.type);if(ue)this.hls.trigger(c.default.LEVEL_LOADED,{details:ce,level:Y||0,id:ne||0,stats:_,networkDetails:Q});else switch(de){case g.AUDIO_TRACK:this.hls.trigger(c.default.AUDIO_TRACK_LOADED,{details:ce,id:ne,stats:_,networkDetails:Q});break;case g.SUBTITLE_TRACK:this.hls.trigger(c.default.SUBTITLE_TRACK_LOADED,{details:ce,id:ne,stats:_,networkDetails:Q});break}},$}(u),je=Ke;function Ze(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Be=function(ie){Ze($,ie);function $(R){var n;return n=ie.call(this,R,c.default.FRAG_LOADING)||this,n.loaders={},n}var U=$.prototype;return U.destroy=function(){var n=this.loaders;for(var _ in n){var z=n[_];z&&z.destroy()}this.loaders={},ie.prototype.destroy.call(this)},U.onFragLoading=function(n){var _=n.frag,z=_.type,Q=this.loaders,de=this.hls.config,Y=de.fLoader,ne=de.loader;_.loaded=0;var ce=Q[z];ce&&(d.logger.warn("abort previous fragment loader for type: "+z),ce.abort()),ce=Q[z]=_.loader=de.fLoader?new Y(de):new ne(de);var ue,Ae,Pe;ue={url:_.url,frag:_,responseType:"arraybuffer",progressData:!1};var Ue=_.byteRangeStartOffset,Ye=_.byteRangeEndOffset;Object(y.isFiniteNumber)(Ue)&&Object(y.isFiniteNumber)(Ye)&&(ue.rangeStart=Ue,ue.rangeEnd=Ye),Ae={timeout:de.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:de.fragLoadingMaxRetryTimeout},Pe={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},ce.load(ue,Ae,Pe)},U.loadsuccess=function(n,_,z,Q){Q===void 0&&(Q=null);var de=n.data,Y=z.frag;Y.loader=void 0,this.loaders[Y.type]=void 0,this.hls.trigger(c.default.FRAG_LOADED,{payload:de,frag:Y,stats:_,networkDetails:Q})},U.loaderror=function(n,_,z){z===void 0&&(z=null);var Q=_.frag,de=Q.loader;de&&de.abort(),this.loaders[Q.type]=void 0,this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:_.frag,response:n,networkDetails:z})},U.loadtimeout=function(n,_,z){z===void 0&&(z=null);var Q=_.frag,de=Q.loader;de&&de.abort(),this.loaders[Q.type]=void 0,this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:_.frag,networkDetails:z})},U.loadprogress=function(n,_,z,Q){Q===void 0&&(Q=null);var de=_.frag;de.loaded=n.loaded,this.hls.trigger(c.default.FRAG_LOAD_PROGRESS,{frag:de,stats:n,networkDetails:Q})},$}(u),Oe=Be;function ze(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var We=function(ie){ze($,ie);function $(R){var n;return n=ie.call(this,R,c.default.KEY_LOADING)||this,n.loaders={},n.decryptkey=null,n.decrypturl=null,n}var U=$.prototype;return U.destroy=function(){for(var n in this.loaders){var _=this.loaders[n];_&&_.destroy()}this.loaders={},ie.prototype.destroy.call(this)},U.onKeyLoading=function(n){var _=n.frag,z=_.type,Q=this.loaders[z];if(!_.decryptdata){d.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var de=_.decryptdata.uri;if(de!==this.decrypturl||this.decryptkey===null){var Y=this.hls.config;if(Q&&(d.logger.warn("abort previous key loader for type:"+z),Q.abort()),!de){d.logger.warn("key uri is falsy");return}_.loader=this.loaders[z]=new Y.loader(Y),this.decrypturl=de,this.decryptkey=null;var ne={url:de,frag:_,responseType:"arraybuffer"},ce={timeout:Y.fragLoadingTimeOut,maxRetry:0,retryDelay:Y.fragLoadingRetryDelay,maxRetryDelay:Y.fragLoadingMaxRetryTimeout},ue={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};_.loader.load(ne,ce,ue)}else this.decryptkey&&(_.decryptdata.key=this.decryptkey,this.hls.trigger(c.default.KEY_LOADED,{frag:_}))},U.loadsuccess=function(n,_,z){var Q=z.frag;if(!Q.decryptdata){d.logger.error("after key load, decryptdata unset");return}this.decryptkey=Q.decryptdata.key=new Uint8Array(n.data),Q.loader=void 0,delete this.loaders[Q.type],this.hls.trigger(c.default.KEY_LOADED,{frag:Q})},U.loaderror=function(n,_){var z=_.frag,Q=z.loader;Q&&Q.abort(),delete this.loaders[z.type],this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:z,response:n})},U.loadtimeout=function(n,_){var z=_.frag,Q=z.loader;Q&&Q.abort(),delete this.loaders[z.type],this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:z})},$}(u),gt=We;function at(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var _e={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Me=function(ie){at($,ie);function $(R){var n;return n=ie.call(this,R,c.default.BUFFER_APPENDED,c.default.FRAG_BUFFERED,c.default.FRAG_LOADED)||this,n.bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=R.config,n}var U=$.prototype;return U.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,u.prototype.destroy.call(this),ie.prototype.destroy.call(this)},U.getBufferedFrag=function(n,_){var z=this.fragments,Q=Object.keys(z).filter(function(Y){var ne=z[Y];if(ne.body.type!==_||!ne.buffered)return!1;var ce=ne.body;return ce.startPTS<=n&&n<=ce.endPTS});if(Q.length===0)return null;var de=Q.pop();return z[de].body},U.detectEvictedFragments=function(n,_){var z=this,Q,de;Object.keys(this.fragments).forEach(function(Y){var ne=z.fragments[Y];if(ne.buffered===!0){var ce=ne.range[n];if(ce){Q=ce.time;for(var ue=0;ue<Q.length;ue++)if(de=Q[ue],z.isTimeBuffered(de.startPTS,de.endPTS,_)===!1){z.removeFragment(ne.body);break}}}})},U.detectPartialFragments=function(n){var _=this,z=this.getFragmentKey(n),Q=this.fragments[z];Q&&(Q.buffered=!0,Object.keys(this.timeRanges).forEach(function(de){if(n.hasElementaryStream(de)){var Y=_.timeRanges[de];Q.range[de]=_.getBufferedTimes(n.startPTS,n.endPTS,Y)}}))},U.getBufferedTimes=function(n,_,z){for(var Q=[],de,Y,ne=!1,ce=0;ce<z.length;ce++)if(de=z.start(ce)-this.bufferPadding,Y=z.end(ce)+this.bufferPadding,n>=de&&_<=Y){Q.push({startPTS:Math.max(n,z.start(ce)),endPTS:Math.min(_,z.end(ce))});break}else if(n<Y&&_>de)Q.push({startPTS:Math.max(n,z.start(ce)),endPTS:Math.min(_,z.end(ce))}),ne=!0;else if(_<=de)break;return{time:Q,partial:ne}},U.getFragmentKey=function(n){return n.type+"_"+n.level+"_"+n.urlId+"_"+n.sn},U.getPartialFragment=function(n){var _=this,z,Q,de,Y=null,ne=0;return Object.keys(this.fragments).forEach(function(ce){var ue=_.fragments[ce];_.isPartial(ue)&&(Q=ue.body.startPTS-_.bufferPadding,de=ue.body.endPTS+_.bufferPadding,n>=Q&&n<=de&&(z=Math.min(n-Q,de-n),ne<=z&&(Y=ue.body,ne=z)))}),Y},U.getState=function(n){var _=this.getFragmentKey(n),z=this.fragments[_],Q=_e.NOT_LOADED;return z!==void 0&&(z.buffered?this.isPartial(z)===!0?Q=_e.PARTIAL:Q=_e.OK:Q=_e.APPENDING),Q},U.isPartial=function(n){return n.buffered===!0&&(n.range.video!==void 0&&n.range.video.partial===!0||n.range.audio!==void 0&&n.range.audio.partial===!0)},U.isTimeBuffered=function(n,_,z){for(var Q,de,Y=0;Y<z.length;Y++){if(Q=z.start(Y)-this.bufferPadding,de=z.end(Y)+this.bufferPadding,n>=Q&&_<=de)return!0;if(_<=Q)return!1}return!1},U.onFragLoaded=function(n){var _=n.frag;!Object(y.isFiniteNumber)(_.sn)||_.bitrateTest||(this.fragments[this.getFragmentKey(_)]={body:_,range:Object.create(null),buffered:!1})},U.onBufferAppended=function(n){var _=this;this.timeRanges=n.timeRanges,Object.keys(this.timeRanges).forEach(function(z){var Q=_.timeRanges[z];_.detectEvictedFragments(z,Q)})},U.onFragBuffered=function(n){this.detectPartialFragments(n.frag)},U.hasFragment=function(n){var _=this.getFragmentKey(n);return this.fragments[_]!==void 0},U.removeFragment=function(n){var _=this.getFragmentKey(n);delete this.fragments[_]},U.removeAllFragments=function(){this.fragments=Object.create(null)},$}(u),H={search:function($,U){for(var R=0,n=$.length-1,_=null,z=null;R<=n;){_=(R+n)/2|0,z=$[_];var Q=U(z);if(Q>0)R=_+1;else if(Q<0)n=_-1;else return z}return null}},m=H,F=function(){function ie(){}return ie.isBuffered=function(U,R){try{if(U){for(var n=U.buffered,_=0;_<n.length;_++)if(R>=n.start(_)&&R<=n.end(_))return!0}}catch{}return!1},ie.bufferInfo=function(U,R,n){try{if(U){var _=U.buffered,z=[],Q;for(Q=0;Q<_.length;Q++)z.push({start:_.start(Q),end:_.end(Q)});return this.bufferedInfo(z,R,n)}}catch{}return{len:0,start:R,end:R,nextStart:void 0}},ie.bufferedInfo=function(U,R,n){U.sort(function(Ye,tt){var ct=Ye.start-tt.start;return ct||tt.end-Ye.end});var _=[];if(n)for(var z=0;z<U.length;z++){var Q=_.length;if(Q){var de=_[Q-1].end;U[z].start-de<n?U[z].end>de&&(_[Q-1].end=U[z].end):_.push(U[z])}else _.push(U[z])}else _=U;for(var Y=0,ne,ce=R,ue=R,Ae=0;Ae<_.length;Ae++){var Pe=_[Ae].start,Ue=_[Ae].end;if(R+n>=Pe&&R<Ue)ce=Pe,ue=Ue,Y=ue-R;else if(R+n<Pe){ne=Pe;break}}return{len:Y,start:ce,end:ue,nextStart:ne}},ie}(),X=f("./node_modules/eventemitter3/index.js"),le=f("./node_modules/webworkify-webpack/index.js"),ve=f("./src/demux/demuxer-inline.js");function Se(){return window.MediaSource||window.WebKitMediaSource}var ye=f("./src/utils/get-self-scope.js");function Re(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Ie=function(ie){Re($,ie);function $(){return ie.apply(this,arguments)||this}var U=$.prototype;return U.trigger=function(n){for(var _=arguments.length,z=new Array(_>1?_-1:0),Q=1;Q<_;Q++)z[Q-1]=arguments[Q];this.emit.apply(this,[n,n].concat(z))},$}(X.EventEmitter),ke=Object(ye.getSelfScope)(),$e=Se()||{isTypeSupported:function(){return!1}},qe=function(){function ie(U,R){var n=this;this.hls=U,this.id=R;var _=this.observer=new Ie,z=U.config,Q=function(ue,Ae){Ae=Ae||{},Ae.frag=n.frag,Ae.id=n.id,U.trigger(ue,Ae)};_.on(c.default.FRAG_DECRYPTED,Q),_.on(c.default.FRAG_PARSING_INIT_SEGMENT,Q),_.on(c.default.FRAG_PARSING_DATA,Q),_.on(c.default.FRAG_PARSED,Q),_.on(c.default.ERROR,Q),_.on(c.default.FRAG_PARSING_METADATA,Q),_.on(c.default.FRAG_PARSING_USERDATA,Q),_.on(c.default.INIT_PTS_FOUND,Q);var de={mp4:$e.isTypeSupported("video/mp4"),mpeg:$e.isTypeSupported("audio/mpeg"),mp3:$e.isTypeSupported('audio/mp4; codecs="mp3"')},Y=navigator.vendor;if(z.enableWorker&&typeof Worker<"u"){d.logger.log("demuxing in webworker");var ne;try{ne=this.w=le("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),ne.addEventListener("message",this.onwmsg),ne.onerror=function(ce){U.trigger(c.default.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:ce.message+" ("+ce.filename+":"+ce.lineno+")"}})},ne.postMessage({cmd:"init",typeSupported:de,vendor:Y,id:R,config:JSON.stringify(z)})}catch(ce){d.logger.warn("Error in worker:",ce),d.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),ne&&ke.URL.revokeObjectURL(ne.objectURL),this.demuxer=new ve.default(_,de,z,Y),this.w=void 0}}else this.demuxer=new ve.default(_,de,z,Y)}var $=ie.prototype;return $.destroy=function(){var R=this.w;if(R)R.removeEventListener("message",this.onwmsg),R.terminate(),this.w=null;else{var n=this.demuxer;n&&(n.destroy(),this.demuxer=null)}var _=this.observer;_&&(_.removeAllListeners(),this.observer=null)},$.push=function(R,n,_,z,Q,de,Y,ne){var ce=this.w,ue=Object(y.isFiniteNumber)(Q.startPTS)?Q.startPTS:Q.start,Ae=Q.decryptdata,Pe=this.frag,Ue=!(Pe&&Q.cc===Pe.cc),Ye=!(Pe&&Q.level===Pe.level),tt=Pe&&Q.sn===Pe.sn+1,ct=!Ye&&tt;if(Ue&&d.logger.log(this.id+":discontinuity detected"),Ye&&d.logger.log(this.id+":switch detected"),this.frag=Q,ce)ce.postMessage({cmd:"demux",data:R,decryptdata:Ae,initSegment:n,audioCodec:_,videoCodec:z,timeOffset:ue,discontinuity:Ue,trackSwitch:Ye,contiguous:ct,duration:de,accurateTimeOffset:Y,defaultInitPTS:ne},R instanceof ArrayBuffer?[R]:[]);else{var st=this.demuxer;st&&st.push(R,Ae,n,_,z,ue,Ue,Ye,ct,de,Y,ne)}},$.onWorkerMessage=function(R){var n=R.data,_=this.hls;switch(n.event){case"init":ke.URL.revokeObjectURL(this.w.objectURL);break;case c.default.FRAG_PARSING_DATA:n.data.data1=new Uint8Array(n.data1),n.data2&&(n.data.data2=new Uint8Array(n.data2));default:n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,_.trigger(n.event,n.data);break}},ie}(),lt=qe;function nt(ie,$,U){switch($){case"audio":ie.audioGroupIds||(ie.audioGroupIds=[]),ie.audioGroupIds.push(U);break;case"text":ie.textGroupIds||(ie.textGroupIds=[]),ie.textGroupIds.push(U);break}}function ft(ie,$,U){var R=ie[$],n=ie[U],_=n.startPTS;Object(y.isFiniteNumber)(_)?U>$?(R.duration=_-R.start,R.duration<0&&d.logger.warn("negative duration computed for frag "+R.sn+",level "+R.level+", there should be some duration drift between playlist and fragment!")):(n.duration=R.start-_,n.duration<0&&d.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):U>$?n.start=R.start+R.duration:n.start=Math.max(R.start-n.duration,0)}function _t(ie,$,U,R,n,_){var z=U;if(Object(y.isFiniteNumber)($.startPTS)){var Q=Math.abs($.startPTS-U);Object(y.isFiniteNumber)($.deltaPTS)?$.deltaPTS=Math.max(Q,$.deltaPTS):$.deltaPTS=Q,z=Math.max(U,$.startPTS),U=Math.min(U,$.startPTS),R=Math.max(R,$.endPTS),n=Math.min(n,$.startDTS),_=Math.max(_,$.endDTS)}var de=U-$.start;$.start=$.startPTS=U,$.maxStartPTS=z,$.endPTS=R,$.startDTS=n,$.endDTS=_,$.duration=R-U;var Y=$.sn;if(!ie||Y<ie.startSN||Y>ie.endSN)return 0;var ne,ce,ue;for(ne=Y-ie.startSN,ce=ie.fragments,ce[ne]=$,ue=ne;ue>0;ue--)ft(ce,ue,ue-1);for(ue=ne;ue<ce.length-1;ue++)ft(ce,ue,ue+1);return ie.PTSKnown=!0,de}function Ct(ie,$){$.initSegment&&ie.initSegment&&($.initSegment=ie.initSegment);var U=0,R;if(Gt(ie,$,function(z,Q){U=z.cc-Q.cc,Object(y.isFiniteNumber)(z.startPTS)&&(Q.start=Q.startPTS=z.startPTS,Q.endPTS=z.endPTS,Q.duration=z.duration,Q.backtracked=z.backtracked,Q.dropped=z.dropped,R=Q),$.PTSKnown=!0}),!!$.PTSKnown){if(U){d.logger.log("discontinuity sliding from playlist, take drift into account");for(var n=$.fragments,_=0;_<n.length;_++)n[_].cc+=U}R?_t($,R,R.startPTS,R.endPTS,R.startDTS,R.endDTS):mt(ie,$),$.PTSKnown=ie.PTSKnown}}function Yt(ie,$,U){U===void 0&&(U=0);var R=-1;Gt(ie,$,function(z,Q,de){Q.start=z.start,R=de});var n=$.fragments;if(R<0){n.forEach(function(z){z.start+=U});return}for(var _=R+1;_<n.length;_++)n[_].start=n[_-1].start+n[_-1].duration}function Gt(ie,$,U){if(!(!ie||!$))for(var R=Math.max(ie.startSN,$.startSN)-$.startSN,n=Math.min(ie.endSN,$.endSN)-$.startSN,_=$.startSN-ie.startSN,z=R;z<=n;z++){var Q=ie.fragments[_+z],de=$.fragments[z];if(!Q||!de)break;U(Q,de,z)}}function mt(ie,$){var U=$.startSN-ie.startSN,R=ie.fragments,n=$.fragments;if(!(U<0||U>R.length))for(var _=0;_<n.length;_++)n[_].start+=R[U].start}function jt(ie,$,U){var R=1e3*($.averagetargetduration?$.averagetargetduration:$.targetduration),n=R/2;return ie&&$.endSN===ie.endSN&&(R=n),U&&(R=Math.max(n,R-(window.performance.now()-U))),Math.round(R)}var St={toString:function($){for(var U="",R=$.length,n=0;n<R;n++)U+="["+$.start(n).toFixed(3)+","+$.end(n).toFixed(3)+"]";return U}},Zt=St;function er(ie,$){for(var U=null,R=0;R<ie.length;R+=1){var n=ie[R];if(n&&n.cc===$){U=n;break}}return U}function Qt(ie,$){return m.search(ie,function(U){return U.cc<$?1:U.cc>$?-1:0})}function ar(ie,$,U){var R=!1;return $&&$.details&&U&&(U.endCC>U.startCC||ie&&ie.cc<U.startCC)&&(R=!0),R}function ur(ie,$){var U=ie.fragments,R=$.fragments;if(!R.length||!U.length){d.logger.log("No fragments to align");return}var n=er(U,R[0].cc);if(!n||n&&!n.startPTS){d.logger.log("No frag in previous level to align on");return}return n}function yr(ie,$){$.fragments.forEach(function(U){if(U){var R=U.start+ie;U.start=U.startPTS=R,U.endPTS=R+U.duration}}),$.PTSKnown=!0}function dr(ie,$,U){Er(ie,U,$),!U.PTSKnown&&$&&mr(U,$.details)}function Er(ie,$,U){if(ar(ie,U,$)){var R=ur(U.details,$);R&&(d.logger.log("Adjusting PTS using last level due to CC increase within current level"),yr(R.start,$))}}function mr(ie,$){if($&&$.fragments.length){if(!ie.hasProgramDateTime||!$.hasProgramDateTime)return;var U=$.fragments[0].programDateTime,R=ie.fragments[0].programDateTime,n=(R-U)/1e3+$.fragments[0].start;Object(y.isFiniteNumber)(n)&&(d.logger.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),yr(n,ie))}}function cr(ie,$,U){if($===null||!Array.isArray(ie)||!ie.length||!Object(y.isFiniteNumber)($))return null;var R=ie[0].programDateTime;if($<(R||0))return null;var n=ie[ie.length-1].endProgramDateTime;if($>=(n||0))return null;U=U||0;for(var _=0;_<ie.length;++_){var z=ie[_];if(Gr($,U,z))return z}return null}function hr(ie,$,U,R){U===void 0&&(U=0),R===void 0&&(R=0);var n=ie?$[ie.sn-$[0].sn+1]:null;return n&&!qt(U,R,n)?n:m.search($,qt.bind(null,U,R))}function qt(ie,$,U){ie===void 0&&(ie=0),$===void 0&&($=0);var R=Math.min($,U.duration+(U.deltaPTS?U.deltaPTS:0));return U.start+U.duration-R<=ie?1:U.start-R>ie&&U.start?-1:0}function Gr(ie,$,U){var R=Math.min($,U.duration+(U.deltaPTS?U.deltaPTS:0))*1e3,n=U.endProgramDateTime||0;return n-R>ie}var xr=250,sr=2,br=.1,_r=.05,kr=function(){function ie(U,R,n,_){this.config=U,this.media=R,this.fragmentTracker=n,this.hls=_,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var $=ie.prototype;return $.poll=function(R){var n=this.config,_=this.media,z=this.stalled,Q=_.currentTime,de=_.seeking,Y=this.seeking&&!de,ne=!this.seeking&&de;if(this.seeking=de,Q!==R){if(this.moved=!0,z!==null){if(this.stallReported){var ce=self.performance.now()-z;d.logger.warn("playback not stuck anymore @"+Q+", after "+Math.round(ce)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((ne||Y)&&(this.stalled=null),!(_.paused||_.ended||_.playbackRate===0||!_.buffered.length)){var ue=F.bufferInfo(_,Q,0),Ae=ue.len>0,Pe=ue.nextStart||0;if(!(!Ae&&!Pe)){if(de){var Ue=ue.len>sr,Ye=!Pe||Pe-Q>sr;if(Ue||Ye)return;this.moved=!1}if(!this.moved&&this.stalled){var tt=Math.max(Pe,ue.start||0)-Q;if(tt>0&&tt<=sr){this._trySkipBufferHole(null);return}}var ct=self.performance.now();if(z===null){this.stalled=ct;return}var st=ct-z;!de&&st>=xr&&this._reportStall(ue.len);var Xe=F.bufferInfo(_,Q,n.maxBufferHole);this._tryFixBufferStall(Xe,st)}}},$._tryFixBufferStall=function(R,n){var _=this.config,z=this.fragmentTracker,Q=this.media,de=Q.currentTime,Y=z.getPartialFragment(de);if(Y){var ne=this._trySkipBufferHole(Y);if(ne)return}R.len>_.maxBufferHole&&n>_.highBufferWatchdogPeriod*1e3&&(d.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},$._reportStall=function(R){var n=this.hls,_=this.media,z=this.stallReported;z||(this.stallReported=!0,d.logger.warn("Playback stalling at @"+_.currentTime+" due to low buffer"),n.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:R}))},$._trySkipBufferHole=function(R){for(var n=this.config,_=this.hls,z=this.media,Q=z.currentTime,de=0,Y=0;Y<z.buffered.length;Y++){var ne=z.buffered.start(Y);if(Q+n.maxBufferHole>=de&&Q<ne){var ce=Math.max(ne+_r,z.currentTime+br);return d.logger.warn("skipping hole, adjusting currentTime from "+Q+" to "+ce),this.moved=!0,this.stalled=null,z.currentTime=ce,R&&_.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+Q+" to "+ce,frag:R}),ce}de=z.buffered.end(Y)}return 0},$._tryNudgeBuffer=function(){var R=this.config,n=this.hls,_=this.media,z=_.currentTime,Q=(this.nudgeRetry||0)+1;if(this.nudgeRetry=Q,Q<R.nudgeMaxRetry){var de=z+Q*R.nudgeOffset;d.logger.warn("Nudging 'currentTime' from "+z+" to "+de),_.currentTime=de,n.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else d.logger.error("Playhead still not moving while enough data buffered @"+z+" after "+R.nudgeMaxRetry+" nudges"),n.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},ie}();function Vr(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function Nr(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Dr=function(ie){Nr($,ie);function $(R){for(var n,_=arguments.length,z=new Array(_>1?_-1:0),Q=1;Q<_;Q++)z[Q-1]=arguments[Q];return n=ie.call.apply(ie,[this,R].concat(z))||this,n._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(Vr(n)),n}var U=$.prototype;return U.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},U.hasInterval=function(){return!!this._tickInterval},U.hasNextTick=function(){return!!this._tickTimer},U.setInterval=function(n){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,n),!0)},U.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},U.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},U.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},U.doTick=function(){},$}(u);function Fr(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Qe={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},Lr=function(ie){Fr($,ie);function $(){return ie.apply(this,arguments)||this}var U=$.prototype;return U.doTick=function(){},U.startLoad=function(){},U.stopLoad=function(){var n=this.fragCurrent;n&&(n.loader&&n.loader.abort(),this.fragmentTracker.removeFragment(n)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Qe.STOPPED},U._streamEnded=function(n,_){var z=this.fragCurrent,Q=this.fragmentTracker;if(!_.live&&z&&!z.backtracked&&z.sn===_.endSN&&!n.nextStart){var de=Q.getState(z);return de===_e.PARTIAL||de===_e.OK}return!1},U.onMediaSeeking=function(){var n=this.config,_=this.media,z=this.mediaBuffer,Q=this.state,de=_?_.currentTime:null,Y=F.bufferInfo(z||_,de,this.config.maxBufferHole);if(Object(y.isFiniteNumber)(de)&&d.logger.log("media seeking to "+de.toFixed(3)),Q===Qe.FRAG_LOADING){var ne=this.fragCurrent;if(Y.len===0&&ne){var ce=n.maxFragLookUpTolerance,ue=ne.start-ce,Ae=ne.start+ne.duration+ce;de<ue||de>Ae?(ne.loader&&(d.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),ne.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=Qe.IDLE):d.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else Q===Qe.ENDED&&(Y.len===0&&(this.fragPrevious=null,this.fragCurrent=null),this.state=Qe.IDLE);_&&(this.lastCurrentTime=de),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=de),this.tick()},U.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},U.onHandlerDestroying=function(){this.stopLoad(),ie.prototype.onHandlerDestroying.call(this)},U.onHandlerDestroyed=function(){this.state=Qe.STOPPED,this.fragmentTracker=null},U.computeLivePosition=function(n,_){var z=this.config.liveSyncDuration!==void 0?this.config.liveSyncDuration:this.config.liveSyncDurationCount*_.targetduration;return n+Math.max(0,_.totalduration-z)},$}(Dr);function Cr(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function Rr(ie,$,U){return $&&Cr(ie.prototype,$),ie}function jr(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var zr=100,Ir=function(ie){jr($,ie);function $(R,n){var _;return _=ie.call(this,R,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADING,c.default.MANIFEST_PARSED,c.default.LEVEL_LOADED,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.FRAG_LOAD_EMERGENCY_ABORTED,c.default.FRAG_PARSING_INIT_SEGMENT,c.default.FRAG_PARSING_DATA,c.default.FRAG_PARSED,c.default.ERROR,c.default.AUDIO_TRACK_SWITCHING,c.default.AUDIO_TRACK_SWITCHED,c.default.BUFFER_CREATED,c.default.BUFFER_APPENDED,c.default.BUFFER_FLUSHED)||this,_.fragmentTracker=n,_.config=R.config,_.audioCodecSwap=!1,_._state=Qe.STOPPED,_.stallReported=!1,_.gapController=null,_.altAudio=!1,_}var U=$.prototype;return U.startLoad=function(n){if(this.levels){var _=this.lastCurrentTime,z=this.hls;if(this.stopLoad(),this.setInterval(zr),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var Q=z.startLevel;Q===-1&&(Q=0,this.bitrateTest=!0),this.level=z.nextLoadLevel=Q,this.loadedmetadata=!1}_>0&&n===-1&&(d.logger.log("override startPosition with lastCurrentTime @"+_.toFixed(3)),n=_),this.state=Qe.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}else this.forceStartLoad=!0,this.state=Qe.STOPPED},U.stopLoad=function(){this.forceStartLoad=!1,ie.prototype.stopLoad.call(this)},U.doTick=function(){switch(this.state){case Qe.BUFFER_FLUSHING:this.fragLoadError=0;break;case Qe.IDLE:this._doTickIdle();break;case Qe.WAITING_LEVEL:var n=this.levels[this.level];n&&n.details&&(this.state=Qe.IDLE);break;case Qe.FRAG_LOADING_WAITING_RETRY:var _=window.performance.now(),z=this.retryDate;(!z||_>=z||this.media&&this.media.seeking)&&(d.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=Qe.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()},U._doTickIdle=function(){var n=this.hls,_=n.config,z=this.media;if(!(this.levelLastLoaded===void 0||!z&&(this.startFragRequested||!_.startFragPrefetch))){var Q;this.loadedmetadata?Q=z.currentTime:Q=this.nextLoadPosition;var de=n.nextLoadLevel,Y=this.levels[de];if(Y){var ne=Y.bitrate,ce;ne?ce=Math.max(8*_.maxBufferSize/ne,_.maxBufferLength):ce=_.maxBufferLength,ce=Math.min(ce,_.maxMaxBufferLength);var ue=F.bufferInfo(this.mediaBuffer?this.mediaBuffer:z,Q,_.maxBufferHole),Ae=ue.len;if(!(Ae>=ce)){d.logger.trace("buffer length of "+Ae.toFixed(3)+" is below max of "+ce.toFixed(3)+". checking for more payload ..."),this.level=n.nextLoadLevel=de;var Pe=Y.details;if(!Pe||Pe.live&&this.levelLastLoaded!==de){this.state=Qe.WAITING_LEVEL;return}if(this._streamEnded(ue,Pe)){var Ue={};this.altAudio&&(Ue.type="video"),this.hls.trigger(c.default.BUFFER_EOS,Ue),this.state=Qe.ENDED;return}this._fetchPayloadOrEos(Q,ue,Pe)}}}},U._fetchPayloadOrEos=function(n,_,z){var Q=this.fragPrevious,de=this.level,Y=z.fragments,ne=Y.length;if(ne!==0){var ce=Y[0].start,ue=Y[ne-1].start+Y[ne-1].duration,Ae=_.end,Pe;if(z.initSegment&&!z.initSegment.data)Pe=z.initSegment;else if(z.live){var Ue=this.config.initialLiveManifestSize;if(ne<Ue){d.logger.warn("Can not start playback of a level, reason: not enough fragments "+ne+" < "+Ue);return}if(Pe=this._ensureFragmentAtLivePoint(z,Ae,ce,ue,Q,Y,ne),Pe===null)return}else Ae<ce&&(Pe=Y[0]);Pe||(Pe=this._findFragment(ce,Q,ne,Y,Ae,ue,z)),Pe&&(Pe.encrypted?(d.logger.log("Loading key for "+Pe.sn+" of ["+z.startSN+" ,"+z.endSN+"],level "+de),this._loadKey(Pe)):(d.logger.log("Loading "+Pe.sn+" of ["+z.startSN+" ,"+z.endSN+"],level "+de+", currentTime:"+n.toFixed(3)+",bufferEnd:"+Ae.toFixed(3)),this._loadFragment(Pe)))}},U._ensureFragmentAtLivePoint=function(n,_,z,Q,de,Y,ne){var ce=this.hls.config,ue=this.media,Ae,Pe=ce.liveMaxLatencyDuration!==void 0?ce.liveMaxLatencyDuration:ce.liveMaxLatencyDurationCount*n.targetduration;if(_<Math.max(z-ce.maxFragLookUpTolerance,Q-Pe)){var Ue=this.liveSyncPosition=this.computeLivePosition(z,n);_=Ue,ue&&!ue.paused&&ue.readyState&&ue.duration>Ue&&Ue>ue.currentTime&&(d.logger.log("buffer end: "+_.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+Ue.toFixed(3)),ue.currentTime=Ue),this.nextLoadPosition=Ue}if(n.PTSKnown&&_>Q&&ue&&ue.readyState)return null;if(this.startFragRequested&&!n.PTSKnown){if(de)if(n.hasProgramDateTime)d.logger.log("live playlist, switching playlist, load frag with same PDT: "+de.programDateTime),Ae=cr(Y,de.endProgramDateTime,ce.maxFragLookUpTolerance);else{var Ye=de.sn+1;if(Ye>=n.startSN&&Ye<=n.endSN){var tt=Y[Ye-n.startSN];de.cc===tt.cc&&(Ae=tt,d.logger.log("live playlist, switching playlist, load frag with next SN: "+Ae.sn))}Ae||(Ae=m.search(Y,function(ct){return de.cc-ct.cc}),Ae&&d.logger.log("live playlist, switching playlist, load frag with same CC: "+Ae.sn))}Ae||(Ae=Y[Math.min(ne-1,Math.round(ne/2))],d.logger.log("live playlist, switching playlist, unknown, load middle frag : "+Ae.sn))}return Ae},U._findFragment=function(n,_,z,Q,de,Y,ne){var ce=this.hls.config,ue;if(de<Y){var Ae=de>Y-ce.maxFragLookUpTolerance?0:ce.maxFragLookUpTolerance;ue=hr(_,Q,de,Ae)}else ue=Q[z-1];if(ue){var Pe=ue.sn-ne.startSN,Ue=_&&ue.level===_.level,Ye=Q[Pe-1],tt=Q[Pe+1];if(_&&ue.sn===_.sn)if(Ue&&!ue.backtracked)if(ue.sn<ne.endSN){var ct=_.deltaPTS;ct&&ct>ce.maxBufferHole&&_.dropped&&Pe?(ue=Ye,d.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(ue=tt,d.logger.log("Re-loading fragment with SN: "+ue.sn))}else ue=null;else ue.backtracked&&(tt&&tt.backtracked?(d.logger.warn("Already backtracked from fragment "+tt.sn+", will not backtrack to fragment "+ue.sn+". Loading fragment "+tt.sn),ue=tt):(d.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),ue.dropped=0,Ye?(ue=Ye,ue.backtracked=!0):Pe&&(ue=null)))}return ue},U._loadKey=function(n){this.state=Qe.KEY_LOADING,this.hls.trigger(c.default.KEY_LOADING,{frag:n})},U._loadFragment=function(n){var _=this.fragmentTracker.getState(n);this.fragCurrent=n,n.sn!=="initSegment"&&(this.startFragRequested=!0),Object(y.isFiniteNumber)(n.sn)&&!n.bitrateTest&&(this.nextLoadPosition=n.start+n.duration),n.backtracked||_===_e.NOT_LOADED||_===_e.PARTIAL?(n.autoLevel=this.hls.autoLevelEnabled,n.bitrateTest=this.bitrateTest,this.hls.trigger(c.default.FRAG_LOADING,{frag:n}),this.demuxer||(this.demuxer=new lt(this.hls,"main")),this.state=Qe.FRAG_LOADING):_===_e.APPENDING&&this._reduceMaxBufferLength(n.duration)&&this.fragmentTracker.removeFragment(n)},U.getBufferedFrag=function(n){return this.fragmentTracker.getBufferedFrag(n,s.MAIN)},U.followingBufferedFrag=function(n){return n?this.getBufferedFrag(n.endPTS+.5):null},U._checkFragmentChanged=function(){var n,_,z=this.media;if(z&&z.readyState&&z.seeking===!1&&(_=z.currentTime,_>this.lastCurrentTime&&(this.lastCurrentTime=_),F.isBuffered(z,_)?n=this.getBufferedFrag(_):F.isBuffered(z,_+.1)&&(n=this.getBufferedFrag(_+.1)),n)){var Q=n;if(Q!==this.fragPlaying){this.hls.trigger(c.default.FRAG_CHANGED,{frag:Q});var de=Q.level;(!this.fragPlaying||this.fragPlaying.level!==de)&&this.hls.trigger(c.default.LEVEL_SWITCHED,{level:de}),this.fragPlaying=Q}}},U.immediateLevelSwitch=function(){if(d.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var n=this.media,_;n?(_=n.paused,n.pause()):_=!0,this.previouslyPaused=_}var z=this.fragCurrent;z&&z.loader&&z.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},U.immediateLevelSwitchEnd=function(){var n=this.media;n&&n.buffered.length&&(this.immediateSwitch=!1,F.isBuffered(n,n.currentTime)&&(n.currentTime-=1e-4),this.previouslyPaused||n.play())},U.nextLevelSwitch=function(){var n=this.media;if(n&&n.readyState){var _,z,Q;if(z=this.getBufferedFrag(n.currentTime),z&&z.startPTS>1&&this.flushMainBuffer(0,z.startPTS-1),n.paused)_=0;else{var de=this.hls.nextLoadLevel,Y=this.levels[de],ne=this.fragLastKbps;ne&&this.fragCurrent?_=this.fragCurrent.duration*Y.bitrate/(1e3*ne)+1:_=0}if(Q=this.getBufferedFrag(n.currentTime+_),Q&&(Q=this.followingBufferedFrag(Q),Q)){var ce=this.fragCurrent;ce&&ce.loader&&ce.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(Q.maxStartPTS,Number.POSITIVE_INFINITY)}}},U.flushMainBuffer=function(n,_){this.state=Qe.BUFFER_FLUSHING;var z={startOffset:n,endOffset:_};this.altAudio&&(z.type="video"),this.hls.trigger(c.default.BUFFER_FLUSHING,z)},U.onMediaAttached=function(n){var _=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),_.addEventListener("seeking",this.onvseeking),_.addEventListener("seeked",this.onvseeked),_.addEventListener("ended",this.onvended);var z=this.config;this.levels&&z.autoStartLoad&&this.hls.startLoad(z.startPosition),this.gapController=new kr(z,_,this.fragmentTracker,this.hls)},U.onMediaDetaching=function(){var n=this.media;n&&n.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var _=this.levels;_&&_.forEach(function(z){z.details&&z.details.fragments.forEach(function(Q){Q.backtracked=void 0})}),n&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("seeked",this.onvseeked),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},U.onMediaSeeked=function(){var n=this.media,_=n?n.currentTime:void 0;Object(y.isFiniteNumber)(_)&&d.logger.log("media seeked to "+_.toFixed(3)),this.tick()},U.onManifestLoading=function(){d.logger.log("trigger BUFFER_RESET"),this.hls.trigger(c.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},U.onManifestParsed=function(n){var _=!1,z=!1,Q;n.levels.forEach(function(Y){Q=Y.audioCodec,Q&&(Q.indexOf("mp4a.40.2")!==-1&&(_=!0),Q.indexOf("mp4a.40.5")!==-1&&(z=!0))}),this.audioCodecSwitch=_&&z,this.audioCodecSwitch&&d.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=n.altAudio,this.levels=n.levels,this.startFragRequested=!1;var de=this.config;(de.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(de.startPosition)},U.onLevelLoaded=function(n){var _=n.details,z=n.level,Q=this.levels[this.levelLastLoaded],de=this.levels[z],Y=_.totalduration,ne=0;if(d.logger.log("level "+z+" loaded ["+_.startSN+","+_.endSN+"],duration:"+Y),_.live){var ce=de.details;ce&&_.fragments.length>0?(Ct(ce,_),ne=_.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(ne,ce),_.PTSKnown&&Object(y.isFiniteNumber)(ne)?d.logger.log("live playlist sliding:"+ne.toFixed(3)):(d.logger.log("live playlist - outdated PTS, unknown sliding"),dr(this.fragPrevious,Q,_))):(d.logger.log("live playlist - first load, unknown sliding"),_.PTSKnown=!1,dr(this.fragPrevious,Q,_))}else _.PTSKnown=!1;if(de.details=_,this.levelLastLoaded=z,this.hls.trigger(c.default.LEVEL_UPDATED,{details:_,level:z}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var ue=_.startTimeOffset;Object(y.isFiniteNumber)(ue)?(ue<0&&(d.logger.log("negative start time offset "+ue+", count from end of last fragment"),ue=ne+Y+ue),d.logger.log("start time offset found in playlist, adjust startPosition to "+ue),this.startPosition=ue):_.live?(this.startPosition=this.computeLivePosition(ne,_),d.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Qe.WAITING_LEVEL&&(this.state=Qe.IDLE),this.tick()},U.onKeyLoaded=function(){this.state===Qe.KEY_LOADING&&(this.state=Qe.IDLE,this.tick())},U.onFragLoaded=function(n){var _=this.fragCurrent,z=this.hls,Q=this.levels,de=this.media,Y=n.frag;if(this.state===Qe.FRAG_LOADING&&_&&Y.type==="main"&&Y.level===_.level&&Y.sn===_.sn){var ne=n.stats,ce=Q[_.level],ue=ce.details;if(this.bitrateTest=!1,this.stats=ne,d.logger.log("Loaded "+_.sn+" of ["+ue.startSN+" ,"+ue.endSN+"],level "+_.level),Y.bitrateTest&&z.nextLoadLevel)this.state=Qe.IDLE,this.startFragRequested=!1,ne.tparsed=ne.tbuffered=window.performance.now(),z.trigger(c.default.FRAG_BUFFERED,{stats:ne,frag:_,id:"main"}),this.tick();else if(Y.sn==="initSegment")this.state=Qe.IDLE,ne.tparsed=ne.tbuffered=window.performance.now(),ue.initSegment.data=n.payload,z.trigger(c.default.FRAG_BUFFERED,{stats:ne,frag:_,id:"main"}),this.tick();else{d.logger.log("Parsing "+_.sn+" of ["+ue.startSN+" ,"+ue.endSN+"],level "+_.level+", cc "+_.cc),this.state=Qe.PARSING,this.pendingBuffering=!0,this.appended=!1,Y.bitrateTest&&(Y.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:Y}));var Ae=!(de&&de.seeking)&&(ue.PTSKnown||!ue.live),Pe=ue.initSegment?ue.initSegment.data:[],Ue=this._getAudioCodec(ce),Ye=this.demuxer=this.demuxer||new lt(this.hls,"main");Ye.push(n.payload,Pe,Ue,ce.videoCodec,_,ue.totalduration,Ae)}}this.fragLoadError=0},U.onFragParsingInitSegment=function(n){var _=this.fragCurrent,z=n.frag;if(_&&n.id==="main"&&z.sn===_.sn&&z.level===_.level&&this.state===Qe.PARSING){var Q=n.tracks,de,Y;if(Q.audio&&this.altAudio&&delete Q.audio,Y=Q.audio,Y){var ne=this.levels[this.level].audioCodec,ce=navigator.userAgent.toLowerCase();ne&&this.audioCodecSwap&&(d.logger.log("swapping playlist audio codec"),ne.indexOf("mp4a.40.5")!==-1?ne="mp4a.40.2":ne="mp4a.40.5"),this.audioCodecSwitch&&Y.metadata.channelCount!==1&&ce.indexOf("firefox")===-1&&(ne="mp4a.40.5"),ce.indexOf("android")!==-1&&Y.container!=="audio/mpeg"&&(ne="mp4a.40.2",d.logger.log("Android: force audio codec to "+ne)),Y.levelCodec=ne,Y.id=n.id}Y=Q.video,Y&&(Y.levelCodec=this.levels[this.level].videoCodec,Y.id=n.id),this.hls.trigger(c.default.BUFFER_CODECS,Q);for(de in Q){Y=Q[de],d.logger.log("main track:"+de+",container:"+Y.container+",codecs[level/parsed]=["+Y.levelCodec+"/"+Y.codec+"]");var ue=Y.initSegment;ue&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(c.default.BUFFER_APPENDING,{type:de,data:ue,parent:"main",content:"initSegment"}))}this.tick()}},U.onFragParsingData=function(n){var _=this,z=this.fragCurrent,Q=n.frag;if(z&&n.id==="main"&&Q.sn===z.sn&&Q.level===z.level&&!(n.type==="audio"&&this.altAudio)&&this.state===Qe.PARSING){var de=this.levels[this.level],Y=z;if(Object(y.isFiniteNumber)(n.endPTS)||(n.endPTS=n.startPTS+z.duration,n.endDTS=n.startDTS+z.duration),n.hasAudio===!0&&Y.addElementaryStream(D.AUDIO),n.hasVideo===!0&&Y.addElementaryStream(D.VIDEO),d.logger.log("Parsed "+n.type+",PTS:["+n.startPTS.toFixed(3)+","+n.endPTS.toFixed(3)+"],DTS:["+n.startDTS.toFixed(3)+"/"+n.endDTS.toFixed(3)+"],nb:"+n.nb+",dropped:"+(n.dropped||0)),n.type==="video")if(Y.dropped=n.dropped,Y.dropped)if(Y.backtracked)d.logger.warn("Already backtracked on this fragment, appending with the gap",Y.sn);else{var ne=de.details;if(ne&&Y.sn===ne.startSN)d.logger.warn("missing video frame(s) on first frag, appending with gap",Y.sn);else{d.logger.warn("missing video frame(s), backtracking fragment",Y.sn),this.fragmentTracker.removeFragment(Y),Y.backtracked=!0,this.nextLoadPosition=n.startPTS,this.state=Qe.IDLE,this.fragPrevious=Y,this.tick();return}}else Y.backtracked=!1;var ce=_t(de.details,Y,n.startPTS,n.endPTS,n.startDTS,n.endDTS),ue=this.hls;ue.trigger(c.default.LEVEL_PTS_UPDATED,{details:de.details,level:this.level,drift:ce,type:n.type,start:n.startPTS,end:n.endPTS}),[n.data1,n.data2].forEach(function(Ae){Ae&&Ae.length&&_.state===Qe.PARSING&&(_.appended=!0,_.pendingBuffering=!0,ue.trigger(c.default.BUFFER_APPENDING,{type:n.type,data:Ae,parent:"main",content:"data"}))}),this.tick()}},U.onFragParsed=function(n){var _=this.fragCurrent,z=n.frag;_&&n.id==="main"&&z.sn===_.sn&&z.level===_.level&&this.state===Qe.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=Qe.PARSED,this._checkAppendedParsed())},U.onAudioTrackSwitching=function(n){var _=!!n.url,z=n.id;if(!_){if(this.mediaBuffer!==this.media){d.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var Q=this.fragCurrent;Q.loader&&(d.logger.log("switching to main audio track, cancel main fragment load"),Q.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Qe.IDLE}var de=this.hls;de.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),de.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:z}),this.altAudio=!1}},U.onAudioTrackSwitched=function(n){var _=n.id,z=!!this.hls.audioTracks[_].url;if(z){var Q=this.videoBuffer;Q&&this.mediaBuffer!==Q&&(d.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=Q)}this.altAudio=z,this.tick()},U.onBufferCreated=function(n){var _=n.tracks,z,Q,de=!1;for(var Y in _){var ne=_[Y];ne.id==="main"?(Q=Y,z=ne,Y==="video"&&(this.videoBuffer=_[Y].buffer)):de=!0}de&&z?(d.logger.log("alternate track found, use "+Q+".buffered to schedule main fragment loading"),this.mediaBuffer=z.buffer):this.mediaBuffer=this.media},U.onBufferAppended=function(n){if(n.parent==="main"){var _=this.state;(_===Qe.PARSING||_===Qe.PARSED)&&(this.pendingBuffering=n.pending>0,this._checkAppendedParsed())}},U._checkAppendedParsed=function(){if(this.state===Qe.PARSED&&(!this.appended||!this.pendingBuffering)){var n=this.fragCurrent;if(n){var _=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("main buffered : "+Zt.toString(_.buffered)),this.fragPrevious=n;var z=this.stats;z.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*z.total/(z.tbuffered-z.tfirst)),this.hls.trigger(c.default.FRAG_BUFFERED,{stats:z,frag:n,id:"main"}),this.state=Qe.IDLE}this.tick()}},U.onError=function(n){var _=n.frag||this.fragCurrent;if(!(_&&_.type!=="main")){var z=!!this.media&&F.isBuffered(this.media,this.media.currentTime)&&F.isBuffered(this.media,this.media.currentTime+.5);switch(n.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:if(!n.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var Q=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);d.logger.warn("mediaController: frag loading failed, retry in "+Q+" ms"),this.retryDate=window.performance.now()+Q,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Qe.FRAG_LOADING_WAITING_RETRY}else d.logger.error("mediaController: "+n.details+" reaches max retry, redispatch as fatal ..."),n.fatal=!0,this.state=Qe.ERROR;break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Qe.ERROR&&(n.fatal?(this.state=Qe.ERROR,d.logger.warn("streamController: "+n.details+",switch to "+this.state+" state ...")):!n.levelRetry&&this.state===Qe.WAITING_LEVEL&&(this.state=Qe.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:n.parent==="main"&&(this.state===Qe.PARSING||this.state===Qe.PARSED)&&(z?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=Qe.IDLE):(d.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break}}},U._reduceMaxBufferLength=function(n){var _=this.config;return _.maxMaxBufferLength>=n?(_.maxMaxBufferLength/=2,d.logger.warn("main:reduce max buffer length to "+_.maxMaxBufferLength+"s"),!0):!1},U._checkBuffer=function(){var n=this.media;if(!(!n||n.readyState===0)){var _=this.mediaBuffer?this.mediaBuffer:n,z=_.buffered;!this.loadedmetadata&&z.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,z)}},U.onFragLoadEmergencyAborted=function(){this.state=Qe.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},U.onBufferFlushed=function(){var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&this.fragmentTracker.detectEvictedFragments(D.VIDEO,n.buffered),this.state=Qe.IDLE,this.fragPrevious=null},U.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},U._seekToStartPos=function(){var n=this.media,_=n.currentTime,z=n.seeking?_:this.startPosition;_!==z&&z>=0&&(d.logger.log("target start position not buffered, seek to buffered.start(0) "+z+" from current time "+_+" "),n.currentTime=z)},U._getAudioCodec=function(n){var _=this.config.defaultAudioCodec||n.audioCodec;return this.audioCodecSwap&&(d.logger.log("swapping playlist audio codec"),_&&(_.indexOf("mp4a.40.5")!==-1?_="mp4a.40.2":_="mp4a.40.5")),_},Rr($,[{key:"state",set:function(n){if(this.state!==n){var _=this.state;this._state=n,d.logger.log("main stream-controller: "+_+"->"+n),this.hls.trigger(c.default.STREAM_STATE_TRANSITION,{previousState:_,nextState:n})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var n=this.media;if(n){var _=this.getBufferedFrag(n.currentTime);if(_)return _.level}return-1}},{key:"nextBufferedFrag",get:function(){var n=this.media;return n?this.followingBufferedFrag(this.getBufferedFrag(n.currentTime)):null}},{key:"nextLevel",get:function(){var n=this.nextBufferedFrag;return n?n.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(n){this._liveSyncPosition=n}}]),$}(Lr),Xr=Ir;function Zr(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function pr(ie,$,U){return $&&Zr(ie.prototype,$),ie}function wr(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Jr,en=function(ie){wr($,ie);function $(R){var n;return n=ie.call(this,R,c.default.MANIFEST_LOADED,c.default.LEVEL_LOADED,c.default.AUDIO_TRACK_SWITCHED,c.default.FRAG_LOADED,c.default.ERROR)||this,n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Jr=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}var U=$.prototype;return U.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},U.clearTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},U.startLoad=function(){var n=this._levels;this.canload=!0,this.levelRetryCount=0,n&&n.forEach(function(_){_.loadError=0;var z=_.details;z&&z.live&&(_.details=void 0)}),this.timer!==null&&this.loadLevel()},U.stopLoad=function(){this.canload=!1},U.onManifestLoaded=function(n){var _=[],z=[],Q,de={},Y=null,ne=!1,ce=!1;if(n.levels.forEach(function(Ae){var Pe=Ae.attrs;Ae.loadError=0,Ae.fragmentError=!1,ne=ne||!!Ae.videoCodec,ce=ce||!!Ae.audioCodec,Jr&&Ae.audioCodec&&Ae.audioCodec.indexOf("mp4a.40.34")!==-1&&(Ae.audioCodec=void 0),Y=de[Ae.bitrate],Y?Y.url.push(Ae.url):(Ae.url=[Ae.url],Ae.urlId=0,de[Ae.bitrate]=Ae,_.push(Ae)),Pe&&(Pe.AUDIO&&(ce=!0,nt(Y||Ae,"audio",Pe.AUDIO)),Pe.SUBTITLES&&nt(Y||Ae,"text",Pe.SUBTITLES))}),ne&&ce&&(_=_.filter(function(Ae){var Pe=Ae.videoCodec;return!!Pe})),_=_.filter(function(Ae){var Pe=Ae.audioCodec,Ue=Ae.videoCodec;return(!Pe||te(Pe,"audio"))&&(!Ue||te(Ue,"video"))}),n.audioTracks&&(z=n.audioTracks.filter(function(Ae){return!Ae.audioCodec||te(Ae.audioCodec,"audio")}),z.forEach(function(Ae,Pe){Ae.id=Pe})),_.length>0){Q=_[0].bitrate,_.sort(function(Ae,Pe){return Ae.bitrate-Pe.bitrate}),this._levels=_;for(var ue=0;ue<_.length;ue++)if(_[ue].bitrate===Q){this._firstLevel=ue,d.logger.log("manifest loaded,"+_.length+" level(s) found, first bitrate:"+Q);break}this.hls.trigger(c.default.MANIFEST_PARSED,{levels:_,audioTracks:z,firstLevel:this._firstLevel,stats:n.stats,audio:ce,video:ne,altAudio:z.some(function(Ae){return!!Ae.url})})}else this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},U.setLevelInternal=function(n){var _=this._levels,z=this.hls;if(n>=0&&n<_.length){if(this.clearTimer(),this.currentLevelIndex!==n){d.logger.log("switching to level "+n),this.currentLevelIndex=n;var Q=_[n];Q.level=n,z.trigger(c.default.LEVEL_SWITCHING,Q)}var de=_[n],Y=de.details;if(!Y||Y.live){var ne=de.urlId;z.trigger(c.default.LEVEL_LOADING,{url:de.url[ne],level:n,id:ne})}}else z.trigger(c.default.ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.LEVEL_SWITCH_ERROR,level:n,fatal:!1,reason:"invalid level idx"})},U.onError=function(n){if(n.fatal){n.type===p.ErrorTypes.NETWORK_ERROR&&this.clearTimer();return}var _=!1,z=!1,Q;switch(n.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:Q=n.frag.level,z=!0;break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:Q=n.context.level,_=!0;break;case p.ErrorDetails.REMUX_ALLOC_ERROR:Q=n.level,_=!0;break}Q!==void 0&&this.recoverLevel(n,Q,_,z)},U.recoverLevel=function(n,_,z,Q){var de=this,Y=this.hls.config,ne=n.details,ce=this._levels[_],ue,Ae,Pe;if(ce.loadError++,ce.fragmentError=Q,z)if(this.levelRetryCount+1<=Y.levelLoadingMaxRetry)Ae=Math.min(Math.pow(2,this.levelRetryCount)*Y.levelLoadingRetryDelay,Y.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return de.loadLevel()},Ae),n.levelRetry=!0,this.levelRetryCount++,d.logger.warn("level controller, "+ne+", retry in "+Ae+" ms, current retry count is "+this.levelRetryCount);else{d.logger.error("level controller, cannot recover from "+ne+" error"),this.currentLevelIndex=null,this.clearTimer(),n.fatal=!0;return}(z||Q)&&(ue=ce.url.length,ue>1&&ce.loadError<ue?(ce.urlId=(ce.urlId+1)%ue,ce.details=void 0,d.logger.warn("level controller, "+ne+" for level "+_+": switching to redundant URL-id "+ce.urlId)):this.manualLevelIndex===-1?(Pe=_===0?this._levels.length-1:_-1,d.logger.warn("level controller, "+ne+": switch to "+Pe),this.hls.nextAutoLevel=this.currentLevelIndex=Pe):Q&&(d.logger.warn("level controller, "+ne+": reload a fragment"),this.currentLevelIndex=null))},U.onFragLoaded=function(n){var _=n.frag;if(_!==void 0&&_.type==="main"){var z=this._levels[_.level];z!==void 0&&(z.fragmentError=!1,z.loadError=0,this.levelRetryCount=0)}},U.onLevelLoaded=function(n){var _=this,z=n.level,Q=n.details;if(z===this.currentLevelIndex){var de=this._levels[z];if(de.fragmentError||(de.loadError=0,this.levelRetryCount=0),Q.live){var Y=jt(de.details,Q,n.stats.trequest);d.logger.log("live playlist, reload in "+Math.round(Y)+" ms"),this.timer=setTimeout(function(){return _.loadLevel()},Y)}else this.clearTimer()}},U.onAudioTrackSwitched=function(n){var _=this.hls.audioTracks[n.id].groupId,z=this.hls.levels[this.currentLevelIndex];if(z&&z.audioGroupIds){for(var Q=-1,de=0;de<z.audioGroupIds.length;de++)if(z.audioGroupIds[de]===_){Q=de;break}Q!==z.urlId&&(z.urlId=Q,this.startLoad())}},U.loadLevel=function(){if(d.logger.debug("call to loadLevel"),this.currentLevelIndex!==null&&this.canload){var n=this._levels[this.currentLevelIndex];if(typeof n=="object"&&n.url.length>0){var _=this.currentLevelIndex,z=n.urlId,Q=n.url[z];d.logger.log("Attempt loading level index "+_+" with URL-id "+z),this.hls.trigger(c.default.LEVEL_LOADING,{url:Q,level:_,id:z})}}},pr($,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(n){var _=this._levels;_&&(n=Math.min(n,_.length-1),(this.currentLevelIndex!==n||!_[n].details)&&this.setLevelInternal(n))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(n){this.manualLevelIndex=n,this._startLevel===void 0&&(this._startLevel=n),n!==-1&&(this.level=n)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(n){this._firstLevel=n}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var n=this.hls.config.startLevel;return n!==void 0?n:this._firstLevel}else return this._startLevel},set:function(n){this._startLevel=n}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(n){this.level=n,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=n)}}]),$}(u),an=f("./src/demux/id3.js");function on(ie,$){var U;try{U=new Event("addtrack")}catch{U=document.createEvent("Event"),U.initEvent("addtrack",!1,!1)}U.track=ie,$.dispatchEvent(U)}function sn(ie){if(ie&&ie.cues)for(;ie.cues.length>0;)ie.removeCue(ie.cues[0])}function $n(ie,$){if($<ie[0].endTime)return ie[0];if($>ie[ie.length-1].endTime)return ie[ie.length-1];for(var U=0,R=ie.length-1;U<=R;){var n=Math.floor((R+U)/2);if($<ie[n].endTime)R=n-1;else if($>ie[n].endTime)U=n+1;else return ie[n]}return ie[U].endTime-$<$-ie[R].endTime?ie[U]:ie[R]}function xn(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var In=function(ie){xn($,ie);function $(R){var n;return n=ie.call(this,R,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_METADATA,c.default.LIVE_BACK_BUFFER_REACHED)||this,n.id3Track=void 0,n.media=void 0,n}var U=$.prototype;return U.destroy=function(){u.prototype.destroy.call(this)},U.onMediaAttached=function(n){this.media=n.media,this.media},U.onMediaDetaching=function(){sn(this.id3Track),this.id3Track=void 0,this.media=void 0},U.getID3Track=function(n){for(var _=0;_<n.length;_++){var z=n[_];if(z.kind==="metadata"&&z.label==="id3")return on(z,this.media),z}return this.media.addTextTrack("metadata","id3")},U.onFragParsingMetadata=function(n){var _=n.frag,z=n.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var Q=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,de=0;de<z.length;de++){var Y=an.default.getID3Frames(z[de].data);if(Y){var ne=z[de].pts,ce=de<z.length-1?z[de+1].pts:_.endPTS;ne===ce?ce+=1e-4:ne>ce&&(d.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),ce=ne+.25);for(var ue=0;ue<Y.length;ue++){var Ae=Y[ue];if(!an.default.isTimeStampFrame(Ae)){var Pe=new Q(ne,ce,"");Pe.value=Ae,this.id3Track.addCue(Pe)}}}}},U.onLiveBackBufferReached=function(n){var _=n.bufferEnd,z=this.id3Track;if(!(!z||!z.cues||!z.cues.length)){var Q=$n(z.cues,_);if(Q)for(;z.cues[0]!==Q;)z.removeCue(z.cues[0])}},$}(u),kn=In;function yn(){var ie=Se();if(!ie)return!1;var $=self.SourceBuffer||self.WebKitSourceBuffer,U=ie&&typeof ie.isTypeSupported=="function"&&ie.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),R=!$||$.prototype&&typeof $.prototype.appendBuffer=="function"&&typeof $.prototype.remove=="function";return!!U&&!!R}var Ln=function(){function ie(U){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=U?Math.exp(Math.log(.5)/U):0,this.estimate_=0,this.totalWeight_=0}var $=ie.prototype;return $.sample=function(R,n){var _=Math.pow(this.alpha_,R);this.estimate_=n*(1-_)+_*this.estimate_,this.totalWeight_+=R},$.getTotalWeight=function(){return this.totalWeight_},$.getEstimate=function(){if(this.alpha_){var R=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/R}else return this.estimate_},ie}(),Cn=Ln,ln=function(){function ie(U,R,n,_){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=U,this.defaultEstimate_=_,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Cn(R),this.fast_=new Cn(n)}var $=ie.prototype;return $.sample=function(R,n){R=Math.max(R,this.minDelayMs_);var _=8*n,z=R/1e3,Q=_/z;this.fast_.sample(z,Q),this.slow_.sample(z,Q)},$.canEstimate=function(){var R=this.fast_;return R&&R.getTotalWeight()>=this.minWeight_},$.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},$.destroy=function(){},ie}(),Rn=ln;function Yr(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function Kr(ie,$,U){return $&&Yr(ie.prototype,$),ie}function Hr(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function Xn(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var rr=window,un=rr.performance,bn=function(ie){Xn($,ie);function $(R){var n;return n=ie.call(this,R,c.default.FRAG_LOADING,c.default.FRAG_LOADED,c.default.FRAG_BUFFERED,c.default.ERROR)||this,n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=R,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(Hr(n)),n}var U=$.prototype;return U.destroy=function(){this.clearTimer(),u.prototype.destroy.call(this)},U.onFragLoading=function(n){var _=n.frag;if(_.type==="main"&&(this.timer||(this.fragCurrent=_,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var z=this.hls,Q=z.config,de=_.level,Y=z.levels[de].details.live,ne,ce;Y?(ne=Q.abrEwmaFastLive,ce=Q.abrEwmaSlowLive):(ne=Q.abrEwmaFastVoD,ce=Q.abrEwmaSlowVoD),this._bwEstimator=new Rn(z,ce,ne,Q.abrEwmaDefaultEstimate)}},U._abandonRulesCheck=function(){var n=this.hls,_=n.media,z=this.fragCurrent;if(z){var Q=z.loader,de=n.minAutoLevel;if(!Q||Q.stats&&Q.stats.aborted){d.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}var Y=Q.stats;if(_&&Y&&(!_.paused&&_.playbackRate!==0||!_.readyState)&&z.autoLevel&&z.level){var ne=un.now()-Y.trequest,ce=Math.abs(_.playbackRate);if(ne>500*z.duration/ce){var ue=n.levels,Ae=Math.max(1,Y.bw?Y.bw/8:Y.loaded*1e3/ne),Pe=ue[z.level],Ue=Pe.realBitrate?Math.max(Pe.realBitrate,Pe.bitrate):Pe.bitrate,Ye=Y.total?Y.total:Math.max(Y.loaded,Math.round(z.duration*Ue/8)),tt=_.currentTime,ct=(Ye-Y.loaded)/Ae,st=(F.bufferInfo(_,tt,n.config.maxBufferHole).end-tt)/ce;if(st<2*z.duration/ce&&ct>st){var Xe,At;for(At=z.level-1;At>de;At--){var It=ue[At].realBitrate?Math.max(ue[At].realBitrate,ue[At].bitrate):ue[At].bitrate,ut=z.duration*It/(8*.8*Ae);if(ut<st)break}Xe<ct&&(d.logger.warn("loading too slow, abort fragment loading and switch to level "+At+":fragLoadedDelay["+At+"]<fragLoadedDelay["+(z.level-1)+"];bufferStarvationDelay:"+Xe.toFixed(1)+"<"+ct.toFixed(1)+":"+st.toFixed(1)),n.nextLoadLevel=At,this._bwEstimator.sample(ne,Y.loaded),Q.abort(),this.clearTimer(),n.trigger(c.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:z,stats:Y}))}}}}},U.onFragLoaded=function(n){var _=n.frag;if(_.type==="main"&&Object(y.isFiniteNumber)(_.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=_.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var z=this.hls.levels[_.level],Q=(z.loaded?z.loaded.bytes:0)+n.stats.loaded,de=(z.loaded?z.loaded.duration:0)+n.frag.duration;z.loaded={bytes:Q,duration:de},z.realBitrate=Math.round(8*Q/de)}if(n.frag.bitrateTest){var Y=n.stats;Y.tparsed=Y.tbuffered=Y.tload,this.onFragBuffered(n)}}},U.onFragBuffered=function(n){var _=n.stats,z=n.frag;if(_.aborted!==!0&&z.type==="main"&&Object(y.isFiniteNumber)(z.sn)&&(!z.bitrateTest||_.tload===_.tbuffered)){var Q=_.tparsed-_.trequest;d.logger.log("latency/loading/parsing/append/kbps:"+Math.round(_.tfirst-_.trequest)+"/"+Math.round(_.tload-_.tfirst)+"/"+Math.round(_.tparsed-_.tload)+"/"+Math.round(_.tbuffered-_.tparsed)+"/"+Math.round(8*_.loaded/(_.tbuffered-_.trequest))),this._bwEstimator.sample(Q,_.loaded),_.bwEstimate=this._bwEstimator.getEstimate(),z.bitrateTest?this.bitrateTestDelay=Q/1e3:this.bitrateTestDelay=0}},U.onError=function(n){switch(n.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},U.clearTimer=function(){clearInterval(this.timer),this.timer=null},U._findBestLevel=function(n,_,z,Q,de,Y,ne,ce,ue){for(var Ae=de;Ae>=Q;Ae--){var Pe=ue[Ae];if(Pe){var Ue=Pe.details,Ye=Ue?Ue.totalduration/Ue.fragments.length:_,tt=Ue?Ue.live:!1,ct=void 0;Ae<=n?ct=ne*z:ct=ce*z;var st=ue[Ae].realBitrate?Math.max(ue[Ae].realBitrate,ue[Ae].bitrate):ue[Ae].bitrate,Xe=st*Ye/ct;if(d.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+Ae+"/"+Math.round(ct)+"/"+st+"/"+Ye+"/"+Y+"/"+Xe),ct>st&&(!Xe||tt&&!this.bitrateTestDelay||Xe<Y))return Ae}}return-1},Kr($,[{key:"nextAutoLevel",get:function(){var n=this._nextAutoLevel,_=this._bwEstimator;if(n!==-1&&(!_||!_.canEstimate()))return n;var z=this._nextABRAutoLevel;return n!==-1&&(z=Math.min(n,z)),z},set:function(n){this._nextAutoLevel=n}},{key:"_nextABRAutoLevel",get:function(){var n=this.hls,_=n.maxAutoLevel,z=n.levels,Q=n.config,de=n.minAutoLevel,Y=n.media,ne=this.lastLoadedFragLevel,ce=this.fragCurrent?this.fragCurrent.duration:0,ue=Y?Y.currentTime:0,Ae=Y&&Y.playbackRate!==0?Math.abs(Y.playbackRate):1,Pe=this._bwEstimator?this._bwEstimator.getEstimate():Q.abrEwmaDefaultEstimate,Ue=(F.bufferInfo(Y,ue,Q.maxBufferHole).end-ue)/Ae,Ye=this._findBestLevel(ne,ce,Pe,de,_,Ue,Q.abrBandWidthFactor,Q.abrBandWidthUpFactor,z);if(Ye>=0)return Ye;d.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var tt=ce?Math.min(ce,Q.maxStarvationDelay):Q.maxStarvationDelay,ct=Q.abrBandWidthFactor,st=Q.abrBandWidthUpFactor;if(Ue===0){var Xe=this.bitrateTestDelay;if(Xe){var At=ce?Math.min(ce,Q.maxLoadingDelay):Q.maxLoadingDelay;tt=At-Xe,d.logger.trace("bitrate test took "+Math.round(1e3*Xe)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*tt)+" ms"),ct=st=1}}return Ye=this._findBestLevel(ne,ce,Pe,de,_,Ue+tt,ct,st,z),Math.max(Ye,0)}}]),$}(u),_n=bn;function An(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var cn=Se(),dn=function(ie){An($,ie);function $(R){var n;return n=ie.call(this,R,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.MANIFEST_PARSED,c.default.BUFFER_RESET,c.default.BUFFER_APPENDING,c.default.BUFFER_CODECS,c.default.BUFFER_EOS,c.default.BUFFER_FLUSHING,c.default.LEVEL_PTS_UPDATED,c.default.LEVEL_UPDATED)||this,n._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){d.logger.log("media source opened"),n.hls.trigger(c.default.MEDIA_ATTACHED,{media:n.media});var _=n.mediaSource;_&&_.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){d.logger.log("media source closed")},n._onMediaSourceEnded=function(){d.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var _=n.sourceBuffer.audio;d.logger.warn("change mpeg audio timestamp offset from "+_.timestampOffset+" to "+n.audioTimestampOffset),_.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var z=n.parent,Q=n.segments.reduce(function(ue,Ae){return Ae.parent===z?ue+1:ue},0),de={},Y=n.sourceBuffer;for(var ne in Y){var ce=Y[ne];if(!ce)throw Error("handling source buffer update end error: source buffer for "+ne+" uninitilized and unable to update buffered TimeRanges.");de[ne]=ce.buffered}n.hls.trigger(c.default.BUFFER_APPENDED,{parent:z,pending:Q,timeRanges:de}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),Q===0&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(_){d.logger.error("sourceBuffer error:",_),n.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=R.config,n}var U=$.prototype;return U.destroy=function(){u.prototype.destroy.call(this)},U.onLevelPtsUpdated=function(n){var _=n.type,z=this.tracks.audio;if(_==="audio"&&z&&z.container==="audio/mpeg"){var Q=this.sourceBuffer.audio;if(!Q)throw Error("Level PTS Updated and source buffer for audio uninitalized");var de=Math.abs(Q.timestampOffset-n.start);if(de>.1){var Y=Q.updating;try{Q.abort()}catch(ne){d.logger.warn("can not abort audio buffer: "+ne)}Y?this.audioTimestampOffset=n.start:(d.logger.warn("change mpeg audio timestamp offset from "+Q.timestampOffset+" to "+n.start),Q.timestampOffset=n.start)}}},U.onManifestParsed=function(n){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n.altAudio?2:1,d.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},U.onMediaAttaching=function(n){var _=this.media=n.media;if(_&&cn){var z=this.mediaSource=new cn;z.addEventListener("sourceopen",this._onMediaSourceOpen),z.addEventListener("sourceended",this._onMediaSourceEnded),z.addEventListener("sourceclose",this._onMediaSourceClose),_.src=window.URL.createObjectURL(z),this._objectUrl=_.src}},U.onMediaDetaching=function(){d.logger.log("media source detaching");var n=this.mediaSource;if(n){if(n.readyState==="open")try{n.endOfStream()}catch(_){d.logger.warn("onMediaDetaching:"+_.message+" while calling endOfStream")}n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):d.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(c.default.MEDIA_DETACHED)},U.checkPendingTracks=function(){var n=this.bufferCodecEventsExpected,_=this.pendingTracks,z=Object.keys(_).length;(z&&!n||z===2)&&(this.createSourceBuffers(_),this.pendingTracks={},this.doAppending())},U.onBufferReset=function(){var n=this.sourceBuffer;for(var _ in n){var z=n[_];try{z&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(z),z.removeEventListener("updateend",this._onSBUpdateEnd),z.removeEventListener("error",this._onSBUpdateError))}catch{}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},U.onBufferCodecs=function(n){var _=this;Object.keys(this.sourceBuffer).length||(Object.keys(n).forEach(function(z){_.pendingTracks[z]=n[z]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},U.createSourceBuffers=function(n){var _=this.sourceBuffer,z=this.mediaSource;if(!z)throw Error("createSourceBuffers called when mediaSource was null");for(var Q in n)if(!_[Q]){var de=n[Q];if(!de)throw Error("source buffer exists for track "+Q+", however track does not");var Y=de.levelCodec||de.codec,ne=de.container+";codecs="+Y;d.logger.log("creating sourceBuffer("+ne+")");try{var ce=_[Q]=z.addSourceBuffer(ne);ce.addEventListener("updateend",this._onSBUpdateEnd),ce.addEventListener("error",this._onSBUpdateError),this.tracks[Q]={buffer:ce,codec:Y,id:de.id,container:de.container,levelCodec:de.levelCodec}}catch(ue){d.logger.error("error while trying to add sourceBuffer:"+ue.message),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:ue,mimeType:ne})}}this.hls.trigger(c.default.BUFFER_CREATED,{tracks:this.tracks})},U.onBufferAppending=function(n){this._needsFlush||(this.segments?this.segments.push(n):this.segments=[n],this.doAppending())},U.onBufferEos=function(n){for(var _ in this.sourceBuffer)if(!n.type||n.type===_){var z=this.sourceBuffer[_];z&&!z.ended&&(z.ended=!0,d.logger.log(_+" sourceBuffer now EOS"))}this.checkEos()},U.checkEos=function(){var n=this.sourceBuffer,_=this.mediaSource;if(!_||_.readyState!=="open"){this._needsEos=!1;return}for(var z in n){var Q=n[z];if(Q){if(!Q.ended)return;if(Q.updating){this._needsEos=!0;return}}}d.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{_.endOfStream()}catch{d.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},U.onBufferFlushing=function(n){n.type?this.flushRange.push({start:n.startOffset,end:n.endOffset,type:n.type}):(this.flushRange.push({start:n.startOffset,end:n.endOffset,type:"video"}),this.flushRange.push({start:n.startOffset,end:n.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},U.flushLiveBackBuffer=function(){if(this._live){var n=this.config.liveBackBufferLength;if(!(!isFinite(n)||n<0)){if(!this.media){d.logger.error("flushLiveBackBuffer called without attaching media");return}for(var _=this.media.currentTime,z=this.sourceBuffer,Q=Object.keys(z),de=_-Math.max(n,this._levelTargetDuration),Y=Q.length-1;Y>=0;Y--){var ne=Q[Y],ce=z[ne];if(ce){var ue=ce.buffered;ue.length>0&&de>ue.start(0)&&this.removeBufferRange(ne,ce,0,de)&&this.hls.trigger(c.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:de})}}}}},U.onLevelUpdated=function(n){var _=n.details;_.fragments.length>0&&(this._levelDuration=_.totalduration+_.fragments[0].start,this._levelTargetDuration=_.averagetargetduration||_.targetduration||10,this._live=_.live,this.updateMediaElementDuration())},U.updateMediaElementDuration=function(){var n=this.config,_;if(!(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=="open")){for(var z in this.sourceBuffer){var Q=this.sourceBuffer[z];if(Q&&Q.updating===!0)return}_=this.media.duration,this._msDuration===null&&(this._msDuration=this.mediaSource.duration),this._live===!0&&n.liveDurationInfinity===!0?(d.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>_||!Object(y.isFiniteNumber)(_))&&(d.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},U.doFlush=function(){for(;this.flushRange.length;){var n=this.flushRange[0];if(this.flushBuffer(n.start,n.end,n.type))this.flushRange.shift(),this.flushBufferCounter=0;else{this._needsFlush=!0;return}}if(this.flushRange.length===0){this._needsFlush=!1;var _=0,z=this.sourceBuffer;try{for(var Q in z){var de=z[Q];de&&(_+=de.buffered.length)}}catch{d.logger.error("error while accessing sourceBuffer.buffered")}this.appended=_,this.hls.trigger(c.default.BUFFER_FLUSHED)}},U.doAppending=function(){var n=this.config,_=this.hls,z=this.segments,Q=this.sourceBuffer;if(Object.keys(Q).length){if(!this.media||this.media.error){this.segments=[],d.logger.error("trying to append although a media error occured, flush segment and abort");return}if(!this.appending){var de=z.shift();if(de)try{var Y=Q[de.type];if(!Y){this._onSBUpdateEnd();return}if(Y.updating){z.unshift(de);return}Y.ended=!1,this.parent=de.parent,Y.appendBuffer(de.data),this.appendError=0,this.appended++,this.appending=!0}catch(ce){d.logger.error("error while trying to append buffer:"+ce.message),z.unshift(de);var ne={type:p.ErrorTypes.MEDIA_ERROR,parent:de.parent,details:"",fatal:!1};ce.code===22?(this.segments=[],ne.details=p.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,ne.details=p.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>n.appendErrorMaxRetry&&(d.logger.log("fail "+n.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],ne.fatal=!0)),_.trigger(c.default.ERROR,ne)}}}},U.flushBuffer=function(n,_,z){var Q=this.sourceBuffer;if(!Object.keys(Q).length)return!0;var de="null";if(this.media&&(de=this.media.currentTime.toFixed(3)),d.logger.log("flushBuffer,pos/start/end: "+de+"/"+n+"/"+_),this.flushBufferCounter>=this.appended)return d.logger.warn("abort flushing too many retries"),!0;var Y=Q[z];if(Y){if(Y.ended=!1,Y.updating)return d.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(z,Y,n,_))return this.flushBufferCounter++,!1}return d.logger.log("buffer flushed"),!0},U.removeBufferRange=function(n,_,z,Q){try{for(var de=0;de<_.buffered.length;de++){var Y=_.buffered.start(de),ne=_.buffered.end(de),ce=Math.max(Y,z),ue=Math.min(ne,Q);if(Math.min(ue,ne)-ce>.5){var Ae="null";return this.media&&(Ae=this.media.currentTime.toString()),d.logger.log("sb remove "+n+" ["+ce+","+ue+"], of ["+Y+","+ne+"], pos:"+Ae),_.remove(ce,ue),!0}}}catch(Pe){d.logger.warn("removeBufferRange failed",Pe)}return!1},$}(u),tn=dn;function Br(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function wn(ie,$,U){return $&&Br(ie.prototype,$),U&&Br(ie,U),ie}function rn(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Nn=function(ie){rn($,ie);function $(R){var n;return n=ie.call(this,R,c.default.FPS_DROP_LEVEL_CAPPING,c.default.MEDIA_ATTACHING,c.default.MANIFEST_PARSED,c.default.BUFFER_CODECS,c.default.MEDIA_DETACHING)||this,n.autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}var U=$.prototype;return U.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},U.onFpsDropLevelCapping=function(n){$.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},U.onMediaAttaching=function(n){this.media=n.media instanceof window.HTMLVideoElement?n.media:null},U.onManifestParsed=function(n){var _=this.hls;this.restrictedLevels=[],this.levels=n.levels,this.firstLevel=n.firstLevel,_.config.capLevelToPlayerSize&&n.video&&this.startCapping()},U.onBufferCodecs=function(n){var _=this.hls;_.config.capLevelToPlayerSize&&n.video&&this.startCapping()},U.onLevelsUpdated=function(n){this.levels=n.levels},U.onMediaDetaching=function(){this.stopCapping()},U.detectPlayerSize=function(){if(this.media){var n=this.levels?this.levels.length:0;if(n){var _=this.hls;_.autoLevelCapping=this.getMaxLevel(n-1),_.autoLevelCapping>this.autoLevelCapping&&_.streamController.nextLevelSwitch(),this.autoLevelCapping=_.autoLevelCapping}}},U.getMaxLevel=function(n){var _=this;if(!this.levels)return-1;var z=this.levels.filter(function(Q,de){return $.isLevelAllowed(de,_.restrictedLevels)&&de<=n});return $.getMaxLevelByMediaSize(z,this.mediaWidth,this.mediaHeight)},U.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},U.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},$.isLevelAllowed=function(n,_){return _===void 0&&(_=[]),_.indexOf(n)===-1},$.getMaxLevelByMediaSize=function(n,_,z){if(!n||n&&!n.length)return-1;for(var Q=function(ue,Ae){return Ae?ue.width!==Ae.width||ue.height!==Ae.height:!0},de=n.length-1,Y=0;Y<n.length;Y+=1){var ne=n[Y];if((ne.width>=_||ne.height>=z)&&Q(ne,n[Y+1])){de=Y;break}}return de},wn($,[{key:"mediaWidth",get:function(){var n,_=this.media;return _&&(n=_.width||_.clientWidth||_.offsetWidth,n*=$.contentScaleFactor),n}},{key:"mediaHeight",get:function(){var n,_=this.media;return _&&(n=_.height||_.clientHeight||_.offsetHeight,n*=$.contentScaleFactor),n}}],[{key:"contentScaleFactor",get:function(){var n=1;try{n=window.devicePixelRatio}catch{}return n}}]),$}(u),Qr=Nn;function qr(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Zn=window,a=Zn.performance,tr=function(ie){qr($,ie);function $(R){return ie.call(this,R,c.default.MEDIA_ATTACHING)||this}var U=$.prototype;return U.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},U.onMediaAttaching=function(n){var _=this.hls.config;if(_.capLevelOnFPSDrop){var z=this.video=n.media instanceof window.HTMLVideoElement?n.media:null;typeof z.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),_.fpsDroppedMonitoringPeriod)}},U.checkFPS=function(n,_,z){var Q=a.now();if(_){if(this.lastTime){var de=Q-this.lastTime,Y=z-this.lastDroppedFrames,ne=_-this.lastDecodedFrames,ce=1e3*Y/de,ue=this.hls;if(ue.trigger(c.default.FPS_DROP,{currentDropped:Y,currentDecoded:ne,totalDroppedFrames:z}),ce>0&&Y>ue.config.fpsDroppedMonitoringThreshold*ne){var Ae=ue.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+Ae),Ae>0&&(ue.autoLevelCapping===-1||ue.autoLevelCapping>=Ae)&&(Ae=Ae-1,ue.trigger(c.default.FPS_DROP_LEVEL_CAPPING,{level:Ae,droppedLevel:ue.currentLevel}),ue.autoLevelCapping=Ae,ue.streamController.nextLevelSwitch())}}this.lastTime=Q,this.lastDroppedFrames=z,this.lastDecodedFrames=_}},U.checkFPSInterval=function(){var n=this.video;if(n)if(this.isVideoPlaybackQualityAvailable){var _=n.getVideoPlaybackQuality();this.checkFPS(n,_.totalVideoFrames,_.droppedVideoFrames)}else this.checkFPS(n,n.webkitDecodedFrameCount,n.webkitDroppedFrameCount)},$}(u),Fn=tr,jn=window,Mn=jn.performance,Jn=jn.XMLHttpRequest,Pn=function(){function ie(U){U&&U.xhrSetup&&(this.xhrSetup=U.xhrSetup)}var $=ie.prototype;return $.destroy=function(){this.abort(),this.loader=null},$.abort=function(){var R=this.loader;R&&R.readyState!==4&&(this.stats.aborted=!0,R.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},$.load=function(R,n,_){this.context=R,this.config=n,this.callbacks=_,this.stats={trequest:Mn.now(),retry:0},this.retryDelay=n.retryDelay,this.loadInternal()},$.loadInternal=function(){var R,n=this.context;R=this.loader=new Jn;var _=this.stats;_.tfirst=0,_.loaded=0;var z=this.xhrSetup;try{if(z)try{z(R,n.url)}catch{R.open("GET",n.url,!0),z(R,n.url)}R.readyState||R.open("GET",n.url,!0)}catch(Q){this.callbacks.onError({code:R.status,text:Q.message},n,R);return}n.rangeEnd&&R.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),R.onreadystatechange=this.readystatechange.bind(this),R.onprogress=this.loadprogress.bind(this),R.responseType=n.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),R.send()},$.readystatechange=function(R){var n=R.currentTarget,_=n.readyState,z=this.stats,Q=this.context,de=this.config;if(!z.aborted&&_>=2)if(window.clearTimeout(this.requestTimeout),z.tfirst===0&&(z.tfirst=Math.max(Mn.now(),z.trequest)),_===4){var Y=n.status;if(Y>=200&&Y<300){z.tload=Math.max(z.tfirst,Mn.now());var ne,ce;Q.responseType==="arraybuffer"?(ne=n.response,ce=ne.byteLength):(ne=n.responseText,ce=ne.length),z.loaded=z.total=ce;var ue={url:n.responseURL,data:ne};this.callbacks.onSuccess(ue,z,Q,n)}else z.retry>=de.maxRetry||Y>=400&&Y<499?(d.logger.error(Y+" while loading "+Q.url),this.callbacks.onError({code:Y,text:n.statusText},Q,n)):(d.logger.warn(Y+" while loading "+Q.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,de.maxRetryDelay),z.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),de.timeout)},$.loadtimeout=function(){d.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},$.loadprogress=function(R){var n=R.currentTarget,_=this.stats;_.loaded=R.loaded,R.lengthComputable&&(_.total=R.total);var z=this.callbacks.onProgress;z&&z(_,this.context,null,n)},ie}(),hn=Pn;function En(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function On(ie,$,U){return $&&En(ie.prototype,$),ie}function Tn(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var fn=function(ie){Tn($,ie);function $(R){var n;return n=ie.call(this,R,c.default.MANIFEST_LOADING,c.default.MANIFEST_PARSED,c.default.AUDIO_TRACK_LOADED,c.default.AUDIO_TRACK_SWITCHED,c.default.LEVEL_LOADED,c.default.ERROR)||this,n._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}var U=$.prototype;return U.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},U.onManifestParsed=function(n){var _=this.tracks=n.audioTracks||[];this.hls.trigger(c.default.AUDIO_TRACKS_UPDATED,{audioTracks:_}),this._selectAudioGroup(this.hls.nextLoadLevel)},U.onAudioTrackLoaded=function(n){if(n.id>=this.tracks.length){d.logger.warn("Invalid audio track id:",n.id);return}if(d.logger.log("audioTrack "+n.id+" loaded"),this.tracks[n.id].details=n.details,n.details.live&&!this.hasInterval()){var _=n.details.targetduration*1e3;this.setInterval(_)}!n.details.live&&this.hasInterval()&&this.clearInterval()},U.onAudioTrackSwitched=function(n){var _=this.tracks[n.id].groupId;_&&this.audioGroupId!==_&&(this.audioGroupId=_)},U.onLevelLoaded=function(n){this._selectAudioGroup(n.level)},U.onError=function(n){n.type===p.ErrorTypes.NETWORK_ERROR&&(n.fatal&&this.clearInterval(),n.details===p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(d.logger.warn("Network failure on audio-track id:",n.context.id),this._handleLoadError()))},U._setAudioTrack=function(n){if(this._trackId===n&&this.tracks[this._trackId].details){d.logger.debug("Same id as current audio-track passed, and track details available -> no-op");return}if(n<0||n>=this.tracks.length){d.logger.warn("Invalid id passed to audio-track controller");return}var _=this.tracks[n];d.logger.log("Now switching to audio-track index "+n),this.clearInterval(),this._trackId=n;var z=_.url,Q=_.type,de=_.id;this.hls.trigger(c.default.AUDIO_TRACK_SWITCHING,{id:de,type:Q,url:z}),this._loadTrackDetailsIfNeeded(_)},U.doTick=function(){this._updateTrack(this._trackId)},U._selectAudioGroup=function(n){var _=this.hls.levels[n];if(!(!_||!_.audioGroupIds)){var z=_.audioGroupIds[_.urlId];this.audioGroupId!==z&&(this.audioGroupId=z,this._selectInitialAudioTrack())}},U._selectInitialAudioTrack=function(){var n=this,_=this.tracks;if(_.length){var z=this.tracks[this._trackId],Q=null;if(z&&(Q=z.name),this._selectDefaultTrack){var de=_.filter(function(ce){return ce.default});de.length?_=de:d.logger.warn("No default audio tracks defined")}var Y=!1,ne=function(){_.forEach(function(ue){Y||(!n.audioGroupId||ue.groupId===n.audioGroupId)&&(!Q||Q===ue.name)&&(n._setAudioTrack(ue.id),Y=!0)})};ne(),Y||(Q=null,ne()),Y||(d.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},U._needsTrackLoading=function(n){var _=n.details,z=n.url;return!_||_.live?!!z:!1},U._loadTrackDetailsIfNeeded=function(n){if(this._needsTrackLoading(n)){var _=n.url,z=n.id;d.logger.log("loading audio-track playlist for id: "+z),this.hls.trigger(c.default.AUDIO_TRACK_LOADING,{url:_,id:z})}},U._updateTrack=function(n){if(!(n<0||n>=this.tracks.length)){this.clearInterval(),this._trackId=n,d.logger.log("trying to update audio-track "+n);var _=this.tracks[n];this._loadTrackDetailsIfNeeded(_)}},U._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var n=this._trackId,_=this.tracks[n],z=_.name,Q=_.language,de=_.groupId;d.logger.warn("Loading failed on audio track id: "+n+", group-id: "+de+', name/language: "'+z+'" / "'+Q+'"');for(var Y=n,ne=0;ne<this.tracks.length;ne++)if(!this.trackIdBlacklist[ne]){var ce=this.tracks[ne];if(ce.name===z){Y=ne;break}}if(Y===n){d.logger.warn('No fallback audio-track found for name/language: "'+z+'" / "'+Q+'"');return}d.logger.log("Attempting audio-track fallback id:",Y,"group-id:",this.tracks[Y].groupId),this._setAudioTrack(Y)},On($,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(n){this._setAudioTrack(n),this._selectDefaultTrack=!1}}]),$}(Dr),Qn=fn;function oi(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function si(ie,$,U){return $&&oi(ie.prototype,$),ie}function li(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Bn=window,pn=Bn.performance,Dn=100,ui=function(ie){li($,ie);function $(R,n){var _;return _=ie.call(this,R,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.AUDIO_TRACKS_UPDATED,c.default.AUDIO_TRACK_SWITCHING,c.default.AUDIO_TRACK_LOADED,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.FRAG_PARSING_INIT_SEGMENT,c.default.FRAG_PARSING_DATA,c.default.FRAG_PARSED,c.default.ERROR,c.default.BUFFER_RESET,c.default.BUFFER_CREATED,c.default.BUFFER_APPENDED,c.default.BUFFER_FLUSHED,c.default.INIT_PTS_FOUND)||this,_.fragmentTracker=n,_.config=R.config,_.audioCodecSwap=!1,_._state=Qe.STOPPED,_.initPTS=[],_.waitingFragment=null,_.videoTrackCC=null,_}var U=$.prototype;return U.onInitPtsFound=function(n){var _=n.id,z=n.frag.cc,Q=n.initPTS;_==="main"&&(this.initPTS[z]=Q,this.videoTrackCC=z,d.logger.log("InitPTS for cc: "+z+" found from video track: "+Q),this.state===Qe.WAITING_INIT_PTS&&this.tick())},U.startLoad=function(n){if(this.tracks){var _=this.lastCurrentTime;this.stopLoad(),this.setInterval(Dn),this.fragLoadError=0,_>0&&n===-1?(d.logger.log("audio:override startPosition with lastCurrentTime @"+_.toFixed(3)),this.state=Qe.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:n,this.state=Qe.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=n,this.state=Qe.STOPPED},U.doTick=function(){var n,_,z,Q=this.hls,de=Q.config;switch(this.state){case Qe.ERROR:case Qe.PAUSED:case Qe.BUFFER_FLUSHING:break;case Qe.STARTING:this.state=Qe.WAITING_TRACK,this.loadedmetadata=!1;break;case Qe.IDLE:var Y=this.tracks;if(!Y||!this.media&&(this.startFragRequested||!de.startFragPrefetch))break;if(this.loadedmetadata)n=this.media.currentTime;else if(n=this.nextLoadPosition,n===void 0)break;var ne=this.mediaBuffer?this.mediaBuffer:this.media,ce=this.videoBuffer?this.videoBuffer:this.media,ue=F.bufferInfo(ne,n,de.maxBufferHole),Ae=F.bufferInfo(ce,n,de.maxBufferHole),Pe=ue.len,Ue=ue.end,Ye=this.fragPrevious,tt=Math.min(de.maxBufferLength,de.maxMaxBufferLength),ct=Math.max(tt,Ae.len),st=this.audioSwitch,Xe=this.trackId;if((Pe<ct||st)&&Xe<Y.length){if(z=Y[Xe].details,typeof z>"u"){this.state=Qe.WAITING_TRACK;break}if(!st&&this._streamEnded(ue,z)){this.hls.trigger(c.default.BUFFER_EOS,{type:"audio"}),this.state=Qe.ENDED;return}var At=z.fragments,It=At.length,ut=At[0].start,Ut=At[It-1].start+At[It-1].duration,Lt;if(st){if(z.live&&!z.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),Ue=0;else if(Ue=n,z.PTSKnown&&n<ut)if(ue.end>ut||ue.nextStart)d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=ut+.05;else return}if(z.initSegment&&!z.initSegment.data)Lt=z.initSegment;else if(Ue<=ut){if(Lt=At[0],this.videoTrackCC!==null&&Lt.cc!==this.videoTrackCC&&(Lt=Qt(At,this.videoTrackCC)),z.live&&Lt.loadIdx&&Lt.loadIdx===this.fragLoadIdx){var yt=ue.nextStart?ue.nextStart:ut;d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(yt+.05)),this.media.currentTime=yt+.05;return}}else{var Tt,nr=de.maxFragLookUpTolerance,dt=Ye?At[Ye.sn-At[0].sn+1]:void 0,ot=function(mn){var Pr=Math.min(nr,mn.duration);return mn.start+mn.duration-Pr<=Ue?1:mn.start-Pr>Ue&&mn.start?-1:0};Ue<Ut?(Ue>Ut-nr&&(nr=0),dt&&!ot(dt)?Tt=dt:Tt=m.search(At,ot)):Tt=At[It-1],Tt&&(Lt=Tt,ut=Tt.start,Ye&&Lt.level===Ye.level&&Lt.sn===Ye.sn&&(Lt.sn<z.endSN?(Lt=At[Lt.sn+1-z.startSN],d.logger.log("SN just loaded, load next one: "+Lt.sn)):Lt=null))}Lt&&(Lt.encrypted?(d.logger.log("Loading key for "+Lt.sn+" of ["+z.startSN+" ,"+z.endSN+"],track "+Xe),this.state=Qe.KEY_LOADING,Q.trigger(c.default.KEY_LOADING,{frag:Lt})):(d.logger.log("Loading "+Lt.sn+", cc: "+Lt.cc+" of ["+z.startSN+" ,"+z.endSN+"],track "+Xe+", currentTime:"+n+",bufferEnd:"+Ue.toFixed(3)),this.fragCurrent=Lt,(st||this.fragmentTracker.getState(Lt)===_e.NOT_LOADED)&&(Lt.sn!=="initSegment"&&(this.startFragRequested=!0),Object(y.isFiniteNumber)(Lt.sn)&&(this.nextLoadPosition=Lt.start+Lt.duration),Q.trigger(c.default.FRAG_LOADING,{frag:Lt}),this.state=Qe.FRAG_LOADING)))}break;case Qe.WAITING_TRACK:_=this.tracks[this.trackId],_&&_.details&&(this.state=Qe.IDLE);break;case Qe.FRAG_LOADING_WAITING_RETRY:var Xt=pn.now(),Ht=this.retryDate;ne=this.media;var fr=ne&&ne.seeking;(!Ht||Xt>=Ht||fr)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Qe.IDLE);break;case Qe.WAITING_INIT_PTS:var Ur=this.videoTrackCC;if(this.initPTS[Ur]===void 0)break;var Ar=this.waitingFragment;if(Ar){var Rt=Ar.frag.cc;Ur!==Rt?(_=this.tracks[this.trackId],_.details&&_.details.live&&(d.logger.warn("Waiting fragment CC ("+Rt+") does not match video track CC ("+Ur+")"),this.waitingFragment=null,this.state=Qe.IDLE)):(this.state=Qe.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Qe.IDLE;break}},U.onMediaAttached=function(n){var _=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),_.addEventListener("seeking",this.onvseeking),_.addEventListener("ended",this.onvended);var z=this.config;this.tracks&&z.autoStartLoad&&this.startLoad(z.startPosition)},U.onMediaDetaching=function(){var n=this.media;n&&n.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),n&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},U.onAudioTracksUpdated=function(n){d.logger.log("audio tracks updated"),this.tracks=n.audioTracks},U.onAudioTrackSwitching=function(n){var _=!!n.url;this.trackId=n.id,this.fragCurrent=null,this.state=Qe.PAUSED,this.waitingFragment=null,_?this.setInterval(Dn):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),_&&(this.audioSwitch=!0,this.state=Qe.IDLE),this.tick()},U.onAudioTrackLoaded=function(n){var _=n.details,z=n.id,Q=this.tracks[z],de=_.totalduration,Y=0;if(d.logger.log("track "+z+" loaded ["+_.startSN+","+_.endSN+"],duration:"+de),_.live){var ne=Q.details;ne&&_.fragments.length>0?(Ct(ne,_),Y=_.fragments[0].start,_.PTSKnown?d.logger.log("live audio playlist sliding:"+Y.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(_.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else _.PTSKnown=!1;if(Q.details=_,!this.startFragRequested){if(this.startPosition===-1){var ce=_.startTimeOffset;Object(y.isFiniteNumber)(ce)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+ce),this.startPosition=ce):_.live?(this.startPosition=this.computeLivePosition(Y,_),d.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Qe.WAITING_TRACK&&(this.state=Qe.IDLE),this.tick()},U.onKeyLoaded=function(){this.state===Qe.KEY_LOADING&&(this.state=Qe.IDLE,this.tick())},U.onFragLoaded=function(n){var _=this.fragCurrent,z=n.frag;if(this.state===Qe.FRAG_LOADING&&_&&z.type==="audio"&&z.level===_.level&&z.sn===_.sn){var Q=this.tracks[this.trackId],de=Q.details,Y=de.totalduration,ne=_.level,ce=_.sn,ue=_.cc,Ae=this.config.defaultAudioCodec||Q.audioCodec||"mp4a.40.2",Pe=this.stats=n.stats;if(ce==="initSegment")this.state=Qe.IDLE,Pe.tparsed=Pe.tbuffered=pn.now(),de.initSegment.data=n.payload,this.hls.trigger(c.default.FRAG_BUFFERED,{stats:Pe,frag:_,id:"audio"}),this.tick();else{this.state=Qe.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new lt(this.hls,"audio"));var Ue=this.initPTS[ue],Ye=de.initSegment?de.initSegment.data:[];if(de.initSegment||Ue!==void 0){this.pendingBuffering=!0,d.logger.log("Demuxing "+ce+" of ["+de.startSN+" ,"+de.endSN+"],track "+ne);var tt=!1;this.demuxer.push(n.payload,Ye,Ae,null,_,Y,tt,Ue)}else d.logger.log("unknown video PTS for continuity counter "+ue+", waiting for video PTS before demuxing audio frag "+ce+" of ["+de.startSN+" ,"+de.endSN+"],track "+ne),this.waitingFragment=n,this.state=Qe.WAITING_INIT_PTS}}this.fragLoadError=0},U.onFragParsingInitSegment=function(n){var _=this.fragCurrent,z=n.frag;if(_&&n.id==="audio"&&z.sn===_.sn&&z.level===_.level&&this.state===Qe.PARSING){var Q=n.tracks,de;if(Q.video&&delete Q.video,de=Q.audio,de){de.levelCodec=de.codec,de.id=n.id,this.hls.trigger(c.default.BUFFER_CODECS,Q),d.logger.log("audio track:audio,container:"+de.container+",codecs[level/parsed]=["+de.levelCodec+"/"+de.codec+"]");var Y=de.initSegment;if(Y){var ne={type:"audio",data:Y,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[ne]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(c.default.BUFFER_APPENDING,ne))}this.tick()}}},U.onFragParsingData=function(n){var _=this,z=this.fragCurrent,Q=n.frag;if(z&&n.id==="audio"&&n.type==="audio"&&Q.sn===z.sn&&Q.level===z.level&&this.state===Qe.PARSING){var de=this.trackId,Y=this.tracks[de],ne=this.hls;Object(y.isFiniteNumber)(n.endPTS)||(n.endPTS=n.startPTS+z.duration,n.endDTS=n.startDTS+z.duration),z.addElementaryStream(D.AUDIO),d.logger.log("parsed "+n.type+",PTS:["+n.startPTS.toFixed(3)+","+n.endPTS.toFixed(3)+"],DTS:["+n.startDTS.toFixed(3)+"/"+n.endDTS.toFixed(3)+"],nb:"+n.nb),_t(Y.details,z,n.startPTS,n.endPTS);var ce=this.audioSwitch,ue=this.media,Ae=!1;if(ce)if(ue&&ue.readyState){var Pe=ue.currentTime;d.logger.log("switching audio track : currentTime:"+Pe),Pe>=n.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=Qe.BUFFER_FLUSHING,ne.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),Ae=!0,this.audioSwitch=!1,ne.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:de}))}else this.audioSwitch=!1,ne.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:de});var Ue=this.pendingData;if(!Ue){d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),ne.trigger(c.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});return}this.audioSwitch||([n.data1,n.data2].forEach(function(Ye){Ye&&Ye.length&&Ue.push({type:n.type,data:Ye,parent:"audio",content:"data"})}),!Ae&&Ue.length&&(Ue.forEach(function(Ye){_.state===Qe.PARSING&&(_.pendingBuffering=!0,_.hls.trigger(c.default.BUFFER_APPENDING,Ye))}),this.pendingData=[],this.appended=!0)),this.tick()}},U.onFragParsed=function(n){var _=this.fragCurrent,z=n.frag;_&&n.id==="audio"&&z.sn===_.sn&&z.level===_.level&&this.state===Qe.PARSING&&(this.stats.tparsed=pn.now(),this.state=Qe.PARSED,this._checkAppendedParsed())},U.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},U.onBufferCreated=function(n){var _=n.tracks.audio;_&&(this.mediaBuffer=_.buffer,this.loadedmetadata=!0),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer)},U.onBufferAppended=function(n){if(n.parent==="audio"){var _=this.state;(_===Qe.PARSING||_===Qe.PARSED)&&(this.pendingBuffering=n.pending>0,this._checkAppendedParsed())}},U._checkAppendedParsed=function(){if(this.state===Qe.PARSED&&(!this.appended||!this.pendingBuffering)){var n=this.fragCurrent,_=this.stats,z=this.hls;if(n){this.fragPrevious=n,_.tbuffered=pn.now(),z.trigger(c.default.FRAG_BUFFERED,{stats:_,frag:n,id:"audio"});var Q=this.mediaBuffer?this.mediaBuffer:this.media;Q&&d.logger.log("audio buffered : "+Zt.toString(Q.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,z.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Qe.IDLE}this.tick()}},U.onError=function(n){var _=n.frag;if(!(_&&_.type!=="audio"))switch(n.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:var z=n.frag;if(z&&z.type!=="audio")break;if(!n.fatal){var Q=this.fragLoadError;Q?Q++:Q=1;var de=this.config;if(Q<=de.fragLoadingMaxRetry){this.fragLoadError=Q;var Y=Math.min(Math.pow(2,Q-1)*de.fragLoadingRetryDelay,de.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+Y+" ms"),this.retryDate=pn.now()+Y,this.state=Qe.FRAG_LOADING_WAITING_RETRY}else d.logger.error("AudioStreamController: "+n.details+" reaches max retry, redispatch as fatal ..."),n.fatal=!0,this.state=Qe.ERROR}break;case p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Qe.ERROR&&(this.state=n.fatal?Qe.ERROR:Qe.IDLE,d.logger.warn("AudioStreamController: "+n.details+" while loading frag, now switching to "+this.state+" state ..."));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if(n.parent==="audio"&&(this.state===Qe.PARSING||this.state===Qe.PARSED)){var ne=this.mediaBuffer,ce=this.media.currentTime,ue=ne&&F.isBuffered(ne,ce)&&F.isBuffered(ne,ce+.5);if(ue){var Ae=this.config;Ae.maxMaxBufferLength>=Ae.maxBufferLength&&(Ae.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+Ae.maxMaxBufferLength+"s")),this.state=Qe.IDLE}else d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Qe.BUFFER_FLUSHING,this.hls.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break}},U.onBufferFlushed=function(){var n=this,_=this.pendingData;_&&_.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),_.forEach(function(z){n.hls.trigger(c.default.BUFFER_APPENDING,z)}),this.appended=!0,this.pendingData=[],this.state=Qe.PARSED):(this.state=Qe.IDLE,this.fragPrevious=null,this.tick())},si($,[{key:"state",set:function(n){if(this.state!==n){var _=this.state;this._state=n,d.logger.log("audio stream:"+_+"->"+n)}},get:function(){return this._state}}]),$}(Lr),e=ui,r=function(){if(typeof window<"u"&&window.VTTCue)return window.VTTCue;var ie="auto",$={"":!0,lr:!0,rl:!0},U={start:!0,middle:!0,end:!0,left:!0,right:!0};function R(Q){if(typeof Q!="string")return!1;var de=$[Q.toLowerCase()];return de?Q.toLowerCase():!1}function n(Q){if(typeof Q!="string")return!1;var de=U[Q.toLowerCase()];return de?Q.toLowerCase():!1}function _(Q){for(var de=1;de<arguments.length;de++){var Y=arguments[de];for(var ne in Y)Q[ne]=Y[ne]}return Q}function z(Q,de,Y){var ne=this,ce={};ce.enumerable=!0,ne.hasBeenReset=!1;var ue="",Ae=!1,Pe=Q,Ue=de,Ye=Y,tt=null,ct="",st=!0,Xe="auto",At="start",It=50,ut="middle",Ut=50,Lt="middle";Object.defineProperty(ne,"id",_({},ce,{get:function(){return ue},set:function(Tt){ue=""+Tt}})),Object.defineProperty(ne,"pauseOnExit",_({},ce,{get:function(){return Ae},set:function(Tt){Ae=!!Tt}})),Object.defineProperty(ne,"startTime",_({},ce,{get:function(){return Pe},set:function(Tt){if(typeof Tt!="number")throw new TypeError("Start time must be set to a number.");Pe=Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"endTime",_({},ce,{get:function(){return Ue},set:function(Tt){if(typeof Tt!="number")throw new TypeError("End time must be set to a number.");Ue=Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"text",_({},ce,{get:function(){return Ye},set:function(Tt){Ye=""+Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"region",_({},ce,{get:function(){return tt},set:function(Tt){tt=Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"vertical",_({},ce,{get:function(){return ct},set:function(Tt){var nr=R(Tt);if(nr===!1)throw new SyntaxError("An invalid or illegal string was specified.");ct=nr,this.hasBeenReset=!0}})),Object.defineProperty(ne,"snapToLines",_({},ce,{get:function(){return st},set:function(Tt){st=!!Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"line",_({},ce,{get:function(){return Xe},set:function(Tt){if(typeof Tt!="number"&&Tt!==ie)throw new SyntaxError("An invalid number or illegal string was specified.");Xe=Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"lineAlign",_({},ce,{get:function(){return At},set:function(Tt){var nr=n(Tt);if(!nr)throw new SyntaxError("An invalid or illegal string was specified.");At=nr,this.hasBeenReset=!0}})),Object.defineProperty(ne,"position",_({},ce,{get:function(){return It},set:function(Tt){if(Tt<0||Tt>100)throw new Error("Position must be between 0 and 100.");It=Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"positionAlign",_({},ce,{get:function(){return ut},set:function(Tt){var nr=n(Tt);if(!nr)throw new SyntaxError("An invalid or illegal string was specified.");ut=nr,this.hasBeenReset=!0}})),Object.defineProperty(ne,"size",_({},ce,{get:function(){return Ut},set:function(Tt){if(Tt<0||Tt>100)throw new Error("Size must be between 0 and 100.");Ut=Tt,this.hasBeenReset=!0}})),Object.defineProperty(ne,"align",_({},ce,{get:function(){return Lt},set:function(Tt){var nr=n(Tt);if(!nr)throw new SyntaxError("An invalid or illegal string was specified.");Lt=nr,this.hasBeenReset=!0}})),ne.displayState=void 0}return z.prototype.getCueAsHTML=function(){var Q=window.WebVTT;return Q.convertCueToDOMTree(window,this.text)},z}(),i=function(){return{decode:function(U){if(!U)return"";if(typeof U!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(U))}}};function v(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function I(ie){function $(R,n,_,z){return(R|0)*3600+(n|0)*60+(_|0)+(z|0)/1e3}var U=ie.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return U?U[3]?$(U[1],U[2],U[3].replace(":",""),U[4]):U[1]>59?$(U[1],U[2],0,U[4]):$(0,U[1],U[2],U[4]):null}function W(){this.values=Object.create(null)}W.prototype={set:function($,U){!this.get($)&&U!==""&&(this.values[$]=U)},get:function($,U,R){return R?this.has($)?this.values[$]:U[R]:this.has($)?this.values[$]:U},has:function($){return $ in this.values},alt:function($,U,R){for(var n=0;n<R.length;++n)if(U===R[n]){this.set($,U);break}},integer:function($,U){/^-?\d+$/.test(U)&&this.set($,parseInt(U,10))},percent:function($,U){return U.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(U=parseFloat(U),U>=0&&U<=100)?(this.set($,U),!0):!1}};function q(ie,$,U,R){var n=R?ie.split(R):[ie];for(var _ in n)if(typeof n[_]=="string"){var z=n[_].split(U);if(z.length===2){var Q=z[0],de=z[1];$(Q,de)}}}var fe=new r(0,0,0),ae=fe.align==="middle"?"middle":"center";function me(ie,$,U){var R=ie;function n(){var Q=I(ie);if(Q===null)throw new Error("Malformed timestamp: "+R);return ie=ie.replace(/^[^\sa-zA-Z-]+/,""),Q}function _(Q,de){var Y=new W;q(Q,function(ue,Ae){switch(ue){case"region":for(var Pe=U.length-1;Pe>=0;Pe--)if(U[Pe].id===Ae){Y.set(ue,U[Pe].region);break}break;case"vertical":Y.alt(ue,Ae,["rl","lr"]);break;case"line":var Ue=Ae.split(","),Ye=Ue[0];Y.integer(ue,Ye),Y.percent(ue,Ye)&&Y.set("snapToLines",!1),Y.alt(ue,Ye,["auto"]),Ue.length===2&&Y.alt("lineAlign",Ue[1],["start",ae,"end"]);break;case"position":Ue=Ae.split(","),Y.percent(ue,Ue[0]),Ue.length===2&&Y.alt("positionAlign",Ue[1],["start",ae,"end","line-left","line-right","auto"]);break;case"size":Y.percent(ue,Ae);break;case"align":Y.alt(ue,Ae,["start",ae,"end","left","right"]);break}},/:/,/\s/),de.region=Y.get("region",null),de.vertical=Y.get("vertical","");var ne=Y.get("line","auto");ne==="auto"&&fe.line===-1&&(ne=-1),de.line=ne,de.lineAlign=Y.get("lineAlign","start"),de.snapToLines=Y.get("snapToLines",!0),de.size=Y.get("size",100),de.align=Y.get("align",ae);var ce=Y.get("position","auto");ce==="auto"&&fe.position===50&&(ce=de.align==="start"||de.align==="left"?0:de.align==="end"||de.align==="right"?100:50),de.position=ce}function z(){ie=ie.replace(/^\s+/,"")}if(z(),$.startTime=n(),z(),ie.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+R);ie=ie.substr(3),z(),$.endTime=n(),z(),_(ie,$)}function pe(ie){return ie.replace(/<br(?: \/)?>/gi,`
`)}v.prototype={parse:function($){var U=this;$&&(U.buffer+=U.decoder.decode($,{stream:!0}));function R(){var Y=U.buffer,ne=0;for(Y=pe(Y);ne<Y.length&&Y[ne]!=="\r"&&Y[ne]!==`
`;)++ne;var ce=Y.substr(0,ne);return Y[ne]==="\r"&&++ne,Y[ne]===`
`&&++ne,U.buffer=Y.substr(ne),ce}function n(Y){q(Y,function(ne,ce){},/:/)}try{var _;if(U.state==="INITIAL"){if(!/\r\n|\n/.test(U.buffer))return this;_=R();var z=_.match(/^()?WEBVTT([ \t].*)?$/);if(!z||!z[0])throw new Error("Malformed WebVTT signature.");U.state="HEADER"}for(var Q=!1;U.buffer;){if(!/\r\n|\n/.test(U.buffer))return this;switch(Q?Q=!1:_=R(),U.state){case"HEADER":/:/.test(_)?n(_):_||(U.state="ID");continue;case"NOTE":_||(U.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(_)){U.state="NOTE";break}if(!_)continue;if(U.cue=new r(0,0,""),U.state="CUE",_.indexOf("-->")===-1){U.cue.id=_;continue}case"CUE":try{me(_,U.cue,U.regionList)}catch{U.cue=null,U.state="BADCUE";continue}U.state="CUETEXT";continue;case"CUETEXT":var de=_.indexOf("-->")!==-1;if(!_||de&&(Q=!0)){U.oncue&&U.oncue(U.cue),U.cue=null,U.state="ID";continue}U.cue.text&&(U.cue.text+=`
`),U.cue.text+=_;continue;case"BADCUE":_||(U.state="ID");continue}}}catch{U.state==="CUETEXT"&&U.cue&&U.oncue&&U.oncue(U.cue),U.cue=null,U.state=U.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var $=this;try{if($.buffer+=$.decoder.decode(),($.cue||$.state==="HEADER")&&($.buffer+=`

`,$.parse()),$.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(U){throw U}return $.onflush&&$.onflush(),this}};var Ee=v;function xe(ie,$,U,R){for(var n,_,z,Q,de,Y=window.VTTCue||TextTrackCue,ne=0;ne<R.rows.length;ne++)if(n=R.rows[ne],z=!0,Q=0,de="",!n.isEmpty()){for(var ce=0;ce<n.chars.length;ce++)n.chars[ce].uchar.match(/\s/)&&z?Q++:(de+=n.chars[ce].uchar,z=!1);n.cueStartTime=$,$===U&&(U+=1e-4),_=new Y($,U,pe(de.trim())),Q>=16?Q--:Q++,navigator.userAgent.match(/Firefox\//)?_.line=ne+1:_.line=ne>7?ne-2:ne+1,_.align="left",_.position=Math.max(0,Math.min(100,100*(Q/32))),ie.addCue(_)}}var Ne={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},De=function($){var U=$;return Ne.hasOwnProperty($)&&(U=Ne[$]),String.fromCharCode(U)},Fe=15,Ve=100,he={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Je={17:2,18:4,21:6,22:8,23:10,19:13,20:15},et={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},rt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ht=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],bt;(function(ie){ie[ie.ERROR=0]="ERROR",ie[ie.TEXT=1]="TEXT",ie[ie.WARNING=2]="WARNING",ie[ie.INFO=2]="INFO",ie[ie.DEBUG=3]="DEBUG",ie[ie.DATA=3]="DATA"})(bt||(bt={}));var it={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function($){this.time=$},log:function($,U){var R=this.verboseFilter[$];this.verboseLevel>=R}},vt=function($){for(var U=[],R=0;R<$.length;R++)U.push($[R].toString(16));return U},kt=function(){function ie(U,R,n,_,z){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=U||"white",this.underline=R||!1,this.italics=n||!1,this.background=_||"black",this.flash=z||!1}var $=ie.prototype;return $.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},$.setStyles=function(R){for(var n=["foreground","underline","italics","background","flash"],_=0;_<n.length;_++){var z=n[_];R.hasOwnProperty(z)&&(this[z]=R[z])}},$.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},$.equals=function(R){return this.foreground===R.foreground&&this.underline===R.underline&&this.italics===R.italics&&this.background===R.background&&this.flash===R.flash},$.copy=function(R){this.foreground=R.foreground,this.underline=R.underline,this.italics=R.italics,this.background=R.background,this.flash=R.flash},$.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},ie}(),Nt=function(){function ie(U,R,n,_,z,Q){this.uchar=void 0,this.penState=void 0,this.uchar=U||" ",this.penState=new kt(R,n,_,z,Q)}var $=ie.prototype;return $.reset=function(){this.uchar=" ",this.penState.reset()},$.setChar=function(R,n){this.uchar=R,this.penState.copy(n)},$.setPenState=function(R){this.penState.copy(R)},$.equals=function(R){return this.uchar===R.uchar&&this.penState.equals(R.penState)},$.copy=function(R){this.uchar=R.uchar,this.penState.copy(R.penState)},$.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},ie}(),wt=function(){function ie(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var U=0;U<Ve;U++)this.chars.push(new Nt);this.pos=0,this.currPenState=new kt}var $=ie.prototype;return $.equals=function(R){for(var n=!0,_=0;_<Ve;_++)if(!this.chars[_].equals(R.chars[_])){n=!1;break}return n},$.copy=function(R){for(var n=0;n<Ve;n++)this.chars[n].copy(R.chars[n])},$.isEmpty=function(){for(var R=!0,n=0;n<Ve;n++)if(!this.chars[n].isEmpty()){R=!1;break}return R},$.setCursor=function(R){this.pos!==R&&(this.pos=R),this.pos<0?(it.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Ve&&(it.log("ERROR","Too large cursor position "+this.pos),this.pos=Ve)},$.moveCursor=function(R){var n=this.pos+R;if(R>1)for(var _=this.pos+1;_<n+1;_++)this.chars[_].setPenState(this.currPenState);this.setCursor(n)},$.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},$.insertChar=function(R){R>=144&&this.backSpace();var n=De(R);if(this.pos>=Ve){it.log("ERROR","Cannot insert "+R.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)},$.clearFromPos=function(R){var n;for(n=R;n<Ve;n++)this.chars[n].reset()},$.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},$.clearToEndOfRow=function(){this.clearFromPos(this.pos)},$.getTextString=function(){for(var R=[],n=!0,_=0;_<Ve;_++){var z=this.chars[_].uchar;z!==" "&&(n=!1),R.push(z)}return n?"":R.join("")},$.setPenStyles=function(R){this.currPenState.setStyles(R);var n=this.chars[this.pos];n.setPenState(this.currPenState)},ie}(),Ot=function(){function ie(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var U=0;U<Fe;U++)this.rows.push(new wt);this.currRow=Fe-1,this.nrRollUpRows=null,this.reset()}var $=ie.prototype;return $.reset=function(){for(var R=0;R<Fe;R++)this.rows[R].clear();this.currRow=Fe-1},$.equals=function(R){for(var n=!0,_=0;_<Fe;_++)if(!this.rows[_].equals(R.rows[_])){n=!1;break}return n},$.copy=function(R){for(var n=0;n<Fe;n++)this.rows[n].copy(R.rows[n])},$.isEmpty=function(){for(var R=!0,n=0;n<Fe;n++)if(!this.rows[n].isEmpty()){R=!1;break}return R},$.backSpace=function(){var R=this.rows[this.currRow];R.backSpace()},$.clearToEndOfRow=function(){var R=this.rows[this.currRow];R.clearToEndOfRow()},$.insertChar=function(R){var n=this.rows[this.currRow];n.insertChar(R)},$.setPen=function(R){var n=this.rows[this.currRow];n.setPenStyles(R)},$.moveCursor=function(R){var n=this.rows[this.currRow];n.moveCursor(R)},$.setCursor=function(R){it.log("INFO","setCursor: "+R);var n=this.rows[this.currRow];n.setCursor(R)},$.setPAC=function(R){it.log("INFO","pacData = "+JSON.stringify(R));var n=R.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(var _=0;_<Fe;_++)this.rows[_].clear();var z=this.currRow+1-this.nrRollUpRows,Q=this.lastOutputScreen;if(Q){var de=Q.rows[z].cueStartTime;if(de&&it.time&&de<it.time)for(var Y=0;Y<this.nrRollUpRows;Y++)this.rows[n-this.nrRollUpRows+Y+1].copy(Q.rows[z+Y])}}this.currRow=n;var ne=this.rows[this.currRow];if(R.indent!==null){var ce=R.indent,ue=Math.max(ce-1,0);ne.setCursor(R.indent),R.color=ne.chars[ue].penState.foreground}var Ae={foreground:R.color,underline:R.underline,italics:R.italics,background:"black",flash:!1};this.setPen(Ae)},$.setBkgData=function(R){it.log("INFO","bkgData = "+JSON.stringify(R)),this.backSpace(),this.setPen(R),this.insertChar(32)},$.setRollUpRows=function(R){this.nrRollUpRows=R},$.rollUp=function(){if(this.nrRollUpRows===null){it.log("DEBUG","roll_up but nrRollUpRows not set yet");return}it.log("TEXT",this.getDisplayText());var R=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(R,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),it.log("INFO","Rolling up")},$.getDisplayText=function(R){R=R||!1;for(var n=[],_="",z=-1,Q=0;Q<Fe;Q++){var de=this.rows[Q].getTextString();de&&(z=Q+1,R?n.push("Row "+z+": '"+de+"'"):n.push(de.trim()))}return n.length>0&&(R?_="["+n.join(" | ")+"]":_=n.join(`
`)),_},$.getTextAndFormat=function(){return this.rows},ie}(),Pt=function(){function ie(U,R){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=U,this.outputFilter=R,this.mode=null,this.verbose=0,this.displayedMemory=new Ot,this.nonDisplayedMemory=new Ot,this.lastOutputScreen=new Ot,this.currRollUpRow=this.displayedMemory.rows[Fe-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var $=ie.prototype;return $.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Fe-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},$.getHandler=function(){return this.outputFilter},$.setHandler=function(R){this.outputFilter=R},$.setPAC=function(R){this.writeScreen.setPAC(R)},$.setBkgData=function(R){this.writeScreen.setBkgData(R)},$.setMode=function(R){R!==this.mode&&(this.mode=R,it.log("INFO","MODE="+R),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=R)},$.insertChars=function(R){for(var n=0;n<R.length;n++)this.writeScreen.insertChar(R[n]);var _=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";it.log("INFO",_+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(it.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},$.ccRCL=function(){it.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},$.ccBS=function(){it.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},$.ccAOF=function(){},$.ccAON=function(){},$.ccDER=function(){it.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},$.ccRU=function(R){it.log("INFO","RU("+R+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(R)},$.ccFON=function(){it.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},$.ccRDC=function(){it.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},$.ccTR=function(){it.log("INFO","TR"),this.setMode("MODE_TEXT")},$.ccRTD=function(){it.log("INFO","RTD"),this.setMode("MODE_TEXT")},$.ccEDM=function(){it.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},$.ccCR=function(){it.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},$.ccENM=function(){it.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},$.ccEOC=function(){if(it.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var R=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=R,this.writeScreen=this.nonDisplayedMemory,it.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},$.ccTO=function(R){it.log("INFO","TO("+R+") - Tab Offset"),this.writeScreen.moveCursor(R)},$.ccMIDROW=function(R){var n={flash:!1};if(n.underline=R%2===1,n.italics=R>=46,n.italics)n.foreground="white";else{var _=Math.floor(R/2)-16,z=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=z[_]}it.log("INFO","MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)},$.outputDataUpdate=function(R){R===void 0&&(R=!1);var n=it.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),R&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))},$.cueSplitAtTime=function(R){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,R,this.displayedMemory),this.cueStartTime=R))},ie}(),or=function(){function ie(U,R,n){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=U||1,this.outputs=[R,n],this.channels=[new Pt(1,R),new Pt(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var $=ie.prototype;return $.getHandler=function(R){return this.channels[R].getHandler()},$.setHandler=function(R,n){this.channels[R].setHandler(n)},$.addData=function(R,n){var _,z,Q,de=!1;this.lastTime=R,it.setTime(R);for(var Y=0;Y<n.length;Y+=2){if(z=n[Y]&127,Q=n[Y+1]&127,z===0&&Q===0){this.dataCounters.padding+=2;continue}else it.log("DATA","["+vt([n[Y],n[Y+1]])+"] -> ("+vt([z,Q])+")");if(_=this.parseCmd(z,Q),_||(_=this.parseMidrow(z,Q)),_||(_=this.parsePAC(z,Q)),_||(_=this.parseBackgroundAttributes(z,Q)),!_&&(de=this.parseChars(z,Q),de))if(this.currChNr&&this.currChNr>=0){var ne=this.channels[this.currChNr-1];ne.insertChars(de)}else it.log("WARNING","No channel found yet. TEXT-MODE?");_?this.dataCounters.cmd+=2:de?this.dataCounters.char+=2:(this.dataCounters.other+=2,it.log("WARNING","Couldn't parse cleaned data "+vt([z,Q])+" orig: "+vt([n[Y],n[Y+1]])))}},$.parseCmd=function(R,n){var _=null,z=(R===20||R===28)&&n>=32&&n<=47,Q=(R===23||R===31)&&n>=33&&n<=35;if(!(z||Q))return!1;if(R===this.lastCmdA&&n===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,it.log("DEBUG","Repeated command ("+vt([R,n])+") is dropped"),!0;R===20||R===23?_=1:_=2;var de=this.channels[_-1];return R===20||R===28?n===32?de.ccRCL():n===33?de.ccBS():n===34?de.ccAOF():n===35?de.ccAON():n===36?de.ccDER():n===37?de.ccRU(2):n===38?de.ccRU(3):n===39?de.ccRU(4):n===40?de.ccFON():n===41?de.ccRDC():n===42?de.ccTR():n===43?de.ccRTD():n===44?de.ccEDM():n===45?de.ccCR():n===46?de.ccENM():n===47&&de.ccEOC():de.ccTO(n-32),this.lastCmdA=R,this.lastCmdB=n,this.currChNr=_,!0},$.parseMidrow=function(R,n){var _=null;if((R===17||R===25)&&n>=32&&n<=47){if(R===17?_=1:_=2,_!==this.currChNr)return it.log("ERROR","Mismatch channel in midrow parsing"),!1;var z=this.channels[_-1];return z.ccMIDROW(n),it.log("DEBUG","MIDROW ("+vt([R,n])+")"),!0}return!1},$.parsePAC=function(R,n){var _=null,z=null,Q=(R>=17&&R<=23||R>=25&&R<=31)&&n>=64&&n<=127,de=(R===16||R===24)&&n>=64&&n<=95;if(!(Q||de))return!1;if(R===this.lastCmdA&&n===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;_=R<=23?1:2,n>=64&&n<=95?z=_===1?he[R]:et[R]:z=_===1?Je[R]:rt[R];var Y=this.interpretPAC(z,n),ne=this.channels[_-1];return ne.setPAC(Y),this.lastCmdA=R,this.lastCmdB=n,this.currChNr=_,!0},$.interpretPAC=function(R,n){var _=n,z={color:null,italics:!1,indent:null,underline:!1,row:R};return n>95?_=n-96:_=n-64,z.underline=(_&1)===1,_<=13?z.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(_/2)]:_<=15?(z.italics=!0,z.color="white"):z.indent=Math.floor((_-16)/2)*4,z},$.parseChars=function(R,n){var _=null,z=null,Q=null;if(R>=25?(_=2,Q=R-8):(_=1,Q=R),Q>=17&&Q<=19){var de=n;Q===17?de=n+80:Q===18?de=n+112:de=n+144,it.log("INFO","Special char '"+De(de)+"' in channel "+_),z=[de]}else R>=32&&R<=127&&(z=n===0?[R]:[R,n]);if(z){var Y=vt(z);it.log("DEBUG","Char codes =  "+Y.join(",")),this.lastCmdA=null,this.lastCmdB=null}return z},$.parseBackgroundAttributes=function(R,n){var _,z,Q,de,Y=(R===16||R===24)&&n>=32&&n<=47,ne=(R===23||R===31)&&n>=45&&n<=47;return Y||ne?(_={},R===16||R===24?(z=Math.floor((n-32)/2),_.background=ht[z],n%2===1&&(_.background=_.background+"_semi")):n===45?_.background="transparent":(_.foreground="black",n===47&&(_.underline=!0)),Q=R<24?1:2,de=this.channels[Q-1],de.setBkgData(_),this.lastCmdA=null,this.lastCmdB=null,!0):!1},$.reset=function(){for(var R=0;R<this.channels.length;R++)this.channels[R]&&this.channels[R].reset();this.lastCmdA=null,this.lastCmdB=null},$.cueSplitAtTime=function(R){for(var n=0;n<this.channels.length;n++)this.channels[n]&&this.channels[n].cueSplitAtTime(R)},ie}(),Vt=or,Jt=function(){function ie(U,R){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=U,this.trackName=R,this.startTime=null,this.endTime=null,this.screen=null}var $=ie.prototype;return $.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},$.newCue=function(R,n,_){(this.startTime===null||this.startTime>R)&&(this.startTime=R),this.endTime=n,this.screen=_,this.timelineController.createCaptionsTrack(this.trackName)},ie}(),Kt=function($,U,R){return $.substr(0,U.length)===U},$t=function($){var U=parseInt($.substr(-3)),R=parseInt($.substr(-6,2)),n=parseInt($.substr(-9,2)),_=$.length>9?parseInt($.substr(0,$.indexOf(":"))):0;if(!Object(y.isFiniteNumber)(U)||!Object(y.isFiniteNumber)(R)||!Object(y.isFiniteNumber)(n)||!Object(y.isFiniteNumber)(_))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+$);return U+=1e3*R,U+=60*1e3*n,U+=60*60*1e3*_,U},ir=function($){for(var U=5381,R=$.length;R;)U=U*33^$.charCodeAt(--R);return(U>>>0).toString()},Dt=function($,U,R){var n=$[U],_=$[n.prevCC];if(!_||!_.new&&n.new){$.ccOffset=$.presentationOffset=n.start,n.new=!1;return}for(;_&&_.new;)$.ccOffset+=n.start-_.start,n.new=!1,n=_,_=$[n.prevCC];$.presentationOffset=R},lr={parse:function($,U,R,n,_,z){var Q=/\r\n|\n\r|\n|\r/g,de=Object(an.utf8ArrayToStr)(new Uint8Array($)).trim().replace(Q,`
`).split(`
`),Y="00:00.000",ne=0,ce=0,ue=0,Ae=[],Pe,Ue=!0,Ye=!1,tt=new Ee;tt.oncue=function(ct){var st=R[n],Xe=R.ccOffset;st&&st.new&&(ce!==void 0?Xe=R.ccOffset=st.start:Dt(R,n,ue)),ue&&(Xe=ue-R.presentationOffset),Ye&&(ct.startTime+=Xe-ce,ct.endTime+=Xe-ce),ct.id=ir(ct.startTime.toString())+ir(ct.endTime.toString())+ir(ct.text),ct.text=decodeURIComponent(encodeURIComponent(ct.text)),ct.endTime>0&&Ae.push(ct)},tt.onparsingerror=function(ct){Pe=ct},tt.onflush=function(){if(Pe&&z){z(Pe);return}_(Ae)},de.forEach(function(ct){if(Ue)if(Kt(ct,"X-TIMESTAMP-MAP=")){Ue=!1,Ye=!0,ct.substr(16).split(",").forEach(function(st){Kt(st,"LOCAL:")?Y=st.substr(6):Kt(st,"MPEGTS:")&&(ne=parseInt(st.substr(7)))});try{U+(R[n].start*9e4||0)<0&&(U+=8589934592),ne-=U,ce=$t(Y)/1e3,ue=ne/9e4}catch(st){Ye=!1,Pe=st}return}else ct===""&&(Ue=!1);tt.parse(ct+`
`)}),tt.flush()}},zt=lr;function Bt(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function Et(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Wt=function(ie){Et($,ie);function $(R){var n;if(n=ie.call(this,R,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_USERDATA,c.default.FRAG_DECRYPTED,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.FRAG_LOADED,c.default.INIT_PTS_FOUND)||this,n.media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties=void 0,n.cea608Parser=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=null,n.hls=R,n.config=R.config,n.Cues=R.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var _=new Jt(Bt(n),"textTrack1"),z=new Jt(Bt(n),"textTrack2");n.cea608Parser=new Vt(0,_,z)}return n}var U=$.prototype;return U.addCues=function(n,_,z,Q){for(var de=this.cueRanges,Y=!1,ne=de.length;ne--;){var ce=de[ne],ue=Mt(ce[0],ce[1],_,z);if(ue>=0&&(ce[0]=Math.min(ce[0],_),ce[1]=Math.max(ce[1],z),Y=!0,ue/(z-_)>.5))return}Y||de.push([_,z]),this.Cues.newCue(this.captionsTracks[n],_,z,Q)},U.onInitPtsFound=function(n){var _=this,z=n.frag,Q=n.id,de=n.initPTS,Y=this.unparsedVttFrags;Q==="main"&&(this.initPTS[z.cc]=de),Y.length&&(this.unparsedVttFrags=[],Y.forEach(function(ne){_.onFragLoaded(ne)}))},U.getExistingTrack=function(n){var _=this.media;if(_)for(var z=0;z<_.textTracks.length;z++){var Q=_.textTracks[z];if(Q[n])return Q}return null},U.createCaptionsTrack=function(n){var _=this.captionsProperties,z=this.captionsTracks,Q=this.media,de=_[n],Y=de.label,ne=de.languageCode;if(!z[n]){var ce=this.getExistingTrack(n);if(ce)z[n]=ce,sn(z[n]),on(z[n],Q);else{var ue=this.createTextTrack("captions",Y,ne);ue&&(ue[n]=!0,z[n]=ue)}}},U.createTextTrack=function(n,_,z){var Q=this.media;if(Q)return Q.addTextTrack(n,_,z)},U.destroy=function(){ie.prototype.destroy.call(this)},U.onMediaAttaching=function(n){this.media=n.media,this._cleanTracks()},U.onMediaDetaching=function(){var n=this.captionsTracks;Object.keys(n).forEach(function(_){sn(n[_]),delete n[_]})},U.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},U._cleanTracks=function(){var n=this.media;if(n){var _=n.textTracks;if(_)for(var z=0;z<_.length;z++)sn(_[z])}},U.onManifestLoaded=function(n){var _=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=n.subtitles||[];var z=this.media?this.media.textTracks:[];this.tracks.forEach(function(Q,de){var Y;if(de<z.length){for(var ne=null,ce=0;ce<z.length;ce++)if(He(z[ce],Q)){ne=z[ce];break}ne&&(Y=ne)}Y||(Y=_.createTextTrack("subtitles",Q.name,Q.lang)),Q.default?Y.mode=_.hls.subtitleDisplay?"showing":"hidden":Y.mode="disabled",_.textTracks.push(Y)})}},U.onFragLoaded=function(n){var _=n.frag,z=n.payload,Q=this.cea608Parser,de=this.initPTS,Y=this.lastSn,ne=this.unparsedVttFrags;if(_.type==="main"){var ce=_.sn;_.sn!==Y+1&&Q&&Q.reset(),this.lastSn=ce}else if(_.type==="subtitle")if(z.byteLength){if(!Object(y.isFiniteNumber)(de[_.cc])){ne.push(n),de.length&&this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:_});return}var ue=_.decryptdata;(ue==null||ue.key==null||ue.method!=="AES-128")&&this._parseVTTs(_,z)}else this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:_})},U._parseVTTs=function(n,_){var z=this.hls,Q=this.prevCC,de=this.textTracks,Y=this.vttCCs;Y[n.cc]||(Y[n.cc]={start:n.start,prevCC:Q,new:!0},this.prevCC=n.cc),zt.parse(_,this.initPTS[n.cc],Y,n.cc,function(ne){var ce=de[n.level];if(ce.mode==="disabled"){z.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n});return}ne.forEach(function(ue){if(!ce.cues.getCueById(ue.id))try{if(ce.addCue(ue),!ce.cues.getCueById(ue.id))throw new Error("addCue is failed for: "+ue)}catch(Pe){d.logger.debug("Failed occurred on adding cues: "+Pe);var Ae=new window.TextTrackCue(ue.startTime,ue.endTime,ue.text);Ae.id=ue.id,ce.addCue(Ae)}}),z.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(ne){d.logger.log("Failed to parse VTT cue: "+ne),z.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})})},U.onFragDecrypted=function(n){var _=n.frag,z=n.payload;if(_.type==="subtitle"){if(!Object(y.isFiniteNumber)(this.initPTS[_.cc])){this.unparsedVttFrags.push(n);return}this._parseVTTs(_,z)}},U.onFragParsingUserdata=function(n){if(!(!this.enabled||!this.cea608Parser))for(var _=0;_<n.samples.length;_++){var z=n.samples[_].bytes;if(z){var Q=this.extractCea608Data(z);this.cea608Parser.addData(n.samples[_].pts,Q)}}},U.extractCea608Data=function(n){for(var _=n[0]&31,z=2,Q,de,Y,ne,ce,ue=[],Ae=0;Ae<_;Ae++)Q=n[z++],de=127&n[z++],Y=127&n[z++],ne=(4&Q)!==0,ce=3&Q,!(de===0&&Y===0)&&ne&&ce===0&&(ue.push(de),ue.push(Y));return ue},$}(u);function He(ie,$){return ie&&ie.label===$.name&&!(ie.textTrack1||ie.textTrack2)}function Mt(ie,$,U,R){return Math.min($,R)-Math.max(ie,U)}var xt=Wt;function gr(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function pt(ie,$,U){return $&&gr(ie.prototype,$),ie}function Ft(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Tr=function(ie){Ft($,ie);function $(R){var n;return n=ie.call(this,R,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADED,c.default.SUBTITLE_TRACK_LOADED)||this,n.tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}var U=$.prototype;return U.destroy=function(){u.prototype.destroy.call(this)},U.onMediaAttached=function(n){var _=this;this.media=n.media,this.media&&(Object(y.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){_.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},U.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(y.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var n=Sr(this.media.textTracks);n.forEach(function(_){sn(_)}),this.subtitleTrack=-1,this.media=null}},U.onManifestLoaded=function(n){var _=this,z=n.subtitles||[];this.tracks=z,this.hls.trigger(c.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:z}),z.forEach(function(Q){Q.default&&(_.media?_.subtitleTrack=Q.id:_.queuedDefaultTrack=Q.id)})},U.onSubtitleTrackLoaded=function(n){var _=this,z=n.id,Q=n.details,de=this.trackId,Y=this.tracks,ne=Y[de];if(z>=Y.length||z!==de||!ne||this.stopped){this._clearReloadTimer();return}if(d.logger.log("subtitle track "+z+" loaded"),Q.live){var ce=jt(ne.details,Q,n.stats.trequest);d.logger.log("Reloading live subtitle playlist in "+ce+"ms"),this.timer=setTimeout(function(){_._loadCurrentTrack()},ce)}else this._clearReloadTimer()},U.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},U.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},U._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},U._loadCurrentTrack=function(){var n=this.trackId,_=this.tracks,z=this.hls,Q=_[n];n<0||!Q||Q.details&&!Q.details.live||(d.logger.log("Loading subtitle track "+n),z.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:Q.url,id:n}))},U._toggleTrackModes=function(n){var _=this.media,z=this.subtitleDisplay,Q=this.trackId;if(_){var de=Sr(_.textTracks);if(n===-1)[].slice.call(de).forEach(function(ce){ce.mode="disabled"});else{var Y=de[Q];Y&&(Y.mode="disabled")}var ne=de[n];ne&&(ne.mode=z?"showing":"hidden")}},U._setSubtitleTrackInternal=function(n){var _=this.hls,z=this.tracks;!Object(y.isFiniteNumber)(n)||n<-1||n>=z.length||(this.trackId=n,d.logger.log("Switching to subtitle track "+n),_.trigger(c.default.SUBTITLE_TRACK_SWITCH,{id:n}),this._loadCurrentTrack())},U._onTextTracksChanged=function(){if(this.media){for(var n=-1,_=Sr(this.media.textTracks),z=0;z<_.length;z++)if(_[z].mode==="hidden")n=z;else if(_[z].mode==="showing"){n=z;break}this.subtitleTrack=n}},pt($,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(n){this.trackId!==n&&(this._toggleTrackModes(n),this._setSubtitleTrackInternal(n))}}]),$}(u);function Sr(ie){for(var $=[],U=0;U<ie.length;U++){var R=ie[U];R.kind==="subtitles"&&R.label&&$.push(ie[U])}return $}var Mr=Tr,gn=f("./src/crypt/decrypter.js");function Un(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function Gn(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Vn=window,Sn=Vn.performance,zn=500,Yn=function(ie){Gn($,ie);function $(R,n){var _;return _=ie.call(this,R,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.ERROR,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.SUBTITLE_TRACKS_UPDATED,c.default.SUBTITLE_TRACK_SWITCH,c.default.SUBTITLE_TRACK_LOADED,c.default.SUBTITLE_FRAG_PROCESSED,c.default.LEVEL_UPDATED)||this,_.fragmentTracker=n,_.config=R.config,_.state=Qe.STOPPED,_.tracks=[],_.tracksBuffered=[],_.currentTrackId=-1,_.decrypter=new gn.default(R,R.config),_.lastAVStart=0,_._onMediaSeeking=_.onMediaSeeking.bind(Un(_)),_}var U=$.prototype;return U.onSubtitleFragProcessed=function(n){var _=n.frag,z=n.success;if(this.fragPrevious=_,this.state=Qe.IDLE,!!z){var Q=this.tracksBuffered[this.currentTrackId];if(Q){for(var de,Y=_.start,ne=0;ne<Q.length;ne++)if(Y>=Q[ne].start&&Y<=Q[ne].end){de=Q[ne];break}var ce=_.start+_.duration;de?de.end=ce:(de={start:Y,end:ce},Q.push(de))}}},U.onMediaAttached=function(n){var _=n.media;this.media=_,_.addEventListener("seeking",this._onMediaSeeking),this.state=Qe.IDLE},U.onMediaDetaching=function(){var n=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(_){n.tracksBuffered[_.id]=[]}),this.media=null,this.state=Qe.STOPPED)},U.onError=function(n){var _=n.frag;!_||_.type!=="subtitle"||(this.state=Qe.IDLE)},U.onSubtitleTracksUpdated=function(n){var _=this;d.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=n.subtitleTracks,this.tracks.forEach(function(z){_.tracksBuffered[z.id]=[]})},U.onSubtitleTrackSwitch=function(n){if(this.currentTrackId=n.id,!this.tracks||!this.tracks.length||this.currentTrackId===-1){this.clearInterval();return}var _=this.tracks[this.currentTrackId];_&&_.details&&this.setInterval(zn)},U.onSubtitleTrackLoaded=function(n){var _=n.id,z=n.details,Q=this.currentTrackId,de=this.tracks,Y=de[Q];_>=de.length||_!==Q||!Y||(z.live&&Yt(Y.details,z,this.lastAVStart),Y.details=z,this.setInterval(zn))},U.onKeyLoaded=function(){this.state===Qe.KEY_LOADING&&(this.state=Qe.IDLE)},U.onFragLoaded=function(n){var _=this.fragCurrent,z=n.frag.decryptdata,Q=n.frag,de=this.hls;if(this.state===Qe.FRAG_LOADING&&_&&n.frag.type==="subtitle"&&_.sn===n.frag.sn&&n.payload.byteLength>0&&z&&z.key&&z.method==="AES-128"){var Y=Sn.now();this.decrypter.decrypt(n.payload,z.key.buffer,z.iv.buffer,function(ne){var ce=Sn.now();de.trigger(c.default.FRAG_DECRYPTED,{frag:Q,payload:ne,stats:{tstart:Y,tdecrypt:ce}})})}},U.onLevelUpdated=function(n){var _=n.details,z=_.fragments;this.lastAVStart=z.length?z[0].start:0},U.doTick=function(){if(!this.media){this.state=Qe.IDLE;return}switch(this.state){case Qe.IDLE:{var n=this.config,_=this.currentTrackId,z=this.fragmentTracker,Q=this.media,de=this.tracks;if(!de||!de[_]||!de[_].details)break;var Y=n.maxBufferHole,ne=n.maxFragLookUpTolerance,ce=Math.min(n.maxBufferLength,n.maxMaxBufferLength),ue=F.bufferedInfo(this._getBuffered(),Q.currentTime,Y),Ae=ue.end,Pe=ue.len,Ue=de[_].details,Ye=Ue.fragments,tt=Ye.length,ct=Ye[tt-1].start+Ye[tt-1].duration;if(Pe>ce)return;var st,Xe=this.fragPrevious;Ae<ct?(Xe&&Ue.hasProgramDateTime&&(st=cr(Ye,Xe.endProgramDateTime,ne)),st||(st=hr(Xe,Ye,Ae,ne))):st=Ye[tt-1],st&&st.encrypted?(d.logger.log("Loading key for "+st.sn),this.state=Qe.KEY_LOADING,this.hls.trigger(c.default.KEY_LOADING,{frag:st})):st&&z.getState(st)===_e.NOT_LOADED&&(this.fragCurrent=st,this.state=Qe.FRAG_LOADING,this.hls.trigger(c.default.FRAG_LOADING,{frag:st}))}}},U.stopLoad=function(){this.lastAVStart=0,ie.prototype.stopLoad.call(this)},U._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},U.onMediaSeeking=function(){this.fragPrevious=null},$}(Lr),Wr;(function(ie){ie.WIDEVINE="com.widevine.alpha",ie.PLAYREADY="com.microsoft.playready"})(Wr||(Wr={}));var Kn=function(){return typeof window<"u"&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function ci(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function qn(ie,$,U){return $&&ci(ie.prototype,$),ie}function di(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var hi=3,yi=function($,U){var R={videoCapabilities:[]};return U.forEach(function(n){R.videoCapabilities.push({contentType:'video/mp4; codecs="'+n+'"'})}),[R]},bi=function($,U,R){switch($){case Wr.WIDEVINE:return yi(U,R);default:throw new Error("Unknown key-system: "+$)}},xi=function(ie){di($,ie);function $(R){var n;return n=ie.call(this,R,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHED,c.default.MANIFEST_PARSED)||this,n._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n._onMediaEncrypted=function(_){d.logger.log('Media is encrypted using "'+_.initDataType+'" init data type'),n._attemptSetMediaKeys(),n._generateRequestWithPreferredKeySession(_.initDataType,_.initData)},n._config=R.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n}var U=$.prototype;return U.getLicenseServerUrl=function(n){switch(n){case Wr.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+n+'"')},U._attemptKeySystemAccess=function(n,_,z){var Q=this,de=bi(n,_,z);d.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(n,de).then(function(Y){Q._onMediaKeySystemAccessObtained(n,Y)}).catch(function(Y){d.logger.error('Failed to obtain key-system "'+n+'" access:',Y)})},U._onMediaKeySystemAccessObtained=function(n,_){var z=this;d.logger.log('Access for key-system "'+n+'" obtained');var Q={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:_,mediaKeySystemDomain:n};this._mediaKeysList.push(Q),_.createMediaKeys().then(function(de){Q.mediaKeys=de,d.logger.log('Media-keys created for key-system "'+n+'"'),z._onMediaKeysCreated()}).catch(function(de){d.logger.error("Failed to create media-keys:",de)})},U._onMediaKeysCreated=function(){var n=this;this._mediaKeysList.forEach(function(_){_.mediaKeysSession||(_.mediaKeysSession=_.mediaKeys.createSession(),n._onNewMediaKeySession(_.mediaKeysSession))})},U._onNewMediaKeySession=function(n){var _=this;d.logger.log("New key-system session "+n.sessionId),n.addEventListener("message",function(z){_._onKeySessionMessage(n,z.message)},!1)},U._onKeySessionMessage=function(n,_){d.logger.log("Got EME message event, creating license request"),this._requestLicense(_,function(z){d.logger.log("Received license data (length: "+(z&&z.byteLength)+"), updating key-session"),n.update(z)})},U._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var n=this._mediaKeysList[0];if(!n||!n.mediaKeys){d.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}d.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(n.mediaKeys),this._hasSetMediaKeys=!0}},U._generateRequestWithPreferredKeySession=function(n,_){var z=this,Q=this._mediaKeysList[0];if(!Q){d.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(Q.mediaKeysSessionInitialized){d.logger.warn("Key-Session already initialized but requested again");return}var de=Q.mediaKeysSession;if(!de){d.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!_){d.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}d.logger.log('Generating key-session request for "'+n+'" init data type'),Q.mediaKeysSessionInitialized=!0,de.generateRequest(n,_).then(function(){d.logger.debug("Key-session generation succeeded")}).catch(function(Y){d.logger.error("Error generating key-session request:",Y),z.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},U._createLicenseXhr=function(n,_,z){var Q=new XMLHttpRequest,de=this._licenseXhrSetup;try{if(de)try{de(Q,n)}catch{Q.open("POST",n,!0),de(Q,n)}Q.readyState||Q.open("POST",n,!0)}catch(Y){throw new Error("issue setting up KeySystem license XHR "+Y)}return Q.responseType="arraybuffer",Q.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,Q,n,_,z),Q},U._onLicenseRequestReadyStageChange=function(n,_,z,Q){switch(n.readyState){case 4:if(n.status===200)this._requestLicenseFailureCount=0,d.logger.log("License request succeeded"),n.responseType!=="arraybuffer"&&d.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),Q(n.response);else{if(d.logger.error("License Request XHR failed ("+_+"). Status: "+n.status+" ("+n.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>hi){this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var de=hi-this._requestLicenseFailureCount+1;d.logger.warn("Retrying license request, "+de+" attempts left"),this._requestLicense(z,Q)}break}},U._generateLicenseRequestChallenge=function(n,_){switch(n.mediaKeySystemDomain){case Wr.WIDEVINE:return _}throw new Error("unsupported key-system: "+n.mediaKeySystemDomain)},U._requestLicense=function(n,_){d.logger.log("Requesting content license for key-system");var z=this._mediaKeysList[0];if(!z){d.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var Q=this.getLicenseServerUrl(z.mediaKeySystemDomain),de=this._createLicenseXhr(Q,n,_);d.logger.log("Sending license request to URL: "+Q);var Y=this._generateLicenseRequestChallenge(z,n);de.send(Y)}catch(ne){d.logger.error("Failure requesting DRM license: "+ne),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.KEY_SYSTEM_ERROR,details:p.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},U.onMediaAttached=function(n){if(this._emeEnabled){var _=n.media;this._media=_,_.addEventListener("encrypted",this._onMediaEncrypted)}},U.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},U.onManifestParsed=function(n){if(this._emeEnabled){var _=n.levels.map(function(Q){return Q.audioCodec}),z=n.levels.map(function(Q){return Q.videoCodec});this._attemptKeySystemAccess(Wr.WIDEVINE,_,z)}},qn($,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),$}(u),Li=xi;function Ci(ie){for(var $=1;$<arguments.length;$++){var U=arguments[$]!=null?arguments[$]:{},R=Object.keys(U);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(U).filter(function(n){return Object.getOwnPropertyDescriptor(U,n).enumerable}))),R.forEach(function(n){fi(ie,n,U[n])})}return ie}function fi(ie,$,U){return $ in ie?Object.defineProperty(ie,$,{value:U,enumerable:!0,configurable:!0,writable:!0}):ie[$]=U,ie}var ei=Ci({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:60*1e3*1e3,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:hn,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:_n,bufferController:tn,capLevelController:Qr,fpsController:Fn,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Kn},_i(),{subtitleStreamController:Yn,subtitleTrackController:Mr,timelineController:xt,audioStreamController:e,audioTrackController:Qn,emeController:Li});function _i(){return{cueHandler:h,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"}}f.d(x,"default",function(){return Ti});function Ai(ie){for(var $=1;$<arguments.length;$++){var U=arguments[$]!=null?arguments[$]:{},R=Object.keys(U);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(U).filter(function(n){return Object.getOwnPropertyDescriptor(U,n).enumerable}))),R.forEach(function(n){Ei(ie,n,U[n])})}return ie}function Ei(ie,$,U){return $ in ie?Object.defineProperty(ie,$,{value:U,enumerable:!0,configurable:!0,writable:!0}):ie[$]=U,ie}function vr(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function ti(ie,$){for(var U=0;U<$.length;U++){var R=$[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ie,R.key,R)}}function pi(ie,$,U){return $&&ti(ie.prototype,$),U&&ti(ie,U),ie}function ri(ie,$){ie.prototype=Object.create($.prototype),ie.prototype.constructor=ie,ie.__proto__=$}var Ti=function(ie){ri($,ie),$.isSupported=function(){return yn()},pi($,null,[{key:"version",get:function(){return"0.13.2"}},{key:"Events",get:function(){return c.default}},{key:"ErrorTypes",get:function(){return p.ErrorTypes}},{key:"ErrorDetails",get:function(){return p.ErrorDetails}},{key:"DefaultConfig",get:function(){return $.defaultConfig?$.defaultConfig:ei},set:function(n){$.defaultConfig=n}}]);function $(R){var n;R===void 0&&(R={}),n=ie.call(this)||this,n.config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var _=$.DefaultConfig;if((R.liveSyncDurationCount||R.liveMaxLatencyDurationCount)&&(R.liveSyncDuration||R.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=Ai({},_,R);var z=vr(n),Q=z.config;if(Q.liveMaxLatencyDurationCount!==void 0&&Q.liveMaxLatencyDurationCount<=Q.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(Q.liveMaxLatencyDuration!==void 0&&(Q.liveSyncDuration===void 0||Q.liveMaxLatencyDuration<=Q.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(d.enableLogs)(Q.debug),n._autoLevelCapping=-1;var de=n.abrController=new Q.abrController(vr(n)),Y=new Q.bufferController(vr(n)),ne=n.capLevelController=new Q.capLevelController(vr(n)),ce=new Q.fpsController(vr(n)),ue=new je(vr(n)),Ae=new Oe(vr(n)),Pe=new gt(vr(n)),Ue=new kn(vr(n)),Ye=n.levelController=new en(vr(n)),tt=new Me(vr(n)),ct=n.streamController=new Xr(vr(n),tt),st=[Ye,ct],Xe=Q.audioStreamController;Xe&&st.push(new Xe(vr(n),tt)),n.networkControllers=st;var At=[ue,Ae,Pe,de,Y,ne,ce,Ue,tt];if(Xe=Q.audioTrackController,Xe){var It=new Xe(vr(n));n.audioTrackController=It,At.push(It)}if(Xe=Q.subtitleTrackController,Xe){var ut=new Xe(vr(n));n.subtitleTrackController=ut,st.push(ut)}if(Xe=Q.emeController,Xe){var Ut=new Xe(vr(n));n.emeController=Ut,At.push(Ut)}return Xe=Q.subtitleStreamController,Xe&&st.push(new Xe(vr(n),tt)),Xe=Q.timelineController,Xe&&At.push(new Xe(vr(n))),n.coreComponents=At,n}var U=$.prototype;return U.destroy=function(){d.logger.log("destroy"),this.trigger(c.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(n){n.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},U.attachMedia=function(n){d.logger.log("attachMedia"),this.media=n,this.trigger(c.default.MEDIA_ATTACHING,{media:n})},U.detachMedia=function(){d.logger.log("detachMedia"),this.trigger(c.default.MEDIA_DETACHING),this.media=null},U.loadSource=function(n){n=w.buildAbsoluteURL(window.location.href,n,{alwaysNormalize:!0}),d.logger.log("loadSource:"+n),this.url=n,this.trigger(c.default.MANIFEST_LOADING,{url:n})},U.startLoad=function(n){n===void 0&&(n=-1),d.logger.log("startLoad("+n+")"),this.networkControllers.forEach(function(_){_.startLoad(n)})},U.stopLoad=function(){d.logger.log("stopLoad"),this.networkControllers.forEach(function(n){n.stopLoad()})},U.swapAudioCodec=function(){d.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},U.recoverMediaError=function(){d.logger.log("recoverMediaError");var n=this.media;this.detachMedia(),n&&this.attachMedia(n)},pi($,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(n){d.logger.log("set currentLevel:"+n),this.loadLevel=n,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(n){d.logger.log("set nextLevel:"+n),this.levelController.manualLevel=n,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(n){d.logger.log("set loadLevel:"+n),this.levelController.manualLevel=n}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(n){this.levelController.nextLoadLevel=n}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(n){d.logger.log("set firstLevel:"+n),this.levelController.firstLevel=n}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(n){d.logger.log("set startLevel:"+n),n!==-1&&(n=Math.max(n,this.minAutoLevel)),this.levelController.startLevel=n}},{key:"capLevelToPlayerSize",set:function(n){var _=!!n;_!==this.config.capLevelToPlayerSize&&(_?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=_)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(n){d.logger.log("set autoLevelCapping:"+n),this._autoLevelCapping=n}},{key:"bandwidthEstimate",get:function(){var n=this.abrController._bwEstimator;return n?n.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var n=this.levels,_=this.config.minAutoBitrate,z=n?n.length:0,Q=0;Q<z;Q++){var de=n[Q].realBitrate?Math.max(n[Q].realBitrate,n[Q].bitrate):n[Q].bitrate;if(de>_)return Q}return 0}},{key:"maxAutoLevel",get:function(){var n=this.levels,_=this.autoLevelCapping,z;return _===-1&&n&&n.length?z=n.length-1:z=_,z}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(n){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,n)}},{key:"audioTracks",get:function(){var n=this.audioTrackController;return n?n.audioTracks:[]}},{key:"audioTrack",get:function(){var n=this.audioTrackController;return n?n.audioTrack:-1},set:function(n){var _=this.audioTrackController;_&&(_.audioTrack=n)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTrack:-1},set:function(n){var _=this.subtitleTrackController;_&&(_.subtitleTrack=n)}},{key:"subtitleDisplay",get:function(){var n=this.subtitleTrackController;return n?n.subtitleDisplay:!1},set:function(n){var _=this.subtitleTrackController;_&&(_.subtitleDisplay=n)}}]),$}(Ie);Ti.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":function(o,x,f){f.r(x),f.d(x,"isFiniteNumber",function(){return h});var h=Number.isFinite||function(w){return typeof w=="number"&&isFinite(w)}},"./src/utils/get-self-scope.js":function(o,x,f){f.r(x),f.d(x,"getSelfScope",function(){return h});function h(){return typeof window>"u"?self:window}},"./src/utils/logger.js":function(o,x,f){f.r(x),f.d(x,"enableLogs",function(){return u}),f.d(x,"logger",function(){return g});var h=f("./src/utils/get-self-scope.js");function w(){}var p={trace:w,debug:w,log:w,warn:w,info:w,error:w},y=p;function c(s,l){return l="["+s+"] > "+l,l}var d=Object(h.getSelfScope)();function C(s){var l=d.console[s];return l?function(){for(var S=arguments.length,E=new Array(S),O=0;O<S;O++)E[O]=arguments[O];E[0]&&(E[0]=c(s,E[0])),l.apply(d.console,E)}:w}function b(s){for(var l=arguments.length,S=new Array(l>1?l-1:0),E=1;E<l;E++)S[E-1]=arguments[E];S.forEach(function(O){y[O]=s[O]?s[O].bind(s):C(O)})}var u=function(l){if(d.console&&l===!0||typeof l=="object"){b(l,"debug","log","info","warn","error");try{y.log()}catch{y=p}}else y=p},g=y}}).default})},"./node_modules/node-libs-browser/node_modules/process/browser.js":function(B,T){var t=B.exports={},o,x;function f(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=f}catch{o=f}try{typeof clearTimeout=="function"?x=clearTimeout:x=h}catch{x=h}})();function w(l){if(o===setTimeout)return setTimeout(l,0);if((o===f||!o)&&setTimeout)return o=setTimeout,setTimeout(l,0);try{return o(l,0)}catch{try{return o.call(null,l,0)}catch{return o.call(this,l,0)}}}function p(l){if(x===clearTimeout)return clearTimeout(l);if((x===h||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(l);try{return x(l)}catch{try{return x.call(null,l)}catch{return x.call(this,l)}}}var y=[],c=!1,d,C=-1;function b(){!c||!d||(c=!1,d.length?y=d.concat(y):C=-1,y.length&&u())}function u(){if(!c){var l=w(b);c=!0;for(var S=y.length;S;){for(d=y,y=[];++C<S;)d&&d[C].run();C=-1,S=y.length}d=null,c=!1,p(l)}}t.nextTick=function(l){var S=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)S[E-1]=arguments[E];y.push(new g(l,S)),y.length===1&&!c&&w(u)};function g(l,S){this.fun=l,this.array=S}g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function s(){}t.on=s,t.addListener=s,t.once=s,t.off=s,t.removeListener=s,t.removeAllListeners=s,t.emit=s,t.binding=function(l){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(l){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},"./node_modules/style-loader/lib/addStyles.js":function(B,T,t){var o={},x=function(M){var L;return function(){return typeof L>"u"&&(L=M.apply(this,arguments)),L}},f=x(function(){return window&&document&&document.all&&!window.atob}),h=function(M){return document.querySelector(M)},w=function(M){var L={};return function(V){if(typeof V=="function")return V();if(typeof L[V]>"u"){var j=h.call(this,V);if(window.HTMLIFrameElement&&j instanceof window.HTMLIFrameElement)try{j=j.contentDocument.head}catch{j=null}L[V]=j}return L[V]}}(),p=null,y=0,c=[],d=t("./node_modules/style-loader/lib/urls.js");B.exports=function(M,L){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");L=L||{},L.attrs=typeof L.attrs=="object"?L.attrs:{},!L.singleton&&typeof L.singleton!="boolean"&&(L.singleton=f()),L.insertInto||(L.insertInto="head"),L.insertAt||(L.insertAt="bottom");var V=b(M,L);return C(V,L),function(N){for(var G=[],K=0;K<V.length;K++){var k=V[K],J=o[k.id];J.refs--,G.push(J)}if(N){var se=b(N,L);C(se,L)}for(var K=0;K<G.length;K++){var J=G[K];if(J.refs===0){for(var te=0;te<J.parts.length;te++)J.parts[te]();delete o[J.id]}}}};function C(M,L){for(var V=0;V<M.length;V++){var j=M[V],N=o[j.id];if(N){N.refs++;for(var G=0;G<N.parts.length;G++)N.parts[G](j.parts[G]);for(;G<j.parts.length;G++)N.parts.push(E(j.parts[G],L))}else{for(var K=[],G=0;G<j.parts.length;G++)K.push(E(j.parts[G],L));o[j.id]={id:j.id,refs:1,parts:K}}}}function b(M,L){for(var V=[],j={},N=0;N<M.length;N++){var G=M[N],K=L.base?G[0]+L.base:G[0],k=G[1],J=G[2],se=G[3],te={css:k,media:J,sourceMap:se};j[K]?j[K].parts.push(te):V.push(j[K]={id:K,parts:[te]})}return V}function u(M,L){var V=w(M.insertInto);if(!V)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var j=c[c.length-1];if(M.insertAt==="top")j?j.nextSibling?V.insertBefore(L,j.nextSibling):V.appendChild(L):V.insertBefore(L,V.firstChild),c.push(L);else if(M.insertAt==="bottom")V.appendChild(L);else if(typeof M.insertAt=="object"&&M.insertAt.before){var N=w(M.insertInto+" "+M.insertAt.before);V.insertBefore(L,N)}else throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`)}function g(M){if(M.parentNode===null)return!1;M.parentNode.removeChild(M);var L=c.indexOf(M);L>=0&&c.splice(L,1)}function s(M){var L=document.createElement("style");return M.attrs.type="text/css",S(L,M.attrs),u(M,L),L}function l(M){var L=document.createElement("link");return M.attrs.type="text/css",M.attrs.rel="stylesheet",S(L,M.attrs),u(M,L),L}function S(M,L){Object.keys(L).forEach(function(V){M.setAttribute(V,L[V])})}function E(M,L){var V,j,N,G;if(L.transform&&M.css)if(G=L.transform(M.css),G)M.css=G;else return function(){};if(L.singleton){var K=y++;V=p||(p=s(L)),j=P.bind(null,V,K,!1),N=P.bind(null,V,K,!0)}else M.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(V=l(L),j=D.bind(null,V,L),N=function(){g(V),V.href&&URL.revokeObjectURL(V.href)}):(V=s(L),j=A.bind(null,V),N=function(){g(V)});return j(M),function(J){if(J){if(J.css===M.css&&J.media===M.media&&J.sourceMap===M.sourceMap)return;j(M=J)}else N()}}var O=function(){var M=[];return function(L,V){return M[L]=V,M.filter(Boolean).join(`
`)}}();function P(M,L,V,j){var N=V?"":j.css;if(M.styleSheet)M.styleSheet.cssText=O(L,N);else{var G=document.createTextNode(N),K=M.childNodes;K[L]&&M.removeChild(K[L]),K.length?M.insertBefore(G,K[L]):M.appendChild(G)}}function A(M,L){var V=L.css,j=L.media;if(j&&M.setAttribute("media",j),M.styleSheet)M.styleSheet.cssText=V;else{for(;M.firstChild;)M.removeChild(M.firstChild);M.appendChild(document.createTextNode(V))}}function D(M,L,V){var j=V.css,N=V.sourceMap,G=L.convertToAbsoluteUrls===void 0&&N;(L.convertToAbsoluteUrls||G)&&(j=d(j)),N&&(j+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(N))))+" */");var K=new Blob([j],{type:"text/css"}),k=M.href;M.href=URL.createObjectURL(K),k&&URL.revokeObjectURL(k)}},"./node_modules/style-loader/lib/urls.js":function(B,T){B.exports=function(t){var o=typeof window<"u"&&window.location;if(!o)throw new Error("fixUrls requires window.location");if(!t||typeof t!="string")return t;var x=o.protocol+"//"+o.host,f=x+o.pathname.replace(/\/[^\/]*$/,"/"),h=t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(w,p){var y=p.trim().replace(/^"(.*)"$/,function(d,C){return C}).replace(/^'(.*)'$/,function(d,C){return C});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(y))return w;var c;return y.indexOf("//")===0?c=y:y.indexOf("/")===0?c=x+y:c=f+y.replace(/^\.\//,""),"url("+JSON.stringify(c)+")"});return h}},"./src/base/base_object.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=u(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=u(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=u(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=u(y),d=t("./src/base/utils.js"),C=t("./src/base/events.js"),b=u(C);function u(s){return s&&s.__esModule?s:{default:s}}var g=function(s){(0,c.default)(l,s),(0,p.default)(l,[{key:"options",get:function(){return this._options}}]);function l(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,x.default)(this,l);var E=(0,h.default)(this,s.call(this,S));return E._options=S,E.uniqueId=(0,d.uniqueId)("o"),E}return l}(b.default);T.default=g,B.exports=T.default},"./src/base/container_plugin.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=S(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=S(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=S(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=S(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=S(d),b=t("./src/base/base_object.js"),u=S(b),g=t("./src/base/utils.js"),s=t("./src/base/error_mixin.js"),l=S(s);function S(O){return O&&O.__esModule?O:{default:O}}var E=function(O){(0,C.default)(P,O),(0,c.default)(P,[{key:"playerError",get:function(){return this.container.playerError}}]);function P(A){(0,h.default)(this,P);var D=(0,p.default)(this,O.call(this,A.options));return D.container=A,D.enabled=!0,D.bindEvents(),D}return P.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},P.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},P.prototype.bindEvents=function(){},P.prototype.destroy=function(){this.stopListening()},P}(u.default);T.default=E,(0,x.default)(E.prototype,l.default),E.extend=function(O){return(0,g.extend)(E,O)},E.type="container",B.exports=T.default},"./src/base/core_plugin.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=S(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=S(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=S(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=S(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=S(d),b=t("./src/base/utils.js"),u=t("./src/base/base_object.js"),g=S(u),s=t("./src/base/error_mixin.js"),l=S(s);function S(O){return O&&O.__esModule?O:{default:O}}var E=function(O){(0,C.default)(P,O),(0,c.default)(P,[{key:"playerError",get:function(){return this.core.playerError}}]);function P(A){(0,h.default)(this,P);var D=(0,p.default)(this,O.call(this,A.options));return D.core=A,D.enabled=!0,D.bindEvents(),D}return P.prototype.bindEvents=function(){},P.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},P.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},P.prototype.getExternalInterface=function(){return{}},P.prototype.destroy=function(){this.stopListening()},P}(g.default);T.default=E,(0,x.default)(E.prototype,l.default),E.extend=function(O){return(0,b.extend)(E,O)},E.type="core",B.exports=T.default},"./src/base/error_mixin.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=y(o),f=t("./src/plugins/log/index.js"),h=y(f),w=t("./src/components/error/index.js"),p=y(w);function y(d){return d&&d.__esModule?d:{default:d}}var c={createError:function(C){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{useCodePrefix:!0},u=this.constructor&&this.constructor.type||"",g=this.name||u,s=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,l=g+":"+(C&&C.code||"unknown"),S={description:"",level:p.default.Levels.FATAL,origin:g,scope:u,raw:{}},E=(0,x.default)({},S,C,{code:b.useCodePrefix?l:C.code});if(s&&E.level==p.default.Levels.FATAL&&!E.UI){var O={title:s.t("default_error_title"),message:s.t("default_error_message")};E.UI=O}return this.playerError?this.playerError.createError(E):h.default.warn(g,"PlayerError is not defined. Error: ",E),E}};T.default=c,B.exports=T.default},"./src/base/events.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/keys.js"),x=C(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=C(f),w=t("./node_modules/babel-runtime/helpers/typeof.js"),p=C(w),y=t("./src/plugins/log/index.js"),c=C(y),d=t("./src/base/utils.js");function C(E){return E&&E.__esModule?E:{default:E}}var b=Array.prototype.slice,u=/\s+/,g=function(O,P,A,D){if(!A)return!0;if((typeof A>"u"?"undefined":(0,p.default)(A))==="object"){for(var M in A)O[P].apply(O,[M,A[M]].concat(D));return!1}if(u.test(A)){for(var L=A.split(u),V=0,j=L.length;V<j;V++)O[P].apply(O,[L[V]].concat(D));return!1}return!0},s=function(O,P,A,D){var M=void 0,L=-1,V=O.length,j=P[0],N=P[1],G=P[2];K();function K(){try{switch(P.length){case 0:for(;++L<V;)(M=O[L]).callback.call(M.ctx);return;case 1:for(;++L<V;)(M=O[L]).callback.call(M.ctx,j);return;case 2:for(;++L<V;)(M=O[L]).callback.call(M.ctx,j,N);return;case 3:for(;++L<V;)(M=O[L]).callback.call(M.ctx,j,N,G);return;default:for(;++L<V;)(M=O[L]).callback.apply(M.ctx,P);return}}catch(k){c.default.error.apply(c.default,[A,"error on event",D,"trigger","-",k]),K()}}},l=function(){function E(){(0,h.default)(this,E)}return E.prototype.on=function(P,A,D){if(!g(this,"on",P,[A,D])||!A)return this;this._events||(this._events={});var M=this._events[P]||(this._events[P]=[]);return M.push({callback:A,context:D,ctx:D||this}),this},E.prototype.once=function(P,A,D){var M=this,L=void 0;if(!g(this,"once",P,[A,D])||!A)return this;var V=function(){return M.off(P,L)};return L=function(){V(),A.apply(this,arguments)},this.on(P,L,D)},E.prototype.off=function(P,A,D){var M=void 0,L=void 0,V=void 0,j=void 0,N=void 0,G=void 0,K=void 0,k=void 0;if(!this._events||!g(this,"off",P,[A,D]))return this;if(!P&&!A&&!D)return this._events=void 0,this;for(j=P?[P]:(0,x.default)(this._events),N=0,G=j.length;N<G;N++)if(P=j[N],V=this._events[P],V){if(this._events[P]=M=[],A||D)for(K=0,k=V.length;K<k;K++)L=V[K],(A&&A!==L.callback&&A!==L.callback._callback||D&&D!==L.context)&&M.push(L);M.length||delete this._events[P]}return this},E.prototype.trigger=function(P){var A=this.name||this.constructor.name;if(c.default.debug.apply(c.default,[A].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var D=b.call(arguments,1);if(!g(this,"trigger",P,D))return this;var M=this._events[P],L=this._events.all;return M&&s(M,D,A,P),L&&s(L,arguments,A,P),this},E.prototype.stopListening=function(P,A,D){var M=this._listeningTo;if(!M)return this;var L=!A&&!D;!D&&(typeof A>"u"?"undefined":(0,p.default)(A))==="object"&&(D=this),P&&((M={})[P._listenId]=P);for(var V in M)P=M[V],P.off(A,D,this),(L||(0,x.default)(P._events).length===0)&&delete this._listeningTo[V];return this},E.register=function(P){E.Custom||(E.Custom={});var A=typeof P=="string"&&P.toUpperCase().trim();A&&!E.Custom[A]?E.Custom[A]=A.toLowerCase().split("_").map(function(D,M){return M===0?D:D=D[0].toUpperCase()+D.slice(1)}).join(""):c.default.error("Events","Error when register event: "+P)},E.listAvailableCustomEvents=function(){return E.Custom||(E.Custom={}),(0,x.default)(E.Custom).filter(function(P){return typeof E.Custom[P]=="string"})},E}();T.default=l;var S={listenTo:"on",listenToOnce:"once"};(0,x.default)(S).forEach(function(E){l.prototype[E]=function(O,P,A){var D=this._listeningTo||(this._listeningTo={}),M=O._listenId||(O._listenId=(0,d.uniqueId)("l"));return D[M]=O,!A&&(typeof P>"u"?"undefined":(0,p.default)(P))==="object"&&(A=this),O[S[E]](P,A,this),this}}),l.PLAYER_READY="ready",l.PLAYER_RESIZE="resize",l.PLAYER_FULLSCREEN="fullscreen",l.PLAYER_PLAY="play",l.PLAYER_PAUSE="pause",l.PLAYER_STOP="stop",l.PLAYER_ENDED="ended",l.PLAYER_SEEK="seek",l.PLAYER_ERROR="playererror",l.ERROR="error",l.PLAYER_TIMEUPDATE="timeupdate",l.PLAYER_VOLUMEUPDATE="volumeupdate",l.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",l.PLAYBACK_PROGRESS="playback:progress",l.PLAYBACK_TIMEUPDATE="playback:timeupdate",l.PLAYBACK_READY="playback:ready",l.PLAYBACK_BUFFERING="playback:buffering",l.PLAYBACK_BUFFERFULL="playback:bufferfull",l.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",l.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",l.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",l.PLAYBACK_BITRATE="playback:bitrate",l.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",l.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",l.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",l.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",l.PLAYBACK_DVR="playback:dvr",l.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",l.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",l.PLAYBACK_ENDED="playback:ended",l.PLAYBACK_PLAY_INTENT="playback:play:intent",l.PLAYBACK_PLAY="playback:play",l.PLAYBACK_PAUSE="playback:pause",l.PLAYBACK_SEEK="playback:seek",l.PLAYBACK_SEEKED="playback:seeked",l.PLAYBACK_STOP="playback:stop",l.PLAYBACK_ERROR="playback:error",l.PLAYBACK_STATS_ADD="playback:stats:add",l.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",l.PLAYBACK_LEVEL_SWITCH="playback:level:switch",l.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",l.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",l.CORE_CONTAINERS_CREATED="core:containers:created",l.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",l.CORE_OPTIONS_CHANGE="core:options:change",l.CORE_READY="core:ready",l.CORE_FULLSCREEN="core:fullscreen",l.CORE_RESIZE="core:resize",l.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",l.CORE_MOUSE_MOVE="core:mousemove",l.CORE_MOUSE_LEAVE="core:mouseleave",l.CONTAINER_PLAYBACKSTATE="container:playbackstate",l.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",l.CONTAINER_BITRATE="container:bitrate",l.CONTAINER_STATS_REPORT="container:stats:report",l.CONTAINER_DESTROYED="container:destroyed",l.CONTAINER_READY="container:ready",l.CONTAINER_ERROR="container:error",l.CONTAINER_LOADEDMETADATA="container:loadedmetadata",l.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",l.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",l.CONTAINER_TIMEUPDATE="container:timeupdate",l.CONTAINER_PROGRESS="container:progress",l.CONTAINER_PLAY="container:play",l.CONTAINER_STOP="container:stop",l.CONTAINER_PAUSE="container:pause",l.CONTAINER_ENDED="container:ended",l.CONTAINER_CLICK="container:click",l.CONTAINER_DBLCLICK="container:dblclick",l.CONTAINER_CONTEXTMENU="container:contextmenu",l.CONTAINER_MOUSE_ENTER="container:mouseenter",l.CONTAINER_MOUSE_LEAVE="container:mouseleave",l.CONTAINER_SEEK="container:seek",l.CONTAINER_SEEKED="container:seeked",l.CONTAINER_VOLUME="container:volume",l.CONTAINER_FULLSCREEN="container:fullscreen",l.CONTAINER_STATE_BUFFERING="container:state:buffering",l.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",l.CONTAINER_SETTINGSUPDATE="container:settingsupdate",l.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",l.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",l.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",l.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",l.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",l.CONTAINER_STATS_ADD="container:stats:add",l.CONTAINER_OPTIONS_CHANGE="container:options:change",l.MEDIACONTROL_RENDERED="mediacontrol:rendered",l.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",l.MEDIACONTROL_SHOW="mediacontrol:show",l.MEDIACONTROL_HIDE="mediacontrol:hide",l.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",l.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",l.MEDIACONTROL_PLAYING="mediacontrol:playing",l.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",l.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",l.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change",B.exports=T.default},"./src/base/media.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=T.mp4="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";T.default={mp4:o}},"./src/base/playback.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=O(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=O(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=O(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=O(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=O(d),b=t("./src/base/utils.js"),u=t("./src/base/ui_object.js"),g=O(u),s=t("./src/base/error_mixin.js"),l=O(s),S=t("./node_modules/clappr-zepto/zepto.js"),E=O(S);function O(A){return A&&A.__esModule?A:{default:A}}var P=function(A){(0,C.default)(D,A),(0,c.default)(D,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"consented",get:function(){return this._consented}}]);function D(M,L,V){(0,h.default)(this,D);var j=(0,p.default)(this,A.call(this,M));return j.settings={},j._i18n=L,j.playerError=V,j._consented=!1,j}return D.prototype.consent=function(){this._consented=!0},D.prototype.play=function(){},D.prototype.pause=function(){},D.prototype.stop=function(){},D.prototype.seek=function(L){},D.prototype.seekPercentage=function(L){},D.prototype.getStartTimeOffset=function(){return 0},D.prototype.getDuration=function(){return 0},D.prototype.isPlaying=function(){return!1},D.prototype.getPlaybackType=function(){return D.NO_OP},D.prototype.isHighDefinitionInUse=function(){return!1},D.prototype.volume=function(L){},D.prototype.configure=function(L){this._options=E.default.extend(this._options,L)},D.prototype.attemptAutoPlay=function(){var L=this;this.canAutoPlay(function(V,j){V&&L.play()})},D.prototype.canAutoPlay=function(L){L(!0,null)},(0,c.default)(D,[{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(L){}}]),D}(g.default);T.default=P,(0,x.default)(P.prototype,l.default),P.extend=function(A){return(0,b.extend)(P,A)},P.canPlay=function(A,D){return!1},P.VOD="vod",P.AOD="aod",P.LIVE="live",P.NO_OP="no_op",P.type="playback",B.exports=T.default},"./src/base/polyfills.js":function(B,T,t){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(x){if(this==null)throw new TypeError('"this" is null or not defined');var f=Object(this),h=f.length>>>0;if(typeof x!="function")throw new TypeError("predicate must be a function");for(var w=arguments[1],p=0;p<h;){var y=f[p];if(x.call(w,y,p,f))return y;p++}}})},"./src/base/styler.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/clappr-zepto/zepto.js"),x=w(o),f=t("./src/base/template.js"),h=w(f);function w(y){return y&&y.__esModule?y:{default:y}}var p={getStyleFor:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{baseUrl:""};return(0,x.default)('<style class="clappr-style"></style>').html((0,h.default)(c.toString())(d))}};T.default=p,B.exports=T.default},"./src/base/svg_icons.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0}),T.volumeMute=T.volume=T.stop=T.reload=T.play=T.pause=T.hd=T.fullscreen=T.exitFullscreen=T.cc=void 0;var o=t("./src/icons/01-play.svg"),x=D(o),f=t("./src/icons/02-pause.svg"),h=D(f),w=t("./src/icons/03-stop.svg"),p=D(w),y=t("./src/icons/04-volume.svg"),c=D(y),d=t("./src/icons/05-mute.svg"),C=D(d),b=t("./src/icons/06-expand.svg"),u=D(b),g=t("./src/icons/07-shrink.svg"),s=D(g),l=t("./src/icons/08-hd.svg"),S=D(l),E=t("./src/icons/09-cc.svg"),O=D(E),P=t("./src/icons/10-reload.svg"),A=D(P);function D(M){return M&&M.__esModule?M:{default:M}}T.cc=O.default,T.exitFullscreen=s.default,T.fullscreen=u.default,T.hd=S.default,T.pause=h.default,T.play=x.default,T.reload=A.default,T.stop=p.default,T.volume=c.default,T.volumeMute=C.default,T.default={cc:O.default,exitFullscreen:s.default,fullscreen:u.default,hd:S.default,pause:h.default,play:x.default,reload:A.default,stop:p.default,volume:c.default,volumeMute:C.default}},"./src/base/template.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},x=/(.)^/,f={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},h=/\\|'|\r|\n|\t|\u2028|\u2029/g,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},p=new RegExp(`[&<>"']`,"g"),y=function(b){return b===null?"":(""+b).replace(p,function(u){return w[u]})},c=0,d=function(b,u){var g,s=new RegExp([(o.escape||x).source,(o.interpolate||x).source,(o.evaluate||x).source].join("|")+"|$","g"),l=0,S="__p+='";b.replace(s,function(O,P,A,D,M){return S+=b.slice(l,M).replace(h,function(L){return"\\"+f[L]}),P&&(S+=`'+
((__t=(`+P+`))==null?'':escapeExpr(__t))+
'`),A&&(S+=`'+
((__t=(`+A+`))==null?'':__t)+
'`),D&&(S+=`';
`+D+`
__p+='`),l=M+O.length,O}),S+=`';
`,o.variable||(S=`with(obj||{}){
`+S+`}
`),S=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+S+`return __p;
//# sourceURL=/microtemplates/source[`+c+++"]";try{g=new Function(o.variable||"obj","escapeExpr",S)}catch(O){throw O.source=S,O}if(u)return g(u,y);var E=function(P){return g.call(this,P,y)};return E.source="function("+(o.variable||"obj")+`){
`+S+"}",E};d.settings=o,T.default=d,B.exports=T.default},"./src/base/ui_container_plugin.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=S(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=S(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=S(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=S(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=S(d),b=t("./src/base/utils.js"),u=t("./src/base/ui_object.js"),g=S(u),s=t("./src/base/error_mixin.js"),l=S(s);function S(O){return O&&O.__esModule?O:{default:O}}var E=function(O){(0,C.default)(P,O),(0,c.default)(P,[{key:"playerError",get:function(){return this.container.playerError}}]);function P(A){(0,h.default)(this,P);var D=(0,p.default)(this,O.call(this,A.options));return D.container=A,D.enabled=!0,D.bindEvents(),D}return P.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},P.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},P.prototype.bindEvents=function(){},P}(g.default);T.default=E,(0,x.default)(E.prototype,l.default),E.extend=function(O){return(0,b.extend)(E,O)},E.type="container",B.exports=T.default},"./src/base/ui_core_plugin.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=S(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=S(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=S(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=S(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=S(d),b=t("./src/base/utils.js"),u=t("./src/base/ui_object.js"),g=S(u),s=t("./src/base/error_mixin.js"),l=S(s);function S(O){return O&&O.__esModule?O:{default:O}}var E=function(O){(0,C.default)(P,O),(0,c.default)(P,[{key:"playerError",get:function(){return this.core.playerError}}]);function P(A){(0,h.default)(this,P);var D=(0,p.default)(this,O.call(this,A.options));return D.core=A,D.enabled=!0,D.bindEvents(),D.render(),D}return P.prototype.bindEvents=function(){},P.prototype.getExternalInterface=function(){return{}},P.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},P.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},P.prototype.render=function(){return this},P}(g.default);T.default=E,(0,x.default)(E.prototype,l.default),E.extend=function(O){return(0,b.extend)(E,O)},E.type="core",B.exports=T.default},"./src/base/ui_object.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=s(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=s(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=s(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=s(y),d=t("./node_modules/clappr-zepto/zepto.js"),C=s(d),b=t("./src/base/utils.js"),u=t("./src/base/base_object.js"),g=s(u);function s(E){return E&&E.__esModule?E:{default:E}}var l=/^(\S+)\s*(.*)$/,S=function(E){(0,c.default)(O,E),(0,p.default)(O,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]);function O(P){(0,x.default)(this,O);var A=(0,h.default)(this,E.call(this,P));return A.cid=(0,b.uniqueId)("c"),A._ensureElement(),A.delegateEvents(),A}return O.prototype.$=function(A){return this.$el.find(A)},O.prototype.render=function(){return this},O.prototype.destroy=function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},O.prototype.setElement=function(A,D){return this.$el&&this.undelegateEvents(),this.$el=C.default.zepto.isZ(A)?A:(0,C.default)(A),this.el=this.$el[0],D!==!1&&this.delegateEvents(),this},O.prototype.delegateEvents=function(A){if(!(A||(A=this.events)))return this;this.undelegateEvents();for(var D in A){var M=A[D];if(M&&M.constructor!==Function&&(M=this[A[D]]),!!M){var L=D.match(l),V=L[1],j=L[2];V+=".delegateEvents"+this.cid,j===""?this.$el.on(V,M.bind(this)):this.$el.on(V,j,M.bind(this))}}return this},O.prototype.undelegateEvents=function(){return this.$el.off(".delegateEvents"+this.cid),this},O.prototype._ensureElement=function(){if(this.el)this.setElement(this.el,!1);else{var A=C.default.extend({},this.attributes);this.id&&(A.id=this.id),this.className&&(A.class=this.className);var D=b.DomRecycler.create(this.tagName).attr(A);this.setElement(D,!1)}},O}(g.default);T.default=S,B.exports=T.default},"./src/base/utils.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0}),T.SvgIcons=T.DoubleEventHandler=T.DomRecycler=T.cancelAnimationFrame=T.requestAnimationFrame=T.QueryString=T.Config=T.Fullscreen=void 0;var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=L(o),f=t("./node_modules/babel-runtime/helpers/createClass.js"),h=L(f),w=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),p=L(w),y=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=L(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=L(d),b=t("./node_modules/babel-runtime/core-js/object/define-property.js"),u=L(b),g=t("./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js"),s=L(g);T.assign=V,T.extend=j,T.formatTime=N,T.seekStringToSeconds=J,T.uniqueId=te,T.isNumber=oe,T.currentScriptUrl=re,T.getBrowserLanguage=ge,T.now=Te,T.removeArrayItem=we,T.listContainsIgnoreCase=Le,T.canAutoPlayMedia=Ce,t("./src/base/polyfills.js");var l=t("./src/components/browser/index.js"),S=L(l),E=t("./node_modules/clappr-zepto/zepto.js"),O=L(E),P=t("./src/base/media.js"),A=L(P),D=t("./src/base/svg_icons.js"),M=L(D);function L(je){return je&&je.__esModule?je:{default:je}}function V(je,Ze){if(Ze)for(var Be in Ze){var Oe=(0,s.default)(Ze,Be);Oe?(0,u.default)(je,Be,Oe):je[Be]=Ze[Be]}return je}function j(je,Ze){var Be=function(Oe){(0,C.default)(ze,Oe);function ze(){(0,p.default)(this,ze);for(var We=arguments.length,gt=Array(We),at=0;at<We;at++)gt[at]=arguments[at];var _e=(0,c.default)(this,Oe.call.apply(Oe,[this].concat(gt)));return Ze.initialize&&Ze.initialize.apply(_e,gt),_e}return ze}(je);return V(Be.prototype,Ze),Be}function N(je,Ze){if(!isFinite(je))return"--:--";je=je*1e3,je=parseInt(je/1e3);var Be=je%60;je=parseInt(je/60);var Oe=je%60;je=parseInt(je/60);var ze=je%24,We=parseInt(je/24),gt="";return We&&We>0&&(gt+=We+":",ze<1&&(gt+="00:")),(ze&&ze>0||Ze)&&(gt+=("0"+ze).slice(-2)+":"),gt+=("0"+Oe).slice(-2)+":",gt+=("0"+Be).slice(-2),gt.trim()}var G=T.Fullscreen={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(Ze){Ze.requestFullscreen?Ze.requestFullscreen():Ze.webkitRequestFullscreen?Ze.webkitRequestFullscreen():Ze.mozRequestFullScreen?Ze.mozRequestFullScreen():Ze.msRequestFullscreen?Ze.msRequestFullscreen():Ze.querySelector&&Ze.querySelector("video")&&Ze.querySelector("video").webkitEnterFullScreen?Ze.querySelector("video").webkitEnterFullScreen():Ze.webkitEnterFullScreen&&Ze.webkitEnterFullScreen()},cancelFullscreen:function(){var Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;Ze.exitFullscreen?Ze.exitFullscreen():Ze.webkitCancelFullScreen?Ze.webkitCancelFullScreen():Ze.webkitExitFullscreen?Ze.webkitExitFullscreen():Ze.mozCancelFullScreen?Ze.mozCancelFullScreen():Ze.msExitFullscreen&&Ze.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},K=T.Config=function(){function je(){(0,p.default)(this,je)}return je._defaultConfig=function(){return{volume:{value:100,parse:parseInt}}},je._defaultValueFor=function(Be){try{return this._defaultConfig()[Be].parse(this._defaultConfig()[Be].value)}catch{return}},je._createKeyspace=function(Be){return"clappr."+document.domain+"."+Be},je.restore=function(Be){return S.default.hasLocalstorage&&localStorage[this._createKeyspace(Be)]?this._defaultConfig()[Be].parse(localStorage[this._createKeyspace(Be)]):this._defaultValueFor(Be)},je.persist=function(Be,Oe){if(S.default.hasLocalstorage)try{return localStorage[this._createKeyspace(Be)]=Oe,!0}catch{return!1}},je}(),k=T.QueryString=function(){function je(){(0,p.default)(this,je)}return je.parse=function(Be){for(var Oe=void 0,ze=/\+/g,We=/([^&=]+)=?([^&]*)/g,gt=function(Me){return decodeURIComponent(Me.replace(ze," "))},at={};Oe=We.exec(Be);)at[gt(Oe[1]).toLowerCase()]=gt(Oe[2]);return at},(0,h.default)(je,null,[{key:"params",get:function(){var Be=window.location.search.substring(1);return Be!==this.query&&(this._urlParams=this.parse(Be),this.query=Be),this._urlParams}},{key:"hashParams",get:function(){var Be=window.location.hash.substring(1);return Be!==this.hash&&(this._hashParams=this.parse(Be),this.hash=Be),this._hashParams}}]),je}();function J(){var je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"t",Ze=0,Be=k.params[je]||k.hashParams[je]||"",Oe=Be.match(/[0-9]+[hms]+/g)||[];if(Oe.length>0){var ze={h:3600,m:60,s:1};Oe.forEach(function(We){if(We){var gt=We[We.length-1],at=parseInt(We.slice(0,We.length-1),10);Ze+=at*ze[gt]}})}else Be&&(Ze=parseInt(Be,10));return Ze}var se={};function te(je){se[je]||(se[je]=0);var Ze=++se[je];return je+Ze}function oe(je){return je-parseFloat(je)+1>=0}function re(){var je=document.getElementsByTagName("script");return je.length?je[je.length-1].src:""}var ee=T.requestAnimationFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(je){window.setTimeout(je,1e3/60)}).bind(window),Z=T.cancelAnimationFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function ge(){return window.navigator&&window.navigator.language}function Te(){return window.performance&&window.performance.now?performance.now():Date.now()}function we(je,Ze){var Be=je.indexOf(Ze);Be>=0&&je.splice(Be,1)}function Le(je,Ze){return je===void 0||Ze===void 0?!1:Ze.find(function(Be){return je.toLowerCase()===Be.toLowerCase()})!==void 0}function Ce(je,Ze){Ze=(0,x.default)({inline:!1,muted:!1,timeout:250,type:"video",source:A.default.mp4,element:null},Ze);var Be=Ze.element?Ze.element:document.createElement(Ze.type);Be.muted=Ze.muted,Ze.muted===!0&&Be.setAttribute("muted","muted"),Ze.inline===!0&&Be.setAttribute("playsinline","playsinline"),Be.src=Ze.source;var Oe=Be.play(),ze=setTimeout(function(){We(!1,new Error("Timeout "+Ze.timeout+" ms has been reached"))},Ze.timeout),We=function(at){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;clearTimeout(ze),je(at,_e)};Oe!==void 0?Oe.then(function(){return We(!0)}).catch(function(gt){return We(!1,gt)}):We(!0)}var be=[],Ge=T.DomRecycler=function(){function je(){(0,p.default)(this,je)}return je.configure=function(Be){this.options=O.default.extend(this.options,Be)},je.create=function(Be){return this.options.recycleVideo&&Be==="video"&&be.length>0?be.shift():(0,O.default)("<"+Be+">")},je.garbage=function(Be){!this.options.recycleVideo||Be[0].tagName.toUpperCase()!=="VIDEO"||(Be.children().remove(),be.push(Be))},je}();Ge.options={recycleVideo:!1};var Ke=T.DoubleEventHandler=function(){function je(){var Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;(0,p.default)(this,je),this.delay=Ze,this.lastTime=0}return je.prototype.handle=function(Be,Oe){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,We=new Date().getTime(),gt=We-this.lastTime;gt<this.delay&&gt>0&&(Oe(),ze&&Be.preventDefault()),this.lastTime=We},je}();T.SvgIcons=M.default,T.default={Config:K,Fullscreen:G,QueryString:k,DomRecycler:Ge,extend:j,formatTime:N,seekStringToSeconds:J,uniqueId:te,currentScriptUrl:re,isNumber:oe,requestAnimationFrame:ee,cancelAnimationFrame:Z,getBrowserLanguage:ge,now:Te,removeArrayItem:we,canAutoPlayMedia:Ce,Media:A.default,DoubleEventHandler:Ke,SvgIcons:M.default}},"./src/components/browser/browser.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0}),T.getDevice=T.getViewportSize=T.getOsData=T.getBrowserData=T.getBrowserInfo=void 0;var o=t("./node_modules/babel-runtime/core-js/get-iterator.js"),x=d(o),f=t("./node_modules/clappr-zepto/zepto.js"),h=d(f),w=t("./src/components/browser/browser_data.js"),p=d(w),y=t("./src/components/browser/os_data.js"),c=d(y);function d(M){return M&&M.__esModule?M:{default:M}}var C={},b=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch{return!1}},u=function(){try{var L=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!L}catch{return!!(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==void 0&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},g=T.getBrowserInfo=function(L){var V=L.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],j=void 0;if(/trident/i.test(V[1]))return j=/\brv[ :]+(\d+)/g.exec(L)||[],{name:"IE",version:parseInt(j[1]||"")};if(V[1]==="Chrome"){if(j=L.match(/\bOPR\/(\d+)/),j!=null)return{name:"Opera",version:parseInt(j[1])};if(j=L.match(/\bEdge\/(\d+)/),j!=null)return{name:"Edge",version:parseInt(j[1])}}else/android/i.test(L)&&(j=L.match(/version\/(\d+)/i))&&(V.splice(1,1,"Android WebView"),V.splice(2,1,j[1]));return V=V[2]?[V[1],V[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:V[0],version:parseInt(V[1])}},s=T.getBrowserData=function(){var L={},V=C.userAgent.toLowerCase(),j=!0,N=!1,G=void 0;try{for(var K=(0,x.default)(p.default),k;!(j=(k=K.next()).done);j=!0){var J=k.value,se=new RegExp(J.identifier.toLowerCase()),te=se.exec(V);if(te!=null&&te[1]){if(L.name=J.name,L.group=J.group,J.versionIdentifier){var oe=new RegExp(J.versionIdentifier.toLowerCase()),re=oe.exec(V);re!=null&&re[1]&&l(re[1],L)}else l(te[1],L);break}}}catch(ee){N=!0,G=ee}finally{try{!j&&K.return&&K.return()}finally{if(N)throw G}}return L},l=function(L,V){var j=L.split(".",2);V.fullVersion=L,j[0]&&(V.majorVersion=parseInt(j[0])),j[1]&&(V.minorVersion=parseInt(j[1]))},S=T.getOsData=function(){var L={},V=C.userAgent.toLowerCase(),j=!0,N=!1,G=void 0;try{for(var K=(0,x.default)(c.default),k;!(j=(k=K.next()).done);j=!0){var J=k.value,se=new RegExp(J.identifier.toLowerCase()),te=se.exec(V);if(te!=null){if(L.name=J.name,L.group=J.group,J.version)E(J.version,J.versionSeparator?J.versionSeparator:".",L);else if(te[1])E(te[1],J.versionSeparator?J.versionSeparator:".",L);else if(J.versionIdentifier){var oe=new RegExp(J.versionIdentifier.toLowerCase()),re=oe.exec(V);re!=null&&re[1]&&E(re[1],J.versionSeparator?J.versionSeparator:".",L)}break}}}catch(ee){N=!0,G=ee}finally{try{!j&&K.return&&K.return()}finally{if(N)throw G}}return L},E=function(L,V,j){var N=V.substr(0,1)=="["?new RegExp(V,"g"):V,G=L.split(N,2);V!="."&&(L=L.replace(new RegExp(V,"g"),".")),j.fullVersion=L,G&&G[0]&&(j.majorVersion=parseInt(G[0])),G&&G[1]&&(j.minorVersion=parseInt(G[1]))},O=T.getViewportSize=function(){var L={};return L.width=(0,h.default)(window).width(),L.height=(0,h.default)(window).height(),L},P=function(){switch(window.orientation){case-90:case 90:C.viewport.orientation="landscape";break;default:C.viewport.orientation="portrait";break}},A=T.getDevice=function(L){var V=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/,j=V.exec(L),N=j&&(j[1]||j[2])||"";return N},D=g(navigator.userAgent);C.isEdge=/edge/i.test(navigator.userAgent),C.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!C.isEdge,C.isSafari=/safari/i.test(navigator.userAgent)&&!C.isChrome&&!C.isEdge,C.isFirefox=/firefox/i.test(navigator.userAgent),C.isLegacyIE=!!window.ActiveXObject,C.isIE=C.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),C.isIE11=/trident.*rv:11/i.test(navigator.userAgent),C.isChromecast=C.isChrome&&/CrKey/i.test(navigator.userAgent),C.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),C.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),C.isAndroid=/Android/i.test(navigator.userAgent),C.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),C.isWin8App=/MSAppHost/i.test(navigator.userAgent),C.isWiiU=/WiiU/i.test(navigator.userAgent),C.isPS4=/PlayStation 4/i.test(navigator.userAgent),C.hasLocalstorage=b(),C.hasFlash=u(),C.name=D.name,C.version=D.version,C.userAgent=navigator.userAgent,C.data=s(),C.os=S(),C.viewport=O(),C.device=A(C.userAgent),typeof window.orientation<"u"&&P(),T.default=C},"./src/components/browser/browser_data.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}];T.default=o,B.exports=T.default},"./src/components/browser/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/browser/browser.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/components/browser/os_data.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}];T.default=o,B.exports=T.default},"./src/components/container/container.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=A(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=A(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=A(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=A(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=A(d),b=t("./src/base/events.js"),u=A(b),g=t("./src/base/ui_object.js"),s=A(g),l=t("./src/base/error_mixin.js"),S=A(l),E=t("./src/base/utils.js");t("./src/components/container/public/style.scss");var O=t("./node_modules/clappr-zepto/zepto.js"),P=A(O);function A(M){return M&&M.__esModule?M:{default:M}}var D=function(M){(0,C.default)(L,M),(0,c.default)(L,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(j){this.playback.closedCaptionsTrackId=j}}]);function L(V,j,N){(0,h.default)(this,L);var G=(0,p.default)(this,M.call(this,V));return G._i18n=j,G.currentTime=0,G.volume=100,G.playback=V.playback,G.playerError=N,G.settings=P.default.extend({},G.playback.settings),G.isReady=!1,G.mediaControlDisabled=!1,G.plugins=[G.playback],G.dblTapHandler=new E.DoubleEventHandler(500),G.clickTimer=null,G.clickDelay=200,G.bindEvents(),G}return L.prototype.bindEvents=function(){this.listenTo(this.playback,u.default.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,u.default.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,u.default.PLAYBACK_READY,this.ready),this.listenTo(this.playback,u.default.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,u.default.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,u.default.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,u.default.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,u.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,u.default.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,u.default.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,u.default.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,u.default.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,u.default.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,u.default.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,u.default.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,u.default.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,u.default.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,u.default.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,u.default.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,u.default.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,u.default.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)},L.prototype.subtitleAvailable=function(){this.trigger(u.default.CONTAINER_SUBTITLE_AVAILABLE)},L.prototype.subtitleChanged=function(j){this.trigger(u.default.CONTAINER_SUBTITLE_CHANGED,j)},L.prototype.playbackStateChanged=function(j){this.trigger(u.default.CONTAINER_PLAYBACKSTATE,j)},L.prototype.playbackDvrStateChanged=function(j){this.settings=this.playback.settings,this.dvrInUse=j,this.trigger(u.default.CONTAINER_PLAYBACKDVRSTATECHANGED,j)},L.prototype.updateBitrate=function(j){this.trigger(u.default.CONTAINER_BITRATE,j)},L.prototype.statsReport=function(j){this.trigger(u.default.CONTAINER_STATS_REPORT,j)},L.prototype.getPlaybackType=function(){return this.playback.getPlaybackType()},L.prototype.isDvrEnabled=function(){return!!this.playback.dvrEnabled},L.prototype.isDvrInUse=function(){return!!this.dvrInUse},L.prototype.destroy=function(){this.trigger(u.default.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach(function(j){return j.destroy()}),this.$el.remove()},L.prototype.setStyle=function(j){this.$el.css(j)},L.prototype.animate=function(j,N){return this.$el.animate(j,N).promise()},L.prototype.ready=function(){this.isReady=!0,this.trigger(u.default.CONTAINER_READY,this.name)},L.prototype.isPlaying=function(){return this.playback.isPlaying()},L.prototype.getStartTimeOffset=function(){return this.playback.getStartTimeOffset()},L.prototype.getCurrentTime=function(){return this.currentTime},L.prototype.getDuration=function(){return this.playback.getDuration()},L.prototype.error=function(j){this.isReady||this.ready(),this.trigger(u.default.CONTAINER_ERROR,j,this.name)},L.prototype.loadedMetadata=function(j){this.trigger(u.default.CONTAINER_LOADEDMETADATA,j)},L.prototype.timeUpdated=function(j){this.currentTime=j.current,this.trigger(u.default.CONTAINER_TIMEUPDATE,j,this.name)},L.prototype.onProgress=function(){for(var j=arguments.length,N=Array(j),G=0;G<j;G++)N[G]=arguments[G];this.trigger.apply(this,[u.default.CONTAINER_PROGRESS].concat(N,[this.name]))},L.prototype.playing=function(){this.trigger(u.default.CONTAINER_PLAY,this.name)},L.prototype.paused=function(){this.trigger(u.default.CONTAINER_PAUSE,this.name)},L.prototype.play=function(){this.playback.play()},L.prototype.stop=function(){this.playback.stop(),this.currentTime=0},L.prototype.pause=function(){this.playback.pause()},L.prototype.onEnded=function(){this.trigger(u.default.CONTAINER_ENDED,this,this.name),this.currentTime=0},L.prototype.stopped=function(){this.trigger(u.default.CONTAINER_STOP)},L.prototype.clicked=function(){var j=this;(!this.options.chromeless||this.options.allowUserInteraction)&&(this.clickTimer=setTimeout(function(){j.clickTimer&&j.trigger(u.default.CONTAINER_CLICK,j,j.name)},this.clickDelay))},L.prototype.cancelClicked=function(){clearTimeout(this.clickTimer),this.clickTimer=null},L.prototype.dblClicked=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&(this.cancelClicked(),this.trigger(u.default.CONTAINER_DBLCLICK,this,this.name))},L.prototype.dblTap=function(j){var N=this;(!this.options.chromeless||this.options.allowUserInteraction)&&this.dblTapHandler.handle(j,function(){N.cancelClicked(),N.trigger(u.default.CONTAINER_DBLCLICK,N,N.name)})},L.prototype.onContextMenu=function(j){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(u.default.CONTAINER_CONTEXTMENU,j,this.name)},L.prototype.seek=function(j){this.trigger(u.default.CONTAINER_SEEK,j,this.name),this.playback.seek(j)},L.prototype.onSeeked=function(){this.trigger(u.default.CONTAINER_SEEKED,this.name)},L.prototype.seekPercentage=function(j){var N=this.getDuration();if(j>=0&&j<=100){var G=N*(j/100);this.seek(G)}},L.prototype.setVolume=function(j){this.volume=parseFloat(j),this.trigger(u.default.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)},L.prototype.fullscreen=function(){this.trigger(u.default.CONTAINER_FULLSCREEN,this.name)},L.prototype.onBuffering=function(){this.trigger(u.default.CONTAINER_STATE_BUFFERING,this.name)},L.prototype.bufferfull=function(){this.trigger(u.default.CONTAINER_STATE_BUFFERFULL,this.name)},L.prototype.addPlugin=function(j){this.plugins.push(j)},L.prototype.hasPlugin=function(j){return!!this.getPlugin(j)},L.prototype.getPlugin=function(j){return this.plugins.filter(function(N){return N.name===j})[0]},L.prototype.mouseEnter=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(u.default.CONTAINER_MOUSE_ENTER)},L.prototype.mouseLeave=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(u.default.CONTAINER_MOUSE_LEAVE)},L.prototype.settingsUpdate=function(){this.settings=this.playback.settings,this.trigger(u.default.CONTAINER_SETTINGSUPDATE)},L.prototype.highDefinitionUpdate=function(j){this.trigger(u.default.CONTAINER_HIGHDEFINITIONUPDATE,j)},L.prototype.isHighDefinitionInUse=function(){return this.playback.isHighDefinitionInUse()},L.prototype.disableMediaControl=function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(u.default.CONTAINER_MEDIACONTROL_DISABLE))},L.prototype.enableMediaControl=function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(u.default.CONTAINER_MEDIACONTROL_ENABLE))},L.prototype.updateStyle=function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")},L.prototype.configure=function(j){this._options=P.default.extend(this._options,j),this.updateStyle(),this.playback.configure(this.options),this.trigger(u.default.CONTAINER_OPTIONS_CHANGE)},L.prototype.render=function(){return this.$el.append(this.playback.render().el),this.updateStyle(),this},L}(s.default);T.default=D,(0,x.default)(D.prototype,S.default),B.exports=T.default},"./src/components/container/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/container/container.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/components/container/public/style.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/container/public/style.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/components/container_factory/container_factory.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/typeof.js"),x=P(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=P(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=P(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=P(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=P(d),b=t("./src/base/base_object.js"),u=P(b),g=t("./src/base/events.js"),s=P(g),l=t("./src/components/container/index.js"),S=P(l),E=t("./node_modules/clappr-zepto/zepto.js"),O=P(E);function P(D){return D&&D.__esModule?D:{default:D}}var A=function(D){(0,C.default)(M,D),(0,c.default)(M,[{key:"options",get:function(){return this._options},set:function(V){this._options=V}}]);function M(L,V,j,N){(0,h.default)(this,M);var G=(0,p.default)(this,D.call(this,L));return G._i18n=j,G.loader=V,G.playerError=N,G}return M.prototype.createContainers=function(){var V=this;return O.default.Deferred(function(j){j.resolve(V.options.sources.map(function(N){return V.createContainer(N)}))})},M.prototype.findPlaybackPlugin=function(V,j){return this.loader.playbackPlugins.filter(function(N){return N.canPlay(V,j)})[0]},M.prototype.createContainer=function(V){var j=null,N=this.options.mimeType;(typeof V>"u"?"undefined":(0,x.default)(V))==="object"?(j=V.source.toString(),V.mimeType&&(N=V.mimeType)):j=V.toString(),j.match(/^\/\//)&&(j=window.location.protocol+j);var G=O.default.extend({},this.options,{src:j,mimeType:N}),K=this.findPlaybackPlugin(j,N),k=new K(G,this._i18n,this.playerError);G=O.default.extend({},G,{playback:k});var J=new S.default(G,this._i18n,this.playerError),se=O.default.Deferred();return se.promise(J),this.addContainerPlugins(J),this.listenToOnce(J,s.default.CONTAINER_READY,function(){return se.resolve(J)}),J},M.prototype.addContainerPlugins=function(V){this.loader.containerPlugins.forEach(function(j){V.addPlugin(new j(V))})},M}(u.default);T.default=A,B.exports=T.default},"./src/components/container_factory/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/container_factory/container_factory.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/components/core/core.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=Z(o),f=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=Z(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=Z(w),y=t("./node_modules/babel-runtime/helpers/createClass.js"),c=Z(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=Z(d),b=t("./src/base/utils.js"),u=t("./src/base/styler.js"),g=Z(u),s=t("./src/base/events.js"),l=Z(s),S=t("./src/base/ui_object.js"),E=Z(S),O=t("./src/base/ui_core_plugin.js"),P=Z(O),A=t("./src/components/browser/index.js"),D=Z(A),M=t("./src/components/container_factory/index.js"),L=Z(M),V=t("./src/components/mediator.js"),j=Z(V),N=t("./src/components/player_info.js"),G=Z(N),K=t("./src/components/error/index.js"),k=Z(K),J=t("./src/base/error_mixin.js"),se=Z(J),te=t("./node_modules/clappr-zepto/zepto.js"),oe=Z(te);t("./src/components/core/public/style.scss");var re=t("./src/components/core/public/fonts.css"),ee=Z(re);function Z(we){return we&&we.__esModule?we:{default:we}}var ge=void 0,Te=function(we){(0,C.default)(Le,we),(0,c.default)(Le,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(Ge){return Ge}}}},{key:"mediaControl",get:function(){return this.getPlugin("media_control")||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl?this._dummyMediaControl:(this._dummyMediaControl=new P.default(this),this._dummyMediaControl)}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(be){this._activeContainer=be,this.trigger(l.default.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]);function Le(Ce){(0,h.default)(this,Le);var be=(0,p.default)(this,we.call(this,Ce));return be.playerError=new k.default(Ce,be),be.configureDomRecycler(),be.playerInfo=G.default.getInstance(Ce.playerId),be.firstResize=!0,be.plugins=[],be.containers=[],be._boundFullscreenHandler=function(){return be.handleFullscreenChange()},(0,oe.default)(document).bind("fullscreenchange",be._boundFullscreenHandler),(0,oe.default)(document).bind("MSFullscreenChange",be._boundFullscreenHandler),(0,oe.default)(document).bind("mozfullscreenchange",be._boundFullscreenHandler),D.default.isMobile&&(0,oe.default)(window).bind("resize",function(Ge){be.handleWindowResize(Ge)}),be}return Le.prototype.configureDomRecycler=function(){var be=this.options&&this.options.playback&&this.options.playback.recycleVideo;b.DomRecycler.configure({recycleVideo:be})},Le.prototype.createContainers=function(be){this.defer=oe.default.Deferred(),this.defer.promise(this),this.containerFactory=new L.default(be,be.loader,this.i18n,this.playerError),this.prepareContainers()},Le.prototype.prepareContainers=function(){var be=this;this.containerFactory.createContainers().then(function(Ge){return be.setupContainers(Ge)}).then(function(Ge){return be.resolveOnContainersReady(Ge)})},Le.prototype.updateSize=function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()},Le.prototype.setFullscreen=function(){D.default.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.playerInfo.currentSize={width:(0,oe.default)(window).width(),height:(0,oe.default)(window).height()})},Le.prototype.setPlayerSize=function(){this.$el.removeClass("fullscreen"),this.playerInfo.currentSize=this.playerInfo.previousSize,this.playerInfo.previousSize={width:(0,oe.default)(window).width(),height:(0,oe.default)(window).height()},this.resize(this.playerInfo.currentSize)},Le.prototype.resize=function(be){!(0,b.isNumber)(be.height)&&!(0,b.isNumber)(be.width)?(this.el.style.height=""+be.height,this.el.style.width=""+be.width):(this.el.style.height=be.height+"px",this.el.style.width=be.width+"px"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.options.width=be.width,this.options.height=be.height,this.playerInfo.currentSize=be,this.triggerResize(this.playerInfo.currentSize)},Le.prototype.enableResizeObserver=function(){var be=this,Ge=function(){be.triggerResize({width:be.el.clientWidth,height:be.el.clientHeight})};this.resizeObserverInterval=setInterval(Ge,500)},Le.prototype.triggerResize=function(be){var Ge=this.firstResize||this.oldHeight!==be.height||this.oldWidth!==be.width;Ge&&(this.oldHeight=be.height,this.oldWidth=be.width,this.playerInfo.computedSize=be,this.firstResize=!1,j.default.trigger(this.options.playerId+":"+l.default.PLAYER_RESIZE,be),this.trigger(l.default.CORE_RESIZE,be))},Le.prototype.disableResizeObserver=function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)},Le.prototype.resolveOnContainersReady=function(be){var Ge=this;oe.default.when.apply(oe.default,be).done(function(){Ge.defer.resolve(Ge),Ge.ready=!0,Ge.trigger(l.default.CORE_READY)})},Le.prototype.addPlugin=function(be){this.plugins.push(be)},Le.prototype.hasPlugin=function(be){return!!this.getPlugin(be)},Le.prototype.getPlugin=function(be){return this.plugins.filter(function(Ge){return Ge.name===be})[0]},Le.prototype.load=function(be,Ge){this.options.mimeType=Ge,be=be&&be.constructor===Array?be:[be],this.options.sources=be,this.containers.forEach(function(Ke){return Ke.destroy()}),this.containerFactory.options=oe.default.extend(this.options,{sources:be}),this.prepareContainers()},Le.prototype.destroy=function(){this.disableResizeObserver(),this.containers.forEach(function(be){return be.destroy()}),this.plugins.forEach(function(be){return be.destroy()}),this.$el.remove(),(0,oe.default)(document).unbind("fullscreenchange",this._boundFullscreenHandler),(0,oe.default)(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),(0,oe.default)(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()},Le.prototype.handleFullscreenChange=function(){this.trigger(l.default.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()},Le.prototype.handleWindowResize=function(be){var Ge=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==Ge&&(this._screenOrientation=Ge,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(l.default.CORE_SCREEN_ORIENTATION_CHANGED,{event:be,orientation:this._screenOrientation}))},Le.prototype.removeContainer=function(be){this.stopListening(be),this.containers=this.containers.filter(function(Ge){return Ge!==be})},Le.prototype.setupContainer=function(be){this.listenTo(be,l.default.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(be)},Le.prototype.setupContainers=function(be){return be.forEach(this.setupContainer.bind(this)),this.trigger(l.default.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=be[0],this.render(),this.appendToParent(),this.containers},Le.prototype.renderContainers=function(){var be=this;this.containers.forEach(function(Ge){return be.el.appendChild(Ge.render().el)})},Le.prototype.createContainer=function(be,Ge){var Ke=this.containerFactory.createContainer(be,Ge);return this.setupContainer(Ke),this.el.appendChild(Ke.render().el),Ke},Le.prototype.getCurrentContainer=function(){return this.activeContainer},Le.prototype.getCurrentPlayback=function(){return this.activePlayback},Le.prototype.getPlaybackType=function(){return this.activeContainer&&this.activeContainer.getPlaybackType()},Le.prototype.isFullscreen=function(){var be=D.default.isiOS?this.activeContainer&&this.activeContainer.el||this.el:this.el;return b.Fullscreen.fullscreenElement()===be},Le.prototype.toggleFullscreen=function(){this.isFullscreen()?(b.Fullscreen.cancelFullscreen(),!D.default.isiOS&&this.$el.removeClass("fullscreen nocursor")):(b.Fullscreen.requestFullscreen(D.default.isiOS?this.activeContainer.el:this.el),!D.default.isiOS&&this.$el.addClass("fullscreen"))},Le.prototype.onMouseMove=function(be){this.trigger(l.default.CORE_MOUSE_MOVE,be)},Le.prototype.onMouseLeave=function(be){this.trigger(l.default.CORE_MOUSE_LEAVE,be)},Le.prototype.configure=function(be){var Ge=this;this._options=oe.default.extend(this._options,be),this.configureDomRecycler();var Ke=be.source||be.sources;Ke&&this.load(Ke,be.mimeType||this.options.mimeType),this.trigger(l.default.CORE_OPTIONS_CHANGE,be),this.containers.forEach(function(je){return je.configure(Ge.options)})},Le.prototype.appendToParent=function(){var be=this.$el.parent()&&this.$el.parent().length;!be&&this.$el.appendTo(this.options.parentElement)},Le.prototype.render=function(){ge||(ge=g.default.getStyleFor(ee.default,{baseUrl:this.options.baseUrl})),(0,oe.default)("head").append(ge),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var be={width:this.options.width,height:this.options.height};return this.playerInfo.previousSize=this.playerInfo.currentSize=this.playerInfo.computedSize=be,this.updateSize(),this.previousSize={width:this.$el.width(),height:this.$el.height()},this.enableResizeObserver(),this},Le}(E.default);T.default=Te,(0,x.default)(Te.prototype,se.default),B.exports=T.default},"./src/components/core/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/core/core.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/components/core/public/Roboto.ttf":function(B,T){B.exports="<%=baseUrl%>/38861cba61c66739c1452c3a71e39852.ttf"},"./src/components/core/public/fonts.css":function(B,T,t){var o=t("./node_modules/css-loader/lib/url/escape.js");T=B.exports=t("./node_modules/css-loader/lib/css-base.js")(!1),T.push([B.i,`@font-face {
  font-family: "Roboto";
  font-style: normal;
  font-weight: 400;
  src: local("Roboto"), local("Roboto-Regular"), url(`+o(t("./src/components/core/public/Roboto.ttf"))+`) format("truetype");
}
`,""])},"./src/components/core/public/style.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/components/core/public/style.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/components/core_factory/core_factory.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=g(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=g(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=g(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=g(y),d=t("./src/base/base_object.js"),C=g(d),b=t("./src/components/core/index.js"),u=g(b);function g(l){return l&&l.__esModule?l:{default:l}}var s=function(l){(0,c.default)(S,l),(0,p.default)(S,[{key:"loader",get:function(){return this.player.loader}}]);function S(E){(0,x.default)(this,S);var O=(0,h.default)(this,l.call(this));return O.player=E,O._options=E.options,O}return S.prototype.create=function(){return this.options.loader=this.loader,this.core=new u.default(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core},S.prototype.addCorePlugins=function(){var O=this;return this.loader.corePlugins.forEach(function(P){var A=new P(O.core);O.core.addPlugin(A),O.setupExternalInterface(A)}),this.core},S.prototype.setupExternalInterface=function(O){var P=O.getExternalInterface();for(var A in P)this.player[A]=P[A].bind(O),this.core[A]=P[A].bind(O)},S}(C.default);T.default=s,B.exports=T.default},"./src/components/core_factory/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/core_factory/core_factory.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/components/error/error.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=l(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=l(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=l(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=l(y),d=t("./src/base/events.js"),C=l(d),b=t("./src/base/base_object.js"),u=l(b),g=t("./src/plugins/log/index.js"),s=l(g);function l(E){return E&&E.__esModule?E:{default:E}}var S=function(E){(0,c.default)(O,E),(0,p.default)(O,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]);function O(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=arguments[1];(0,x.default)(this,O);var D=(0,h.default)(this,E.call(this,P));return D.core=A,D}return O.prototype.createError=function(A){if(!this.core){s.default.warn(this.name,"Core is not set. Error: ",A);return}this.core.trigger(C.default.ERROR,A)},O}(u.default);T.default=S,B.exports=T.default},"./src/components/error/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/error/error.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/components/loader/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/loader/loader.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/components/loader/loader.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/create.js"),x=le(o),f=t("./node_modules/babel-runtime/helpers/toConsumableArray.js"),h=le(f),w=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),p=le(w),y=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=le(y),d=t("./node_modules/babel-runtime/helpers/inherits.js"),C=le(d),b=t("./src/base/base_object.js"),u=le(b),g=t("./src/components/player_info.js"),s=le(g),l=t("./src/playbacks/html5_video/index.js"),S=le(l),E=t("./src/playbacks/flash/index.js"),O=le(E),P=t("./src/playbacks/html5_audio/index.js"),A=le(P),D=t("./src/playbacks/flashls/index.js"),M=le(D),L=t("./src/playbacks/hls/index.js"),V=le(L),j=t("./src/playbacks/html_img/index.js"),N=le(j),G=t("./src/playbacks/no_op/index.js"),K=le(G),k=t("./src/plugins/spinner_three_bounce/index.js"),J=le(k),se=t("./src/plugins/stats/index.js"),te=le(se),oe=t("./src/plugins/watermark/index.js"),re=le(oe),ee=t("./src/plugins/poster/index.js"),Z=le(ee),ge=t("./src/plugins/google_analytics/index.js"),Te=le(ge),we=t("./src/plugins/click_to_pause/index.js"),Le=le(we),Ce=t("./src/plugins/media_control/index.js"),be=le(Ce),Ge=t("./src/plugins/dvr_controls/index.js"),Ke=le(Ge),je=t("./src/plugins/closed_captions/index.js"),Ze=le(je),Be=t("./src/plugins/favicon/index.js"),Oe=le(Be),ze=t("./src/plugins/seek_time/index.js"),We=le(ze),gt=t("./src/plugins/sources.js"),at=le(gt),_e=t("./src/plugins/end_video.js"),Me=le(_e),H=t("./src/plugins/strings.js"),m=le(H),F=t("./src/plugins/error_screen/index.js"),X=le(F);function le(Se){return Se&&Se.__esModule?Se:{default:Se}}var ve=function(Se){(0,C.default)(ye,Se);function ye(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,p.default)(this,ye);var $e=(0,c.default)(this,Se.call(this));return $e.playerId=Ie,$e.playbackPlugins=[],ke||($e.playbackPlugins=[].concat((0,h.default)($e.playbackPlugins),[V.default])),$e.playbackPlugins=[].concat((0,h.default)($e.playbackPlugins),[S.default,A.default]),ke||($e.playbackPlugins=[].concat((0,h.default)($e.playbackPlugins),[O.default,M.default])),$e.playbackPlugins=[].concat((0,h.default)($e.playbackPlugins),[N.default,K.default]),$e.containerPlugins=[J.default,re.default,Z.default,te.default,Te.default,Le.default],$e.corePlugins=[be.default,Ke.default,Ze.default,Oe.default,We.default,at.default,Me.default,X.default,m.default],Array.isArray(Re)||$e.validateExternalPluginsType(Re),$e.addExternalPlugins(Re),$e}return ye.prototype.groupPluginsByType=function(Ie){return Array.isArray(Ie)&&(Ie=Ie.reduce(function(ke,$e){return ke[$e.type]||(ke[$e.type]=[]),ke[$e.type].push($e),ke},{})),Ie},ye.prototype.removeDups=function(Ie){var ke=function(ft,_t){return ft[_t.prototype.name]&&delete ft[_t.prototype.name],ft[_t.prototype.name]=_t,ft},$e=Ie.reduceRight(ke,(0,x.default)(null)),qe=[];for(var lt in $e)qe.unshift($e[lt]);return qe},ye.prototype.addExternalPlugins=function(Ie){Ie=this.groupPluginsByType(Ie),Ie.playback&&(this.playbackPlugins=this.removeDups(Ie.playback.concat(this.playbackPlugins))),Ie.container&&(this.containerPlugins=this.removeDups(Ie.container.concat(this.containerPlugins))),Ie.core&&(this.corePlugins=this.removeDups(Ie.core.concat(this.corePlugins))),s.default.getInstance(this.playerId).playbackPlugins=this.playbackPlugins},ye.prototype.validateExternalPluginsType=function(Ie){var ke=["playback","container","core"];ke.forEach(function($e){(Ie[$e]||[]).forEach(function(qe){var lt="external "+qe.type+" plugin on "+$e+" array";if(qe.type!==$e)throw new ReferenceError(lt)})})},ye}(u.default);T.default=ve,B.exports=T.default},"./src/components/mediator.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=w(o),f=t("./src/base/events.js"),h=w(f);function w(c){return c&&c.__esModule?c:{default:c}}var p=new h.default,y=function c(){(0,x.default)(this,c)};T.default=y,y.on=function(c,d,C){p.on(c,d,C)},y.once=function(c,d,C){p.once(c,d,C)},y.off=function(c,d,C){p.off(c,d,C)},y.trigger=function(c){for(var d=arguments.length,C=Array(d>1?d-1:0),b=1;b<d;b++)C[b-1]=arguments[b];p.trigger.apply(p,[c].concat(C))},y.stopListening=function(c,d,C){p.stopListening(c,d,C)},B.exports=T.default},"./src/components/player.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/core-js/object/assign.js"),x=J(o),f=t("./node_modules/babel-runtime/core-js/object/keys.js"),h=J(f),w=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),p=J(w),y=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=J(y),d=t("./node_modules/babel-runtime/helpers/createClass.js"),C=J(d),b=t("./node_modules/babel-runtime/helpers/inherits.js"),u=J(b),g=t("./src/base/utils.js"),s=t("./src/base/base_object.js"),l=J(s),S=t("./src/base/events.js"),E=J(S),O=t("./src/components/browser/index.js"),P=J(O),A=t("./src/components/core_factory/index.js"),D=J(A),M=t("./src/components/loader/index.js"),L=J(M),V=t("./src/components/player_info.js"),j=J(V),N=t("./src/base/error_mixin.js"),G=J(N),K=t("./node_modules/clappr-zepto/zepto.js"),k=J(K);function J(oe){return oe&&oe.__esModule?oe:{default:oe}}var se=(0,g.currentScriptUrl)().replace(/\/[^/]+$/,""),te=function(oe){(0,u.default)(re,oe),(0,C.default)(re,[{key:"loader",set:function(Z){this._loader=Z},get:function(){return this._loader||(this._loader=new L.default(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:E.default.PLAYER_READY,onResize:E.default.PLAYER_RESIZE,onPlay:E.default.PLAYER_PLAY,onPause:E.default.PLAYER_PAUSE,onStop:E.default.PLAYER_STOP,onEnded:E.default.PLAYER_ENDED,onSeek:E.default.PLAYER_SEEK,onError:E.default.PLAYER_ERROR,onTimeUpdate:E.default.PLAYER_TIMEUPDATE,onVolumeUpdate:E.default.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:E.default.PLAYER_SUBTITLE_AVAILABLE}}}]);function re(ee){(0,p.default)(this,re);var Z=(0,c.default)(this,oe.call(this,ee)),ge={recycleVideo:!0},Te={playerId:(0,g.uniqueId)(""),persistConfig:!0,width:640,height:360,baseUrl:se,allowUserInteraction:P.default.isMobile,playback:ge};return Z._options=k.default.extend(Te,ee),Z.options.sources=Z._normalizeSources(ee),Z.options.chromeless||(Z.options.allowUserInteraction=!0),Z.options.allowUserInteraction||(Z.options.disableKeyboardShortcuts=!0),Z._registerOptionEventListeners(Z.options.events),Z._coreFactory=new D.default(Z),Z.playerInfo=j.default.getInstance(Z.options.playerId),Z.playerInfo.currentSize={width:ee.width,height:ee.height},Z.playerInfo.options=Z.options,Z.options.parentId?Z.setParentId(Z.options.parentId):Z.options.parent&&Z.attachTo(Z.options.parent),Z}return re.prototype.setParentId=function(Z){var ge=document.querySelector(Z);return ge&&this.attachTo(ge),this},re.prototype.attachTo=function(Z){return this.options.parentElement=Z,this.core=this._coreFactory.create(),this._addEventListeners(),this},re.prototype._addEventListeners=function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,E.default.CORE_READY,this._onReady),this.listenTo(this.core,E.default.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,E.default.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,E.default.CORE_RESIZE,this._onResize),this},re.prototype._addContainerEventListeners=function(){var Z=this.core.activeContainer;return Z&&(this.listenTo(Z,E.default.CONTAINER_PLAY,this._onPlay),this.listenTo(Z,E.default.CONTAINER_PAUSE,this._onPause),this.listenTo(Z,E.default.CONTAINER_STOP,this._onStop),this.listenTo(Z,E.default.CONTAINER_ENDED,this._onEnded),this.listenTo(Z,E.default.CONTAINER_SEEK,this._onSeek),this.listenTo(Z,E.default.CONTAINER_ERROR,this._onError),this.listenTo(Z,E.default.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(Z,E.default.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(Z,E.default.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this},re.prototype._registerOptionEventListeners=function(){var Z=this,ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=(0,h.default)(ge).length>0;return we&&(0,h.default)(Te).forEach(function(Le){var Ce=Z.eventsMapping[Le];Ce&&Z.off(Ce,Te[Le])}),(0,h.default)(ge).forEach(function(Le){var Ce=Z.eventsMapping[Le];if(Ce){var be=ge[Le];be=typeof be=="function"&&be,be&&Z.on(Ce,be)}}),this},re.prototype._containerChanged=function(){this.stopListening(),this._addEventListeners()},re.prototype._onReady=function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(E.default.PLAYER_READY)},re.prototype._onFullscreenChange=function(Z){this.trigger(E.default.PLAYER_FULLSCREEN,Z)},re.prototype._onVolumeUpdate=function(Z){this.trigger(E.default.PLAYER_VOLUMEUPDATE,Z)},re.prototype._onSubtitleAvailable=function(){this.trigger(E.default.PLAYER_SUBTITLE_AVAILABLE)},re.prototype._onResize=function(Z){this.trigger(E.default.PLAYER_RESIZE,Z)},re.prototype._onPlay=function(){this.trigger(E.default.PLAYER_PLAY)},re.prototype._onPause=function(){this.trigger(E.default.PLAYER_PAUSE)},re.prototype._onStop=function(){this.trigger(E.default.PLAYER_STOP,this.getCurrentTime())},re.prototype._onEnded=function(){this.trigger(E.default.PLAYER_ENDED)},re.prototype._onSeek=function(Z){this.trigger(E.default.PLAYER_SEEK,Z)},re.prototype._onTimeUpdate=function(Z){this.trigger(E.default.PLAYER_TIMEUPDATE,Z)},re.prototype._onError=function(Z){this.trigger(E.default.PLAYER_ERROR,Z)},re.prototype._normalizeSources=function(Z){var ge=Z.sources||(Z.source!==void 0?[Z.source]:[]);return ge.length===0?[{source:"",mimeType:""}]:ge},re.prototype.resize=function(Z){return this.core.resize(Z),this},re.prototype.load=function(Z,ge,Te){return Te!==void 0&&this.configure({autoPlay:!!Te}),this.core.load(Z,ge),this},re.prototype.destroy=function(){return this.stopListening(),this.core.destroy(),this},re.prototype.consent=function(){return this.core.getCurrentPlayback().consent(),this},re.prototype.play=function(){return this.core.activeContainer.play(),this},re.prototype.pause=function(){return this.core.activeContainer.pause(),this},re.prototype.stop=function(){return this.core.activeContainer.stop(),this},re.prototype.seek=function(Z){return this.core.activeContainer.seek(Z),this},re.prototype.seekPercentage=function(Z){return this.core.activeContainer.seekPercentage(Z),this},re.prototype.mute=function(){return this._mutedVolume=this.getVolume(),this.setVolume(0),this},re.prototype.unmute=function(){return this.setVolume(typeof this._mutedVolume=="number"?this._mutedVolume:100),this._mutedVolume=null,this},re.prototype.isPlaying=function(){return this.core.activeContainer.isPlaying()},re.prototype.isDvrEnabled=function(){return this.core.activeContainer.isDvrEnabled()},re.prototype.isDvrInUse=function(){return this.core.activeContainer.isDvrInUse()},re.prototype.configure=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._registerOptionEventListeners(Z.events,this.options.events),this.core.configure(Z),this},re.prototype.getPlugin=function(Z){var ge=this.core.plugins.concat(this.core.activeContainer.plugins);return ge.filter(function(Te){return Te.name===Z})[0]},re.prototype.getCurrentTime=function(){return this.core.activeContainer.getCurrentTime()},re.prototype.getStartTimeOffset=function(){return this.core.activeContainer.getStartTimeOffset()},re.prototype.getDuration=function(){return this.core.activeContainer.getDuration()},re}(l.default);T.default=te,(0,x.default)(te.prototype,G.default),B.exports=T.default},"./src/components/player_info.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=f(o);function f(w){return w&&w.__esModule?w:{default:w}}var h=function w(){(0,x.default)(this,w),this.options={},this.playbackPlugins=[],this.currentSize={width:0,height:0}};h._players={},h.getInstance=function(w){return h._players[w]||(h._players[w]=new h)},T.default=h,B.exports=T.default},"./src/icons/01-play.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},"./src/icons/02-pause.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'},"./src/icons/03-stop.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'},"./src/icons/04-volume.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'},"./src/icons/05-mute.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'},"./src/icons/06-expand.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'},"./src/icons/07-shrink.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'},"./src/icons/08-hd.svg":function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'},"./src/icons/09-cc.svg":function(B,T){B.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve"><path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1 c1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9 C10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"></path></svg>'},"./src/icons/10-reload.svg":function(B,T){B.exports='<svg fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},"./src/main.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/components/player.js"),x=mt(o),f=t("./src/base/utils.js"),h=mt(f),w=t("./src/base/events.js"),p=mt(w),y=t("./src/base/playback.js"),c=mt(y),d=t("./src/base/container_plugin.js"),C=mt(d),b=t("./src/base/core_plugin.js"),u=mt(b),g=t("./src/base/ui_core_plugin.js"),s=mt(g),l=t("./src/base/ui_container_plugin.js"),S=mt(l),E=t("./src/base/base_object.js"),O=mt(E),P=t("./src/base/ui_object.js"),A=mt(P),D=t("./src/components/browser/index.js"),M=mt(D),L=t("./src/components/container/index.js"),V=mt(L),j=t("./src/components/core/index.js"),N=mt(j),G=t("./src/components/error/index.js"),K=mt(G),k=t("./src/components/loader/index.js"),J=mt(k),se=t("./src/components/mediator.js"),te=mt(se),oe=t("./src/components/player_info.js"),re=mt(oe),ee=t("./src/playbacks/base_flash_playback/index.js"),Z=mt(ee),ge=t("./src/playbacks/flash/index.js"),Te=mt(ge),we=t("./src/playbacks/flashls/index.js"),Le=mt(we),Ce=t("./src/playbacks/hls/index.js"),be=mt(Ce),Ge=t("./src/playbacks/html5_audio/index.js"),Ke=mt(Ge),je=t("./src/playbacks/html5_video/index.js"),Ze=mt(je),Be=t("./src/playbacks/html_img/index.js"),Oe=mt(Be),ze=t("./src/playbacks/no_op/index.js"),We=mt(ze),gt=t("./src/plugins/media_control/index.js"),at=mt(gt),_e=t("./src/plugins/click_to_pause/index.js"),Me=mt(_e),H=t("./src/plugins/dvr_controls/index.js"),m=mt(H),F=t("./src/plugins/favicon/index.js"),X=mt(F),le=t("./src/plugins/log/index.js"),ve=mt(le),Se=t("./src/plugins/poster/index.js"),ye=mt(Se),Re=t("./src/plugins/spinner_three_bounce/index.js"),Ie=mt(Re),ke=t("./src/plugins/watermark/index.js"),$e=mt(ke),qe=t("./src/base/styler.js"),lt=mt(qe),nt=t("./src/vendor/index.js"),ft=mt(nt),_t=t("./src/base/template.js"),Ct=mt(_t),Yt=t("./node_modules/clappr-zepto/zepto.js"),Gt=mt(Yt);function mt(St){return St&&St.__esModule?St:{default:St}}var jt="0.3.13";T.default={Player:x.default,Mediator:te.default,Events:p.default,Browser:M.default,PlayerInfo:re.default,MediaControl:at.default,ContainerPlugin:C.default,UIContainerPlugin:S.default,CorePlugin:u.default,UICorePlugin:s.default,Playback:c.default,Container:V.default,Core:N.default,PlayerError:K.default,Loader:J.default,BaseObject:O.default,UIObject:A.default,Utils:h.default,BaseFlashPlayback:Z.default,Flash:Te.default,FlasHLS:Le.default,HLS:be.default,HTML5Audio:Ke.default,HTML5Video:Ze.default,HTMLImg:Oe.default,NoOp:We.default,ClickToPausePlugin:Me.default,DVRControls:m.default,Favicon:X.default,Log:ve.default,Poster:ye.default,SpinnerThreeBouncePlugin:Ie.default,WaterMarkPlugin:$e.default,Styler:lt.default,Vendor:ft.default,version:jt,template:Ct.default,$:Gt.default},B.exports=T.default},"./src/playbacks/base_flash_playback/base_flash_playback.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=E(o),f=t("./node_modules/babel-runtime/helpers/createClass.js"),h=E(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=E(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=E(y),d=t("./src/base/playback.js"),C=E(d),b=t("./src/base/template.js"),u=E(b),g=t("./src/components/browser/index.js"),s=E(g),l=t("./src/playbacks/base_flash_playback/public/flash.html"),S=E(l);t("./src/playbacks/base_flash_playback/public/flash.scss");function E(A){return A&&A.__esModule?A:{default:A}}var O="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",P=function(A){(0,c.default)(D,A);function D(){return(0,x.default)(this,D),(0,p.default)(this,A.apply(this,arguments))}return D.prototype.setElement=function(L){this.$el=L,this.el=L[0]},D.prototype.render=function(){return this.$el.attr("data",this.swfPath),this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,baseUrl:this.baseUrl,playbackId:this.uniqueId,wmode:this.wmode,callbackName:"window.Clappr.flashlsCallbacks."+this.cid})),s.default.isIE&&(this.$("embed").remove(),s.default.isLegacyIE&&this.$el.attr("classid",O)),this.el.id=this.cid,this},(0,h.default)(D,[{key:"tagName",get:function(){return"object"}},{key:"swfPath",get:function(){return""}},{key:"wmode",get:function(){return"transparent"}},{key:"template",get:function(){return(0,u.default)(S.default)}},{key:"attributes",get:function(){var L="application/x-shockwave-flash";return s.default.isLegacyIE&&(L=""),{class:"clappr-flash-playback",type:L,width:"100%",height:"100%",data:this.swfPath,"data-flash-playback":this.name}}}]),D}(C.default);T.default=P,B.exports=T.default},"./src/playbacks/base_flash_playback/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0}),T.default=t("./src/playbacks/base_flash_playback/base_flash_playback.js"),B.exports=T.default},"./src/playbacks/base_flash_playback/public/flash.html":function(B,T){B.exports=`<param name="movie" value="<%= swfPath %>">
<param name="quality" value="autohigh">
<param name="swliveconnect" value="true">
<param name="allowScriptAccess" value="always">
<param name="bgcolor" value="#000000">
<param name="allowFullScreen" value="false">
<param name="wmode" value="<%= wmode %>">
<param name="tabindex" value="1">
<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">
<embed
  name="<%= cid %>"
  type="application/x-shockwave-flash"
  disabled="disabled"
  tabindex="-1"
  enablecontextmenu="false"
  allowScriptAccess="always"
  quality="autohigh"
  pluginspage="http://www.macromedia.com/go/getflashplayer"
  wmode="<%= wmode %>"
  swliveconnect="true"
  allowfullscreen="false"
  bgcolor="#000000"
  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"
  data="<%= swfPath %>"
  src="<%= swfPath %>"
  width="100%"
  height="100%">
</embed>
`},"./src/playbacks/base_flash_playback/public/flash.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/base_flash_playback/public/flash.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/playbacks/flash/flash.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=N(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=N(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=N(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=N(y),d=t("./src/base/utils.js"),C=t("./src/playbacks/base_flash_playback/index.js"),b=N(C),u=t("./src/components/browser/index.js"),g=N(u),s=t("./src/components/mediator.js"),l=N(s),S=t("./src/base/template.js"),E=N(S),O=t("./node_modules/clappr-zepto/zepto.js"),P=N(O),A=t("./src/base/events.js"),D=N(A),M=t("./src/base/playback.js"),L=N(M),V=t("./src/playbacks/flash/public/Player.swf"),j=N(V);function N(k){return k&&k.__esModule?k:{default:k}}var G=60,K=function(k){(0,c.default)(J,k),(0,p.default)(J,[{key:"name",get:function(){return"flash"}},{key:"swfPath",get:function(){return(0,E.default)(j.default)({baseUrl:this._baseUrl})}},{key:"ended",get:function(){return this._currentState==="ENDED"}},{key:"buffering",get:function(){return!!this._bufferingState&&this._currentState!=="ENDED"}}]);function J(){(0,x.default)(this,J);for(var se=arguments.length,te=Array(se),oe=0;oe<se;oe++)te[oe]=arguments[oe];var re=(0,h.default)(this,k.call.apply(k,[this].concat(te)));return re._src=re.options.src,re._baseUrl=re.options.baseUrl,re._autoPlay=re.options.autoPlay,re.settings={default:["seekbar"]},re.settings.left=["playpause","position","duration"],re.settings.right=["fullscreen","volume"],re.settings.seekEnabled=!0,re._isReadyState=!1,re._addListeners(),re}return J.prototype._bootstrap=function(){var te=this;this.el.playerPlay?(this.el.width="100%",this.el.height="100%",this._currentState==="PLAYING"?this._firstPlay():(this._currentState="IDLE",this._autoPlay&&this.play()),(0,P.default)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el),this.getDuration()>0?this._metadataLoaded():l.default.once(this.uniqueId+":timeupdate",this._metadataLoaded,this)):(this._attempts=this._attempts||0,++this._attempts<=G?setTimeout(function(){return te._bootstrap()},50):this.trigger(D.default.PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},J.prototype._metadataLoaded=function(){this._isReadyState=!0,this.trigger(D.default.PLAYBACK_READY,this.name),this.trigger(D.default.PLAYBACK_SETTINGSUPDATE,this.name)},J.prototype.getPlaybackType=function(){return L.default.VOD},J.prototype.isHighDefinitionInUse=function(){return!1},J.prototype._updateTime=function(){this.trigger(D.default.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name)},J.prototype._addListeners=function(){l.default.on(this.uniqueId+":progress",this._progress,this),l.default.on(this.uniqueId+":timeupdate",this._updateTime,this),l.default.on(this.uniqueId+":statechanged",this._checkState,this),l.default.on(this.uniqueId+":flashready",this._bootstrap,this)},J.prototype.stopListening=function(){k.prototype.stopListening.call(this),l.default.off(this.uniqueId+":progress"),l.default.off(this.uniqueId+":timeupdate"),l.default.off(this.uniqueId+":statechanged"),l.default.off(this.uniqueId+":flashready")},J.prototype._checkState=function(){this._isIdle||this._currentState==="PAUSED"||(this._currentState!=="PLAYING_BUFFERING"&&this.el.getState()==="PLAYING_BUFFERING"?(this._bufferingState=!0,this.trigger(D.default.PLAYBACK_BUFFERING,this.name),this._currentState="PLAYING_BUFFERING"):this.el.getState()==="PLAYING"?(this._bufferingState=!1,this.trigger(D.default.PLAYBACK_BUFFERFULL,this.name),this._currentState="PLAYING"):this.el.getState()==="IDLE"?this._currentState="IDLE":this.el.getState()==="ENDED"&&(this.trigger(D.default.PLAYBACK_ENDED,this.name),this.trigger(D.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.el.getDuration()},this.name),this._currentState="ENDED",this._isIdle=!0))},J.prototype._progress=function(){this._currentState!=="IDLE"&&this._currentState!=="ENDED"&&this.trigger(D.default.PLAYBACK_PROGRESS,{start:0,current:this.el.getBytesLoaded(),total:this.el.getBytesTotal()})},J.prototype._firstPlay=function(){var te=this;this.el.playerPlay?(this._isIdle=!1,this.el.playerPlay(this._src),this.listenToOnce(this,D.default.PLAYBACK_BUFFERFULL,function(){return te._checkInitialSeek()}),this._currentState="PLAYING"):this.listenToOnce(this,D.default.PLAYBACK_READY,this._firstPlay)},J.prototype._checkInitialSeek=function(){var te=(0,d.seekStringToSeconds)(window.location.href);te!==0&&this.seekSeconds(te)},J.prototype.play=function(){this.trigger(D.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"||this._currentState==="PLAYING_BUFFERING"?(this._currentState="PLAYING",this.el.playerResume(),this.trigger(D.default.PLAYBACK_PLAY,this.name)):this._currentState!=="PLAYING"&&(this._firstPlay(),this.trigger(D.default.PLAYBACK_PLAY,this.name))},J.prototype.volume=function(te){var oe=this;this.isReady?this.el.playerVolume(te):this.listenToOnce(this,D.default.PLAYBACK_BUFFERFULL,function(){return oe.volume(te)})},J.prototype.pause=function(){this._currentState="PAUSED",this.el.playerPause(),this.trigger(D.default.PLAYBACK_PAUSE,this.name)},J.prototype.stop=function(){this.el.playerStop(),this.trigger(D.default.PLAYBACK_STOP),this.trigger(D.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},J.prototype.isPlaying=function(){return!!(this.isReady&&this._currentState.indexOf("PLAYING")>-1)},J.prototype.getDuration=function(){return this.el.getDuration()},J.prototype.seekPercentage=function(te){var oe=this;if(this.el.getDuration()>0){var re=this.el.getDuration()*(te/100);this.seek(re)}else this.listenToOnce(this,D.default.PLAYBACK_BUFFERFULL,function(){return oe.seekPercentage(te)})},J.prototype.seek=function(te){var oe=this;this.isReady&&this.el.playerSeek?(this.el.playerSeek(te),this.trigger(D.default.PLAYBACK_TIMEUPDATE,{current:te,total:this.el.getDuration()},this.name),this._currentState==="PAUSED"&&this.el.playerPause()):this.listenToOnce(this,D.default.PLAYBACK_BUFFERFULL,function(){return oe.seek(te)})},J.prototype.destroy=function(){clearInterval(this.bootstrapId),k.prototype.stopListening.call(this),this.$el.remove()},(0,p.default)(J,[{key:"isReady",get:function(){return this._isReadyState}}]),J}(b.default);T.default=K,K.canPlay=function(k){if(!g.default.hasFlash||!k||k.constructor!==String)return!1;var J=k.split("?")[0].match(/.*\.(.*)$/)||[];return J.length>1&&!g.default.isMobile&&J[1].toLowerCase().match(/^(mp4|mov|f4v|3gpp|3gp)$/)},B.exports=T.default},"./src/playbacks/flash/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/playbacks/flash/flash.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/playbacks/flash/public/Player.swf":function(B,T){B.exports="<%=baseUrl%>/4b76590b32dab62bc95c1b7951efae78.swf"},"./src/playbacks/flashls/flashls.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=k(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=k(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=k(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=k(y),d=t("./src/playbacks/base_flash_playback/index.js"),C=k(d),b=t("./src/base/events.js"),u=k(b),g=t("./src/base/template.js"),s=k(g),l=t("./src/base/playback.js"),S=k(l),E=t("./src/components/mediator.js"),O=k(E),P=t("./src/components/browser/index.js"),A=k(P),D=t("./src/components/error/index.js"),M=k(D),L=t("./src/playbacks/flashls/flashls_events.js"),V=k(L),j=t("./src/playbacks/flashls/public/HLSPlayer.swf"),N=k(j),G=t("./node_modules/clappr-zepto/zepto.js"),K=k(G);function k(oe){return oe&&oe.__esModule?oe:{default:oe}}var J=60,se=-1,te=function(oe){(0,c.default)(re,oe),(0,p.default)(re,[{key:"name",get:function(){return"flashls"}},{key:"swfPath",get:function(){return(0,s.default)(N.default)({baseUrl:this._baseUrl})}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===void 0?se:this._currentLevel},set:function(Z){this._currentLevel=Z,this.trigger(u.default.PLAYBACK_LEVEL_SWITCH_START),this.el.playerSetCurrentLevel(Z)}},{key:"ended",get:function(){return this._hasEnded}},{key:"buffering",get:function(){return!!this._bufferingState&&!this._hasEnded}}]);function re(){(0,x.default)(this,re);for(var ee=arguments.length,Z=Array(ee),ge=0;ge<ee;ge++)Z[ge]=arguments[ge];var Te=(0,h.default)(this,oe.call.apply(oe,[this].concat(Z)));return Te._src=Te.options.src,Te._baseUrl=Te.options.baseUrl,Te._initHlsParameters(Te.options),Te.highDefinition=!1,Te._autoPlay=Te.options.autoPlay,Te._loop=Te.options.loop,Te._defaultSettings={left:["playstop"],default:["seekbar"],right:["fullscreen","volume","hd-indicator"],seekEnabled:!1},Te.settings=K.default.extend({},Te._defaultSettings),Te._playbackType=S.default.LIVE,Te._hasEnded=!1,Te._addListeners(),Te}return re.prototype._initHlsParameters=function(Z){this._autoStartLoad=Z.autoStartLoad===void 0?!0:Z.autoStartLoad,this._capLevelToStage=Z.capLevelToStage===void 0?!1:Z.capLevelToStage,this._maxLevelCappingMode=Z.maxLevelCappingMode===void 0?"downscale":Z.maxLevelCappingMode,this._minBufferLength=Z.minBufferLength===void 0?-1:Z.minBufferLength,this._minBufferLengthCapping=Z.minBufferLengthCapping===void 0?-1:Z.minBufferLengthCapping,this._maxBufferLength=Z.maxBufferLength===void 0?120:Z.maxBufferLength,this._maxBackBufferLength=Z.maxBackBufferLength===void 0?30:Z.maxBackBufferLength,this._lowBufferLength=Z.lowBufferLength===void 0?3:Z.lowBufferLength,this._mediaTimePeriod=Z.mediaTimePeriod===void 0?100:Z.mediaTimePeriod,this._fpsDroppedMonitoringPeriod=Z.fpsDroppedMonitoringPeriod===void 0?5e3:Z.fpsDroppedMonitoringPeriod,this._fpsDroppedMonitoringThreshold=Z.fpsDroppedMonitoringThreshold===void 0?.2:Z.fpsDroppedMonitoringThreshold,this._capLevelonFPSDrop=Z.capLevelonFPSDrop===void 0?!1:Z.capLevelonFPSDrop,this._smoothAutoSwitchonFPSDrop=Z.smoothAutoSwitchonFPSDrop===void 0?this.capLevelonFPSDrop:Z.smoothAutoSwitchonFPSDrop,this._switchDownOnLevelError=Z.switchDownOnLevelError===void 0?!0:Z.switchDownOnLevelError,this._seekMode=Z.seekMode===void 0?"ACCURATE":Z.seekMode,this._keyLoadMaxRetry=Z.keyLoadMaxRetry===void 0?3:Z.keyLoadMaxRetry,this._keyLoadMaxRetryTimeout=Z.keyLoadMaxRetryTimeout===void 0?64e3:Z.keyLoadMaxRetryTimeout,this._fragmentLoadMaxRetry=Z.fragmentLoadMaxRetry===void 0?3:Z.fragmentLoadMaxRetry,this._fragmentLoadMaxRetryTimeout=Z.fragmentLoadMaxRetryTimeout===void 0?4e3:Z.fragmentLoadMaxRetryTimeout,this._fragmentLoadSkipAfterMaxRetry=Z.fragmentLoadSkipAfterMaxRetry===void 0?!0:Z.fragmentLoadSkipAfterMaxRetry,this._maxSkippedFragments=Z.maxSkippedFragments===void 0?5:Z.maxSkippedFragments,this._flushLiveURLCache=Z.flushLiveURLCache===void 0?!1:Z.flushLiveURLCache,this._initialLiveManifestSize=Z.initialLiveManifestSize===void 0?1:Z.initialLiveManifestSize,this._manifestLoadMaxRetry=Z.manifestLoadMaxRetry===void 0?3:Z.manifestLoadMaxRetry,this._manifestLoadMaxRetryTimeout=Z.manifestLoadMaxRetryTimeout===void 0?64e3:Z.manifestLoadMaxRetryTimeout,this._manifestRedundantLoadmaxRetry=Z.manifestRedundantLoadmaxRetry===void 0?3:Z.manifestRedundantLoadmaxRetry,this._startFromBitrate=Z.startFromBitrate===void 0?-1:Z.startFromBitrate,this._startFromLevel=Z.startFromLevel===void 0?-1:Z.startFromLevel,this._autoStartMaxDuration=Z.autoStartMaxDuration===void 0?-1:Z.autoStartMaxDuration,this._seekFromLevel=Z.seekFromLevel===void 0?-1:Z.seekFromLevel,this._useHardwareVideoDecoder=Z.useHardwareVideoDecoder===void 0?!1:Z.useHardwareVideoDecoder,this._hlsLogEnabled=Z.hlsLogEnabled===void 0?!0:Z.hlsLogEnabled,this._logDebug=Z.logDebug===void 0?!1:Z.logDebug,this._logDebug2=Z.logDebug2===void 0?!1:Z.logDebug2,this._logWarn=Z.logWarn===void 0?!0:Z.logWarn,this._logError=Z.logError===void 0?!0:Z.logError,this._hlsMinimumDvrSize=Z.hlsMinimumDvrSize===void 0?60:Z.hlsMinimumDvrSize},re.prototype._addListeners=function(){var Z=this;O.default.on(this.cid+":flashready",function(){return Z._bootstrap()}),O.default.on(this.cid+":timeupdate",function(ge){return Z._updateTime(ge)}),O.default.on(this.cid+":playbackstate",function(ge){return Z._setPlaybackState(ge)}),O.default.on(this.cid+":levelchanged",function(ge){return Z._levelChanged(ge)}),O.default.on(this.cid+":error",function(ge,Te,we){return Z._flashPlaybackError(ge,Te,we)}),O.default.on(this.cid+":fragmentloaded",function(ge){return Z._onFragmentLoaded(ge)}),O.default.on(this.cid+":levelendlist",function(ge){return Z._onLevelEndlist(ge)})},re.prototype.stopListening=function(){oe.prototype.stopListening.call(this),O.default.off(this.cid+":flashready"),O.default.off(this.cid+":timeupdate"),O.default.off(this.cid+":playbackstate"),O.default.off(this.cid+":levelchanged"),O.default.off(this.cid+":playbackerror"),O.default.off(this.cid+":fragmentloaded"),O.default.off(this.cid+":manifestloaded"),O.default.off(this.cid+":levelendlist")},re.prototype._bootstrap=function(){var Z=this;if(this.el.playerLoad)this.el.width="100%",this.el.height="100%",this._isReadyState=!0,this._srcLoaded=!1,this._currentState="IDLE",this._setFlashSettings(),this._updatePlaybackType(),(this._autoPlay||this._shouldPlayOnManifestLoaded)&&this.play(),this.trigger(u.default.PLAYBACK_READY,this.name);else if(this._bootstrapAttempts=this._bootstrapAttempts||0,++this._bootstrapAttempts<=J)setTimeout(function(){return Z._bootstrap()},50);else{var ge=this.createError({code:"playerLoadFail_maxNumberAttemptsReached",description:this.name+" error: Max number of attempts reached",level:M.default.Levels.FATAL,raw:{}});this.trigger(u.default.PLAYBACK_ERROR,ge)}},re.prototype._setFlashSettings=function(){this.el.playerSetAutoStartLoad(this._autoStartLoad),this.el.playerSetCapLevelToStage(this._capLevelToStage),this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode),this.el.playerSetMinBufferLength(this._minBufferLength),this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping),this.el.playerSetMaxBufferLength(this._maxBufferLength),this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength),this.el.playerSetLowBufferLength(this._lowBufferLength),this.el.playerSetMediaTimePeriod(this._mediaTimePeriod),this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod),this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold),this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop),this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop),this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError),this.el.playerSetSeekMode(this._seekMode),this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry),this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout),this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry),this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout),this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry),this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments),this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache),this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize),this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry),this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout),this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry),this.el.playerSetStartFromBitrate(this._startFromBitrate),this.el.playerSetStartFromLevel(this._startFromLevel),this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration),this.el.playerSetSeekFromLevel(this._seekFromLevel),this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder),this.el.playerSetLogInfo(this._hlsLogEnabled),this.el.playerSetLogDebug(this._logDebug),this.el.playerSetLogDebug2(this._logDebug2),this.el.playerSetLogWarn(this._logWarn),this.el.playerSetLogError(this._logError)},re.prototype.setAutoStartLoad=function(Z){this._autoStartLoad=Z,this.el.playerSetAutoStartLoad(this._autoStartLoad)},re.prototype.setCapLevelToStage=function(Z){this._capLevelToStage=Z,this.el.playerSetCapLevelToStage(this._capLevelToStage)},re.prototype.setMaxLevelCappingMode=function(Z){this._maxLevelCappingMode=Z,this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)},re.prototype.setSetMinBufferLength=function(Z){this._minBufferLength=Z,this.el.playerSetMinBufferLength(this._minBufferLength)},re.prototype.setMinBufferLengthCapping=function(Z){this._minBufferLengthCapping=Z,this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)},re.prototype.setMaxBufferLength=function(Z){this._maxBufferLength=Z,this.el.playerSetMaxBufferLength(this._maxBufferLength)},re.prototype.setMaxBackBufferLength=function(Z){this._maxBackBufferLength=Z,this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)},re.prototype.setLowBufferLength=function(Z){this._lowBufferLength=Z,this.el.playerSetLowBufferLength(this._lowBufferLength)},re.prototype.setMediaTimePeriod=function(Z){this._mediaTimePeriod=Z,this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)},re.prototype.setFpsDroppedMonitoringPeriod=function(Z){this._fpsDroppedMonitoringPeriod=Z,this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)},re.prototype.setFpsDroppedMonitoringThreshold=function(Z){this._fpsDroppedMonitoringThreshold=Z,this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)},re.prototype.setCapLevelonFPSDrop=function(Z){this._capLevelonFPSDrop=Z,this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)},re.prototype.setSmoothAutoSwitchonFPSDrop=function(Z){this._smoothAutoSwitchonFPSDrop=Z,this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)},re.prototype.setSwitchDownOnLevelError=function(Z){this._switchDownOnLevelError=Z,this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)},re.prototype.setSeekMode=function(Z){this._seekMode=Z,this.el.playerSetSeekMode(this._seekMode)},re.prototype.setKeyLoadMaxRetry=function(Z){this._keyLoadMaxRetry=Z,this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)},re.prototype.setKeyLoadMaxRetryTimeout=function(Z){this._keyLoadMaxRetryTimeout=Z,this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)},re.prototype.setFragmentLoadMaxRetry=function(Z){this._fragmentLoadMaxRetry=Z,this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)},re.prototype.setFragmentLoadMaxRetryTimeout=function(Z){this._fragmentLoadMaxRetryTimeout=Z,this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)},re.prototype.setFragmentLoadSkipAfterMaxRetry=function(Z){this._fragmentLoadSkipAfterMaxRetry=Z,this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)},re.prototype.setMaxSkippedFragments=function(Z){this._maxSkippedFragments=Z,this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)},re.prototype.setFlushLiveURLCache=function(Z){this._flushLiveURLCache=Z,this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)},re.prototype.setInitialLiveManifestSize=function(Z){this._initialLiveManifestSize=Z,this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)},re.prototype.setManifestLoadMaxRetry=function(Z){this._manifestLoadMaxRetry=Z,this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)},re.prototype.setManifestLoadMaxRetryTimeout=function(Z){this._manifestLoadMaxRetryTimeout=Z,this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)},re.prototype.setManifestRedundantLoadmaxRetry=function(Z){this._manifestRedundantLoadmaxRetry=Z,this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)},re.prototype.setStartFromBitrate=function(Z){this._startFromBitrate=Z,this.el.playerSetStartFromBitrate(this._startFromBitrate)},re.prototype.setStartFromLevel=function(Z){this._startFromLevel=Z,this.el.playerSetStartFromLevel(this._startFromLevel)},re.prototype.setAutoStartMaxDuration=function(Z){this._autoStartMaxDuration=Z,this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)},re.prototype.setSeekFromLevel=function(Z){this._seekFromLevel=Z,this.el.playerSetSeekFromLevel(this._seekFromLevel)},re.prototype.setUseHardwareVideoDecoder=function(Z){this._useHardwareVideoDecoder=Z,this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)},re.prototype.setSetLogInfo=function(Z){this._hlsLogEnabled=Z,this.el.playerSetLogInfo(this._hlsLogEnabled)},re.prototype.setLogDebug=function(Z){this._logDebug=Z,this.el.playerSetLogDebug(this._logDebug)},re.prototype.setLogDebug2=function(Z){this._logDebug2=Z,this.el.playerSetLogDebug2(this._logDebug2)},re.prototype.setLogWarn=function(Z){this._logWarn=Z,this.el.playerSetLogWarn(this._logWarn)},re.prototype.setLogError=function(Z){this._logError=Z,this.el.playerSetLogError(this._logError)},re.prototype._levelChanged=function(Z){var ge=this.el.getLevels()[Z];ge&&(this.highDefinition=ge.height>=720||ge.bitrate/1e3>=2e3,this.trigger(u.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),(!this._levels||this._levels.length===0)&&this._fillLevels(),this.trigger(u.default.PLAYBACK_BITRATE,{height:ge.height,width:ge.width,bandwidth:ge.bitrate,bitrate:ge.bitrate,level:Z}),this.trigger(u.default.PLAYBACK_LEVEL_SWITCH_END))},re.prototype._updateTime=function(Z){if(this._currentState!=="IDLE"){var ge=this._normalizeDuration(Z.duration),Te=Math.min(Math.max(Z.position,0),ge),we=this._dvrEnabled,Le=this._playbackType===S.default.LIVE;this._dvrEnabled=Le&&ge>this._hlsMinimumDvrSize,!(ge===100||Le===void 0)&&(this._dvrEnabled!==we&&(this._updateSettings(),this.trigger(u.default.PLAYBACK_SETTINGSUPDATE,this.name)),Le&&!this._dvrEnabled&&(Te=ge),this.trigger(u.default.PLAYBACK_TIMEUPDATE,{current:Te,total:ge},this.name))}},re.prototype.play=function(){this.trigger(u.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"?this.el.playerResume():!this._srcLoaded&&this._currentState!=="PLAYING"?this._firstPlay():this.el.playerPlay()},re.prototype.getPlaybackType=function(){return this._playbackType?this._playbackType:null},re.prototype.getCurrentTime=function(){return this.el.getPosition()},re.prototype.getCurrentLevelIndex=function(){return this._currentLevel},re.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},re.prototype.getCurrentBitrate=function(){return this.levels[this.currentLevel].bitrate},re.prototype.setCurrentLevel=function(Z){this.currentLevel=Z},re.prototype.isHighDefinitionInUse=function(){return this.highDefinition},re.prototype.getLevels=function(){return this.levels},re.prototype._setPlaybackState=function(Z){["PLAYING_BUFFERING","PAUSED_BUFFERING"].indexOf(Z)>=0?(this._bufferingState=!0,this.trigger(u.default.PLAYBACK_BUFFERING,this.name),this._updateCurrentState(Z)):["PLAYING","PAUSED"].indexOf(Z)>=0?(["PLAYING_BUFFERING","PAUSED_BUFFERING","IDLE"].indexOf(this._currentState)>=0&&(this._bufferingState=!1,this.trigger(u.default.PLAYBACK_BUFFERFULL,this.name)),this._updateCurrentState(Z)):Z==="IDLE"&&(this._srcLoaded=!1,this._loop&&["PLAYING_BUFFERING","PLAYING"].indexOf(this._currentState)>=0?(this.play(),this.seek(0)):(this._updateCurrentState(Z),this._hasEnded=!0,this.trigger(u.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.getDuration()},this.name),this.trigger(u.default.PLAYBACK_ENDED,this.name)))},re.prototype._updateCurrentState=function(Z){this._currentState=Z,Z!=="IDLE"&&(this._hasEnded=!1),this._updatePlaybackType(),Z==="PLAYING"?this.trigger(u.default.PLAYBACK_PLAY,this.name):Z==="PAUSED"&&this.trigger(u.default.PLAYBACK_PAUSE,this.name)},re.prototype._updatePlaybackType=function(){this._playbackType=this.el.getType(),this._playbackType&&(this._playbackType=this._playbackType.toLowerCase(),this._playbackType===S.default.VOD?this._startReportingProgress():this._stopReportingProgress()),this.trigger(u.default.PLAYBACK_PLAYBACKSTATE,{type:this._playbackType})},re.prototype._startReportingProgress=function(){this._reportingProgress||(this._reportingProgress=!0)},re.prototype._stopReportingProgress=function(){this._reportingProgress=!1},re.prototype._onFragmentLoaded=function(Z){if(this.trigger(u.default.PLAYBACK_FRAGMENT_LOADED,Z),this._reportingProgress&&this.getCurrentTime()){var ge=this.getCurrentTime()+this.el.getbufferLength();this.trigger(u.default.PLAYBACK_PROGRESS,{start:this.getCurrentTime(),current:ge,total:this.el.getDuration()})}},re.prototype._onLevelEndlist=function(){this._updatePlaybackType()},re.prototype._firstPlay=function(){var Z=this;this._shouldPlayOnManifestLoaded=!0,this.el.playerLoad&&(O.default.once(this.cid+":manifestloaded",function(ge,Te){return Z._manifestLoaded(ge,Te)}),this._setFlashSettings(),this.el.playerLoad(this._src),this._srcLoaded=!0)},re.prototype.volume=function(Z){var ge=this;this.isReady?this.el.playerVolume(Z):this.listenToOnce(this,u.default.PLAYBACK_BUFFERFULL,function(){return ge.volume(Z)})},re.prototype.pause=function(){(this._playbackType!==S.default.LIVE||this._dvrEnabled)&&(this.el.playerPause(),this._playbackType===S.default.LIVE&&this._dvrEnabled&&this._updateDvr(!0))},re.prototype.stop=function(){this._srcLoaded=!1,this.el.playerStop(),this.trigger(u.default.PLAYBACK_STOP),this.trigger(u.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},re.prototype.isPlaying=function(){return this._currentState?!!this._currentState.match(/playing/i):!1},re.prototype.getDuration=function(){return this._normalizeDuration(this.el.getDuration())},re.prototype._normalizeDuration=function(Z){return this._playbackType===S.default.LIVE&&(Z=Math.max(0,Z-10)),Z},re.prototype.seekPercentage=function(Z){var ge=this.el.getDuration(),Te=0;Z>0&&(Te=ge*Z/100),this.seek(Te)},re.prototype.seek=function(Z){var ge=this.getDuration();if(this._playbackType===S.default.LIVE){var Te=ge-Z>3;this._updateDvr(Te)}this.el.playerSeek(Z),this.trigger(u.default.PLAYBACK_TIMEUPDATE,{current:Z,total:ge},this.name)},re.prototype._updateDvr=function(Z){var ge=!!this._dvrInUse;this._dvrInUse=Z,this._dvrInUse!==ge&&(this._updateSettings(),this.trigger(u.default.PLAYBACK_DVR,this._dvrInUse),this.trigger(u.default.PLAYBACK_STATS_ADD,{dvr:this._dvrInUse}))},re.prototype._flashPlaybackError=function(Z,ge,Te){var we={code:Z,description:Te,level:M.default.Levels.FATAL,raw:{code:Z,url:ge,message:Te}},Le=this.createError(we);this.trigger(u.default.PLAYBACK_ERROR,Le),this.trigger(u.default.PLAYBACK_STOP)},re.prototype._manifestLoaded=function(Z,ge){this._shouldPlayOnManifestLoaded&&(this._shouldPlayOnManifestLoaded=!1,this.el.playerPlay()),this._fillLevels(),this.trigger(u.default.PLAYBACK_LOADEDMETADATA,{duration:Z,data:ge})},re.prototype._fillLevels=function(){var Z=this.el.getLevels(),ge=Z.length;this._levels=[];for(var Te=0;Te<ge;Te++)this._levels.push({id:Te,label:Z[Te].height+"p",level:Z[Te]});this.trigger(u.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},re.prototype.destroy=function(){this.stopListening(),this.$el.remove()},re.prototype._updateSettings=function(){this.settings=K.default.extend({},this._defaultSettings),this._playbackType===S.default.VOD||this._dvrInUse?(this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=!0):this._dvrEnabled?(this.settings.left=["playpause"],this.settings.seekEnabled=!0):this.settings.seekEnabled=!1},re.prototype._createCallbacks=function(){var Z=this;window.Clappr||(window.Clappr={}),window.Clappr.flashlsCallbacks||(window.Clappr.flashlsCallbacks={}),this.flashlsEvents=new V.default(this.cid),window.Clappr.flashlsCallbacks[this.cid]=function(ge,Te){Z.flashlsEvents[ge].apply(Z.flashlsEvents,Te)}},re.prototype.render=function(){return oe.prototype.render.call(this),this._createCallbacks(),this},(0,p.default)(re,[{key:"isReady",get:function(){return this._isReadyState}},{key:"dvrEnabled",get:function(){return!!this._dvrEnabled}}]),re}(C.default);T.default=te,te.canPlay=function(oe,re){var ee=oe.split("?")[0].match(/.*\.(.*)$/)||[];return A.default.hasFlash&&(ee.length>1&&ee[1].toLowerCase()==="m3u8"||re==="application/x-mpegURL"||re==="application/vnd.apple.mpegurl")},B.exports=T.default},"./src/playbacks/flashls/flashls_events.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=w(o),f=t("./src/components/mediator.js"),h=w(f);function w(y){return y&&y.__esModule?y:{default:y}}var p=function(){function y(c){(0,x.default)(this,y),this.instanceId=c}return y.prototype.ready=function(){h.default.trigger(this.instanceId+":flashready")},y.prototype.videoSize=function(d,C){h.default.trigger(this.instanceId+":videosizechanged",d,C)},y.prototype.complete=function(){h.default.trigger(this.instanceId+":complete")},y.prototype.error=function(d,C,b){h.default.trigger(this.instanceId+":error",d,C,b)},y.prototype.manifest=function(d,C){h.default.trigger(this.instanceId+":manifestloaded",d,C)},y.prototype.audioLevelLoaded=function(d){h.default.trigger(this.instanceId+":audiolevelloaded",d)},y.prototype.levelLoaded=function(d){h.default.trigger(this.instanceId+":levelloaded",d)},y.prototype.levelEndlist=function(d){h.default.trigger(this.instanceId+":levelendlist",d)},y.prototype.fragmentLoaded=function(d){h.default.trigger(this.instanceId+":fragmentloaded",d)},y.prototype.fragmentPlaying=function(d){h.default.trigger(this.instanceId+":fragmentplaying",d)},y.prototype.position=function(d){h.default.trigger(this.instanceId+":timeupdate",d)},y.prototype.state=function(d){h.default.trigger(this.instanceId+":playbackstate",d)},y.prototype.seekState=function(d){h.default.trigger(this.instanceId+":seekstate",d)},y.prototype.switch=function(d){h.default.trigger(this.instanceId+":levelchanged",d)},y.prototype.audioTracksListChange=function(d){h.default.trigger(this.instanceId+":audiotracklistchanged",d)},y.prototype.audioTrackChange=function(d){h.default.trigger(this.instanceId+":audiotrackchanged",d)},y}();T.default=p,B.exports=T.default},"./src/playbacks/flashls/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/playbacks/flashls/flashls.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/playbacks/flashls/public/HLSPlayer.swf":function(B,T){B.exports="<%=baseUrl%>/8fa12a459188502b9f0d39b8a67d9e6c.swf"},"./src/playbacks/hls/hls.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/toConsumableArray.js"),x=K(o),f=t("./node_modules/babel-runtime/core-js/json/stringify.js"),h=K(f),w=t("./node_modules/babel-runtime/helpers/extends.js"),p=K(w),y=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=K(y),d=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),C=K(d),b=t("./node_modules/babel-runtime/helpers/createClass.js"),u=K(b),g=t("./node_modules/babel-runtime/helpers/inherits.js"),s=K(g),l=t("./src/playbacks/html5_video/index.js"),S=K(l),E=t("./node_modules/hls.js/dist/hls.js"),O=K(E),P=t("./src/base/events.js"),A=K(P),D=t("./src/base/playback.js"),M=K(D),L=t("./src/base/utils.js"),V=t("./src/plugins/log/index.js"),j=K(V),N=t("./src/components/error/index.js"),G=K(N);function K(se){return se&&se.__esModule?se:{default:se}}var k=-1,J=function(se){(0,s.default)(te,se),(0,u.default)(te,[{key:"name",get:function(){return"hls"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===void 0?k:this._currentLevel},set:function(re){this._currentLevel=re,this.trigger(A.default.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===M.default.LIVE&&this._playlistType!=="EVENT"?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return(0,L.now)()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var re=this._localStartTimeCorrelation,ee=this._now-re.local,Z=(re.remote+ee)/1e3;return Math.min(Z,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var re=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return re;var ee=this._localEndTimeCorrelation,Z=this._now-ee.local,ge=(ee.remote+Z)/1e3;return Math.max(re-this._extrapolatedWindowDuration,Math.min(ge,re))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return this._segmentTargetDuration===null?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}}],[{key:"HLSJS",get:function(){return O.default}}]);function te(){(0,c.default)(this,te);for(var oe=arguments.length,re=Array(oe),ee=0;ee<oe;ee++)re[ee]=arguments[ee];var Z=(0,C.default)(this,se.call.apply(se,[this].concat(re)));return Z.options.playback=(0,p.default)({},Z.options,Z.options.playback),Z._minDvrSize=typeof Z.options.hlsMinimumDvrSize>"u"?60:Z.options.hlsMinimumDvrSize,Z._extrapolatedWindowNumSegments=!Z.options.playback||typeof Z.options.playback.extrapolatedWindowNumSegments>"u"?2:Z.options.playback.extrapolatedWindowNumSegments,Z._playbackType=M.default.VOD,Z._lastTimeUpdate={current:0,total:0},Z._lastDuration=null,Z._playableRegionStartTime=0,Z._localStartTimeCorrelation=null,Z._localEndTimeCorrelation=null,Z._playableRegionDuration=0,Z._programDateTime=0,Z._durationExcludesAfterLiveSyncPoint=!1,Z._segmentTargetDuration=null,Z._playlistType=null,Z._recoverAttemptsRemaining=Z.options.hlsRecoverAttempts||16,Z}return te.prototype._setup=function(){var re=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls=new O.default((0,L.assign)({},this.options.playback.hlsjsConfig)),this._hls.on(O.default.Events.MEDIA_ATTACHED,function(){return re._hls.loadSource(re.options.src)}),this._hls.on(O.default.Events.LEVEL_LOADED,function(ee,Z){return re._updatePlaybackType(ee,Z)}),this._hls.on(O.default.Events.LEVEL_UPDATED,function(ee,Z){return re._onLevelUpdated(ee,Z)}),this._hls.on(O.default.Events.LEVEL_SWITCHING,function(ee,Z){return re._onLevelSwitch(ee,Z)}),this._hls.on(O.default.Events.FRAG_LOADED,function(ee,Z){return re._onFragmentLoaded(ee,Z)}),this._hls.on(O.default.Events.ERROR,function(ee,Z){return re._onHLSJSError(ee,Z)}),this._hls.on(O.default.Events.SUBTITLE_TRACK_LOADED,function(ee,Z){return re._onSubtitleLoaded(ee,Z)}),this._hls.on(O.default.Events.SUBTITLE_TRACKS_UPDATED,function(){return re._ccTracksUpdated=!0}),this._hls.attachMedia(this.el)},te.prototype.render=function(){return this._ready(),se.prototype.render.call(this)},te.prototype._ready=function(){this._isReadyState=!0,this.trigger(A.default.PLAYBACK_READY,this.name)},te.prototype._recover=function(re,ee,Z){if(!this._recoveredDecodingError)this._recoveredDecodingError=!0,this._hls.recoverMediaError();else if(!this._recoveredAudioCodecError)this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else{j.default.error("hlsjs: failed to recover",{evt:re,data:ee}),Z.level=G.default.Levels.FATAL;var ge=this.createError(Z);this.trigger(A.default.PLAYBACK_ERROR,ge),this.stop()}},te.prototype._setupSrc=function(re){},te.prototype._startTimeUpdateTimer=function(){var re=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval(function(){re._onDurationChange(),re._onTimeUpdate()},100))},te.prototype._stopTimeUpdateTimer=function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)},te.prototype.getProgramDateTime=function(){return this._programDateTime},te.prototype.getDuration=function(){return this._duration},te.prototype.getCurrentTime=function(){return Math.max(0,this.el.currentTime-this._startTime)},te.prototype.getStartTimeOffset=function(){return this._startTime},te.prototype.seekPercentage=function(re){var ee=this._duration;re>0&&(ee=this._duration*(re/100)),this.seek(ee)},te.prototype.seek=function(re){re<0&&(j.default.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),re=this.getDuration()),this.dvrEnabled&&this._updateDvr(re<this.getDuration()-3),re+=this._startTime,se.prototype.seek.call(this,re)},te.prototype.seekToLivePoint=function(){this.seek(this.getDuration())},te.prototype._updateDvr=function(re){this.trigger(A.default.PLAYBACK_DVR,re),this.trigger(A.default.PLAYBACK_STATS_ADD,{dvr:re})},te.prototype._updateSettings=function(){this._playbackType===M.default.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(A.default.PLAYBACK_SETTINGSUPDATE)},te.prototype._onHLSJSError=function(re,ee){var Z={code:ee.type+"_"+ee.details,description:this.name+" error: type: "+ee.type+", details: "+ee.details,raw:ee},ge=void 0;if(ee.response&&(Z.description+=", response: "+(0,h.default)(ee.response)),ee.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,ee.type){case O.default.ErrorTypes.NETWORK_ERROR:switch(ee.details){case O.default.ErrorDetails.MANIFEST_LOAD_ERROR:case O.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case O.default.ErrorDetails.MANIFEST_PARSING_ERROR:case O.default.ErrorDetails.LEVEL_LOAD_ERROR:case O.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:j.default.error("hlsjs: unrecoverable network fatal error.",{evt:re,data:ee}),ge=this.createError(Z),this.trigger(A.default.PLAYBACK_ERROR,ge),this.stop();break;default:j.default.warn("hlsjs: trying to recover from network error.",{evt:re,data:ee}),Z.level=G.default.Levels.WARN,this.createError(Z),this._hls.startLoad();break}break;case O.default.ErrorTypes.MEDIA_ERROR:j.default.warn("hlsjs: trying to recover from media error.",{evt:re,data:ee}),Z.level=G.default.Levels.WARN,this.createError(Z),this._recover(re,ee,Z);break;default:j.default.error("hlsjs: could not recover from error.",{evt:re,data:ee}),ge=this.createError(Z),this.trigger(A.default.PLAYBACK_ERROR,ge),this.stop();break}else j.default.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:re,data:ee}),ge=this.createError(Z),this.trigger(A.default.PLAYBACK_ERROR,ge),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(ee)){j.default.error("hlsjs: could not load decrypt key.",{evt:re,data:ee}),ge=this.createError(Z),this.trigger(A.default.PLAYBACK_ERROR,ge),this.stop();return}Z.level=G.default.Levels.WARN,this.createError(Z),j.default.warn("hlsjs: non-fatal error occurred",{evt:re,data:ee})}},te.prototype._keyIsDenied=function(re){return re.type===O.default.ErrorTypes.NETWORK_ERROR&&re.details===O.default.ErrorDetails.KEY_LOAD_ERROR&&re.response&&re.response.code>=400},te.prototype._onTimeUpdate=function(){var re={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},ee=this._lastTimeUpdate&&re.current===this._lastTimeUpdate.current&&re.total===this._lastTimeUpdate.total;ee||(this._lastTimeUpdate=re,this.trigger(A.default.PLAYBACK_TIMEUPDATE,re,this.name))},te.prototype._onDurationChange=function(){var re=this.getDuration();this._lastDuration!==re&&(this._lastDuration=re,se.prototype._onDurationChange.call(this))},te.prototype._onProgress=function(){if(this.el.buffered.length){for(var re=[],ee=0,Z=0;Z<this.el.buffered.length;Z++)re=[].concat((0,x.default)(re),[{start:Math.max(0,this.el.buffered.start(Z)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(Z)-this._playableRegionStartTime)}]),this.el.currentTime>=re[Z].start&&this.el.currentTime<=re[Z].end&&(ee=Z);var ge={start:re[ee].start,current:re[ee].end,total:this.getDuration()};this.trigger(A.default.PLAYBACK_PROGRESS,ge,re)}},te.prototype.play=function(){this._hls||this._setup(),se.prototype.play.call(this),this._startTimeUpdateTimer()},te.prototype.pause=function(){this._hls&&(se.prototype.pause.call(this),this.dvrEnabled&&this._updateDvr(!0))},te.prototype.stop=function(){this._stopTimeUpdateTimer(),this._hls&&(se.prototype.stop.call(this),this._hls.destroy(),delete this._hls)},te.prototype.destroy=function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),se.prototype.destroy.call(this)},te.prototype._updatePlaybackType=function(re,ee){this._playbackType=ee.details.live?M.default.LIVE:M.default.VOD,this._onLevelUpdated(re,ee),this._ccTracksUpdated&&this._playbackType===M.default.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()},te.prototype._fillLevels=function(){this._levels=this._hls.levels.map(function(re,ee){return{id:ee,level:re,label:re.bitrate/1e3+"Kbps"}}),this.trigger(A.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},te.prototype._onLevelUpdated=function(re,ee){this._segmentTargetDuration=ee.details.targetduration,this._playlistType=ee.details.type||null;var Z=!1,ge=!1,Te=ee.details.fragments,we=this._playableRegionStartTime,Le=this._playableRegionDuration;if(Te.length!==0){if(Te[0].rawProgramDateTime&&(this._programDateTime=Te[0].rawProgramDateTime),this._playableRegionStartTime!==Te[0].start&&(Z=!0,this._playableRegionStartTime=Te[0].start),Z)if(!this._localStartTimeCorrelation)this._localStartTimeCorrelation={local:this._now,remote:(Te[0].start+this._extrapolatedWindowDuration/2)*1e3};else{var Ce=this._localStartTimeCorrelation,be=this._now-Ce.local,Ge=(Ce.remote+be)/1e3;Ge<Te[0].start?this._localStartTimeCorrelation={local:this._now,remote:Te[0].start*1e3}:Ge>we+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:Math.max(Te[0].start,we+this._extrapolatedWindowDuration)*1e3})}var Ke=ee.details.totalduration;if(this._playbackType===M.default.LIVE){var je=ee.details.targetduration,Ze=this.options.playback.hlsjsConfig||{},Be=Ze.liveSyncDurationCount||O.default.DefaultConfig.liveSyncDurationCount,Oe=je*Be;Oe<=Ke?(Ke-=Oe,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}Ke!==this._playableRegionDuration&&(ge=!0,this._playableRegionDuration=Ke);var ze=Te[0].start+Ke,We=we+Le,gt=ze!==We;if(gt)if(!this._localEndTimeCorrelation)this._localEndTimeCorrelation={local:this._now,remote:ze*1e3};else{var at=this._localEndTimeCorrelation,_e=this._now-at.local,Me=(at.remote+_e)/1e3;Me>ze?this._localEndTimeCorrelation={local:this._now,remote:ze*1e3}:Me<ze-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:(ze-this._extrapolatedWindowDuration)*1e3}:Me>We&&(this._localEndTimeCorrelation={local:this._now,remote:We*1e3})}ge&&this._onDurationChange(),Z&&this._onProgress()}},te.prototype._onFragmentLoaded=function(re,ee){this.trigger(A.default.PLAYBACK_FRAGMENT_LOADED,ee)},te.prototype._onSubtitleLoaded=function(){if(!this._ccIsSetup){this.trigger(A.default.PLAYBACK_SUBTITLE_AVAILABLE);var re=this._playbackType===M.default.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=re,this._ccIsSetup=!0}},te.prototype._onLevelSwitch=function(re,ee){this.levels.length||this._fillLevels(),this.trigger(A.default.PLAYBACK_LEVEL_SWITCH_END),this.trigger(A.default.PLAYBACK_LEVEL_SWITCH,ee);var Z=this._hls.levels[ee.level];Z&&(this.highDefinition=Z.height>=720||Z.bitrate/1e3>=2e3,this.trigger(A.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(A.default.PLAYBACK_BITRATE,{height:Z.height,width:Z.width,bandwidth:Z.bitrate,bitrate:Z.bitrate,level:ee.level}))},te.prototype.getPlaybackType=function(){return this._playbackType},te.prototype.isSeekEnabled=function(){return this._playbackType===M.default.VOD||this.dvrEnabled},(0,u.default)(te,[{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===M.default.LIVE}}]),te}(S.default);T.default=J,J.canPlay=function(se,te){var oe=se.split("?")[0].match(/.*\.(.*)$/)||[],re=oe.length>1&&oe[1].toLowerCase()==="m3u8"||(0,L.listContainsIgnoreCase)(te,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!!(O.default.isSupported()&&re)},B.exports=T.default},"./src/playbacks/hls/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/playbacks/hls/hls.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/playbacks/html5_audio/html5_audio.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=l(o),f=t("./node_modules/babel-runtime/helpers/createClass.js"),h=l(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=l(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=l(y),d=t("./src/base/events.js"),C=l(d),b=t("./src/base/playback.js"),u=l(b),g=t("./src/playbacks/html5_video/index.js"),s=l(g);function l(E){return E&&E.__esModule?E:{default:E}}var S=function(E){(0,c.default)(O,E);function O(){return(0,x.default)(this,O),(0,p.default)(this,E.apply(this,arguments))}return O.prototype.updateSettings=function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(C.default.PLAYBACK_SETTINGSUPDATE)},O.prototype.getPlaybackType=function(){return u.default.AOD},(0,h.default)(O,[{key:"name",get:function(){return"html5_audio"}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),O}(s.default);T.default=S,S.canPlay=function(E,O){var P={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return s.default._canPlay("audio",P,E,O)},B.exports=T.default},"./src/playbacks/html5_audio/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/playbacks/html5_audio/html5_audio.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/playbacks/html5_video/html5_video.js":function(B,T,t){(function(o){Object.defineProperty(T,"__esModule",{value:!0});var x=t("./node_modules/babel-runtime/core-js/array/from.js"),f=oe(x),h=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),w=oe(h),p=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),y=oe(p),c=t("./node_modules/babel-runtime/helpers/createClass.js"),d=oe(c),C=t("./node_modules/babel-runtime/helpers/inherits.js"),b=oe(C),u=t("./node_modules/babel-runtime/helpers/toConsumableArray.js"),g=oe(u),s=t("./node_modules/babel-runtime/core-js/object/keys.js"),l=oe(s),S=t("./src/base/utils.js"),E=t("./src/base/playback.js"),O=oe(E),P=t("./src/components/browser/index.js"),A=oe(P),D=t("./src/components/error/index.js"),M=oe(D),L=t("./src/base/events.js"),V=oe(L),j=t("./src/plugins/log/index.js"),N=oe(j),G=t("./node_modules/clappr-zepto/zepto.js"),K=oe(G),k=t("./src/base/template.js"),J=oe(k),se=t("./src/playbacks/html5_video/public/tracks.html"),te=oe(se);t("./src/playbacks/html5_video/public/style.scss");function oe(we){return we&&we.__esModule?we:{default:we}}var re={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map(function(we){return'video/mp4; codecs="'+we+', mp4a.40.2"'}),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};re.ogv=re.ogg,re["3gp"]=re["3gpp"];var ee={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},Z=(0,l.default)(ee).reduce(function(we,Le){return[].concat((0,g.default)(we),(0,g.default)(ee[Le]))},[]),ge={code:"unknown",message:"unknown"},Te=function(we){(0,b.default)(Le,we),(0,d.default)(Le,[{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var be=this.options.src,Ge=Le._mimeTypesForUrl(be,ee,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||Z.indexOf(Ge[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}}]);function Le(){(0,w.default)(this,Le);for(var Ce=arguments.length,be=Array(Ce),Ge=0;Ge<Ce;Ge++)be[Ge]=arguments[Ge];var Ke=(0,y.default)(this,we.call.apply(we,[this].concat(be)));Ke._destroyed=!1,Ke._loadStarted=!1,Ke._isBuffering=!1,Ke._playheadMoving=!1,Ke._playheadMovingTimer=null,Ke._stopped=!1,Ke._ccTrackId=-1,Ke._setupSrc(Ke.options.src),Ke.options.playback||(Ke.options.playback=Ke.options||{}),Ke.options.playback.disableContextMenu=Ke.options.playback.disableContextMenu||Ke.options.disableVideoTagContextMenu;var je=Ke.options.playback,Ze=je.preload||(A.default.isSafari?"auto":Ke.options.preload),Be=void 0;return Ke.options.poster&&(typeof Ke.options.poster=="string"?Be=Ke.options.poster:typeof Ke.options.poster.url=="string"&&(Be=Ke.options.poster.url)),K.default.extend(Ke.el,{muted:Ke.options.mute,defaultMuted:Ke.options.mute,loop:Ke.options.loop,poster:Be,preload:Ze||"metadata",controls:(je.controls||Ke.options.useVideoTagDefaultControls)&&"controls",crossOrigin:je.crossOrigin,"x-webkit-playsinline":je.playInline}),je.playInline&&Ke.$el.attr({playsinline:"playsinline"}),je.crossOrigin&&Ke.$el.attr({crossorigin:je.crossOrigin}),Ke.settings={default:["seekbar"]},Ke.settings.left=["playpause","position","duration"],Ke.settings.right=["fullscreen","volume","hd-indicator"],je.externalTracks&&Ke._setupExternalTracks(je.externalTracks),Ke.options.autoPlay&&Ke.attemptAutoPlay(),Ke}return Le.prototype.configure=function(be){we.prototype.configure.call(this,be),this.el.loop=!!be.loop},Le.prototype.attemptAutoPlay=function(){var be=this;this.canAutoPlay(function(Ge,Ke){Ke&&N.default.warn(be.name,"autoplay error.",{result:Ge,error:Ke}),Ge&&o.nextTick(function(){return!be._destroyed&&be.play()})})},Le.prototype.canAutoPlay=function(be){this.options.disableCanAutoPlay&&be(!0,null);var Ge={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};A.default.isMobile&&S.DomRecycler.options.recycleVideo&&(Ge.element=this.el),(0,S.canAutoPlayMedia)(be,Ge)},Le.prototype._setupExternalTracks=function(be){this._externalTracks=be.map(function(Ge){return{kind:Ge.kind||"subtitles",label:Ge.label,lang:Ge.lang,src:Ge.src}})},Le.prototype._setupSrc=function(be){this.el.src!==be&&(this._ccIsSetup=!1,this.el.src=be,this._src=this.el.src)},Le.prototype._onLoadedMetadata=function(be){this._handleBufferingEvents(),this.trigger(V.default.PLAYBACK_LOADEDMETADATA,{duration:be.target.duration,data:be}),this._updateSettings();var Ge=typeof this._options.autoSeekFromUrl>"u"||this._options.autoSeekFromUrl;this.getPlaybackType()!==O.default.LIVE&&Ge&&this._checkInitialSeek()},Le.prototype._onDurationChange=function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()},Le.prototype._updateSettings=function(){this.getPlaybackType()===O.default.VOD||this.getPlaybackType()===O.default.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(V.default.PLAYBACK_SETTINGSUPDATE)},Le.prototype.isSeekEnabled=function(){return isFinite(this.getDuration())},Le.prototype.getPlaybackType=function(){var be=this.tagName==="audio"?O.default.AOD:O.default.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?O.default.LIVE:be},Le.prototype.isHighDefinitionInUse=function(){return!1},Le.prototype.consent=function(){this.isPlaying()||(we.prototype.consent.call(this),this.el.load())},Le.prototype.play=function(){this.trigger(V.default.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var be=this.el.play();be&&be.catch&&be.catch(function(){})},Le.prototype.pause=function(){this.el.pause()},Le.prototype.stop=function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(V.default.PLAYBACK_STOP)},Le.prototype.volume=function(be){be===0?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=be/100)},Le.prototype.mute=function(){this.el.muted=!0},Le.prototype.unmute=function(){this.el.muted=!1},Le.prototype.isMuted=function(){return this.el.muted===!0||this.el.volume===0},Le.prototype.isPlaying=function(){return!this.el.paused&&!this.el.ended},Le.prototype._startPlayheadMovingChecks=function(){this._playheadMovingTimer===null&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))},Le.prototype._stopPlayheadMovingChecks=function(){this._playheadMovingTimer!==null&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)},Le.prototype._determineIfPlayheadMoving=function(){var be=this._playheadMovingTimeOnCheck,Ge=this.el.currentTime;this._playheadMoving=be!==Ge,this._playheadMovingTimeOnCheck=Ge,this._handleBufferingEvents()},Le.prototype._onWaiting=function(){this._loadStarted=!0,this._handleBufferingEvents()},Le.prototype._onLoadedData=function(){this._loadStarted=!0,this._handleBufferingEvents()},Le.prototype._onCanPlay=function(){this._handleBufferingEvents()},Le.prototype._onPlaying=function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(V.default.PLAYBACK_PLAY)},Le.prototype._onPause=function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(V.default.PLAYBACK_PAUSE)},Le.prototype._onSeeking=function(){this._handleBufferingEvents(),this.trigger(V.default.PLAYBACK_SEEK)},Le.prototype._onSeeked=function(){this._handleBufferingEvents(),this.trigger(V.default.PLAYBACK_SEEKED)},Le.prototype._onEnded=function(){this._handleBufferingEvents(),this.trigger(V.default.PLAYBACK_ENDED,this.name)},Le.prototype._handleBufferingEvents=function(){var be=!this.el.ended&&!this.el.paused,Ge=this._loadStarted&&!this.el.ended&&!this._stopped&&(be&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==Ge&&(this._isBuffering=Ge,Ge?this.trigger(V.default.PLAYBACK_BUFFERING,this.name):this.trigger(V.default.PLAYBACK_BUFFERFULL,this.name))},Le.prototype._onError=function(){var be=this.el.error||ge,Ge=be.code,Ke=be.message,je=Ge===ge.code,Ze=this.createError({code:Ge,description:Ke,raw:this.el.error,level:je?M.default.Levels.WARN:M.default.Levels.FATAL});je?N.default.warn(this.name,"HTML5 unknown error: ",Ze):this.trigger(V.default.PLAYBACK_ERROR,Ze)},Le.prototype.destroy=function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),we.prototype.destroy.call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,S.DomRecycler.garbage(this.$el)},Le.prototype.seek=function(be){this.el.currentTime=be},Le.prototype.seekPercentage=function(be){var Ge=this.el.duration*(be/100);this.seek(Ge)},Le.prototype._checkInitialSeek=function(){var be=(0,S.seekStringToSeconds)();be!==0&&this.seek(be)},Le.prototype.getCurrentTime=function(){return this.el.currentTime},Le.prototype.getDuration=function(){return this.el.duration},Le.prototype._onTimeUpdate=function(){this.getPlaybackType()===O.default.LIVE?this.trigger(V.default.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(V.default.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)},Le.prototype._onProgress=function(){if(this.el.buffered.length){for(var be=[],Ge=0,Ke=0;Ke<this.el.buffered.length;Ke++)be=[].concat((0,g.default)(be),[{start:this.el.buffered.start(Ke),end:this.el.buffered.end(Ke)}]),this.el.currentTime>=be[Ke].start&&this.el.currentTime<=be[Ke].end&&(Ge=Ke);var je={start:be[Ge].start,current:be[Ge].end,total:this.el.duration};this.trigger(V.default.PLAYBACK_PROGRESS,je,be)}},Le.prototype._typeFor=function(be){var Ge=Le._mimeTypesForUrl(be,re,this.options.mimeType);Ge.length===0&&(Ge=Le._mimeTypesForUrl(be,ee,this.options.mimeType));var Ke=Ge[0]||"";return Ke.split(";")[0]},Le.prototype._ready=function(){this._isReadyState||(this._isReadyState=!0,this.trigger(V.default.PLAYBACK_READY,this.name))},Le.prototype._checkForClosedCaptions=function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(V.default.PLAYBACK_SUBTITLE_AVAILABLE);var be=this.closedCaptionsTrackId;this.closedCaptionsTrackId=be,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}},Le.prototype._handleTextTrackChange=function(){var be=this.closedCaptionsTracks,Ge=be.find(function(Ke){return Ke.track.mode==="showing"})||{id:-1};this._ccTrackId!==Ge.id&&(this._ccTrackId=Ge.id,this.trigger(V.default.PLAYBACK_SUBTITLE_CHANGED,{id:Ge.id}))},Le.prototype.render=function(){return this.options.playback.disableContextMenu&&this.$el.on("contextmenu",function(){return!1}),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready(),this},(0,d.default)(Le,[{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===Le.prototype.name}},{key:"closedCaptionsTracks",get:function(){var be=0,Ge=function(){return be++},Ke=this.el.textTracks?(0,f.default)(this.el.textTracks):[];return Ke.filter(function(je){return je.kind==="subtitles"||je.kind==="captions"}).map(function(je){return{id:Ge(),name:je.label,track:je}})}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(be){if((0,S.isNumber)(be)){var Ge=this.closedCaptionsTracks,Ke=void 0;be!==-1&&(Ke=Ge.find(function(je){return je.id===be}),!Ke||Ke.track.mode==="showing")||(Ge.filter(function(je){return je.track.mode!=="hidden"}).forEach(function(je){return je.track.mode="hidden"}),Ke&&(Ke.track.mode="showing"),this._ccTrackId=be,this.trigger(V.default.PLAYBACK_SUBTITLE_CHANGED,{id:be}))}}},{key:"template",get:function(){return(0,J.default)(te.default)}}]),Le}(O.default);T.default=Te,Te._mimeTypesForUrl=function(we,Le,Ce){var be=(we.split("?")[0].match(/.*\.(.*)$/)||[])[1],Ge=Ce||be&&Le[be.toLowerCase()]||[];return Ge.constructor===Array?Ge:[Ge]},Te._canPlay=function(we,Le,Ce,be){var Ge=Te._mimeTypesForUrl(Ce,Le,be),Ke=document.createElement(we);return!!Ge.filter(function(je){return!!Ke.canPlayType(je).replace(/no/,"")})[0]},Te.canPlay=function(we,Le){return Te._canPlay("audio",ee,we,Le)||Te._canPlay("video",re,we,Le)},B.exports=T.default}).call(this,t("./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/playbacks/html5_video/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/playbacks/html5_video/html5_video.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/playbacks/html5_video/public/style.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html5_video/public/style.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/playbacks/html5_video/public/tracks.html":function(B,T){B.exports=`<% for (var i = 0; i < tracks.length; i++) { %>
  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>" />
<% }; %>
`},"./src/playbacks/html_img/html_img.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=g(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=g(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=g(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=g(y),d=t("./src/base/playback.js"),C=g(d),b=t("./src/base/events.js"),u=g(b);t("./src/playbacks/html_img/public/style.scss");function g(l){return l&&l.__esModule?l:{default:l}}var s=function(l){(0,c.default)(S,l),S.prototype.getPlaybackType=function(){return C.default.NO_OP},(0,p.default)(S,[{key:"name",get:function(){return"html_img"}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]);function S(E){(0,x.default)(this,S);var O=(0,h.default)(this,l.call(this,E));return O.el.src=E.src,O}return S.prototype.render=function(){return this.trigger(u.default.PLAYBACK_READY,this.name),this},S.prototype._onLoad=function(){this.trigger(u.default.PLAYBACK_ENDED,this.name)},S.prototype._onError=function(O){var P=O.type==="error"?"load error":"loading aborted";this.trigger(u.default.PLAYBACK_ERROR,{message:P},this.name)},S}(C.default);T.default=s,s.canPlay=function(l){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(l)},B.exports=T.default},"./src/playbacks/html_img/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/playbacks/html_img/html_img.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/playbacks/html_img/public/style.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/html_img/public/style.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/playbacks/no_op/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/playbacks/no_op/no_op.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/playbacks/no_op/no_op.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=O(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=O(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=O(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=O(y),d=t("./src/base/utils.js"),C=t("./src/base/playback.js"),b=O(C),u=t("./src/base/template.js"),g=O(u),s=t("./src/base/events.js"),l=O(s),S=t("./src/playbacks/no_op/public/error.html"),E=O(S);t("./src/playbacks/no_op/public/style.scss");function O(A){return A&&A.__esModule?A:{default:A}}var P=function(A){(0,c.default)(D,A),(0,p.default)(D,[{key:"name",get:function(){return"no_op"}},{key:"template",get:function(){return(0,g.default)(E.default)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]);function D(){(0,x.default)(this,D);for(var M=arguments.length,L=Array(M),V=0;V<M;V++)L[V]=arguments[V];var j=(0,h.default)(this,A.call.apply(A,[this].concat(L)));return j._noiseFrameNum=-1,j}return D.prototype.render=function(){var L=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported");this.$el.html(this.template({message:L})),this.trigger(l.default.PLAYBACK_READY,this.name);var V=!!(this.options.poster&&this.options.poster.showForNoOp);return(this.options.autoPlay||!V)&&this._animate(),this},D.prototype._noise=function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var L=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),V=void 0;try{V=new Uint32Array(L.data.buffer)}catch{V=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var j=L.data,N=0;N<j.length;N++)V[N]=j[N]}for(var G=V.length,K=Math.random()*6+4,k=0,J=0,se=0;se<G;){if(k<0){k=K*Math.random();var te=Math.pow(Math.random(),.4);J=255*te<<24}k-=1,V[se++]=J}this.context.putImageData(L,0,0)}},D.prototype._loop=function(){var L=this;this._stop||(this._noise(),this._animationHandle=(0,d.requestAnimationFrame)(function(){return L._loop()}))},D.prototype.destroy=function(){this._animationHandle&&((0,d.cancelAnimationFrame)(this._animationHandle),this._stop=!0)},D.prototype._animate=function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()},D}(b.default);T.default=P,P.canPlay=function(A){return!0},B.exports=T.default},"./src/playbacks/no_op/public/error.html":function(B,T){B.exports=`<canvas data-no-op-canvas></canvas>
<p data-no-op-msg><%=message%><p>
`},"./src/playbacks/no_op/public/style.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/playbacks/no_op/public/style.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/click_to_pause/click_to_pause.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=l(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=l(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=l(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=l(y),d=t("./src/base/container_plugin.js"),C=l(d),b=t("./src/base/events.js"),u=l(b),g=t("./src/base/playback.js"),s=l(g);function l(E){return E&&E.__esModule?E:{default:E}}var S=function(E){(0,c.default)(O,E),(0,p.default)(O,[{key:"name",get:function(){return"click_to_pause"}}]);function O(P){return(0,x.default)(this,O),(0,h.default)(this,E.call(this,P))}return O.prototype.bindEvents=function(){this.listenTo(this.container,u.default.CONTAINER_CLICK,this.click),this.listenTo(this.container,u.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)},O.prototype.click=function(){(this.container.getPlaybackType()!==s.default.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())},O.prototype.settingsUpdate=function(){var A=this.container.getPlaybackType()!==s.default.LIVE||this.container.isDvrEnabled();if(A!==this.pointerEnabled){var D=A?"addClass":"removeClass";this.container.$el[D]("pointer-enabled"),this.pointerEnabled=A}},O}(C.default);T.default=S,B.exports=T.default},"./src/plugins/click_to_pause/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/click_to_pause/click_to_pause.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/closed_captions/closed_captions.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=O(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=O(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=O(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=O(y),d=t("./src/base/ui_core_plugin.js"),C=O(d),b=t("./src/base/template.js"),u=O(b),g=t("./src/base/events.js"),s=O(g),l=t("./src/base/utils.js"),S=t("./src/plugins/closed_captions/public/closed_captions.html"),E=O(S);t("./src/plugins/closed_captions/public/closed_captions.scss");function O(A){return A&&A.__esModule?A:{default:A}}var P=function(A){(0,c.default)(D,A),(0,p.default)(D,[{key:"name",get:function(){return"closed_captions"}},{key:"template",get:function(){return(0,u.default)(E.default)}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{class:"cc-controls","data-cc-controls":""}}}]);function D(M){(0,x.default)(this,D);var L=(0,h.default)(this,A.call(this,M)),V=M.options.closedCaptionsConfig;return L._title=V&&V.title?V.title:null,L._ariaLabel=V&&V.ariaLabel?V.ariaLabel:"cc-button",L._labelCb=V&&V.labelCallback&&typeof V.labelCallback=="function"?V.labelCallback:function(j){return j.name},L}return D.prototype.bindEvents=function(){this.listenTo(this.core,s.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,s.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,s.default.MEDIACONTROL_HIDE,this.hideContextMenu),this.container=this.core.getCurrentContainer(),this.container&&(this.listenTo(this.container,s.default.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,s.default.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,s.default.CONTAINER_STOP,this.onContainerStop))},D.prototype.onContainerStop=function(){this.ccAvailable(!1)},D.prototype.containerChanged=function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()},D.prototype.onSubtitleAvailable=function(){this.renderCcButton(),this.ccAvailable(!0)},D.prototype.onSubtitleChanged=function(L){this.setCurrentContextMenuElement(L.id)},D.prototype.onTrackSelect=function(L){var V=parseInt(L.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=V,this.hideContextMenu(),L.stopPropagation(),!1},D.prototype.ccAvailable=function(L){var V=L?"addClass":"removeClass";this.$el[V]("available")},D.prototype.toggleContextMenu=function(){this.$el.find("ul").toggle()},D.prototype.hideContextMenu=function(){this.$el.find("ul").hide()},D.prototype.contextMenuElement=function(L){return this.$el.find("ul a"+(isNaN(L)?"":'[data-cc-select="'+L+'"]')).parent()},D.prototype.setCurrentContextMenuElement=function(L){if(this._trackId!==L){this.contextMenuElement().removeClass("current"),this.contextMenuElement(L).addClass("current");var V=L>-1?"addClass":"removeClass";this.$ccButton[V]("enabled"),this._trackId=L}},D.prototype.renderCcButton=function(){for(var L=this.container?this.container.closedCaptionsTracks:[],V=0;V<L.length;V++)L[V].label=this._labelCb(L[V]);this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:L})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(l.SvgIcons.cc),this.$el.append(this.style)},D.prototype.render=function(){this.renderCcButton();var L=this.core.mediaControl.$el.find("button[data-fullscreen]");return L[0]?this.$el.insertAfter(L):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this},D}(C.default);T.default=P,B.exports=T.default},"./src/plugins/closed_captions/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/closed_captions/closed_captions.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/closed_captions/public/closed_captions.html":function(B,T){B.exports=`<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>
<ul>
  <% if (title) { %>
  <li data-title><%= title %></li>
  <% }; %>
  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>
  <% for (var i = 0; i < tracks.length; i++) { %>
    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>
  <% }; %>
</ul>
`},"./src/plugins/closed_captions/public/closed_captions.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/closed_captions/public/closed_captions.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/dvr_controls/dvr_controls.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=P(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=P(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=P(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=P(y),d=t("./src/base/ui_core_plugin.js"),C=P(d),b=t("./src/base/template.js"),u=P(b),g=t("./src/base/playback.js"),s=P(g),l=t("./src/base/events.js"),S=P(l),E=t("./src/plugins/dvr_controls/public/index.html"),O=P(E);t("./src/plugins/dvr_controls/public/dvr_controls.scss");function P(D){return D&&D.__esModule?D:{default:D}}var A=function(D){(0,c.default)(M,D),(0,p.default)(M,[{key:"template",get:function(){return(0,u.default)(O.default)}},{key:"name",get:function(){return"dvr_controls"}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}}]);function M(L){(0,x.default)(this,M);var V=(0,h.default)(this,D.call(this,L));return V.settingsUpdate(),V}return M.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,S.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,S.default.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,S.default.CORE_OPTIONS_CHANGE,this.render),this.core.getCurrentContainer()&&(this.listenToOnce(this.core.getCurrentContainer(),S.default.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.getCurrentContainer(),S.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))},M.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},M.prototype.dvrChanged=function(V){this.core.getPlaybackType()===s.default.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),V?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))},M.prototype.click=function(){var V=this.core.mediaControl,j=V.container;j.isPlaying()||j.play(),V.$el.hasClass("dvr")&&j.seek(j.getDuration())},M.prototype.settingsUpdate=function(){var V=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click(function(){return V.click()})),this.bindEvents()},M.prototype.shouldRender=function(){var V=this.core.options.useDvrControls===void 0||!!this.core.options.useDvrControls;return V&&this.core.getPlaybackType()===s.default.LIVE},M.prototype.render=function(){return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this},M}(C.default);T.default=A,B.exports=T.default},"./src/plugins/dvr_controls/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/dvr_controls/dvr_controls.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/dvr_controls/public/dvr_controls.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/dvr_controls/public/dvr_controls.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/dvr_controls/public/index.html":function(B,T){B.exports=`<div class="live-info"><%= live %></div>
<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>
`},"./src/plugins/end_video.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=g(o),f=t("./node_modules/babel-runtime/helpers/createClass.js"),h=g(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=g(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=g(y),d=t("./src/base/events.js"),C=g(d),b=t("./src/base/core_plugin.js"),u=g(b);function g(l){return l&&l.__esModule?l:{default:l}}var s=function(l){(0,c.default)(S,l);function S(){return(0,x.default)(this,S),(0,p.default)(this,l.apply(this,arguments))}return S.prototype.bindEvents=function(){this.listenTo(this.core,C.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var O=this.core.activeContainer;O&&(this.listenTo(O,C.default.CONTAINER_ENDED,this.ended),this.listenTo(O,C.default.CONTAINER_STOP,this.ended))},S.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},S.prototype.ended=function(){var O=typeof this.core.options.exitFullscreenOnEnd>"u"||this.core.options.exitFullscreenOnEnd;O&&this.core.isFullscreen()&&this.core.toggleFullscreen()},(0,h.default)(S,[{key:"name",get:function(){return"end_video"}}]),S}(u.default);T.default=s,B.exports=T.default},"./src/plugins/error_screen/error_screen.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=A(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=A(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=A(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=A(y),d=t("./src/base/events.js"),C=A(d),b=t("./src/base/ui_core_plugin.js"),u=A(b),g=t("./src/base/template.js"),s=A(g),l=t("./src/components/error/index.js"),S=A(l),E=t("./src/base/utils.js"),O=t("./src/plugins/error_screen/public/error_screen.html"),P=A(O);t("./src/plugins/error_screen/public/error_screen.scss");function A(M){return M&&M.__esModule?M:{default:M}}var D=function(M){(0,c.default)(L,M),(0,p.default)(L,[{key:"name",get:function(){return"error_screen"}},{key:"template",get:function(){return(0,s.default)(P.default)}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}}]);function L(V){var j;(0,x.default)(this,L);var N=(0,h.default)(this,M.call(this,V));return N.options.disableErrorScreen?(j=N.disable(),(0,h.default)(N,j)):N}return L.prototype.bindEvents=function(){this.listenTo(this.core,C.default.ERROR,this.onError),this.listenTo(this.core,C.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)},L.prototype.bindReload=function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))},L.prototype.reload=function(){var j=this;this.listenToOnce(this.core,C.default.CORE_READY,function(){return j.container.play()}),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()},L.prototype.unbindReload=function(){this.reloadButton&&this.reloadButton.off("click")},L.prototype.onContainerChanged=function(){this.err=null,this.unbindReload(),this.hide()},L.prototype.onError=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};j.level===S.default.Levels.FATAL&&(this.err=j,this.container.disableMediaControl(),this.container.stop(),this.show())},L.prototype.show=function(){this.render(),this.$el.show()},L.prototype.hide=function(){this.$el.hide()},L.prototype.render=function(){if(this.err)return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:E.SvgIcons.reload})),this.core.$el.append(this.el),this.bindReload(),this},L}(u.default);T.default=D,B.exports=T.default},"./src/plugins/error_screen/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/error_screen/error_screen.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/error_screen/public/error_screen.html":function(B,T){B.exports=`<div class="player-error-screen__content" data-error-screen>
  <% if (icon) { %>
  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>
  <% } %>
  <div class="player-error-screen__title" data-error-screen><%= title %></div>
  <div class="player-error-screen__message" data-error-screen><%= message %></div>
  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>
  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>
</div>
`},"./src/plugins/error_screen/public/error_screen.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/error_screen/public/error_screen.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/favicon/favicon.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=S(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=S(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=S(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=S(y),d=t("./src/base/core_plugin.js"),C=S(d),b=t("./src/base/events.js"),u=S(b),g=t("./node_modules/clappr-zepto/zepto.js"),s=S(g),l=t("./src/base/utils.js");function S(P){return P&&P.__esModule?P:{default:P}}var E=(0,s.default)('link[rel="shortcut icon"]'),O=function(P){(0,c.default)(A,P),(0,p.default)(A,[{key:"name",get:function(){return"favicon"}},{key:"oldIcon",get:function(){return E}}]);function A(D){(0,x.default)(this,A);var M=(0,h.default)(this,P.call(this,D));return M._container=null,M.configure(),M}return A.prototype.configure=function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,u.default.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,u.default.CORE_OPTIONS_CHANGE,this.configure))},A.prototype.bindEvents=function(){this.listenTo(this.core,u.default.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,u.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()},A.prototype.containerChanged=function(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,u.default.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,u.default.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,u.default.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,u.default.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,u.default.CONTAINER_ERROR,this.resetIcon),this.resetIcon()},A.prototype.disable=function(){P.prototype.disable.call(this),this.resetIcon()},A.prototype.destroy=function(){P.prototype.destroy.call(this),this.resetIcon()},A.prototype.createIcon=function(M){var L=(0,s.default)("<canvas/>");L[0].width=16,L[0].height=16;var V=L[0].getContext("2d");V.fillStyle="#000";var j=(0,s.default)(M).find("path").attr("d"),N=new Path2D(j);V.fill(N);var G=(0,s.default)('<link rel="shortcut icon" type="image/png"/>');return G.attr("href",L[0].toDataURL("image/png")),G},A.prototype.setPlayIcon=function(){this.playIcon||(this.playIcon=this.createIcon(l.SvgIcons.play)),this.changeIcon(this.playIcon)},A.prototype.setPauseIcon=function(){this.pauseIcon||(this.pauseIcon=this.createIcon(l.SvgIcons.pause)),this.changeIcon(this.pauseIcon)},A.prototype.resetIcon=function(){(0,s.default)('link[rel="shortcut icon"]').remove(),(0,s.default)("head").append(this.oldIcon)},A.prototype.changeIcon=function(M){M&&((0,s.default)('link[rel="shortcut icon"]').remove(),(0,s.default)("head").append(M))},A}(C.default);T.default=O,B.exports=T.default},"./src/plugins/favicon/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/favicon/favicon.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/google_analytics/google_analytics.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=g(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=g(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=g(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=g(y),d=t("./src/base/container_plugin.js"),C=g(d),b=t("./src/base/events.js"),u=g(b);function g(l){return l&&l.__esModule?l:{default:l}}var s=function(l){(0,c.default)(S,l),(0,p.default)(S,[{key:"name",get:function(){return"google_analytics"}}]);function S(E){(0,x.default)(this,S);var O=(0,h.default)(this,l.call(this,E));return O.container.options.gaAccount&&(O.account=O.container.options.gaAccount,O.trackerName=O.container.options.gaTrackerName?O.container.options.gaTrackerName+".":"Clappr.",O.domainName=O.container.options.gaDomainName,O.currentHDState=void 0,O.embedScript()),O}return S.prototype.embedScript=function(){var O=this;if(window._gat)this.addEventListeners();else{var P=document.createElement("script");P.setAttribute("type","text/javascript"),P.setAttribute("async","async"),P.setAttribute("src","//www.google-analytics.com/ga.js"),P.onload=function(){return O.addEventListeners()},document.body.appendChild(P)}},S.prototype.addEventListeners=function(){var O=this;this.container&&(this.listenTo(this.container,u.default.CONTAINER_READY,this.onReady),this.listenTo(this.container,u.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,u.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,u.default.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,u.default.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,u.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,u.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,u.default.CONTAINER_ERROR,this.onError),this.listenTo(this.container,u.default.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,u.default.CONTAINER_VOLUME,function(P){return O.onVolumeChanged(P)}),this.listenTo(this.container,u.default.CONTAINER_SEEK,function(P){return O.onSeek(P)}),this.listenTo(this.container,u.default.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,u.default.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,u.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])},S.prototype.onReady=function(){this.push(["Video","Playback",this.container.playback.name])},S.prototype.onPlay=function(){this.push(["Video","Play",this.container.playback.src])},S.prototype.onStop=function(){this.push(["Video","Stop",this.container.playback.src])},S.prototype.onEnded=function(){this.push(["Video","Ended",this.container.playback.src])},S.prototype.onBuffering=function(){this.push(["Video","Buffering",this.container.playback.src])},S.prototype.onBufferFull=function(){this.push(["Video","Bufferfull",this.container.playback.src])},S.prototype.onError=function(){this.push(["Video","Error",this.container.playback.src])},S.prototype.onHD=function(O){var P=O?"ON":"OFF";P!==this.currentHDState&&(this.currentHDState=P,this.push(["Video","HD - "+P,this.container.playback.src]))},S.prototype.onPlaybackChanged=function(O){O.type!==null&&this.push(["Video","Playback Type - "+O.type,this.container.playback.src])},S.prototype.onDVR=function(O){var P=O?"ON":"OFF";this.push(["Interaction","DVR - "+P,this.container.playback.src])},S.prototype.onPause=function(){this.push(["Video","Pause",this.container.playback.src])},S.prototype.onSeek=function(){this.push(["Video","Seek",this.container.playback.src])},S.prototype.onVolumeChanged=function(){this.push(["Interaction","Volume",this.container.playback.src])},S.prototype.onFullscreen=function(){this.push(["Interaction","Fullscreen",this.container.playback.src])},S.prototype.push=function(O){var P=[this.trackerName+"_trackEvent"].concat(O);_gaq.push(P)},S}(C.default);T.default=s,B.exports=T.default},"./src/plugins/google_analytics/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/google_analytics/google_analytics.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/log/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/log/log.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/log/log.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=h(o),f=t("./src/vendor/index.js");function h(O){return O&&O.__esModule?O:{default:O}}var w="font-weight: bold; font-size: 13px;",p="color: #006600;"+w,y="color: #0000ff;"+w,c="color: #ff8000;"+w,d="color: #ff0000;"+w,C=0,b=1,u=2,g=3,s=g,l=[y,p,c,d,d],S=["debug","info","warn","error","disabled"],E=function(){function O(){var P=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;(0,x.default)(this,O),this.kibo=new f.Kibo,this.kibo.down(["ctrl shift d"],function(){return P.onOff()}),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=A,this.offLevel=D}return O.prototype.debug=function(A){this.log(A,C,Array.prototype.slice.call(arguments,1))},O.prototype.info=function(A){this.log(A,b,Array.prototype.slice.call(arguments,1))},O.prototype.warn=function(A){this.log(A,u,Array.prototype.slice.call(arguments,1))},O.prototype.error=function(A){this.log(A,g,Array.prototype.slice.call(arguments,1))},O.prototype.onOff=function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+S[this.level],c)},O.prototype.level=function(A){this.level=A},O.prototype.log=function(A,D,M){if(!(this.BLACKLIST.indexOf(M[0])>=0)&&!(D<this.level)){M||(M=A,A=null);var L=l[D],V="";A&&(V="["+A+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+S[D]+"]"+V,L].concat(M))}},O}();T.default=E,E.LEVEL_DEBUG=C,E.LEVEL_INFO=b,E.LEVEL_WARN=u,E.LEVEL_ERROR=g,E.getInstance=function(){return this._instance===void 0&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},E.setLevel=function(O){this.getInstance().level=O},E.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},E.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},E.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},E.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},B.exports=T.default},"./src/plugins/media_control/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/media_control/media_control.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/media_control/media_control.js":function(B,T,t){(function(o){Object.defineProperty(T,"__esModule",{value:!0});var x=t("./node_modules/babel-runtime/core-js/json/stringify.js"),f=J(x),h=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),w=J(h),p=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),y=J(p),c=t("./node_modules/babel-runtime/helpers/createClass.js"),d=J(c),C=t("./node_modules/babel-runtime/helpers/inherits.js"),b=J(C),u=t("./src/base/utils.js"),g=t("./src/vendor/index.js"),s=t("./src/base/events.js"),l=J(s),S=t("./src/base/ui_core_plugin.js"),E=J(S),O=t("./src/components/browser/index.js"),P=J(O),A=t("./src/components/mediator.js"),D=J(A),M=t("./src/base/template.js"),L=J(M),V=t("./src/base/playback.js"),j=J(V),N=t("./node_modules/clappr-zepto/zepto.js"),G=J(N);t("./src/plugins/media_control/public/media-control.scss");var K=t("./src/plugins/media_control/public/media-control.html"),k=J(K);function J(te){return te&&te.__esModule?te:{default:te}}var se=function(te){(0,b.default)(oe,te),(0,d.default)(oe,[{key:"name",get:function(){return"media_control"}},{key:"disabled",get:function(){var ee=this.container&&this.container.getPlaybackType()===j.default.NO_OP;return this.userDisabled||ee}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return(0,L.default)(k.default)}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return this.volume===0}}]);function oe(re){(0,w.default)(this,oe);var ee=(0,y.default)(this,te.call(this,re));return ee.persistConfig=ee.options.persistConfig,ee.currentPositionValue=null,ee.currentDurationValue=null,ee.keepVisible=!1,ee.fullScreenOnVideoTagSupported=null,ee.setInitialVolume(),ee.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},ee.kibo=new g.Kibo(ee.options.focusElement),ee.bindKeyEvents(),ee.container?G.default.isEmptyObject(ee.container.settings)||(ee.settings=G.default.extend({},ee.container.settings)):ee.settings={},ee.userDisabled=!1,(ee.container&&ee.container.mediaControlDisabled||ee.options.chromeless)&&ee.disable(),ee.stopDragHandler=function(Z){return ee.stopDrag(Z)},ee.updateDragHandler=function(Z){return ee.updateDrag(Z)},(0,G.default)(document).bind("mouseup",ee.stopDragHandler),(0,G.default)(document).bind("mousemove",ee.updateDragHandler),ee}return oe.prototype.getExternalInterface=function(){var ee=this;return{setVolume:this.setVolume,getVolume:function(){return ee.volume}}},oe.prototype.bindEvents=function(){var ee=this;this.stopListening(),this.listenTo(this.core,l.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,l.default.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,l.default.CORE_MOUSE_LEAVE,function(){return ee.hide(ee.options.hideMediaControlDelay)}),this.listenTo(this.core,l.default.CORE_FULLSCREEN,this.show),this.listenTo(this.core,l.default.CORE_OPTIONS_CHANGE,this.configure),D.default.on(this.options.playerId+":"+l.default.PLAYER_RESIZE,this.playerResize,this),this.bindContainerEvents()},oe.prototype.bindContainerEvents=function(){this.container&&(this.listenTo(this.container,l.default.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,l.default.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,l.default.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,l.default.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,l.default.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,l.default.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,l.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,l.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,l.default.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,l.default.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,l.default.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,l.default.CONTAINER_ENDED,this.ended),this.listenTo(this.container,l.default.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,l.default.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),this.container.playback.el.nodeName.toLowerCase()==="video"&&this.listenToOnce(this.container,l.default.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))},oe.prototype.disable=function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()},oe.prototype.enable=function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())},oe.prototype.play=function(){this.container&&this.container.play()},oe.prototype.pause=function(){this.container&&this.container.pause()},oe.prototype.stop=function(){this.container&&this.container.stop()},oe.prototype.setInitialVolume=function(){var ee=this.persistConfig?u.Config.restore("volume"):100,Z=this.container&&this.container.options||this.options;this.setVolume(Z.mute?0:ee,!0)},oe.prototype.onVolumeChanged=function(){this.updateVolumeUI()},oe.prototype.onLoadedMetadataOnVideoTag=function(){var ee=this.playback&&this.playback.el;!u.Fullscreen.fullscreenEnabled()&&ee.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())},oe.prototype.updateVolumeUI=function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var ee=this.$volumeBarContainer.width(),Z=this.$volumeBarBackground.width(),ge=(ee-Z)/2,Te=Z*this.volume/100+ge;this.$volumeBarFill.css({width:this.volume+"%"}),this.$volumeBarScrubber.css({left:Te}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var we=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,we).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(u.SvgIcons.volumeMute),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(u.SvgIcons.volume),this.applyButtonStyle(this.$volumeIcon)}},oe.prototype.changeTogglePlay=function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(u.SvgIcons.pause),this.$playStopToggle.append(u.SvgIcons.stop),this.trigger(l.default.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(u.SvgIcons.play),this.$playStopToggle.append(u.SvgIcons.play),this.trigger(l.default.MEDIACONTROL_NOTPLAYING),P.default.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)},oe.prototype.mousemoveOnSeekBar=function(ee){if(this.settings.seekEnabled){var Z=ee.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:Z})}this.trigger(l.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,ee)},oe.prototype.mouseleaveOnSeekBar=function(ee){this.trigger(l.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,ee)},oe.prototype.onVolumeClick=function(ee){this.setVolume(this.getVolumeFromUIEvent(ee))},oe.prototype.mousemoveOnVolumeBar=function(ee){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(ee))},oe.prototype.playerResize=function(ee){this.$fullscreenToggle.html("");var Z=this.core.isFullscreen()?u.SvgIcons.exitFullscreen:u.SvgIcons.fullscreen;this.$fullscreenToggle.append(Z),this.applyButtonStyle(this.$fullscreenToggle),this.$el.find(".media-control").length!==0&&this.$el.removeClass("w320"),(ee.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")},oe.prototype.togglePlayPause=function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1},oe.prototype.togglePlayStop=function(){this.container.isPlaying()?this.container.stop():this.container.play()},oe.prototype.startSeekDrag=function(ee){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),ee&&ee.preventDefault())},oe.prototype.startVolumeDrag=function(ee){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),ee&&ee.preventDefault()},oe.prototype.stopDrag=function(ee){this.draggingSeekBar&&this.seek(ee),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1},oe.prototype.updateDrag=function(ee){if(this.draggingSeekBar){ee.preventDefault();var Z=ee.pageX-this.$seekBarContainer.offset().left,ge=Z/this.$seekBarContainer.width()*100;ge=Math.min(100,Math.max(ge,0)),this.setSeekPercentage(ge)}else this.draggingVolumeBar&&(ee.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(ee)))},oe.prototype.getVolumeFromUIEvent=function(ee){var Z=ee.pageX-this.$volumeBarContainer.offset().left,ge=Z/this.$volumeBarContainer.width()*100;return ge},oe.prototype.toggleMute=function(){if(this.muted){this.setVolume(this._mutedVolume||100),this._mutedVolume=null;return}this._mutedVolume=this.volume,this.setVolume(0)},oe.prototype.setVolume=function(ee){var Z=this,ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ee=Math.min(100,Math.max(ee,0)),this.intendedVolume=ee,this.persistConfig&&!ge&&u.Config.persist("volume",ee);var Te=function(){Z.container&&Z.container.isReady?Z.container.setVolume(ee):Z.listenToOnce(Z.container,l.default.CONTAINER_READY,function(){Z.container.setVolume(ee)})};this.container?Te():this.listenToOnce(this,l.default.MEDIACONTROL_CONTAINERCHANGED,function(){return Te()})},oe.prototype.toggleFullscreen=function(){this.trigger(l.default.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()},oe.prototype.onActiveContainerChanged=function(){this.fullScreenOnVideoTagSupported=null,D.default.off(this.options.playerId+":"+l.default.PLAYER_RESIZE,this.playerResize,this),this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(l.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(l.default.MEDIACONTROL_CONTAINERCHANGED)},oe.prototype.showVolumeBar=function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")},oe.prototype.hideVolumeBar=function(){var ee=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout(function(){return ee.hideVolumeBar()},Z):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout(function(){return ee.$volumeBarContainer.addClass("volume-bar-hide")},Z)))},oe.prototype.ended=function(){this.changeTogglePlay()},oe.prototype.updateProgressBar=function(ee){var Z=ee.start/ee.total*100,ge=ee.current/ee.total*100;this.$seekBarLoaded.css({left:Z+"%",width:ge-Z+"%"})},oe.prototype.onTimeUpdate=function(ee){if(!this.draggingSeekBar){var Z=ee.current<0?ee.total:ee.current;this.currentPositionValue=Z,this.currentDurationValue=ee.total,this.renderSeekBar()}},oe.prototype.renderSeekBar=function(){if(!(this.currentPositionValue===null||this.currentDurationValue===null)){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==j.default.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var ee=(0,u.formatTime)(this.currentPositionValue),Z=(0,u.formatTime)(this.currentDurationValue);ee!==this.displayedPosition&&(this.$position.text(ee),this.displayedPosition=ee),Z!==this.displayedDuration&&(this.$duration.text(Z),this.displayedDuration=Z)}},oe.prototype.seek=function(ee){if(this.settings.seekEnabled){var Z=ee.pageX-this.$seekBarContainer.offset().left,ge=Z/this.$seekBarContainer.width()*100;return ge=Math.min(100,Math.max(ge,0)),this.container&&this.container.seekPercentage(ge),this.setSeekPercentage(ge),!1}},oe.prototype.setKeepVisible=function(){this.keepVisible=!0},oe.prototype.resetKeepVisible=function(){this.keepVisible=!1},oe.prototype.setUserKeepVisible=function(){this.userKeepVisible=!0},oe.prototype.resetUserKeepVisible=function(){this.userKeepVisible=!1},oe.prototype.isVisible=function(){return!this.$el.hasClass("media-control-hide")},oe.prototype.show=function(ee){var Z=this;if(!this.disabled){var ge=2e3,Te=ee&&ee.clientX!==this.lastMouseX&&ee.clientY!==this.lastMouseY;(!ee||Te||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(l.default.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(l.default.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout(function(){return Z.hide()},ge),ee&&(this.lastMouseX=ee.clientX,this.lastMouseY=ee.clientY));var we=!0;this.updateCursorStyle(we)}},oe.prototype.hide=function(){var ee=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this.isVisible()){var ge=Z||2e3;if(clearTimeout(this.hideId),!(!this.disabled&&this.options.hideMediaControl===!1)){var Te=this.userKeepVisible||this.keepVisible,we=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(Z||Te||we))this.hideId=setTimeout(function(){return ee.hide()},ge);else{this.trigger(l.default.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(l.default.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);var Le=!1;this.updateCursorStyle(Le)}}}},oe.prototype.updateCursorStyle=function(ee){ee?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")},oe.prototype.settingsUpdate=function(){var ee=this.getSettings();ee&&!this.fullScreenOnVideoTagSupported&&!u.Fullscreen.fullscreenEnabled()&&(ee.default&&(0,u.removeArrayItem)(ee.default,"fullscreen"),ee.left&&(0,u.removeArrayItem)(ee.left,"fullscreen"),ee.right&&(0,u.removeArrayItem)(ee.right,"fullscreen"));var Z=(0,f.default)(this.settings)!==(0,f.default)(ee);Z&&(this.settings=ee,this.render())},oe.prototype.getSettings=function(){return G.default.extend(!0,{},this.container&&this.container.settings)},oe.prototype.highDefinitionUpdate=function(ee){this.isHD=ee;var Z=ee?"addClass":"removeClass";this.$hdIndicator[Z]("enabled")},oe.prototype.createCachedElements=function(){var ee=this.$el.find(".media-control-layer");this.$duration=ee.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=ee.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=ee.find("button.media-control-button[data-playpause]"),this.$playStopToggle=ee.find("button.media-control-button[data-playstop]"),this.$position=ee.find(".media-control-indicator[data-position]"),this.$seekBarContainer=ee.find(".bar-container[data-seekbar]"),this.$seekBarHover=ee.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=ee.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=ee.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=ee.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=ee.find(".bar-container[data-volume]"),this.$volumeContainer=ee.find(".drawer-container[data-volume]"),this.$volumeIcon=ee.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()},oe.prototype.resetIndicators=function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()},oe.prototype.initializeIcons=function(){var ee=this.$el.find(".media-control-layer");ee.find("button.media-control-button[data-play]").append(u.SvgIcons.play),ee.find("button.media-control-button[data-pause]").append(u.SvgIcons.pause),ee.find("button.media-control-button[data-stop]").append(u.SvgIcons.stop),this.$playPauseToggle.append(u.SvgIcons.play),this.$playStopToggle.append(u.SvgIcons.play),this.$volumeIcon.append(u.SvgIcons.volume),this.$fullscreenToggle.append(u.SvgIcons.fullscreen),this.$hdIndicator.append(u.SvgIcons.hd)},oe.prototype.setSeekPercentage=function(ee){ee=Math.max(Math.min(ee,100),0),this.displayedSeekBarPercentage!==ee&&(this.displayedSeekBarPercentage=ee,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:ee+"%"}),this.$seekBarScrubber.css({left:ee+"%"}))},oe.prototype.seekRelative=function(ee){if(this.settings.seekEnabled){var Z=this.container.getCurrentTime(),ge=this.container.getDuration(),Te=Math.min(Math.max(Z+ee,0),ge);Te=Math.min(Te*100/ge,100),this.container.seekPercentage(Te)}},oe.prototype.bindKeyAndShow=function(ee,Z){var ge=this;this.kibo.down(ee,function(){return ge.show(),Z()})},oe.prototype.bindKeyEvents=function(){var ee=this;if(!(P.default.isMobile||this.options.disableKeyboardShortcuts)){this.unbindKeyEvents(),this.kibo=new g.Kibo(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",function(){return ee.togglePlayPause()}),this.bindKeyAndShow("left",function(){return ee.seekRelative(-5)}),this.bindKeyAndShow("right",function(){return ee.seekRelative(5)}),this.bindKeyAndShow("shift left",function(){return ee.seekRelative(-10)}),this.bindKeyAndShow("shift right",function(){return ee.seekRelative(10)}),this.bindKeyAndShow("shift ctrl left",function(){return ee.seekRelative(-15)}),this.bindKeyAndShow("shift ctrl right",function(){return ee.seekRelative(15)});var Z=["1","2","3","4","5","6","7","8","9","0"];Z.forEach(function(ge){ee.bindKeyAndShow(ge,function(){ee.settings.seekEnabled&&ee.container&&ee.container.seekPercentage(ge*10)})})}},oe.prototype.unbindKeyEvents=function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))},oe.prototype.parseColors=function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var ee=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",ee),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}},oe.prototype.applyButtonStyle=function(ee){this.buttonsColor&&ee&&(0,G.default)(ee).find("svg path").css("fill",this.buttonsColor)},oe.prototype.destroy=function(){(0,G.default)(document).unbind("mouseup",this.stopDragHandler),(0,G.default)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),te.prototype.destroy.call(this)},oe.prototype.configure=function(ee){this.options.chromeless||ee.source||ee.sources?this.disable():this.enable(),this.trigger(l.default.MEDIACONTROL_OPTIONS_CHANGE)},oe.prototype.render=function(){var ee=this,Z=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings})),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout(function(){return ee.hide()},Z),this.disabled&&this.hide()),P.default.isSafari&&P.default.isMobile&&(P.default.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var ge=0;return this.displayedSeekBarPercentage&&(ge=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(ge),o.nextTick(function(){!ee.settings.seekEnabled&&ee.$seekBarContainer.addClass("seek-disabled"),!P.default.isMobile&&!ee.options.disableKeyboardShortcuts&&ee.bindKeyEvents(),ee.playerResize({width:ee.options.width,height:ee.options.height}),ee.hideVolumeBar(0)}),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(l.default.MEDIACONTROL_RENDERED),this},oe}(E.default);T.default=se,se.extend=function(te){return(0,u.extend)(se,te)},B.exports=T.default}).call(this,t("./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/plugins/media_control/public/closed-hand.cur":function(B,T){B.exports="<%=baseUrl%>/a8c874b93b3d848f39a71260c57e3863.cur"},"./src/plugins/media_control/public/media-control.html":function(B,T){B.exports=`<div class="media-control-background" data-background></div>
<div class="media-control-layer" data-controls>
  <%  var renderBar = function(name) { %>
      <div class="bar-container" data-<%= name %>>
        <div class="bar-background" data-<%= name %>>
          <div class="bar-fill-1" data-<%= name %>></div>
          <div class="bar-fill-2" data-<%= name %>></div>
          <div class="bar-hover" data-<%= name %>></div>
        </div>
        <div class="bar-scrubber" data-<%= name %>>
          <div class="bar-scrubber-icon" data-<%= name %>></div>
        </div>
      </div>
  <%  }; %>
  <%  var renderSegmentedBar = function(name, segments) {
      segments = segments || 10; %>
    <div class="bar-container" data-<%= name %>>
    <% for (var i = 0; i < segments; i++) { %>
      <div class="segmented-bar-element" data-<%= name %>></div>
    <% } %>
    </div>
  <% }; %>
  <% var renderDrawer = function(name, renderContent) { %>
      <div class="drawer-container" data-<%= name %>>
        <div class="drawer-icon-container" data-<%= name %>>
          <div class="drawer-icon media-control-icon" data-<%= name %>></div>
          <span class="drawer-text" data-<%= name %>></span>
        </div>
        <% renderContent(name); %>
      </div>
  <% }; %>
  <% var renderIndicator = function(name) { %>
      <div class="media-control-indicator" data-<%= name %>></div>
  <% }; %>
  <% var renderButton = function(name) { %>
    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>
  <% }; %>
  <%  var templates = {
        bar: renderBar,
        segmentedBar: renderSegmentedBar,
      };
      var render = function(settingsList) {
        settingsList.forEach(function(setting) {
          if(setting === "seekbar") {
            renderBar(setting);
          } else if (setting === "volume") {
            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });
          } else if (setting === "duration" || setting === "position") {
            renderIndicator(setting);
          } else {
            renderButton(setting);
          }
        });
      }; %>
  <% if (settings.default && settings.default.length) { %>
  <div class="media-control-center-panel" data-media-control>
    <% render(settings.default); %>
  </div>
  <% } %>
  <% if (settings.left && settings.left.length) { %>
  <div class="media-control-left-panel" data-media-control>
    <% render(settings.left); %>
  </div>
  <% } %>
  <% if (settings.right && settings.right.length) { %>
  <div class="media-control-right-panel" data-media-control>
    <% render(settings.right); %>
  </div>
  <% } %>
</div>
`},"./src/plugins/media_control/public/media-control.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/media_control/public/media-control.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/poster/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/poster/poster.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/poster/poster.js":function(B,T,t){(function(o){Object.defineProperty(T,"__esModule",{value:!0});var x=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),f=L(x),h=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),w=L(h),p=t("./node_modules/babel-runtime/helpers/createClass.js"),y=L(p),c=t("./node_modules/babel-runtime/helpers/inherits.js"),d=L(c),C=t("./src/base/ui_container_plugin.js"),b=L(C),u=t("./src/base/events.js"),g=L(u),s=t("./src/base/template.js"),l=L(s),S=t("./src/base/playback.js"),E=L(S),O=t("./src/components/error/error.js"),P=L(O),A=t("./src/plugins/poster/public/poster.html"),D=L(A),M=t("./src/base/utils.js");t("./src/plugins/poster/public/poster.scss");function L(j){return j&&j.__esModule?j:{default:j}}var V=function(j){(0,d.default)(N,j),(0,y.default)(N,[{key:"name",get:function(){return"poster"}},{key:"template",get:function(){return(0,l.default)(D.default)}},{key:"shouldRender",get:function(){var K=!!(this.options.poster&&this.options.poster.showForNoOp);return this.container.playback.name!=="html_img"&&(this.container.playback.getPlaybackType()!==E.default.NO_OP||K)}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||this.options.poster.showOnVideoEnd===void 0}}]);function N(G){(0,f.default)(this,N);var K=(0,w.default)(this,j.call(this,G));return K.hasStartedPlaying=!1,K.playRequested=!1,K.render(),o.nextTick(function(){return K.update()}),K}return N.prototype.bindEvents=function(){this.listenTo(this.container,g.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,g.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,g.default.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,g.default.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,g.default.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,g.default.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,g.default.CONTAINER_ENDED,this.onStop)},N.prototype.onError=function(K){this.hasFatalError=K.level===P.default.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())},N.prototype.onPlay=function(){this.hasStartedPlaying=!0,this.update()},N.prototype.onStop=function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()},N.prototype.updatePlayButton=function(K){K&&(!this.options.chromeless||this.options.allowUserInteraction)?this.showPlayButton():this.hidePlayButton()},N.prototype.showPlayButton=function(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))},N.prototype.hidePlayButton=function(){this.$playButton.hide(),this.$el.removeClass("clickable")},N.prototype.clicked=function(){if(!this.hasStartedPlaying)return(!this.options.chromeless||this.options.allowUserInteraction)&&(this.playRequested=!0,this.update(),this.container.play()),!1},N.prototype.shouldHideOnPlay=function(){return!this.container.playback.isAudioOnly},N.prototype.update=function(){if(this.shouldRender){var K=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(K),this.updatePoster()}},N.prototype.updatePoster=function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()},N.prototype.showPoster=function(){this.container.disableMediaControl(),this.$el.show()},N.prototype.hidePoster=function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()},N.prototype.render=function(){if(this.shouldRender){this.$el.html(this.template());var K=this.options.poster&&this.options.poster.custom===void 0;if(K){var k=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+k+")"})}else this.options.poster&&this.$el.css({background:this.options.poster.custom});this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(M.SvgIcons.play),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var J=this.options.mediacontrol&&this.options.mediacontrol.buttons;return J&&this.$el.find("svg path").css("fill",J),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(J=this.options.mediacontrol.buttons,this.$playButton.css("color",J)),this.update(),this}},N}(b.default);T.default=V,B.exports=T.default}).call(this,t("./node_modules/node-libs-browser/node_modules/process/browser.js"))},"./src/plugins/poster/public/poster.html":function(B,T){B.exports=`<div class="play-wrapper" data-poster></div>
`},"./src/plugins/poster/public/poster.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/poster/public/poster.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/seek_time/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/seek_time/seek_time.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/seek_time/public/seek_time.html":function(B,T){B.exports=`<span data-seek-time></span>
<span data-duration></span>
`},"./src/plugins/seek_time/public/seek_time.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/seek_time/public/seek_time.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/seek_time/seek_time.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=A(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=A(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=A(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=A(y),d=t("./src/base/utils.js"),C=t("./src/base/ui_core_plugin.js"),b=A(C),u=t("./src/base/template.js"),g=A(u),s=t("./src/base/events.js"),l=A(s),S=t("./src/base/playback.js"),E=A(S),O=t("./src/plugins/seek_time/public/seek_time.html"),P=A(O);t("./src/plugins/seek_time/public/seek_time.scss");function A(M){return M&&M.__esModule?M:{default:M}}var D=function(M){(0,c.default)(L,M),(0,p.default)(L,[{key:"name",get:function(){return"seek_time"}},{key:"template",get:function(){return(0,g.default)(P.default)}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===E.default.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]);function L(V){(0,x.default)(this,L);var j=(0,h.default)(this,M.call(this,V));return j.hoveringOverSeekBar=!1,j.hoverPosition=null,j.duration=null,j.firstFragDateTime=null,j.actualLiveTime=!!j.mediaControl.options.actualLiveTime,j.actualLiveTime&&(j.mediaControl.options.actualLiveServerTime?j.actualLiveServerTimeDiff=new Date().getTime()-new Date(j.mediaControl.options.actualLiveServerTime).getTime():j.actualLiveServerTimeDiff=0),j}return L.prototype.bindEvents=function(){this.listenTo(this.mediaControl,l.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,l.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,l.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,l.default.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,l.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,l.default.CONTAINER_TIMEUPDATE,this.updateDuration))},L.prototype.onContainerChanged=function(){this.stopListening(),this.bindEvents()},L.prototype.updateDuration=function(j){this.duration=j.total,this.firstFragDateTime=j.firstFragDateTime,this.update()},L.prototype.showTime=function(j){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(j),this.update()},L.prototype.hideTime=function(){this.hoveringOverSeekBar=!1,this.update()},L.prototype.calculateHoverPosition=function(j){var N=j.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(N/this.mediaControl.$seekBarContainer.width(),0))},L.prototype.getSeekTime=function(){var j=void 0,N=void 0,G=void 0,K=void 0;return this.useActualLiveTime?(this.firstFragDateTime?(K=new Date(this.firstFragDateTime),G=new Date(this.firstFragDateTime),G.setHours(0,0,0,0),N=(K.getTime()-G.getTime())/1e3+this.duration):(G=new Date(new Date().getTime()-this.actualLiveServerTimeDiff),K=new Date(G),N=(K-G.setHours(0,0,0,0))/1e3),j=N-this.duration+this.hoverPosition*this.duration,j<0&&(j+=86400)):j=this.hoverPosition*this.duration,{seekTime:j,secondsSinceMidnight:N}},L.prototype.update=function(){if(this.rendered)if(!this.shouldBeVisible())this.$el.hide(),this.$el.css("left","-100%");else{var j=this.getSeekTime(),N=(0,d.formatTime)(j.seekTime,this.useActualLiveTime);if(N!==this.displayedSeekTime&&(this.$seekTimeEl.text(N),this.displayedSeekTime=N),this.durationShown){this.$durationEl.show();var G=(0,d.formatTime)(this.actualLiveTime?j.secondsSinceMidnight:this.duration,this.actualLiveTime);G!==this.displayedDuration&&(this.$durationEl.text(G),this.displayedDuration=G)}else this.$durationEl.hide();this.$el.show();var K=this.mediaControl.$seekBarContainer.width(),k=this.$el.width(),J=this.hoverPosition*K;J-=k/2,J=Math.max(0,Math.min(J,K-k)),this.$el.css("left",J)}},L.prototype.shouldBeVisible=function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&this.hoverPosition!==null&&this.duration!==null},L.prototype.render=function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()},L}(b.default);T.default=D,B.exports=T.default},"./src/plugins/sources.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=g(o),f=t("./node_modules/babel-runtime/helpers/createClass.js"),h=g(f),w=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=g(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=g(y),d=t("./src/base/core_plugin.js"),C=g(d),b=t("./src/base/events.js"),u=g(b);function g(l){return l&&l.__esModule?l:{default:l}}var s=function(l){(0,c.default)(S,l);function S(){return(0,x.default)(this,S),(0,p.default)(this,l.apply(this,arguments))}return S.prototype.bindEvents=function(){this.listenTo(this.core,u.default.CORE_CONTAINERS_CREATED,this.onContainersCreated)},S.prototype.onContainersCreated=function(){var O=this.core.containers.filter(function(P){return P.playback.name!=="no_op"})[0]||this.core.containers[0];O&&this.core.containers.forEach(function(P){P!==O&&P.destroy()})},(0,h.default)(S,[{key:"name",get:function(){return"sources"}}]),S}(C.default);T.default=s,B.exports=T.default},"./src/plugins/spinner_three_bounce/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/spinner_three_bounce/spinner_three_bounce.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/spinner_three_bounce/public/spinner.html":function(B,T){B.exports=`<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>
`},"./src/plugins/spinner_three_bounce/public/spinner.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/spinner_three_bounce/public/spinner.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/spinner_three_bounce/spinner_three_bounce.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=E(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=E(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=E(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=E(y),d=t("./src/base/ui_container_plugin.js"),C=E(d),b=t("./src/base/events.js"),u=E(b),g=t("./src/base/template.js"),s=E(g),l=t("./src/plugins/spinner_three_bounce/public/spinner.html"),S=E(l);t("./src/plugins/spinner_three_bounce/public/spinner.scss");function E(P){return P&&P.__esModule?P:{default:P}}var O=function(P){(0,c.default)(A,P),(0,p.default)(A,[{key:"name",get:function(){return"spinner"}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}}]);function A(D){(0,x.default)(this,A);var M=(0,h.default)(this,P.call(this,D));return M.template=(0,s.default)(S.default),M.showTimeout=null,M.listenTo(M.container,u.default.CONTAINER_STATE_BUFFERING,M.onBuffering),M.listenTo(M.container,u.default.CONTAINER_STATE_BUFFERFULL,M.onBufferFull),M.listenTo(M.container,u.default.CONTAINER_STOP,M.onStop),M.listenTo(M.container,u.default.CONTAINER_ENDED,M.onStop),M.listenTo(M.container,u.default.CONTAINER_ERROR,M.onStop),M.render(),M}return A.prototype.onBuffering=function(){this.show()},A.prototype.onBufferFull=function(){this.hide()},A.prototype.onStop=function(){this.hide()},A.prototype.show=function(){var M=this;this.showTimeout===null&&(this.showTimeout=setTimeout(function(){return M.$el.show()},300))},A.prototype.hide=function(){this.showTimeout!==null&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()},A.prototype.render=function(){return this.$el.html(this.template()),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this},A}(C.default);T.default=O,B.exports=T.default},"./src/plugins/stats/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/stats/stats.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/stats/stats.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=l(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=l(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=l(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=l(y),d=t("./src/base/container_plugin.js"),C=l(d),b=t("./src/base/events.js"),u=l(b),g=t("./node_modules/clappr-zepto/zepto.js"),s=l(g);function l(E){return E&&E.__esModule?E:{default:E}}var S=function(E){(0,c.default)(O,E),(0,p.default)(O,[{key:"name",get:function(){return"stats"}}]);function O(P){(0,x.default)(this,O);var A=(0,h.default)(this,E.call(this,P));return A.setInitialAttrs(),A.reportInterval=A.options.reportInterval||5e3,A.state="IDLE",A}return O.prototype.bindEvents=function(){this.listenTo(this.container.playback,u.default.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,u.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,u.default.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,u.default.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,u.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,u.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,u.default.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,u.default.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,u.default.PLAYBACK_STATS_ADD,this.onStatsAdd)},O.prototype.setInitialAttrs=function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}},O.prototype.onPlay=function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))},O.prototype.onStop=function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"},O.prototype.onBuffering=function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++},O.prototype.onBufferFull=function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"},O.prototype.getRebufferingTime=function(){return Date.now()-this.rebufferingTimeInit},O.prototype.getWatchingTime=function(){var A=Date.now()-this.watchingTimeInit;return A-this.rebufferingTime},O.prototype.isRebuffering=function(){return!!this.rebufferingTimeInit},O.prototype.onStatsAdd=function(A){s.default.extend(this.externalMetrics,A)},O.prototype.getStats=function(){var A={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return s.default.extend(A,this.externalMetrics),A},O.prototype.report=function(){this.container.statsReport(this.getStats())},O}(C.default);T.default=S,B.exports=T.default},"./src/plugins/strings.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=s(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=s(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=s(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=s(y),d=t("./src/base/utils.js"),C=t("./node_modules/clappr-zepto/zepto.js"),b=s(C),u=t("./src/base/core_plugin.js"),g=s(u);function s(S){return S&&S.__esModule?S:{default:S}}var l=function(S){(0,c.default)(E,S),(0,p.default)(E,[{key:"name",get:function(){return"strings"}}]);function E(O){(0,x.default)(this,E);var P=(0,h.default)(this,S.call(this,O));return P._initializeMessages(),P}return E.prototype.t=function(P){var A=this._language(),D=this._messages.en,M=A&&this._messages[A]||D;return M[P]||D[P]||P},E.prototype._language=function(){return this.core.options.language||(0,d.getBrowserLanguage)()},E.prototype._initializeMessages=function(){var P={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente.",default_error_title:"No foi possvel reproduzir o vdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vdeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproduccin de un video. Por favor, trate de usar un navegador diferente."},ru:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"      . ,   ."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Dsactiv",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vido. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vido.",default_error_message:"Un problme est survenu lors du chargement de la vido."},tr:{live:"canl",back_to_live:"canl yayna dn",disabled:"Engelli",playback_not_supported:"Taraycnz bu videoyu oynatma desteine sahip deil. Ltfen farkl bir tarayc ile deneyin."},et:{live:"Otselekanne",back_to_live:"Tagasi otselekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"",back_to_live:"  ",disabled:"",playback_not_supported:"       .    .",default_error_title:"   .",default_error_message:"    ."}};this._messages=b.default.extend(!0,P,this.core.options.strings||{}),this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["es-419"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar},E}(g.default);T.default=l,B.exports=T.default},"./src/plugins/watermark/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/plugins/watermark/watermark.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default=x.default,B.exports=T.default},"./src/plugins/watermark/public/watermark.html":function(B,T){B.exports=`<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>
<% if(typeof imageLink !== 'undefined') { %>
<a target=_blank href="<%= imageLink %>">
<% } %>
<img src="<%= imageUrl %>">
<% if(typeof imageLink !== 'undefined') { %>
</a>
<% } %>
</div>
`},"./src/plugins/watermark/public/watermark.scss":function(B,T,t){var o=t("./node_modules/css-loader/index.js!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?includePaths[]=/Users/joaopaulo/Workstation/JS/clappr/src/base/scss!./src/plugins/watermark/public/watermark.scss");typeof o=="string"&&(o=[[B.i,o,""]]);var x,f={singleton:!0,hmr:!0};f.transform=x,f.insertInto=void 0,t("./node_modules/style-loader/lib/addStyles.js")(o,f),o.locals&&(B.exports=o.locals)},"./src/plugins/watermark/watermark.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),x=E(o),f=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=E(f),w=t("./node_modules/babel-runtime/helpers/createClass.js"),p=E(w),y=t("./node_modules/babel-runtime/helpers/inherits.js"),c=E(y),d=t("./src/base/ui_container_plugin.js"),C=E(d),b=t("./src/base/events.js"),u=E(b),g=t("./src/base/template.js"),s=E(g),l=t("./src/plugins/watermark/public/watermark.html"),S=E(l);t("./src/plugins/watermark/public/watermark.scss");function E(P){return P&&P.__esModule?P:{default:P}}var O=function(P){(0,c.default)(A,P),(0,p.default)(A,[{key:"name",get:function(){return"watermark"}},{key:"template",get:function(){return(0,s.default)(S.default)}}]);function A(D){(0,x.default)(this,A);var M=(0,h.default)(this,P.call(this,D));return M.configure(),M}return A.prototype.bindEvents=function(){this.listenTo(this.container,u.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,u.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,u.default.CONTAINER_OPTIONS_CHANGE,this.configure)},A.prototype.configure=function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()},A.prototype.onPlay=function(){this.hidden||this.$el.show()},A.prototype.onStop=function(){this.$el.hide()},A.prototype.render=function(){this.$el.hide();var M={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(M)),this.container.$el.append(this.$el),this},A}(C.default);T.default=O,B.exports=T.default},"./src/vendor/index.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=t("./src/vendor/kibo.js"),x=f(o);function f(h){return h&&h.__esModule?h:{default:h}}T.default={Kibo:x.default},B.exports=T.default},"./src/vendor/kibo.js":function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0});var o=function(f){this.element=f||window.document,this.initialize()};o.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},o.KEY_CODES_BY_NAME={},function(){for(var x in o.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(o.KEY_NAMES_BY_CODE,x)&&(o.KEY_CODES_BY_NAME[o.KEY_NAMES_BY_CODE[x]]=+x)}(),o.MODIFIERS=["shift","ctrl","alt"],o.registerEvent=function(){if(document.addEventListener)return function(x,f,h){x.addEventListener(f,h,!1)};if(document.attachEvent)return function(x,f,h){x.attachEvent("on"+f,h)}}(),o.unregisterEvent=function(){if(document.removeEventListener)return function(x,f,h){x.removeEventListener(f,h,!1)};if(document.detachEvent)return function(x,f,h){x.detachEvent("on"+f,h)}}(),o.stringContains=function(x,f){return x.indexOf(f)!==-1},o.neatString=function(x){return x.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},o.capitalize=function(x){return x.toLowerCase().replace(/^./,function(f){return f.toUpperCase()})},o.isString=function(x){return o.stringContains(Object.prototype.toString.call(x),"String")},o.arrayIncludes=function(){return Array.prototype.indexOf?function(x,f){return x.indexOf(f)!==-1}:function(x,f){for(var h=0;h<x.length;h++)if(x[h]===f)return!0;return!1}}(),o.extractModifiers=function(x){var f,h;for(f=[],h=0;h<o.MODIFIERS.length;h++)o.stringContains(x,o.MODIFIERS[h])&&f.push(o.MODIFIERS[h]);return f},o.extractKey=function(x){var f,h;for(f=o.neatString(x).split(" "),h=0;h<f.length;h++)if(!o.arrayIncludes(o.MODIFIERS,f[h]))return f[h]},o.modifiersAndKey=function(x){var f,h;return o.stringContains(x,"any")?o.neatString(x).split(" ").slice(0,2).join(" "):(f=o.extractModifiers(x),h=o.extractKey(x),h&&!o.arrayIncludes(o.MODIFIERS,h)&&f.push(h),f.join(" "))},o.keyName=function(x){return o.KEY_NAMES_BY_CODE[x+""]},o.keyCode=function(x){return+o.KEY_CODES_BY_NAME[x]},o.prototype.initialize=function(){var x,f=this;for(this.lastKeyCode=-1,this.lastModifiers={},x=0;x<o.MODIFIERS.length;x++)this.lastModifiers[o.MODIFIERS[x]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),o.registerEvent(this.element,"keydown",this.downHandler),o.registerEvent(this.element,"keyup",this.upHandler),o.registerEvent(window,"unload",function h(){o.unregisterEvent(f.element,"keydown",f.downHandler),o.unregisterEvent(f.element,"keyup",f.upHandler),o.unregisterEvent(window,"unload",h)})},o.prototype.handler=function(x){var f=this;return function(h){var w,p,y;for(h=h||window.event,f.lastKeyCode=h.keyCode,w=0;w<o.MODIFIERS.length;w++)f.lastModifiers[o.MODIFIERS[w]]=h[o.MODIFIERS[w]+"Key"];for(o.arrayIncludes(o.MODIFIERS,o.keyName(f.lastKeyCode))&&(f.lastModifiers[o.keyName(f.lastKeyCode)]=!0),p=f["keys"+o.capitalize(x)],w=0;w<p.any.length;w++)p.any[w](h)===!1&&h.preventDefault&&h.preventDefault();if(y=f.lastModifiersAndKey(),p[y])for(w=0;w<p[y].length;w++)p[y][w](h)===!1&&h.preventDefault&&h.preventDefault()}},o.prototype.registerKeys=function(x,f,h){var w,p,y=this["keys"+o.capitalize(x)];for(o.isString(f)&&(f=[f]),w=0;w<f.length;w++)p=f[w],p=o.modifiersAndKey(p+""),y[p]?y[p].push(h):y[p]=[h];return this},o.prototype.unregisterKeys=function(x,f,h){var w,p,y,c=this["keys"+o.capitalize(x)];for(o.isString(f)&&(f=[f]),w=0;w<f.length;w++)if(y=f[w],y=o.modifiersAndKey(y+""),h===null)delete c[y];else if(c[y]){for(p=0;p<c[y].length;p++)if(String(c[y][p])===String(h)){c[y].splice(p,1);break}}return this},o.prototype.off=function(x){return this.unregisterKeys("down",x,null)},o.prototype.delegate=function(x,f,h){return h!==null||h!==void 0?this.registerKeys(x,f,h):this.unregisterKeys(x,f,h)},o.prototype.down=function(x,f){return this.delegate("down",x,f)},o.prototype.up=function(x,f){return this.delegate("up",x,f)},o.prototype.lastKey=function(x){return x?this.lastModifiers[x]:o.keyName(this.lastKeyCode)},o.prototype.lastModifiersAndKey=function(){var x,f;for(x=[],f=0;f<o.MODIFIERS.length;f++)this.lastKey(o.MODIFIERS[f])&&x.push(o.MODIFIERS[f]);return o.arrayIncludes(x,this.lastKey())||x.push(this.lastKey()),x.join(" ")},T.default=o,B.exports=T.default}})})})(ki);var ji=ki.exports;const Bi=Ii(ji);var Ni={exports:{}},wi={exports:{}},Oi;function Ui(){return Oi||(Oi=1,function($r,Wn){(function(B,T){$r.exports=T()})(Di,function(){return function(B){function T(o){if(t[o])return t[o].exports;var x=t[o]={exports:{},id:o,loaded:!1};return B[o].call(x.exports,x,x.exports,T),x.loaded=!0,x.exports}var t={};return T.m=B,T.c=t,T.p="<%=baseUrl%>/",T(0)}([function(B,T,t){function o(ke){return ke&&ke.__esModule?ke:{default:ke}}Object.defineProperty(T,"__esModule",{value:!0});var x=t(100),f=o(x),h=t(3),w=o(h),p=t(1),y=o(p),c=t(7),d=o(c),C=t(18),b=o(C),u=t(19),g=o(u),s=t(23),l=o(s),S=t(20),E=o(S),O=t(13),P=o(O),A=t(14),D=o(A),M=t(11),L=o(M),V=t(35),j=o(V),N=t(36),G=o(N),K=t(37),k=o(K),J=t(16),se=o(J),te=t(38),oe=o(te),re=t(21),ee=o(re),Z=t(24),ge=o(Z),Te=t(39),we=o(Te),Le=t(40),Ce=o(Le),be=t(41),Ge=o(be),Ke=t(42),je=o(Ke),Ze=t(22),Be=o(Ze),Oe=t(43),ze=o(Oe),We=t(44),gt=o(We),at=t(45),_e=o(at),Me=t(25),H=o(Me),m=t(8),F=o(m),X=t(26),le=o(X),ve=t(9),Se=o(ve),ye=t(6),Re=o(ye),Ie="0.2.57";T.default={Player:f.default,Mediator:se.default,Events:y.default,Browser:L.default,PlayerInfo:ee.default,MediaControl:oe.default,ContainerPlugin:b.default,UIContainerPlugin:E.default,CorePlugin:g.default,UICorePlugin:l.default,Playback:d.default,Container:j.default,Core:G.default,Loader:k.default,BaseObject:P.default,UIObject:D.default,Utils:w.default,BaseFlashPlayback:ge.default,Flash:we.default,FlasHLS:Ce.default,HLS:Ge.default,HTML5Audio:je.default,HTML5Video:Be.default,HTMLImg:ze.default,NoOp:gt.default,Poster:_e.default,Log:H.default,Styler:F.default,Vendor:le.default,version:Ie,template:Se.default,$:Re.default},B.exports=T.default},function(B,T,t){function o(l){return l&&l.__esModule?l:{default:l}}function x(l,S){if(!(l instanceof S))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol?"symbol":typeof l},h=t(25),w=o(h),p=t(3),y=t(88),c=o(y),d=Array.prototype.slice,C=/\s+/,b=function(l,S,E,O){if(!E)return!0;if((typeof E>"u"?"undefined":f(E))==="object"){for(var P in E)l[S].apply(l,[P,E[P]].concat(O));return!1}if(C.test(E)){for(var A=E.split(C),D=0,M=A.length;D<M;D++)l[S].apply(l,[A[D]].concat(O));return!1}return!0},u=function(l,S){var E,O=-1,P=l.length,A=S[0],D=S[1],M=S[2];switch(S.length){case 0:for(;++O<P;)(E=l[O]).callback.call(E.ctx);return;case 1:for(;++O<P;)(E=l[O]).callback.call(E.ctx,A);return;case 2:for(;++O<P;)(E=l[O]).callback.call(E.ctx,A,D);return;case 3:for(;++O<P;)(E=l[O]).callback.call(E.ctx,A,D,M);return;default:for(;++O<P;)(E=l[O]).callback.apply(E.ctx,S);return}},g=function(){function l(){x(this,l)}return l.prototype.on=function(S,E,O){if(!b(this,"on",S,[E,O])||!E)return this;this._events||(this._events={});var P=this._events[S]||(this._events[S]=[]);return P.push({callback:E,context:O,ctx:O||this}),this},l.prototype.once=function(E,O,P){if(!b(this,"once",E,[O,P])||!O)return this;var A=this,D=(0,c.default)(function(){A.off(E,D),O.apply(this,arguments)});return D._callback=O,this.on(E,D,P)},l.prototype.off=function(S,E,O){var P,A,D,M,L,V,j,N;if(!this._events||!b(this,"off",S,[E,O]))return this;if(!S&&!E&&!O)return this._events=void 0,this;for(M=S?[S]:Object.keys(this._events),L=0,V=M.length;L<V;L++)if(S=M[L],D=this._events[S]){if(this._events[S]=P=[],E||O)for(j=0,N=D.length;j<N;j++)A=D[j],(E&&E!==A.callback&&E!==A.callback._callback||O&&O!==A.context)&&P.push(A);P.length||delete this._events[S]}return this},l.prototype.trigger=function(S){var E=this.name||this.constructor.name;try{if(w.default.debug.apply(w.default,[E].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var O=d.call(arguments,1);if(!b(this,"trigger",S,O))return this;var P=this._events[S],A=this._events.all;P&&u(P,O),A&&u(A,arguments)}catch(D){w.default.error.apply(w.default,[E,"error on event",S,"trigger","-",D])}return this},l.prototype.stopListening=function(S,E,O){var P=this._listeningTo;if(!P)return this;var A=!E&&!O;O||(typeof E>"u"?"undefined":f(E))!=="object"||(O=this),S&&((P={})[S._listenId]=S);for(var D in P)S=P[D],S.off(E,O,this),(A||Object.keys(S._events).length===0)&&delete this._listeningTo[D];return this},l}();T.default=g;var s={listenTo:"on",listenToOnce:"once"};Object.keys(s).forEach(function(l){g.prototype[l]=function(S,E,O){var P=this._listeningTo||(this._listeningTo={}),A=S._listenId||(S._listenId=(0,p.uniqueId)("l"));return P[A]=S,O||(typeof E>"u"?"undefined":f(E))!=="object"||(O=this),S[s[l]](E,O,this),this}}),g.PLAYER_READY="ready",g.PLAYER_RESIZE="resize",g.PLAYER_FULLSCREEN="fullscreen",g.PLAYER_PLAY="play",g.PLAYER_PAUSE="pause",g.PLAYER_STOP="stop",g.PLAYER_ENDED="ended",g.PLAYER_SEEK="seek",g.PLAYER_ERROR="error",g.PLAYER_TIMEUPDATE="timeupdate",g.PLAYER_VOLUMEUPDATE="volumeupdate",g.PLAYBACK_PROGRESS="playback:progress",g.PLAYBACK_TIMEUPDATE="playback:timeupdate",g.PLAYBACK_READY="playback:ready",g.PLAYBACK_BUFFERING="playback:buffering",g.PLAYBACK_BUFFERFULL="playback:bufferfull",g.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",g.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",g.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",g.PLAYBACK_BITRATE="playback:bitrate",g.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",g.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",g.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",g.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",g.PLAYBACK_DVR="playback:dvr",g.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",g.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",g.PLAYBACK_ENDED="playback:ended",g.PLAYBACK_PLAY_INTENT="playback:play:intent",g.PLAYBACK_PLAY="playback:play",g.PLAYBACK_PAUSE="playback:pause",g.PLAYBACK_STOP="playback:stop",g.PLAYBACK_ERROR="playback:error",g.PLAYBACK_STATS_ADD="playback:stats:add",g.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",g.PLAYBACK_LEVEL_SWITCH="playback:level:switch",g.CORE_OPTIONS_CHANGE="core:options:change",g.CORE_READY="core:ready",g.CORE_FULLSCREEN="core:fullscreen",g.CONTAINER_PLAYBACKSTATE="container:playbackstate",g.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",g.CONTAINER_BITRATE="container:bitrate",g.CONTAINER_STATS_REPORT="container:stats:report",g.CONTAINER_DESTROYED="container:destroyed",g.CONTAINER_READY="container:ready",g.CONTAINER_ERROR="container:error",g.CONTAINER_LOADEDMETADATA="container:loadedmetadata",g.CONTAINER_TIMEUPDATE="container:timeupdate",g.CONTAINER_PROGRESS="container:progress",g.CONTAINER_PLAY="container:play",g.CONTAINER_STOP="container:stop",g.CONTAINER_PAUSE="container:pause",g.CONTAINER_ENDED="container:ended",g.CONTAINER_CLICK="container:click",g.CONTAINER_DBLCLICK="container:dblclick",g.CONTAINER_CONTEXTMENU="container:contextmenu",g.CONTAINER_MOUSE_ENTER="container:mouseenter",g.CONTAINER_MOUSE_LEAVE="container:mouseleave",g.CONTAINER_SEEK="container:seek",g.CONTAINER_VOLUME="container:volume",g.CONTAINER_FULLSCREEN="container:fullscreen",g.CONTAINER_STATE_BUFFERING="container:state:buffering",g.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",g.CONTAINER_SETTINGSUPDATE="container:settingsupdate",g.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",g.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",g.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",g.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",g.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",g.CONTAINER_STATS_ADD="container:stats:add",g.CONTAINER_OPTIONS_CHANGE="container:options:change",g.MEDIACONTROL_RENDERED="mediacontrol:rendered",g.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",g.MEDIACONTROL_SHOW="mediacontrol:show",g.MEDIACONTROL_HIDE="mediacontrol:hide",g.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",g.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",g.MEDIACONTROL_PLAYING="mediacontrol:playing",g.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",g.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",g.CORE_CONTAINERS_CREATED="core:containers:created",B.exports=T.default},function(B,T){B.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded"}},function(B,T,t){function o(M){return M&&M.__esModule?M:{default:M}}function x(M,L){if(!(M instanceof L))throw new TypeError("Cannot call a class as a function")}function f(M,L){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||typeof L!="object"&&typeof L!="function"?M:L}function h(M,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(M,L):M.__proto__=L)}function w(M,L){if(L)for(var V in L){var j=Object.getOwnPropertyDescriptor(L,V);j?Object.defineProperty(M,V,j):M[V]=L[V]}return M}function p(M,L){var V=function(j){function N(){x(this,N);for(var G=arguments.length,K=Array(G),k=0;k<G;k++)K[k]=arguments[k];var J=f(this,j.call.apply(j,[this].concat(K)));return L.initialize&&L.initialize.apply(J,K),J}return h(N,j),N}(M);return w(V.prototype,L),V}function y(M,L){if(!isFinite(M))return"--:--";M=1e3*M,M=parseInt(M/1e3);var V=M%60;M=parseInt(M/60);var j=M%60;M=parseInt(M/60);var N=M%24,G=parseInt(M/24),K="";return G&&G>0&&(K+=G+":",N<1&&(K+="00:")),(N&&N>0||L)&&(K+=("0"+N).slice(-2)+":"),K+=("0"+j).slice(-2)+":",K+=("0"+V).slice(-2),K.trim()}function c(){var M=arguments.length<=0||arguments[0]===void 0?"t":arguments[0],L=0,V=O.params[M]||O.hashParams[M]||"",j=V.match(/[0-9]+[hms]+/g)||[];if(j.length>0){var N={h:3600,m:60,s:1};j.forEach(function(G){if(G){var K=G[G.length-1],k=parseInt(G.slice(0,G.length-1),10);L+=k*N[K]}})}else V&&(L=parseInt(V,10));return L}function d(M){P[M]||(P[M]=0);var L=++P[M];return M+L}function C(M){return M-parseFloat(M)+1>=0}function b(){var M=document.getElementsByTagName("script");return M[M.length-1].src}function u(){return window.navigator&&window.navigator.language?window.navigator.language.toLowerCase():null}Object.defineProperty(T,"__esModule",{value:!0}),T.cancelAnimationFrame=T.requestAnimationFrame=T.QueryString=T.Config=T.Fullscreen=void 0;var g=function(){function M(L,V){for(var j=0;j<V.length;j++){var N=V[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(L,N.key,N)}}return function(L,V,j){return V&&M(L.prototype,V),j&&M(L,j),L}}();T.extend=p,T.formatTime=y,T.seekStringToSeconds=c,T.uniqueId=d,T.isNumber=C,T.currentScriptUrl=b,T.getBrowserLanguage=u;var s=t(11),l=o(s),S=T.Fullscreen={isFullscreen:function(){return!!(document.webkitFullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)},requestFullscreen:function(M){M.requestFullscreen?M.requestFullscreen():M.webkitRequestFullscreen?M.webkitRequestFullscreen():M.mozRequestFullScreen?M.mozRequestFullScreen():M.msRequestFullscreen?M.msRequestFullscreen():M.querySelector&&M.querySelector("video")&&M.querySelector("video").webkitEnterFullScreen&&M.querySelector("video").webkitEnterFullScreen()},cancelFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},E=T.Config=function(){function M(){x(this,M)}return M._defaultConfig=function(){return{volume:{value:100,parse:parseInt}}},M._defaultValueFor=function(L){try{return this._defaultConfig()[L].parse(this._defaultConfig()[L].value)}catch{return}},M._createKeyspace=function(L){return"clappr."+document.domain+"."+L},M.restore=function(L){return l.default.hasLocalstorage&&localStorage[this._createKeyspace(L)]?this._defaultConfig()[L].parse(localStorage[this._createKeyspace(L)]):this._defaultValueFor(L)},M.persist=function(L,V){if(l.default.hasLocalstorage)try{return localStorage[this._createKeyspace(L)]=V,!0}catch{return!1}},M}(),O=T.QueryString=function(){function M(){x(this,M)}return M.parse=function(L){for(var V,j=/\+/g,N=/([^&=]+)=?([^&]*)/g,G=function(k){return decodeURIComponent(k.replace(j," "))},K={};V=N.exec(L);)K[G(V[1]).toLowerCase()]=G(V[2]);return K},g(M,null,[{key:"params",get:function(){var L=window.location.search.substring(1);return L!==this.query&&(this._urlParams=this.parse(L),this.query=L),this._urlParams}},{key:"hashParams",get:function(){var L=window.location.hash.substring(1);return L!==this.hash&&(this._hashParams=this.parse(L),this.hash=L),this._hashParams}}]),M}(),P={},A=T.requestAnimationFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(M){window.setTimeout(M,1e3/60)}).bind(window),D=T.cancelAnimationFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);T.default={Config:E,Fullscreen:S,QueryString:O,extend:p,formatTime:y,seekStringToSeconds:c,uniqueId:d,currentScriptUrl:b,isNumber:C,requestAnimationFrame:A,cancelAnimationFrame:D,getBrowserLanguage:u}},function(B,T){function t(){}function o(c,d){return d="["+c+"] > "+d}function x(c){var d=window.console[c];return d?function(){for(var C=arguments.length,b=Array(C),u=0;u<C;u++)b[u]=arguments[u];b[0]&&(b[0]=o(c,b[0])),d.apply(window.console,b)}:t}function f(c){for(var d=arguments.length,C=Array(d>1?d-1:0),b=1;b<d;b++)C[b-1]=arguments[b];C.forEach(function(u){y[u]=c[u]?c[u].bind(c):x(u)})}var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol?"symbol":typeof c};Object.defineProperty(T,"__esModule",{value:!0});var w=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return typeof c>"u"?"undefined":h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol?"symbol":typeof c>"u"?"undefined":h(c)},p={trace:t,debug:t,log:t,warn:t,info:t,error:t},y=p;T.enableLogs=function(c){if(c===!0||(typeof c>"u"?"undefined":w(c))==="object"){f(c,"debug","log","info","warn","error");try{y.log()}catch{y=p}}else y=p},T.logger=y},function(B,T){Object.defineProperty(T,"__esModule",{value:!0}),T.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",OTHER_ERROR:"otherError"},T.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",INTERNAL_EXCEPTION:"internalException"}},function(B,T){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol?"symbol":typeof x},o=function(){function x(m){return m==null?String(m):We[gt.call(m)]||"object"}function f(m){return x(m)=="function"}function h(m){return m!=null&&m==m.window}function w(m){return m!=null&&m.nodeType==m.DOCUMENT_NODE}function p(m){return x(m)=="object"}function y(m){return p(m)&&!h(m)&&Object.getPrototypeOf(m)==Object.prototype}function c(m){return typeof m.length=="number"}function d(m){return te.call(m,function(F){return F!=null})}function C(m){return m.length>0?N.fn.concat.apply([],m):m}function b(m){return m.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(m){return m in Z?Z[m]:Z[m]=new RegExp("(^|\\s)"+m+"(\\s|$)")}function g(m,F){return typeof F!="number"||ge[b(m)]?F:F+"px"}function s(m){var F,X;return ee[m]||(F=re.createElement(m),re.body.appendChild(F),X=getComputedStyle(F,"").getPropertyValue("display"),F.parentNode.removeChild(F),X=="none"&&(X="block"),ee[m]=X),ee[m]}function l(m){return"children"in m?oe.call(m.children):N.map(m.childNodes,function(F){return F.nodeType==1?F:void 0})}function S(m,F){var X,le=m?m.length:0;for(X=0;le>X;X++)this[X]=m[X];this.length=le,this.selector=F||""}function E(m,F,X){for(j in F)X&&(y(F[j])||H(F[j]))?(y(F[j])&&!y(m[j])&&(m[j]={}),H(F[j])&&!H(m[j])&&(m[j]=[]),E(m[j],F[j],X)):F[j]!==V&&(m[j]=F[j])}function O(m,F){return F==null?N(m):N(m).filter(F)}function P(m,F,X,le){return f(F)?F.call(m,X,le):F}function A(m,F,X){X==null?m.removeAttribute(F):m.setAttribute(F,X)}function D(m,F){var X=m.className||"",le=X&&X.baseVal!==V;return F===V?le?X.baseVal:X:void(le?X.baseVal=F:m.className=F)}function M(m){try{return m&&(m=="true"||m!="false"&&(m=="null"?null:+m+""==m?+m:/^[\[\{]/.test(m)?N.parseJSON(m):m))}catch{return m}}function L(m,F){F(m);for(var X=0,le=m.childNodes.length;le>X;X++)L(m.childNodes[X],F)}var V,j,N,G,K,k,J=[],se=J.concat,te=J.filter,oe=J.slice,re=window.document,ee={},Z={},ge={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Te=/^\s*<(\w+|!)[^>]*>/,we=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ce=/^(?:body|html)$/i,be=/([A-Z])/g,Ge=["val","css","html","text","data","width","height","offset"],Ke=["after","prepend","before","append"],je=re.createElement("table"),Ze=re.createElement("tr"),Be={tr:re.createElement("tbody"),tbody:je,thead:je,tfoot:je,td:Ze,th:Ze,"*":re.createElement("div")},Oe=/complete|loaded|interactive/,ze=/^[\w-]*$/,We={},gt=We.toString,at={},_e=re.createElement("div"),Me={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},H=Array.isArray||function(m){return m instanceof Array};return at.matches=function(m,F){if(!F||!m||m.nodeType!==1)return!1;var X=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.matchesSelector;if(X)return X.call(m,F);var le,ve=m.parentNode,Se=!ve;return Se&&(ve=_e).appendChild(m),le=~at.qsa(ve,F).indexOf(m),Se&&_e.removeChild(m),le},K=function(m){return m.replace(/-+(.)?/g,function(F,X){return X?X.toUpperCase():""})},k=function(m){return te.call(m,function(F,X){return m.indexOf(F)==X})},at.fragment=function(m,F,X){var le,ve,Se;return we.test(m)&&(le=N(re.createElement(RegExp.$1))),le||(m.replace&&(m=m.replace(Le,"<$1></$2>")),F===V&&(F=Te.test(m)&&RegExp.$1),F in Be||(F="*"),Se=Be[F],Se.innerHTML=""+m,le=N.each(oe.call(Se.childNodes),function(){Se.removeChild(this)})),y(X)&&(ve=N(le),N.each(X,function(ye,Re){Ge.indexOf(ye)>-1?ve[ye](Re):ve.attr(ye,Re)})),le},at.Z=function(m,F){return new S(m,F)},at.isZ=function(m){return m instanceof at.Z},at.init=function(m,F){var X;if(!m)return at.Z();if(typeof m=="string")if(m=m.trim(),m[0]=="<"&&Te.test(m))X=at.fragment(m,RegExp.$1,F),m=null;else{if(F!==V)return N(F).find(m);X=at.qsa(re,m)}else{if(f(m))return N(re).ready(m);if(at.isZ(m))return m;if(H(m))X=d(m);else if(p(m))X=[m],m=null;else if(Te.test(m))X=at.fragment(m.trim(),RegExp.$1,F),m=null;else{if(F!==V)return N(F).find(m);X=at.qsa(re,m)}}return at.Z(X,m)},N=function(m,F){return at.init(m,F)},N.extend=function(m){var F,X=oe.call(arguments,1);return typeof m=="boolean"&&(F=m,m=X.shift()),X.forEach(function(le){E(m,le,F)}),m},at.qsa=function(m,F){var X,le=F[0]=="#",ve=!le&&F[0]==".",Se=le||ve?F.slice(1):F,ye=ze.test(Se);return m.getElementById&&ye&&le?(X=m.getElementById(Se))?[X]:[]:m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11?[]:oe.call(ye&&!le&&m.getElementsByClassName?ve?m.getElementsByClassName(Se):m.getElementsByTagName(F):m.querySelectorAll(F))},N.contains=re.documentElement.contains?function(m,F){return m!==F&&m.contains(F)}:function(m,F){for(;F&&(F=F.parentNode);)if(F===m)return!0;return!1},N.type=x,N.isFunction=f,N.isWindow=h,N.isArray=H,N.isPlainObject=y,N.isEmptyObject=function(m){var F;for(F in m)return!1;return!0},N.inArray=function(m,F,X){return J.indexOf.call(F,m,X)},N.camelCase=K,N.trim=function(m){return m==null?"":String.prototype.trim.call(m)},N.uuid=0,N.support={},N.expr={},N.noop=function(){},N.map=function(m,F){var X,le,ve,Se=[];if(c(m))for(le=0;le<m.length;le++)X=F(m[le],le),X!=null&&Se.push(X);else for(ve in m)X=F(m[ve],ve),X!=null&&Se.push(X);return C(Se)},N.each=function(m,F){var X,le;if(c(m)){for(X=0;X<m.length;X++)if(F.call(m[X],X,m[X])===!1)return m}else for(le in m)if(F.call(m[le],le,m[le])===!1)return m;return m},N.grep=function(m,F){return te.call(m,F)},window.JSON&&(N.parseJSON=JSON.parse),N.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(m,F){We["[object "+F+"]"]=F.toLowerCase()}),N.fn={constructor:at.Z,length:0,forEach:J.forEach,reduce:J.reduce,push:J.push,sort:J.sort,splice:J.splice,indexOf:J.indexOf,concat:function(){var m,F,X=[];for(m=0;m<arguments.length;m++)F=arguments[m],X[m]=at.isZ(F)?F.toArray():F;return se.apply(at.isZ(this)?this.toArray():this,X)},map:function(m){return N(N.map(this,function(F,X){return m.call(F,X,F)}))},slice:function(){return N(oe.apply(this,arguments))},ready:function(m){return Oe.test(re.readyState)&&re.body?m(N):re.addEventListener("DOMContentLoaded",function(){m(N)},!1),this},get:function(m){return m===V?oe.call(this):this[m>=0?m:m+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(m){return J.every.call(this,function(F,X){return m.call(F,X,F)!==!1}),this},filter:function(m){return f(m)?this.not(this.not(m)):N(te.call(this,function(F){return at.matches(F,m)}))},add:function(m,F){return N(k(this.concat(N(m,F))))},is:function(m){return this.length>0&&at.matches(this[0],m)},not:function(m){var F=[];if(f(m)&&m.call!==V)this.each(function(le){m.call(this,le)||F.push(this)});else{var X=typeof m=="string"?this.filter(m):c(m)&&f(m.item)?oe.call(m):N(m);this.forEach(function(le){X.indexOf(le)<0&&F.push(le)})}return N(F)},has:function(m){return this.filter(function(){return p(m)?N.contains(this,m):N(this).find(m).size()})},eq:function(m){return m===-1?this.slice(m):this.slice(m,+m+1)},first:function(){var m=this[0];return m&&!p(m)?m:N(m)},last:function(){var m=this[this.length-1];return m&&!p(m)?m:N(m)},find:function(m){var F=this;return m?(typeof m>"u"?"undefined":t(m))=="object"?N(m).filter(function(){var X=this;return J.some.call(F,function(le){return N.contains(le,X)})}):this.length==1?N(at.qsa(this[0],m)):this.map(function(){return at.qsa(this,m)}):N()},closest:function(m,F){var X=this[0],le=!1;for((typeof m>"u"?"undefined":t(m))=="object"&&(le=N(m));X&&!(le?le.indexOf(X)>=0:at.matches(X,m));)X=X!==F&&!w(X)&&X.parentNode;return N(X)},parents:function(m){for(var F=[],X=this;X.length>0;)X=N.map(X,function(le){return(le=le.parentNode)&&!w(le)&&F.indexOf(le)<0?(F.push(le),le):void 0});return O(F,m)},parent:function(m){return O(k(this.pluck("parentNode")),m)},children:function(m){return O(this.map(function(){return l(this)}),m)},contents:function(){return this.map(function(){return this.contentDocument||oe.call(this.childNodes)})},siblings:function(m){return O(this.map(function(F,X){return te.call(l(X.parentNode),function(le){return le!==X})}),m)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(m){return N.map(this,function(F){return F[m]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=s(this.nodeName))})},replaceWith:function(m){return this.before(m).remove()},wrap:function(m){var F=f(m);if(this[0]&&!F)var X=N(m).get(0),le=X.parentNode||this.length>1;return this.each(function(ve){N(this).wrapAll(F?m.call(this,ve):le?X.cloneNode(!0):X)})},wrapAll:function(m){if(this[0]){N(this[0]).before(m=N(m));for(var F;(F=m.children()).length;)m=F.first();N(m).append(this)}return this},wrapInner:function(m){var F=f(m);return this.each(function(X){var le=N(this),ve=le.contents(),Se=F?m.call(this,X):m;ve.length?ve.wrapAll(Se):le.append(Se)})},unwrap:function(){return this.parent().each(function(){N(this).replaceWith(N(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(m){return this.each(function(){var F=N(this);(m===V?F.css("display")=="none":m)?F.show():F.hide()})},prev:function(m){return N(this.pluck("previousElementSibling")).filter(m||"*")},next:function(m){return N(this.pluck("nextElementSibling")).filter(m||"*")},html:function(m){return 0 in arguments?this.each(function(F){var X=this.innerHTML;N(this).empty().append(P(this,m,F,X))}):0 in this?this[0].innerHTML:null},text:function(m){return 0 in arguments?this.each(function(F){var X=P(this,m,F,this.textContent);this.textContent=X==null?"":""+X}):0 in this?this[0].textContent:null},attr:function(m,F){var X;return typeof m!="string"||1 in arguments?this.each(function(le){if(this.nodeType===1)if(p(m))for(j in m)A(this,j,m[j]);else A(this,m,P(this,F,le,this.getAttribute(m)))}):this.length&&this[0].nodeType===1?!(X=this[0].getAttribute(m))&&m in this[0]?this[0][m]:X:V},removeAttr:function(m){return this.each(function(){this.nodeType===1&&m.split(" ").forEach(function(F){A(this,F)},this)})},prop:function(m,F){return m=Me[m]||m,1 in arguments?this.each(function(X){this[m]=P(this,F,X,this[m])}):this[0]&&this[0][m]},data:function(m,F){var X="data-"+m.replace(be,"-$1").toLowerCase(),le=1 in arguments?this.attr(X,F):this.attr(X);return le!==null?M(le):V},val:function(m){return 0 in arguments?this.each(function(F){this.value=P(this,m,F,this.value)}):this[0]&&(this[0].multiple?N(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(m){if(m)return this.each(function(X){var le=N(this),ve=P(this,m,X,le.offset()),Se=le.offsetParent().offset(),ye={top:ve.top-Se.top,left:ve.left-Se.left};le.css("position")=="static"&&(ye.position="relative"),le.css(ye)});if(!this.length)return null;if(!N.contains(re.documentElement,this[0]))return{top:0,left:0};var F=this[0].getBoundingClientRect();return{left:F.left+window.pageXOffset,top:F.top+window.pageYOffset,width:Math.round(F.width),height:Math.round(F.height)}},css:function(m,F){if(arguments.length<2){var X,le=this[0];if(!le)return;if(X=getComputedStyle(le,""),typeof m=="string")return le.style[K(m)]||X.getPropertyValue(m);if(H(m)){var ve={};return N.each(m,function(ye,Re){ve[Re]=le.style[K(Re)]||X.getPropertyValue(Re)}),ve}}var Se="";if(x(m)=="string")F||F===0?Se=b(m)+":"+g(m,F):this.each(function(){this.style.removeProperty(b(m))});else for(j in m)m[j]||m[j]===0?Se+=b(j)+":"+g(j,m[j])+";":this.each(function(){this.style.removeProperty(b(j))});return this.each(function(){this.style.cssText+=";"+Se})},index:function(m){return m?this.indexOf(N(m)[0]):this.parent().children().indexOf(this[0])},hasClass:function(m){return!!m&&J.some.call(this,function(F){return this.test(D(F))},u(m))},addClass:function(m){return m?this.each(function(F){if("className"in this){G=[];var X=D(this),le=P(this,m,F,X);le.split(/\s+/g).forEach(function(ve){N(this).hasClass(ve)||G.push(ve)},this),G.length&&D(this,X+(X?" ":"")+G.join(" "))}}):this},removeClass:function(m){return this.each(function(F){if("className"in this){if(m===V)return D(this,"");G=D(this),P(this,m,F,G).split(/\s+/g).forEach(function(X){G=G.replace(u(X)," ")}),D(this,G.trim())}})},toggleClass:function(m,F){return m?this.each(function(X){var le=N(this),ve=P(this,m,X,D(this));ve.split(/\s+/g).forEach(function(Se){(F===V?!le.hasClass(Se):F)?le.addClass(Se):le.removeClass(Se)})}):this},scrollTop:function(m){if(this.length){var F="scrollTop"in this[0];return m===V?F?this[0].scrollTop:this[0].pageYOffset:this.each(F?function(){this.scrollTop=m}:function(){this.scrollTo(this.scrollX,m)})}},scrollLeft:function(m){if(this.length){var F="scrollLeft"in this[0];return m===V?F?this[0].scrollLeft:this[0].pageXOffset:this.each(F?function(){this.scrollLeft=m}:function(){this.scrollTo(m,this.scrollY)})}},position:function(){if(this.length){var m=this[0],F=this.offsetParent(),X=this.offset(),le=Ce.test(F[0].nodeName)?{top:0,left:0}:F.offset();return X.top-=parseFloat(N(m).css("margin-top"))||0,X.left-=parseFloat(N(m).css("margin-left"))||0,le.top+=parseFloat(N(F[0]).css("border-top-width"))||0,le.left+=parseFloat(N(F[0]).css("border-left-width"))||0,{top:X.top-le.top,left:X.left-le.left}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent||re.body;m&&!Ce.test(m.nodeName)&&N(m).css("position")=="static";)m=m.offsetParent;return m})}},N.fn.detach=N.fn.remove,["width","height"].forEach(function(m){var F=m.replace(/./,function(X){return X[0].toUpperCase()});N.fn[m]=function(X){var le,ve=this[0];return X===V?h(ve)?ve["inner"+F]:w(ve)?ve.documentElement["scroll"+F]:(le=this.offset())&&le[m]:this.each(function(Se){ve=N(this),ve.css(m,P(this,X,Se,ve[m]()))})}}),Ke.forEach(function(m,F){var X=F%2;N.fn[m]=function(){var le,ve,Se=N.map(arguments,function(Re){return le=x(Re),le=="object"||le=="array"||Re==null?Re:at.fragment(Re)}),ye=this.length>1;return Se.length<1?this:this.each(function(Re,Ie){ve=X?Ie:Ie.parentNode,Ie=F==0?Ie.nextSibling:F==1?Ie.firstChild:F==2?Ie:null;var ke=N.contains(re.documentElement,ve);Se.forEach(function($e){if(ye)$e=$e.cloneNode(!0);else if(!ve)return N($e).remove();ve.insertBefore($e,Ie),ke&&L($e,function(qe){qe.nodeName==null||qe.nodeName.toUpperCase()!=="SCRIPT"||qe.type&&qe.type!=="text/javascript"||qe.src||window.eval.call(window,qe.innerHTML)})})})},N.fn[X?m+"To":"insert"+(F?"Before":"After")]=function(le){return N(le)[m](this),this}}),at.Z.prototype=S.prototype=N.fn,at.uniq=k,at.deserializeValue=M,N.zepto=at,N}();window.Zepto=o,window.$===void 0&&(window.$=o),function(x){function f(G){return G._zid||(G._zid=s++)}function h(G,K,k,J){if(K=w(K),K.ns)var se=p(K.ns);return(O[f(G)]||[]).filter(function(te){return!(!te||K.e&&te.e!=K.e||K.ns&&!se.test(te.ns)||k&&f(te.fn)!==f(k)||J&&te.sel!=J)})}function w(G){var K=(""+G).split(".");return{e:K[0],ns:K.slice(1).sort().join(" ")}}function p(G){return new RegExp("(?:^| )"+G.replace(" "," .* ?")+"(?: |$)")}function y(G,K){return G.del&&!A&&G.e in D||!!K}function c(G){return M[G]||A&&D[G]||G}function d(G,K,k,J,se,te,oe){var re=f(G),ee=O[re]||(O[re]=[]);K.split(/\s/).forEach(function(Z){if(Z=="ready")return x(document).ready(k);var ge=w(Z);ge.fn=k,ge.sel=se,ge.e in M&&(k=function(we){var Le=we.relatedTarget;return!Le||Le!==this&&!x.contains(this,Le)?ge.fn.apply(this,arguments):void 0}),ge.del=te;var Te=te||k;ge.proxy=function(we){if(we=b(we),!we.isImmediatePropagationStopped()){we.data=J;var Le=Te.apply(G,we._args==g?[we]:[we].concat(we._args));return Le===!1&&(we.preventDefault(),we.stopPropagation()),Le}},ge.i=ee.length,ee.push(ge),"addEventListener"in G&&G.addEventListener(c(ge.e),ge.proxy,y(ge,oe))})}function C(G,K,k,J,se){var te=f(G);(K||"").split(/\s/).forEach(function(oe){h(G,oe,k,J).forEach(function(re){delete O[te][re.i],"removeEventListener"in G&&G.removeEventListener(c(re.e),re.proxy,y(re,se))})})}function b(G,K){return(K||!G.isDefaultPrevented)&&(K||(K=G),x.each(N,function(k,J){var se=K[k];G[k]=function(){return this[J]=L,se&&se.apply(K,arguments)},G[J]=V}),(K.defaultPrevented!==g?K.defaultPrevented:"returnValue"in K?K.returnValue===!1:K.getPreventDefault&&K.getPreventDefault())&&(G.isDefaultPrevented=L)),G}function u(G){var K,k={originalEvent:G};for(K in G)j.test(K)||G[K]===g||(k[K]=G[K]);return b(k,G)}var g,s=1,l=Array.prototype.slice,S=x.isFunction,E=function(G){return typeof G=="string"},O={},P={},A="onfocusin"in window,D={focus:"focusin",blur:"focusout"},M={mouseenter:"mouseover",mouseleave:"mouseout"};P.click=P.mousedown=P.mouseup=P.mousemove="MouseEvents",x.event={add:d,remove:C},x.proxy=function(G,K){var k=2 in arguments&&l.call(arguments,2);if(S(G)){var J=function(){return G.apply(K,k?k.concat(l.call(arguments)):arguments)};return J._zid=f(G),J}if(E(K))return k?(k.unshift(G[K],G),x.proxy.apply(null,k)):x.proxy(G[K],G);throw new TypeError("expected function")},x.fn.bind=function(G,K,k){return this.on(G,K,k)},x.fn.unbind=function(G,K){return this.off(G,K)},x.fn.one=function(G,K,k,J){return this.on(G,K,k,J,1)};var L=function(){return!0},V=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$)/,N={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};x.fn.delegate=function(G,K,k){return this.on(K,G,k)},x.fn.undelegate=function(G,K,k){return this.off(K,G,k)},x.fn.live=function(G,K){return x(document.body).delegate(this.selector,G,K),this},x.fn.die=function(G,K){return x(document.body).undelegate(this.selector,G,K),this},x.fn.on=function(G,K,k,J,se){var te,oe,re=this;return G&&!E(G)?(x.each(G,function(ee,Z){re.on(ee,K,k,Z,se)}),re):(E(K)||S(J)||J===!1||(J=k,k=K,K=g),(J===g||k===!1)&&(J=k,k=g),J===!1&&(J=V),re.each(function(ee,Z){se&&(te=function(ge){return C(Z,ge.type,J),J.apply(this,arguments)}),K&&(oe=function(ge){var Te,we=x(ge.target).closest(K,Z).get(0);return we&&we!==Z?(Te=x.extend(u(ge),{currentTarget:we,liveFired:Z}),(te||J).apply(we,[Te].concat(l.call(arguments,1)))):void 0}),d(Z,G,J,k,K,oe||te)}))},x.fn.off=function(G,K,k){var J=this;return G&&!E(G)?(x.each(G,function(se,te){J.off(se,K,te)}),J):(E(K)||S(k)||k===!1||(k=K,K=g),k===!1&&(k=V),J.each(function(){C(this,G,k,K)}))},x.fn.trigger=function(G,K){return G=E(G)||x.isPlainObject(G)?x.Event(G):b(G),G._args=K,this.each(function(){G.type in D&&typeof this[G.type]=="function"?this[G.type]():"dispatchEvent"in this?this.dispatchEvent(G):x(this).triggerHandler(G,K)})},x.fn.triggerHandler=function(G,K){var k,J;return this.each(function(se,te){k=u(E(G)?x.Event(G):G),k._args=K,k.target=te,x.each(h(te,G.type||G),function(oe,re){return J=re.proxy(k),!k.isImmediatePropagationStopped()&&void 0})}),J},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(G){x.fn[G]=function(K){return 0 in arguments?this.bind(G,K):this.trigger(G)}}),x.Event=function(G,K){E(G)||(K=G,G=K.type);var k=document.createEvent(P[G]||"Events"),J=!0;if(K)for(var se in K)se=="bubbles"?J=!!K[se]:k[se]=K[se];return k.initEvent(G,J,!0),b(k)}}(o),function(x){function f(k,J,se){var te=x.Event(J);return x(k).trigger(te,se),!te.isDefaultPrevented()}function h(k,J,se,te){return k.global?f(J||A,se,te):void 0}function w(k){k.global&&x.active++===0&&h(k,null,"ajaxStart")}function p(k){k.global&&!--x.active&&h(k,null,"ajaxStop")}function y(k,J){var se=J.context;return J.beforeSend.call(se,k,J)!==!1&&h(J,se,"ajaxBeforeSend",[k,J])!==!1&&void h(J,se,"ajaxSend",[k,J])}function c(k,J,se,te){var oe=se.context,re="success";se.success.call(oe,k,re,J),te&&te.resolveWith(oe,[k,re,J]),h(se,oe,"ajaxSuccess",[J,se,k]),C(re,J,se)}function d(k,J,se,te,oe){var re=te.context;te.error.call(re,se,J,k),oe&&oe.rejectWith(re,[se,J,k]),h(te,re,"ajaxError",[se,te,k||J]),C(J,se,te)}function C(k,J,se){var te=se.context;se.complete.call(te,J,k),h(se,te,"ajaxComplete",[J,se]),p(se)}function b(){}function u(k){return k&&(k=k.split(";",2)[0]),k&&(k==j?"html":k==V?"json":M.test(k)?"script":L.test(k)&&"xml")||"text"}function g(k,J){return J==""?k:(k+"&"+J).replace(/[&?]{1,2}/,"?")}function s(k){k.processData&&k.data&&x.type(k.data)!="string"&&(k.data=x.param(k.data,k.traditional)),!k.data||k.type&&k.type.toUpperCase()!="GET"||(k.url=g(k.url,k.data),k.data=void 0)}function l(k,J,se,te){return x.isFunction(J)&&(te=se,se=J,J=void 0),x.isFunction(se)||(te=se,se=void 0),{url:k,data:J,success:se,dataType:te}}function S(k,J,se,te){var oe,re=x.isArray(J),ee=x.isPlainObject(J);x.each(J,function(Z,ge){oe=x.type(ge),te&&(Z=se?te:te+"["+(ee||oe=="object"||oe=="array"?Z:"")+"]"),!te&&re?k.add(ge.name,ge.value):oe=="array"||!se&&oe=="object"?S(k,ge,se,Z):k.add(Z,ge)})}var E,O,P=0,A=window.document,D=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,M=/^(?:text|application)\/javascript/i,L=/^(?:text|application)\/xml/i,V="application/json",j="text/html",N=/^\s*$/,G=A.createElement("a");G.href=window.location.href,x.active=0,x.ajaxJSONP=function(k,J){if(!("type"in k))return x.ajax(k);var se,te,oe=k.jsonpCallback,re=(x.isFunction(oe)?oe():oe)||"jsonp"+ ++P,ee=A.createElement("script"),Z=window[re],ge=function(we){x(ee).triggerHandler("error",we||"abort")},Te={abort:ge};return J&&J.promise(Te),x(ee).on("load error",function(we,Le){clearTimeout(te),x(ee).off().remove(),we.type!="error"&&se?c(se[0],Te,k,J):d(null,Le||"error",Te,k,J),window[re]=Z,se&&x.isFunction(Z)&&Z(se[0]),Z=se=void 0}),y(Te,k)===!1?(ge("abort"),Te):(window[re]=function(){se=arguments},ee.src=k.url.replace(/\?(.+)=\?/,"?$1="+re),A.head.appendChild(ee),k.timeout>0&&(te=setTimeout(function(){ge("timeout")},k.timeout)),Te)},x.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:V,xml:"application/xml, text/xml",html:j,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},x.ajax=function(k){var J,se,te=x.extend({},k||{}),oe=x.Deferred&&x.Deferred();for(E in x.ajaxSettings)te[E]===void 0&&(te[E]=x.ajaxSettings[E]);w(te),te.crossDomain||(J=A.createElement("a"),J.href=te.url,J.href=J.href,te.crossDomain=G.protocol+"//"+G.host!=J.protocol+"//"+J.host),te.url||(te.url=window.location.toString()),(se=te.url.indexOf("#"))>-1&&(te.url=te.url.slice(0,se)),s(te);var re=te.dataType,ee=/\?.+=\?/.test(te.url);if(ee&&(re="jsonp"),te.cache!==!1&&(k&&k.cache===!0||re!="script"&&re!="jsonp")||(te.url=g(te.url,"_="+Date.now())),re=="jsonp")return ee||(te.url=g(te.url,te.jsonp?te.jsonp+"=?":te.jsonp===!1?"":"callback=?")),x.ajaxJSONP(te,oe);var Z,ge=te.accepts[re],Te={},we=function(Ke,je){Te[Ke.toLowerCase()]=[Ke,je]},Le=/^([\w-]+:)\/\//.test(te.url)?RegExp.$1:window.location.protocol,Ce=te.xhr(),be=Ce.setRequestHeader;if(oe&&oe.promise(Ce),te.crossDomain||we("X-Requested-With","XMLHttpRequest"),we("Accept",ge||"*/*"),(ge=te.mimeType||ge)&&(ge.indexOf(",")>-1&&(ge=ge.split(",",2)[0]),Ce.overrideMimeType&&Ce.overrideMimeType(ge)),(te.contentType||te.contentType!==!1&&te.data&&te.type.toUpperCase()!="GET")&&we("Content-Type",te.contentType||"application/x-www-form-urlencoded"),te.headers)for(O in te.headers)we(O,te.headers[O]);if(Ce.setRequestHeader=we,Ce.onreadystatechange=function(){if(Ce.readyState==4){Ce.onreadystatechange=b,clearTimeout(Z);var Ke,je=!1;if(Ce.status>=200&&Ce.status<300||Ce.status==304||Ce.status==0&&Le=="file:"){re=re||u(te.mimeType||Ce.getResponseHeader("content-type")),Ke=Ce.responseText;try{re=="script"?(0,eval)(Ke):re=="xml"?Ke=Ce.responseXML:re=="json"&&(Ke=N.test(Ke)?null:x.parseJSON(Ke))}catch(Ze){je=Ze}je?d(je,"parsererror",Ce,te,oe):c(Ke,Ce,te,oe)}else d(Ce.statusText||null,Ce.status?"error":"abort",Ce,te,oe)}},y(Ce,te)===!1)return Ce.abort(),d(null,"abort",Ce,te,oe),Ce;if(te.xhrFields)for(O in te.xhrFields)Ce[O]=te.xhrFields[O];var Ge=!("async"in te)||te.async;Ce.open(te.type,te.url,Ge,te.username,te.password);for(O in Te)be.apply(Ce,Te[O]);return te.timeout>0&&(Z=setTimeout(function(){Ce.onreadystatechange=b,Ce.abort(),d(null,"timeout",Ce,te,oe)},te.timeout)),Ce.send(te.data?te.data:null),Ce},x.get=function(){return x.ajax(l.apply(null,arguments))},x.post=function(){var k=l.apply(null,arguments);return k.type="POST",x.ajax(k)},x.getJSON=function(){var k=l.apply(null,arguments);return k.dataType="json",x.ajax(k)},x.fn.load=function(k,J,se){if(!this.length)return this;var te,oe=this,re=k.split(/\s/),ee=l(k,J,se),Z=ee.success;return re.length>1&&(ee.url=re[0],te=re[1]),ee.success=function(ge){oe.html(te?x("<div>").html(ge.replace(D,"")).find(te):ge),Z&&Z.apply(oe,arguments)},x.ajax(ee),this};var K=encodeURIComponent;x.param=function(k,J){var se=[];return se.add=function(te,oe){x.isFunction(oe)&&(oe=oe()),oe==null&&(oe=""),this.push(K(te)+"="+K(oe))},S(se,k,J),se.join("&").replace(/%20/g,"+")}}(o),function(x){x.Callbacks=function(f){f=x.extend({},f);var h,w,p,y,c,d,C=[],b=!f.once&&[],u=function s(l){for(h=f.memory&&l,w=!0,d=y||0,y=0,c=C.length,p=!0;C&&c>d;++d)if(C[d].apply(l[0],l[1])===!1&&f.stopOnFalse){h=!1;break}p=!1,C&&(b?b.length&&s(b.shift()):h?C.length=0:g.disable())},g={add:function(){if(C){var s=C.length,l=function S(E){x.each(E,function(O,P){typeof P=="function"?f.unique&&g.has(P)||C.push(P):P&&P.length&&typeof P!="string"&&S(P)})};l(arguments),p?c=C.length:h&&(y=s,u(h))}return this},remove:function(){return C&&x.each(arguments,function(s,l){for(var S;(S=x.inArray(l,C,S))>-1;)C.splice(S,1),p&&(c>=S&&--c,d>=S&&--d)}),this},has:function(s){return!(!C||!(s?x.inArray(s,C)>-1:C.length))},empty:function(){return c=C.length=0,this},disable:function(){return C=b=h=void 0,this},disabled:function(){return!C},lock:function(){return b=void 0,h||g.disable(),this},locked:function(){return!b},fireWith:function(s,l){return!C||w&&!b||(l=l||[],l=[s,l.slice?l.slice():l],p?b.push(l):u(l)),this},fire:function(){return g.fireWith(this,arguments)},fired:function(){return!!w}};return g}}(o),function(x){function f(w){var p=[["resolve","done",x.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",x.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",x.Callbacks({memory:1})]],y="pending",c={state:function(){return y},always:function(){return d.done(arguments).fail(arguments),this},then:function(){var C=arguments;return f(function(b){x.each(p,function(u,g){var s=x.isFunction(C[u])&&C[u];d[g[1]](function(){var l=s&&s.apply(this,arguments);if(l&&x.isFunction(l.promise))l.promise().done(b.resolve).fail(b.reject).progress(b.notify);else{var S=this===c?b.promise():this,E=s?[l]:arguments;b[g[0]+"With"](S,E)}})}),C=null}).promise()},promise:function(C){return C!=null?x.extend(C,c):c}},d={};return x.each(p,function(C,b){var u=b[2],g=b[3];c[b[1]]=u.add,g&&u.add(function(){y=g},p[1^C][2].disable,p[2][2].lock),d[b[0]]=function(){return d[b[0]+"With"](this===d?c:this,arguments),this},d[b[0]+"With"]=u.fireWith}),c.promise(d),w&&w.call(d,d),d}var h=Array.prototype.slice;x.when=function(w){var p,y,c,d=h.call(arguments),C=d.length,b=0,u=C!==1||w&&x.isFunction(w.promise)?C:0,g=u===1?w:f(),s=function(l,S,E){return function(O){S[l]=this,E[l]=arguments.length>1?h.call(arguments):O,E===p?g.notifyWith(S,E):--u||g.resolveWith(S,E)}};if(C>1)for(p=new Array(C),y=new Array(C),c=new Array(C);C>b;++b)d[b]&&x.isFunction(d[b].promise)?d[b].promise().done(s(b,c,d)).fail(g.reject).progress(s(b,y,p)):--u;return u||g.resolveWith(c,d),g.promise()},x.Deferred=f}(o),function(x){function f(S,E,O,P){return Math.abs(S-E)>=Math.abs(O-P)?S-E>0?"Left":"Right":O-P>0?"Up":"Down"}function h(){u=null,s.last&&(s.el.trigger("longTap"),s={})}function w(){u&&clearTimeout(u),u=null}function p(){d&&clearTimeout(d),C&&clearTimeout(C),b&&clearTimeout(b),u&&clearTimeout(u),d=C=b=u=null,s={}}function y(S){return(S.pointerType=="touch"||S.pointerType==S.MSPOINTER_TYPE_TOUCH)&&S.isPrimary}function c(S,E){return S.type=="pointer"+E||S.type.toLowerCase()=="mspointer"+E}var d,C,b,u,g,s={},l=750;x(document).ready(function(){var S,E,O,P,A=0,D=0;"MSGesture"in window&&(g=new MSGesture,g.target=document.body),x(document).bind("MSGestureEnd",function(M){var L=M.velocityX>1?"Right":M.velocityX<-1?"Left":M.velocityY>1?"Down":M.velocityY<-1?"Up":null;L&&(s.el.trigger("swipe"),s.el.trigger("swipe"+L))}).on("touchstart MSPointerDown pointerdown",function(M){(!(P=c(M,"down"))||y(M))&&(O=P?M:M.touches[0],M.touches&&M.touches.length===1&&s.x2&&(s.x2=void 0,s.y2=void 0),S=Date.now(),E=S-(s.last||S),s.el=x("tagName"in O.target?O.target:O.target.parentNode),d&&clearTimeout(d),s.x1=O.pageX,s.y1=O.pageY,E>0&&250>=E&&(s.isDoubleTap=!0),s.last=S,u=setTimeout(h,l),g&&P&&g.addPointer(M.pointerId))}).on("touchmove MSPointerMove pointermove",function(M){(!(P=c(M,"move"))||y(M))&&(O=P?M:M.touches[0],w(),s.x2=O.pageX,s.y2=O.pageY,A+=Math.abs(s.x1-s.x2),D+=Math.abs(s.y1-s.y2))}).on("touchend MSPointerUp pointerup",function(M){(!(P=c(M,"up"))||y(M))&&(w(),s.x2&&Math.abs(s.x1-s.x2)>30||s.y2&&Math.abs(s.y1-s.y2)>30?b=setTimeout(function(){s.el.trigger("swipe"),s.el.trigger("swipe"+f(s.x1,s.x2,s.y1,s.y2)),s={}},0):"last"in s&&(30>A&&30>D?C=setTimeout(function(){var L=x.Event("tap");L.cancelTouch=p,s.el.trigger(L),s.isDoubleTap?(s.el&&s.el.trigger("doubleTap"),s={}):d=setTimeout(function(){d=null,s.el&&s.el.trigger("singleTap"),s={}},250)},0):s={}),A=D=0)}).on("touchcancel MSPointerCancel pointercancel",p),x(window).on("scroll",p)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(S){x.fn[S]=function(E){return this.on(S,E)}})}(o),function(x){function f(u){return u=x(u),!(!u.width()&&!u.height())&&u.css("display")!=="none"}function h(u,g){u=u.replace(/=#\]/g,'="#"]');var s,l,S=d.exec(u);if(S&&S[2]in c&&(s=c[S[2]],l=S[3],u=S[1],l)){var E=Number(l);l=isNaN(E)?l.replace(/^["']|["']$/g,""):E}return g(u,s,l)}var w=x.zepto,p=w.qsa,y=w.matches,c=x.expr[":"]={visible:function(){return f(this)?this:void 0},hidden:function(){return f(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(u){return u===0?this:void 0},last:function(u,g){return u===g.length-1?this:void 0},eq:function(u,g,s){return u===s?this:void 0},contains:function(u,g,s){return x(this).text().indexOf(s)>-1?this:void 0},has:function(u,g,s){return w.qsa(this,s).length?this:void 0}},d=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),C=/^\s*>/,b="Zepto"+ +new Date;w.qsa=function(u,g){return h(g,function(s,l,S){try{var E;!s&&l?s="*":C.test(s)&&(E=x(u).addClass(b),s="."+b+" "+s);var O=p(u,s)}catch(P){throw console.error("error performing selector: %o",g),P}finally{E&&E.removeClass(b)}return l?w.uniq(x.map(O,function(P,A){return l.call(P,A,O,S)})):O})},w.matches=function(u,g){return h(g,function(s,l,S){return!(s&&!y(u,s)||l&&l.call(u,null,S)!==u)})}}(o),function(){try{getComputedStyle(void 0)}catch{var x=getComputedStyle;window.getComputedStyle=function(h){try{return x(h)}catch{return null}}}}(),B.exports=o},function(B,T,t){function o(C){return C&&C.__esModule?C:{default:C}}function x(C,b){if(!(C instanceof b))throw new TypeError("Cannot call a class as a function")}function f(C,b){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?C:b}function h(C,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);C.prototype=Object.create(b&&b.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(C,b):C.__proto__=b)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function C(b,u){for(var g=0;g<u.length;g++){var s=u[g];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(b,s.key,s)}}return function(b,u,g){return u&&C(b.prototype,u),g&&C(b,g),b}}(),p=t(3),y=t(14),c=o(y),d=function(C){function b(u){x(this,b);var g=f(this,C.call(this,u));return g.settings={},g}return h(b,C),w(b,[{key:"ended",get:function(){return!1}},{key:"buffering",get:function(){return!1}}]),b.prototype.play=function(){},b.prototype.pause=function(){},b.prototype.stop=function(){},b.prototype.seek=function(u){},b.prototype.seekPercentage=function(u){},b.prototype.getStartTimeOffset=function(){return 0},b.prototype.getDuration=function(){return 0},b.prototype.isPlaying=function(){return!1},b.prototype.getPlaybackType=function(){return b.NO_OP},b.prototype.isHighDefinitionInUse=function(){return!1},b.prototype.volume=function(u){},b.prototype.destroy=function(){this.$el.remove()},w(b,[{key:"isReady",get:function(){return!1}}]),b}(c.default);T.default=d,d.extend=function(C){return(0,p.extend)(d,C)},d.canPlay=function(C,b){return!1},d.VOD="vod",d.AOD="aod",d.LIVE="live",d.NO_OP="no_op",d.type="playback",B.exports=T.default},function(B,T,t){function o(y){return y&&y.__esModule?y:{default:y}}Object.defineProperty(T,"__esModule",{value:!0});var x=t(6),f=o(x),h=t(9),w=o(h),p={getStyleFor:function(y){var c=arguments.length<=1||arguments[1]===void 0?{baseUrl:""}:arguments[1];return(0,f.default)('<style class="clappr-style"></style>').html((0,w.default)(y.toString())(c))}};T.default=p,B.exports=T.default},function(B,T){var t={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},o=/(.)^/,x={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},f=/\\|'|\r|\n|\t|\u2028|\u2029/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},w=new RegExp(`[&<>"']`,"g"),p=function(d){return d===null?"":(""+d).replace(w,function(C){return h[C]})},y=0,c=function(d,C){var b,u=new RegExp([(t.escape||o).source,(t.interpolate||o).source,(t.evaluate||o).source].join("|")+"|$","g"),g=0,s="__p+='";d.replace(u,function(S,E,O,P,A){return s+=d.slice(g,A).replace(f,function(D){return"\\"+x[D]}),E&&(s+=`'+
((__t=(`+E+`))==null?'':escapeExpr(__t))+
'`),O&&(s+=`'+
((__t=(`+O+`))==null?'':__t)+
'`),P&&(s+=`';
`+P+`
__p+='`),g=A+S.length,S}),s+=`';
`,t.variable||(s=`with(obj||{}){
`+s+`}
`),s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
//# sourceURL=/microtemplates/source[`+y+++"]";try{b=new Function(t.variable||"obj","escapeExpr",s)}catch(S){throw S.source=s,S}if(C)return b(C,p);var l=function(S){return b.call(this,S,p)};return l.source="function("+(t.variable||"obj")+`){
`+s+"}",l};c.settings=t,B.exports=c},function(B,T){B.exports=function(){var t=[];return t.toString=function(){for(var o=[],x=0;x<this.length;x++){var f=this[x];f[2]?o.push("@media "+f[2]+"{"+f[1]+"}"):o.push(f[1])}return o.join("")},t.i=function(o,x){typeof o=="string"&&(o=[[null,o,""]]);for(var f={},h=0;h<this.length;h++){var w=this[h][0];typeof w=="number"&&(f[w]=!0)}for(h=0;h<o.length;h++){var p=o[h];typeof p[0]=="number"&&f[p[0]]||(x&&!p[2]?p[2]=x:x&&(p[2]="("+p[2]+") and ("+x+")"),t.push(p))}},t}},function(B,T){Object.defineProperty(T,"__esModule",{value:!0});var t={},o=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch{return!1}},x=function(){try{var w=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!w}catch{return!(!navigator.mimeTypes||navigator.mimeTypes["application/x-shockwave-flash"]===void 0||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},f=function(){var w,p=navigator.userAgent,y=p.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(y[1])?(w=/\brv[ :]+(\d+)/g.exec(p)||[],{name:"IE",version:parseInt(w[1]||"")}):y[1]==="Chrome"&&(w=p.match(/\bOPR\/(\d+)/),w!=null)?{name:"Opera",version:parseInt(w[1])}:(y=y[2]?[y[1],y[2]]:[navigator.appName,navigator.appVersion,"-?"],(w=p.match(/version\/(\d+)/i))&&y.splice(1,1,w[1]),{name:y[0],version:parseInt(y[1])})},h=f();t.isSafari=/safari/i.test(navigator.userAgent)&&navigator.userAgent.indexOf("Chrome")===-1,t.isChrome=/chrome/i.test(navigator.userAgent),t.isFirefox=/firefox/i.test(navigator.userAgent),t.isLegacyIE=!!window.ActiveXObject,t.isIE=t.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),t.isIE11=/trident.*rv:11/i.test(navigator.userAgent),t.isChromecast=t.isChrome&&/CrKey/i.test(navigator.userAgent),t.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Opera Mini/i.test(navigator.userAgent),t.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),t.isAndroid=/Android/i.test(navigator.userAgent),t.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),t.isWin8App=/MSAppHost/i.test(navigator.userAgent),t.isWiiU=/WiiU/i.test(navigator.userAgent),t.isPS4=/PlayStation 4/i.test(navigator.userAgent),t.hasLocalstorage=o(),t.hasFlash=x(),t.name=h.name,t.version=h.version,T.default=t,B.exports=T.default},function(B,T,t){function o(b){return b&&b.__esModule?b:{default:b}}function x(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol?"symbol":typeof b};Object.defineProperty(T,"__esModule",{value:!0});var h=typeof Symbol=="function"&&f(Symbol.iterator)==="symbol"?function(b){return typeof b>"u"?"undefined":f(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol?"symbol":typeof b>"u"?"undefined":f(b)},w=function(){function b(u,g){for(var s=0;s<g.length;s++){var l=g[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(u,l.key,l)}}return function(u,g,s){return g&&b(u.prototype,g),s&&b(u,s),u}}(),p=t(4),y=t(5),c=t(2),d=o(c),C=function(){function b(u){x(this,b),this.hls=u,this.onEvent=this.onEvent.bind(this);for(var g=arguments.length,s=Array(g>1?g-1:0),l=1;l<g;l++)s[l-1]=arguments[l];this.handledEvents=s,this.useGenericHandler=!0,this.registerListeners()}return w(b,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return h(this.handledEvents)==="object"&&this.handledEvents.length&&typeof this.onEvent=="function"}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach((function(u){if(u==="hlsEventGeneric")throw new Error("Forbidden event name: "+u);this.hls.on(u,this.onEvent)}).bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach((function(u){this.hls.off(u,this.onEvent)}).bind(this))}},{key:"onEvent",value:function(u,g){this.onEventGeneric(u,g)}},{key:"onEventGeneric",value:function(u,g){var s=function(l,S){var E="on"+l.replace("hls","");if(typeof this[E]!="function")throw new Error("Event "+l+" has no generic handler in this "+this.constructor.name+" class (tried "+E+")");return this[E].bind(this,S)};try{s.call(this,u,g).call()}catch(l){p.logger.error("internal error happened while processing "+u+":"+l.message),this.hls.trigger(d.default.ERROR,{type:y.ErrorTypes.OTHER_ERROR,details:y.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:u,err:l})}}}]),b}();T.default=C},function(B,T,t){function o(d){return d&&d.__esModule?d:{default:d}}function x(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}function f(d,C){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?d:C}function h(d,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);d.prototype=Object.create(C&&C.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(d,C):d.__proto__=C)}Object.defineProperty(T,"__esModule",{value:!0});var w=t(3),p=t(1),y=o(p),c=function(d){function C(){var b=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];x(this,C);var u=f(this,d.call(this,b));return u.uniqueId=(0,w.uniqueId)("o"),u}return h(C,d),C}(y.default);T.default=c,B.exports=T.default},function(B,T,t){function o(l){return l&&l.__esModule?l:{default:l}}function x(l,S){if(!(l instanceof S))throw new TypeError("Cannot call a class as a function")}function f(l,S){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||typeof S!="object"&&typeof S!="function"?l:S}function h(l,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);l.prototype=Object.create(S&&S.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(l,S):l.__proto__=S)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function l(S,E){for(var O=0;O<E.length;O++){var P=E[O];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,E,O){return E&&l(S.prototype,E),O&&l(S,O),S}}(),p=t(3),y=t(6),c=o(y),d=t(89),C=o(d),b=t(13),u=o(b),g=/^(\S+)\s*(.*)$/,s=function(l){function S(E){x(this,S);var O=f(this,l.call(this,E));return O.cid=(0,p.uniqueId)("c"),O._ensureElement(),O.delegateEvents(),O}return h(S,l),w(S,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),S.prototype.$=function(E){return this.$el.find(E)},S.prototype.render=function(){return this},S.prototype.remove=function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},S.prototype.setElement=function(E,O){return this.$el&&this.undelegateEvents(),this.$el=E instanceof c.default?E:(0,c.default)(E),this.el=this.$el[0],O!==!1&&this.delegateEvents(),this},S.prototype.delegateEvents=function(E){if(!E&&!(E=(0,C.default)(this,"events")))return this;this.undelegateEvents();for(var O in E){var P=E[O];if(P&&P.constructor!==Function&&(P=this[E[O]]),P){var A=O.match(g),D=A[1],M=A[2];D+=".delegateEvents"+this.cid,M===""?this.$el.on(D,P.bind(this)):this.$el.on(D,M,P.bind(this))}}return this},S.prototype.undelegateEvents=function(){return this.$el.off(".delegateEvents"+this.cid),this},S.prototype._ensureElement=function(){if(this.el)this.setElement((0,C.default)(this,"el"),!1);else{var E=c.default.extend({},(0,C.default)(this,"attributes"));this.id&&(E.id=(0,C.default)(this,"id")),this.className&&(E.class=(0,C.default)(this,"className"));var O=(0,c.default)("<"+(0,C.default)(this,"tagName")+">").attr(E);this.setElement(O,!1)}},S}(u.default);T.default=s,B.exports=T.default},function(B,T,t){function o(y,c){if(c=w(c,3),p(y)){var d=h(y,c);return d>-1?y[d]:void 0}return f(y,c,x)}var x=t(79),f=t(80),h=t(81),w=t(32),p=Array.isArray;B.exports=o},function(B,T,t){function o(y){return y&&y.__esModule?y:{default:y}}function x(y,c){if(!(y instanceof c))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=t(1),h=o(f),w=new h.default,p=function y(){x(this,y)};T.default=p,p.on=function(y,c,d){w.on(y,c,d)},p.once=function(y,c,d){w.once(y,c,d)},p.off=function(y,c,d){w.off(y,c,d)},p.trigger=function(y){for(var c=arguments.length,d=Array(c>1?c-1:0),C=1;C<c;C++)d[C-1]=arguments[C];w.trigger.apply(w,[y].concat(d))},p.stopListening=function(y,c,d){w.stopListening(y,c,d)},B.exports=T.default},function(B,T){B.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(B,T,t){function o(C){return C&&C.__esModule?C:{default:C}}function x(C,b){if(!(C instanceof b))throw new TypeError("Cannot call a class as a function")}function f(C,b){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?C:b}function h(C,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);C.prototype=Object.create(b&&b.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(C,b):C.__proto__=b)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function C(b,u){for(var g=0;g<u.length;g++){var s=u[g];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(b,s.key,s)}}return function(b,u,g){return u&&C(b.prototype,u),g&&C(b,g),b}}(),p=t(13),y=o(p),c=t(3),d=function(C){function b(u){x(this,b);var g=f(this,C.call(this,u.options));return g.container=u,g.enabled=!0,g.bindEvents(),g}return h(b,C),b.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},b.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},b.prototype.bindEvents=function(){},b.prototype.destroy=function(){this.stopListening()},w(b,[{key:"options",get:function(){return this.container&&this.container.options||{}}}]),b}(y.default);T.default=d,d.extend=function(C){return(0,c.extend)(d,C)},d.type="container",B.exports=T.default},function(B,T,t){function o(d){return d&&d.__esModule?d:{default:d}}function x(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}function f(d,C){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?d:C}function h(d,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);d.prototype=Object.create(C&&C.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(d,C):d.__proto__=C)}Object.defineProperty(T,"__esModule",{value:!0});var w=t(3),p=t(13),y=o(p),c=function(d){function C(b){x(this,C);var u=f(this,d.call(this,b));return u.core=b,u.enabled=!0,u.bindEvents(),u}return h(C,d),C.prototype.bindEvents=function(){},C.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},C.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},C.prototype.getExternalInterface=function(){return{}},C.prototype.destroy=function(){this.stopListening()},C}(y.default);T.default=c,c.extend=function(d){return(0,w.extend)(c,d)},c.type="core",B.exports=T.default},function(B,T,t){function o(C){return C&&C.__esModule?C:{default:C}}function x(C,b){if(!(C instanceof b))throw new TypeError("Cannot call a class as a function")}function f(C,b){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?C:b}function h(C,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);C.prototype=Object.create(b&&b.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(C,b):C.__proto__=b)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function C(b,u){for(var g=0;g<u.length;g++){var s=u[g];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(b,s.key,s)}}return function(b,u,g){return u&&C(b.prototype,u),g&&C(b,g),b}}(),p=t(3),y=t(14),c=o(y),d=function(C){function b(u){x(this,b);var g=f(this,C.call(this,u.options));return g.container=u,g.enabled=!0,g.bindEvents(),g}return h(b,C),b.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},b.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},b.prototype.bindEvents=function(){},b.prototype.destroy=function(){this.remove()},w(b,[{key:"options",get:function(){return this.container&&this.container.options||{}}}]),b}(c.default);T.default=d,d.extend=function(C){return(0,p.extend)(d,C)},d.type="container",B.exports=T.default},function(B,T){function t(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var o=function x(){t(this,x),this.options={},this.playbackPlugins=[],this.currentSize={width:0,height:0}};o._players={},o.getInstance=function(x){return o._players[x]||(o._players[x]=new o)},T.default=o,B.exports=T.default},function(B,T,t){B.exports=t(107)},function(B,T,t){function o(d){return d&&d.__esModule?d:{default:d}}function x(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}function f(d,C){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?d:C}function h(d,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);d.prototype=Object.create(C&&C.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(d,C):d.__proto__=C)}Object.defineProperty(T,"__esModule",{value:!0});var w=t(3),p=t(14),y=o(p),c=function(d){function C(b){x(this,C);var u=f(this,d.call(this,b));return u.core=b,u.enabled=!0,u.bindEvents(),u.render(),u}return h(C,d),C.prototype.bindEvents=function(){},C.prototype.getExternalInterface=function(){return{}},C.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},C.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},C.prototype.destroy=function(){this.remove()},C.prototype.render=function(){return this},C}(y.default);T.default=c,c.extend=function(d){return(0,w.extend)(c,d)},c.type="core",B.exports=T.default},function(B,T,t){Object.defineProperty(T,"__esModule",{value:!0}),T.default=t(101),B.exports=T.default},function(B,T,t){B.exports=t(119)},function(B,T,t){function o(h){return h&&h.__esModule?h:{default:h}}Object.defineProperty(T,"__esModule",{value:!0});var x=t(130),f=o(x);T.default={Kibo:f.default},B.exports=T.default},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},function(B,T){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(p){return typeof p=="function"}function x(p){return typeof p=="number"}function f(p){return(typeof p>"u"?"undefined":w(p))==="object"&&p!==null}function h(p){return p===void 0}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol?"symbol":typeof p};B.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(p){if(!x(p)||p<0||isNaN(p))throw TypeError("n must be a positive number");return this._maxListeners=p,this},t.prototype.emit=function(p){var y,c,d,C,b,u;if(this._events||(this._events={}),p==="error"&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw y=arguments[1],y instanceof Error?y:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[p],h(c))return!1;if(o(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:C=Array.prototype.slice.call(arguments,1),c.apply(this,C)}else if(f(c))for(C=Array.prototype.slice.call(arguments,1),u=c.slice(),d=u.length,b=0;b<d;b++)u[b].apply(this,C);return!0},t.prototype.addListener=function(p,y){var c;if(!o(y))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",p,o(y.listener)?y.listener:y),this._events[p]?f(this._events[p])?this._events[p].push(y):this._events[p]=[this._events[p],y]:this._events[p]=y,f(this._events[p])&&!this._events[p].warned&&(c=h(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[p].length>c&&(this._events[p].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[p].length),typeof console.trace=="function"&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(p,y){function c(){this.removeListener(p,c),d||(d=!0,y.apply(this,arguments))}if(!o(y))throw TypeError("listener must be a function");var d=!1;return c.listener=y,this.on(p,c),this},t.prototype.removeListener=function(p,y){var c,d,C,b;if(!o(y))throw TypeError("listener must be a function");if(!this._events||!this._events[p])return this;if(c=this._events[p],C=c.length,d=-1,c===y||o(c.listener)&&c.listener===y)delete this._events[p],this._events.removeListener&&this.emit("removeListener",p,y);else if(f(c)){for(b=C;b-- >0;)if(c[b]===y||c[b].listener&&c[b].listener===y){d=b;break}if(d<0)return this;c.length===1?(c.length=0,delete this._events[p]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",p,y)}return this},t.prototype.removeAllListeners=function(p){var y,c;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[p]&&delete this._events[p],this;if(arguments.length===0){for(y in this._events)y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[p],o(c))this.removeListener(p,c);else if(c)for(;c.length;)this.removeListener(p,c[c.length-1]);return delete this._events[p],this},t.prototype.listeners=function(p){return this._events&&this._events[p]?o(this._events[p])?[this._events[p]]:this._events[p].slice():[]},t.prototype.listenerCount=function(p){if(this._events){var y=this._events[p];if(o(y))return 1;if(y)return y.length}return 0},t.listenerCount=function(p,y){return p.listenerCount(y)}},function(B,T,t){function o(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function p(y,c){for(var d=0;d<c.length;d++){var C=c[d];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,C.key,C)}}return function(y,c,d){return c&&p(y.prototype,c),d&&p(y,d),y}}(),f=t(4),h=t(5),w=function(){function p(){o(this,p)}return x(p,null,[{key:"getAudioConfig",value:function(y,c,d,C){var b,u,g,s,l,S=navigator.userAgent.toLowerCase(),E=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return b=((192&c[d+2])>>>6)+1,u=(60&c[d+2])>>>2,u>E.length-1?void y.trigger(Event.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u}):(s=(1&c[d+2])<<2,s|=(192&c[d+3])>>>6,f.logger.log("manifest codec:"+C+",ADTS data:type:"+b+",sampleingIndex:"+u+"["+E[u]+"Hz],channelConfig:"+s),S.indexOf("firefox")!==-1?u>=6?(b=5,l=new Array(4),g=u-3):(b=2,l=new Array(2),g=u):S.indexOf("android")!==-1?(b=2,l=new Array(2),g=u):(b=5,l=new Array(4),C&&(C.indexOf("mp4a.40.29")!==-1||C.indexOf("mp4a.40.5")!==-1)||!C&&u>=6?g=u-3:((C&&C.indexOf("mp4a.40.2")!==-1&&u>=6&&s===1||!C&&s===1)&&(b=2,l=new Array(2)),g=u)),l[0]=b<<3,l[0]|=(14&u)>>1,l[1]|=(1&u)<<7,l[1]|=s<<3,b===5&&(l[1]|=(14&g)>>1,l[2]=(1&g)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:E[u],channelCount:s,codec:"mp4a.40."+b})}}]),p}();T.default=w},function(B,T,t){function o(S){return S&&S.__esModule?S:{default:S}}function x(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function S(E,O){for(var P=0;P<O.length;P++){var A=O[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(E,A.key,A)}}return function(E,O,P){return O&&S(E.prototype,O),P&&S(E,P),E}}(),h=t(2),w=o(h),p=t(5),y=t(58),c=o(y),d=t(63),C=o(d),b=t(71),u=o(b),g=t(72),s=o(g),l=function(){function S(E,O){x(this,S),this.hls=E,this.typeSupported=O}return f(S,[{key:"destroy",value:function(){var E=this.demuxer;E&&E.destroy()}},{key:"push",value:function(E,O,P,A,D,M,L,V){var j=this.demuxer;if(!j){var N=this.hls;if(C.default.probe(E))j=this.typeSupported.mp2t===!0?new C.default(N,s.default):new C.default(N,u.default);else{if(!c.default.probe(E))return void N.trigger(w.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});j=new c.default(N,u.default)}this.demuxer=j}j.push(E,O,P,A,D,M,L,V)}}]),S}();T.default=l},function(B,T){function t(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var o=function(){function f(h,w){for(var p=0;p<w.length;p++){var y=w[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,w,p){return w&&f(h.prototype,w),p&&f(h,p),h}}(),x=function(){function f(){t(this,f)}return o(f,null,[{key:"bufferInfo",value:function(h,w,p){if(h){var y,c=h.buffered,d=[];for(y=0;y<c.length;y++)d.push({start:c.start(y),end:c.end(y)});return this.bufferedInfo(d,w,p)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(h,w,p){var y,c,d,C,b,u=[];for(h.sort(function(E,O){var P=E.start-O.start;return P||O.end-E.end}),b=0;b<h.length;b++){var g=u.length;if(g){var s=u[g-1].end;h[b].start-s<p?h[b].end>s&&(u[g-1].end=h[b].end):u.push(h[b])}else u.push(h[b])}for(b=0,y=0,c=d=w;b<u.length;b++){var l=u[b].start,S=u[b].end;if(w+p>=l&&w<S)c=l,d=S,y=d-w;else if(w+p<l){C=l;break}}return{len:y,start:c,end:d,nextStart:C}}}]),f}();T.default=x},function(B,T,t){(function(o,x){function f(i,v){for(var I=-1,W=i.length,q=Array(W);++I<W;)q[I]=v(i[I],I,i);return q}function h(i,v){for(var I=-1,W=i.length;++I<W;)if(v(i[I],I,i))return!0;return!1}function w(i,v){for(var I=-1,W=Array(i);++I<i;)W[I]=v(I);return W}function p(i,v){return f(v,function(I){return[I,i[I]]})}function y(i){return i&&i.Object===Object?i:null}function c(i){var v=!1;if(i!=null&&typeof i.toString!="function")try{v=!!(i+"")}catch{}return v}function d(i){var v=-1,I=Array(i.size);return i.forEach(function(W,q){I[++v]=[q,W]}),I}function C(i){var v=-1,I=Array(i.size);return i.forEach(function(W){I[++v]=W}),I}function b(i){var v=-1,I=Array(i.size);return i.forEach(function(W){I[++v]=[W,W]}),I}function u(i){var v=-1,I=i?i.length:0;for(this.clear();++v<I;){var W=i[v];this.set(W[0],W[1])}}function g(){this.__data__=fn?fn(null):{}}function s(i){return this.has(i)&&delete this.__data__[i]}function l(i){var v=this.__data__;if(fn){var I=v[i];return I===sr?void 0:I}return Qr.call(v,i)?v[i]:void 0}function S(i){var v=this.__data__;return fn?v[i]!==void 0:Qr.call(v,i)}function E(i,v){var I=this.__data__;return I[i]=fn&&v===void 0?sr:v,this}function O(i){var v=-1,I=i?i.length:0;for(this.clear();++v<I;){var W=i[v];this.set(W[0],W[1])}}function P(){this.__data__=[]}function A(i){var v=this.__data__,I=we(v,i);if(I<0)return!1;var W=v.length-1;return I==W?v.pop():jn.call(v,I,1),!0}function D(i){var v=this.__data__,I=we(v,i);return I<0?void 0:v[I][1]}function M(i){return we(this.__data__,i)>-1}function L(i,v){var I=this.__data__,W=we(I,i);return W<0?I.push([i,v]):I[W][1]=v,this}function V(i){var v=-1,I=i?i.length:0;for(this.clear();++v<I;){var W=i[v];this.set(W[0],W[1])}}function j(){this.__data__={hash:new u,map:new(hn||O),string:new u}}function N(i){return F(this,i).delete(i)}function G(i){return F(this,i).get(i)}function K(i){return F(this,i).has(i)}function k(i,v){return F(this,i).set(i,v),this}function J(i){var v=-1,I=i?i.length:0;for(this.__data__=new V;++v<I;)this.add(i[v])}function se(i){return this.__data__.set(i,sr),this}function te(i){return this.__data__.has(i)}function oe(i){this.__data__=new O(i)}function re(){this.__data__=new O}function ee(i){return this.__data__.delete(i)}function Z(i){return this.__data__.get(i)}function ge(i){return this.__data__.has(i)}function Te(i,v){var I=this.__data__;return I instanceof O&&I.__data__.length==xr&&(I=this.__data__=new V(I.__data__)),I.set(i,v),this}function we(i,v){for(var I=i.length;I--;)if(Ct(i[I][0],v))return I;return-1}function Le(i,v){v=ke(v,i)?[v]:at(v);for(var I=0,W=v.length;i!=null&&I<W;)i=i[ft(v[I++])];return I&&I==W?i:void 0}function Ce(i,v){return Qr.call(i,v)||(typeof i>"u"?"undefined":qt(i))=="object"&&v in i&&ve(i)===null}function be(i,v){return v in Object(i)}function Ge(i,v,I,W,q){return i===v||(i==null||v==null||!Zt(i)&&!er(v)?i!==i&&v!==v:Ke(i,v,Ge,I,W,q))}function Ke(i,v,I,W,q,fe){var ae=e(i),me=e(v),pe=Dr,Ee=Dr;ae||(pe=Se(i),pe=pe==Nr?Ir:pe),me||(Ee=Se(v),Ee=Ee==Nr?Ir:Ee);var xe=pe==Ir&&!c(i),Ne=Ee==Ir&&!c(v),De=pe==Ee;if(De&&!xe)return fe||(fe=new oe),ae||yr(i)?Me(i,v,I,W,q,fe):H(i,v,pe,I,W,q,fe);if(!(q&_r)){var Fe=xe&&Qr.call(i,"__wrapped__"),Ve=Ne&&Qr.call(v,"__wrapped__");if(Fe||Ve){var he=Fe?i.value():i,Je=Ve?v.value():v;return fe||(fe=new oe),I(he,Je,W,q,fe)}}return!!De&&(fe||(fe=new oe),m(i,v,I,W,q,fe))}function je(i,v,I,W){var q=I.length,fe=q;if(i==null)return!fe;for(i=Object(i);q--;){var ae=I[q];if(ae[2]?ae[1]!==i[ae[0]]:!(ae[0]in i))return!1}for(;++q<fe;){ae=I[q];var me=ae[0],pe=i[me],Ee=ae[1];if(ae[2]){if(pe===void 0&&!(me in i))return!1}else{var xe=new oe,Ne;if(!(Ne===void 0?Ge(Ee,pe,W,br|_r,xe):Ne))return!1}}return!0}function Ze(i){return typeof i=="function"?i:i==null?cr:(typeof i>"u"?"undefined":qt(i))=="object"?e(i)?ze(i[0],i[1]):Oe(i):hr(i)}function Be(i){return Jn(Object(i))}function Oe(i){var v=X(i);return v.length==1&&v[0][2]?nt(v[0][0],v[0][1]):function(I){return I===i||je(I,i,v)}}function ze(i,v){return ke(i)&&lt(v)?nt(ft(i),v):function(I){var W=dr(I,i);return W===void 0&&W===v?Er(I,i):Ge(v,W,void 0,br|_r)}}function We(i){return function(v){return v==null?void 0:v[i]}}function gt(i){return function(v){return Le(v,i)}}function at(i){return e(i)?i:Gr(i)}function _e(i){return function(v){var I=Se(v);return I==jr?d(v):I==pr?b(v):p(v,i(v))}}function Me(i,v,I,W,q,fe){var ae=q&_r,me=i.length,pe=v.length;if(me!=pe&&!(ae&&pe>me))return!1;var Ee=fe.get(i);if(Ee)return Ee==v;var xe=-1,Ne=!0,De=q&br?new J:void 0;for(fe.set(i,v);++xe<me;){var Fe=i[xe],Ve=v[xe];if(W)var he=ae?W(Ve,Fe,xe,v,i,fe):W(Fe,Ve,xe,i,v,fe);if(he!==void 0){if(he)continue;Ne=!1;break}if(De){if(!h(v,function(Je,et){if(!De.has(et)&&(Fe===Je||I(Fe,Je,W,q,fe)))return De.add(et)})){Ne=!1;break}}else if(Fe!==Ve&&!I(Fe,Ve,W,q,fe)){Ne=!1;break}}return fe.delete(i),Ne}function H(i,v,I,W,q,fe,ae){switch(I){case on:if(i.byteLength!=v.byteLength||i.byteOffset!=v.byteOffset)return!1;i=i.buffer,v=v.buffer;case an:return!(i.byteLength!=v.byteLength||!W(new tr(i),new tr(v)));case Fr:case Qe:return+i==+v;case Lr:return i.name==v.name&&i.message==v.message;case zr:return i!=+i?v!=+v:i==+v;case Zr:case wr:return i==v+"";case jr:var me=d;case pr:var pe=fe&_r;if(me||(me=C),i.size!=v.size&&!pe)return!1;var Ee=ae.get(i);return Ee?Ee==v:(fe|=br,ae.set(i,v),Me(me(i),me(v),W,q,fe,ae));case Jr:if(Dn)return Dn.call(i)==Dn.call(v)}return!1}function m(i,v,I,W,q,fe){var ae=q&_r,me=mr(i),pe=me.length,Ee=mr(v),xe=Ee.length;if(pe!=xe&&!ae)return!1;for(var Ne=pe;Ne--;){var De=me[Ne];if(!(ae?De in v:Ce(v,De)))return!1}var Fe=fe.get(i);if(Fe)return Fe==v;var Ve=!0;fe.set(i,v);for(var he=ae;++Ne<pe;){De=me[Ne];var Je=i[De],et=v[De];if(W)var rt=ae?W(et,Je,De,v,i,fe):W(Je,et,De,i,v,fe);if(!(rt===void 0?Je===et||I(Je,et,W,q,fe):rt)){Ve=!1;break}he||(he=De=="constructor")}if(Ve&&!he){var ht=i.constructor,bt=v.constructor;ht!=bt&&"constructor"in i&&"constructor"in v&&!(typeof ht=="function"&&ht instanceof ht&&typeof bt=="function"&&bt instanceof bt)&&(Ve=!1)}return fe.delete(i),Ve}function F(i,v){var I=i.__data__;return $e(v)?I[typeof v=="string"?"string":"hash"]:I.map}function X(i){for(var v=r(i),I=v.length;I--;)v[I][2]=lt(v[I][1]);return v}function le(i,v){var I=i[v];return Qt(I)?I:void 0}function ve(i){return Mn(Object(i))}function Se(i){return qr.call(i)}function ye(i,v,I){v=ke(v,i)?[v]:at(v);for(var W,q=-1,ae=v.length;++q<ae;){var fe=ft(v[q]);if(!(W=i!=null&&I(i,fe)))break;i=i[fe]}if(W)return W;var ae=i?i.length:0;return!!ae&&St(ae)&&Ie(fe,ae)&&(e(i)||ar(i)||Yt(i))}function Re(i){var v=i?i.length:void 0;return St(v)&&(e(i)||ar(i)||Yt(i))?w(v,String):null}function Ie(i,v){return v=v??Vr,!!v&&(typeof i=="number"||Xn.test(i))&&i>-1&&i%1==0&&i<v}function ke(i,v){if(e(i))return!1;var I=typeof i>"u"?"undefined":qt(i);return!(I!="number"&&I!="symbol"&&I!="boolean"&&i!=null&&!ur(i))||Yr.test(i)||!Rn.test(i)||v!=null&&i in Object(v)}function $e(i){var v=typeof i>"u"?"undefined":qt(i);return v=="string"||v=="number"||v=="symbol"||v=="boolean"?i!=="__proto__":i===null}function qe(i){var v=i&&i.constructor,I=typeof v=="function"&&v.prototype||rn;return i===I}function lt(i){return i===i&&!Zt(i)}function nt(i,v){return function(I){return I!=null&&I[i]===v&&(v!==void 0||i in Object(I))}}function ft(i){if(typeof i=="string"||ur(i))return i;var v=i+"";return v=="0"&&1/i==-kr?"-0":v}function _t(i){if(i!=null){try{return Nn.call(i)}catch{}try{return i+""}catch{}}return""}function Ct(i,v){return i===v||i!==i&&v!==v}function Yt(i){return mt(i)&&Qr.call(i,"callee")&&(!Fn.call(i,"callee")||qr.call(i)==Nr)}function Gt(i){return i!=null&&St(ui(i))&&!jt(i)}function mt(i){return er(i)&&Gt(i)}function jt(i){var v=Zt(i)?qr.call(i):"";return v==Cr||v==Rr}function St(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=Vr}function Zt(i){var v=typeof i>"u"?"undefined":qt(i);return!!i&&(v=="object"||v=="function")}function er(i){return!!i&&(typeof i>"u"?"undefined":qt(i))=="object"}function Qt(i){if(!Zt(i))return!1;var v=jt(i)||c(i)?Zn:Hr;return v.test(_t(i))}function ar(i){return typeof i=="string"||!e(i)&&er(i)&&qr.call(i)==wr}function ur(i){return(typeof i>"u"?"undefined":qt(i))=="symbol"||er(i)&&qr.call(i)==Jr}function yr(i){return er(i)&&St(i.length)&&!!rr[qr.call(i)]}function dr(i,v,I){var W=i==null?void 0:Le(i,v);return W===void 0?I:W}function Er(i,v){return i!=null&&ye(i,v,be)}function mr(i){var v=qe(i);if(!v&&!Gt(i))return Be(i);var I=Re(i),W=!!I,q=I||[],fe=q.length;for(var ae in i)!Ce(i,ae)||W&&(ae=="length"||Ie(ae,fe))||v&&ae=="constructor"||q.push(ae);return q}function cr(i){return i}function hr(i){return ke(i)?We(ft(i)):gt(i)}var qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol?"symbol":typeof i},Gr=t(33),xr=200,sr="__lodash_hash_undefined__",br=1,_r=2,kr=1/0,Vr=9007199254740991,Nr="[object Arguments]",Dr="[object Array]",Fr="[object Boolean]",Qe="[object Date]",Lr="[object Error]",Cr="[object Function]",Rr="[object GeneratorFunction]",jr="[object Map]",zr="[object Number]",Ir="[object Object]",Xr="[object Promise]",Zr="[object RegExp]",pr="[object Set]",wr="[object String]",Jr="[object Symbol]",en="[object WeakMap]",an="[object ArrayBuffer]",on="[object DataView]",sn="[object Float32Array]",$n="[object Float64Array]",xn="[object Int8Array]",In="[object Int16Array]",kn="[object Int32Array]",yn="[object Uint8Array]",Ln="[object Uint8ClampedArray]",Cn="[object Uint16Array]",ln="[object Uint32Array]",Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yr=/^\w*$/,Kr=/[\\^$.*+?()[\]{}|]/g,Hr=/^\[object .+?Constructor\]$/,Xn=/^(?:0|[1-9]\d*)$/,rr={};rr[sn]=rr[$n]=rr[xn]=rr[In]=rr[kn]=rr[yn]=rr[Ln]=rr[Cn]=rr[ln]=!0,rr[Nr]=rr[Dr]=rr[an]=rr[Fr]=rr[on]=rr[Qe]=rr[Lr]=rr[Cr]=rr[jr]=rr[zr]=rr[Ir]=rr[Zr]=rr[pr]=rr[wr]=rr[en]=!1;var un={function:!0,object:!0},bn=un[qt(T)]&&T&&!T.nodeType?T:void 0,_n=un[qt(o)]&&o&&!o.nodeType?o:void 0,An=y(bn&&_n&&(typeof x>"u"?"undefined":qt(x))=="object"&&x),cn=y(un[typeof self>"u"?"undefined":qt(self)]&&self),dn=y(un[typeof window>"u"?"undefined":qt(window)]&&window),tn=y(un[qt(void 0)]&&void 0),Br=An||dn!==(tn&&tn.window)&&dn||cn||tn||Function("return this")(),wn=Array.prototype,rn=Object.prototype,Nn=Function.prototype.toString,Qr=rn.hasOwnProperty,qr=rn.toString,Zn=RegExp("^"+Nn.call(Qr).replace(Kr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),a=Br.Symbol,tr=Br.Uint8Array,Fn=rn.propertyIsEnumerable,jn=wn.splice,Mn=Object.getPrototypeOf,Jn=Object.keys,Pn=le(Br,"DataView"),hn=le(Br,"Map"),En=le(Br,"Promise"),On=le(Br,"Set"),Tn=le(Br,"WeakMap"),fn=le(Object,"create"),Qn=_t(Pn),oi=_t(hn),si=_t(En),li=_t(On),Bn=_t(Tn),pn=a?a.prototype:void 0,Dn=pn?pn.valueOf:void 0;u.prototype.clear=g,u.prototype.delete=s,u.prototype.get=l,u.prototype.has=S,u.prototype.set=E,O.prototype.clear=P,O.prototype.delete=A,O.prototype.get=D,O.prototype.has=M,O.prototype.set=L,V.prototype.clear=j,V.prototype.delete=N,V.prototype.get=G,V.prototype.has=K,V.prototype.set=k,J.prototype.add=J.prototype.push=se,J.prototype.has=te,oe.prototype.clear=re,oe.prototype.delete=ee,oe.prototype.get=Z,oe.prototype.has=ge,oe.prototype.set=Te;var ui=We("length");(Pn&&Se(new Pn(new ArrayBuffer(1)))!=on||hn&&Se(new hn)!=jr||En&&Se(En.resolve())!=Xr||On&&Se(new On)!=pr||Tn&&Se(new Tn)!=en)&&(Se=function(i){var v=qr.call(i),I=v==Ir?i.constructor:void 0,W=I?_t(I):void 0;if(W)switch(W){case Qn:return on;case oi:return jr;case si:return Xr;case li:return pr;case Bn:return en}return v});var e=Array.isArray,r=_e(mr);o.exports=Ze}).call(T,t(17)(B),function(){return this}())},function(B,T,t){(function(o,x){function f(ye){return ye&&ye.Object===Object?ye:null}function h(ye){var Re=!1;if(ye!=null&&typeof ye.toString!="function")try{Re=!!(ye+"")}catch{}return Re}function w(ye){var Re=-1,Ie=ye?ye.length:0;for(this.clear();++Re<Ie;){var ke=ye[Re];this.set(ke[0],ke[1])}}function p(){this.__data__=ve?ve(null):{}}function y(ye){return this.has(ye)&&delete this.__data__[ye]}function c(ye){var Re=this.__data__;if(ve){var Ie=Re[ye];return Ie===ge?void 0:Ie}return H.call(Re,ye)?Re[ye]:void 0}function d(ye){var Re=this.__data__;return ve?Re[ye]!==void 0:H.call(Re,ye)}function C(ye,Re){var Ie=this.__data__;return Ie[ye]=ve&&Re===void 0?ge:Re,this}function b(ye){var Re=-1,Ie=ye?ye.length:0;for(this.clear();++Re<Ie;){var ke=ye[Re];this.set(ke[0],ke[1])}}function u(){this.__data__=[]}function g(ye){var Re=this.__data__,Ie=L(Re,ye);if(Ie<0)return!1;var ke=Re.length-1;return Ie==ke?Re.pop():X.call(Re,Ie,1),!0}function s(ye){var Re=this.__data__,Ie=L(Re,ye);return Ie<0?void 0:Re[Ie][1]}function l(ye){return L(this.__data__,ye)>-1}function S(ye,Re){var Ie=this.__data__,ke=L(Ie,ye);return ke<0?Ie.push([ye,Re]):Ie[ke][1]=Re,this}function E(ye){var Re=-1,Ie=ye?ye.length:0;for(this.clear();++Re<Ie;){var ke=ye[Re];this.set(ke[0],ke[1])}}function O(){this.__data__={hash:new w,map:new(le||b),string:new w}}function P(ye){return V(this,ye).delete(ye)}function A(ye){return V(this,ye).get(ye)}function D(ye){return V(this,ye).has(ye)}function M(ye,Re){return V(this,ye).set(ye,Re),this}function L(ye,Re){for(var Ie=ye.length;Ie--;)if(k(ye[Ie][0],Re))return Ie;return-1}function V(ye,Re){var Ie=ye.__data__;return N(Re)?Ie[typeof Re=="string"?"string":"hash"]:Ie.map}function j(ye,Re){var Ie=ye[Re];return te(Ie)?Ie:void 0}function N(ye){var Re=typeof ye>"u"?"undefined":re(ye);return Re=="string"||Re=="number"||Re=="symbol"||Re=="boolean"?ye!=="__proto__":ye===null}function G(ye){if(ye!=null){try{return Me.call(ye)}catch{}try{return ye+""}catch{}}return""}function K(ye,Re){if(typeof ye!="function"||Re&&typeof Re!="function")throw new TypeError(Z);var Ie=function ke(){var $e=arguments,qe=Re?Re.apply(this,$e):$e[0],lt=ke.cache;if(lt.has(qe))return lt.get(qe);var nt=ye.apply(this,$e);return ke.cache=lt.set(qe,nt),nt};return Ie.cache=new(K.Cache||E),Ie}function k(ye,Re){return ye===Re||ye!==ye&&Re!==Re}function J(ye){var Re=se(ye)?m.call(ye):"";return Re==Te||Re==we}function se(ye){var Re=typeof ye>"u"?"undefined":re(ye);return!!ye&&(Re=="object"||Re=="function")}function te(ye){if(!se(ye))return!1;var Re=J(ye)||h(ye)?F:Ge;return Re.test(G(ye))}function oe(ye){return ye==null?"":ee(ye)}var re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ye){return typeof ye}:function(ye){return ye&&typeof Symbol=="function"&&ye.constructor===Symbol?"symbol":typeof ye},ee=t(85),Z="Expected a function",ge="__lodash_hash_undefined__",Te="[object Function]",we="[object GeneratorFunction]",Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,Ce=/[\\^$.*+?()[\]{}|]/g,be=/\\(\\)?/g,Ge=/^\[object .+?Constructor\]$/,Ke={function:!0,object:!0},je=Ke[re(T)]&&T&&!T.nodeType?T:void 0,Ze=Ke[re(o)]&&o&&!o.nodeType?o:void 0,Be=f(je&&Ze&&(typeof x>"u"?"undefined":re(x))=="object"&&x),Oe=f(Ke[typeof self>"u"?"undefined":re(self)]&&self),ze=f(Ke[typeof window>"u"?"undefined":re(window)]&&window),We=f(Ke[re(void 0)]&&void 0),gt=Be||ze!==(We&&We.window)&&ze||Oe||We||Function("return this")(),at=Array.prototype,_e=Object.prototype,Me=Function.prototype.toString,H=_e.hasOwnProperty,m=_e.toString,F=RegExp("^"+Me.call(H).replace(Ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=at.splice,le=j(gt,"Map"),ve=j(Object,"create");w.prototype.clear=p,w.prototype.delete=y,w.prototype.get=c,w.prototype.has=d,w.prototype.set=C,b.prototype.clear=u,b.prototype.delete=g,b.prototype.get=s,b.prototype.has=l,b.prototype.set=S,E.prototype.clear=O,E.prototype.delete=P,E.prototype.get=A,E.prototype.has=D,E.prototype.set=M;var Se=K(function(ye){var Re=[];return oe(ye).replace(Le,function(Ie,ke,$e,qe){Re.push($e?qe.replace(be,"$1"):ke||Ie)}),Re});K.Cache=E,o.exports=Se}).call(T,t(17)(B),function(){return this}())},function(B,T){function t(){d&&y&&(d=!1,y.length?c=y.concat(c):C=-1,c.length&&o())}function o(){if(!d){var b=h(t);d=!0;for(var u=c.length;u;){for(y=c,c=[];++C<u;)y&&y[C].run();C=-1,u=c.length}y=null,d=!1,w(b)}}function x(b,u){this.fun=b,this.array=u}function f(){}var h,w,p=B.exports={};(function(){try{h=setTimeout}catch{h=function(){throw new Error("setTimeout is not defined")}}try{w=clearTimeout}catch{w=function(){throw new Error("clearTimeout is not defined")}}})();var y,c=[],d=!1,C=-1;p.nextTick=function(b){var u=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)u[g-1]=arguments[g];c.push(new x(b,u)),c.length!==1||d||h(o,0)},x.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.binding=function(b){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(b){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(B,T,t){B.exports=t(92)},function(B,T,t){B.exports=t(95)},function(B,T,t){B.exports=t(98)},function(B,T,t){B.exports=t(99)},function(B,T,t){B.exports=t(102)},function(B,T,t){B.exports=t(103)},function(B,T,t){B.exports=t(105)},function(B,T,t){B.exports=t(106)},function(B,T,t){B.exports=t(108)},function(B,T,t){B.exports=t(109)},function(B,T,t){B.exports=t(120)},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'},function(B,T,t){B.exports=t.p+"a8c874b93b3d848f39a71260c57e3863.cur"},function(B,T,t){function o(O){return O&&O.__esModule?O:{default:O}}function x(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}function f(O,P){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||(typeof P>"u"?"undefined":w(P))!=="object"&&typeof P!="function"?O:P}function h(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof P>"u"?"undefined":w(P)));O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(O,P):O.__proto__=P)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol?"symbol":typeof O};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function O(P,A){for(var D=0;D<A.length;D++){var M=A[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(P,M.key,M)}}return function(P,A,D){return A&&O(P.prototype,A),D&&O(P,D),P}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=t(31),u=o(b),g=t(5),s=t(4),l=t(51),S=o(l),E=function(O){function P(A){x(this,P);var D=f(this,Object.getPrototypeOf(P).call(this,A,c.default.FRAG_LOADING,c.default.FRAG_LOADED,c.default.ERROR));return D.lastLoadedFragLevel=0,D._autoLevelCapping=-1,D._nextAutoLevel=-1,D.hls=A,D.onCheck=D.abandonRulesCheck.bind(D),D}return h(P,O),p(P,[{key:"destroy",value:function(){this.clearTimer(),C.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(A){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var D=this.hls,M=A.frag.level,L=D.levels[M].details.live,V=D.config,j=void 0,N=void 0;L?(j=V.abrEwmaFastLive,N=V.abrEwmaSlowLive):(j=V.abrEwmaFastVoD,N=V.abrEwmaSlowVoD),this.bwEstimator=new S.default(D,N,j)}var G=A.frag;G.trequest=performance.now(),this.fragCurrent=G}},{key:"abandonRulesCheck",value:function(){var A=this.hls,D=A.media,M=this.fragCurrent;if(!M.loader||M.loader.stats&&M.loader.stats.aborted)return s.logger.warn("frag loader destroy or aborted, disarm abandonRulesCheck"),void this.clearTimer();if(D&&(!D.paused||!D.readyState)&&M.autoLevel&&M.level){var L=performance.now()-M.trequest;if(L>500*M.duration){var V=A.levels,j=Math.max(1,1e3*M.loaded/L),N=Math.max(M.loaded,Math.round(M.duration*V[M.level].bitrate/8)),G=D.currentTime,K=(N-M.loaded)/j,k=u.default.bufferInfo(D,G,A.config.maxBufferHole).end-G;if(k<2*M.duration&&K>k){var J=void 0,se=void 0;for(se=M.level-1;se>=0&&(J=M.duration*V[se].bitrate/(6.4*j),s.logger.log("fragLoadedDelay/bufferStarvationDelay/fragLevelNextLoadedDelay["+se+"] :"+K.toFixed(1)+"/"+k.toFixed(1)+"/"+J.toFixed(1)),!(J<k));se--);J<K&&(se=Math.max(0,se),A.nextLoadLevel=se,this.bwEstimator.sample(L,M.loaded),s.logger.warn("loading too slow, abort fragment loading and switch to level "+se),M.loader.abort(),this.clearTimer(),A.trigger(c.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:M}))}}}}},{key:"onFragLoaded",value:function(A){var D=A.stats;D.aborted===void 0&&A.frag.loadCounter===1&&this.bwEstimator.sample(performance.now()-D.trequest,D.loaded),this.clearTimer(),this.lastLoadedFragLevel=A.frag.level,this._nextAutoLevel=-1}},{key:"onError",value:function(A){switch(A.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(A){this._autoLevelCapping=A}},{key:"nextAutoLevel",get:function(){var A,D,M=this.hls,L=M.levels,V=M.config;if(D=this._autoLevelCapping===-1&&L&&L.length?L.length-1:this._autoLevelCapping,this._nextAutoLevel!==-1)return Math.min(this._nextAutoLevel,D);var j=this.bwEstimator.getEstimate(),N=void 0;for(A=0;A<=D;A++)if(N=A<=this.lastLoadedFragLevel?V.abrBandWidthFactor*j:V.abrBandWidthUpFactor*j,N<L[A].bitrate)return Math.max(0,A-1);return A-1},set:function(A){this._nextAutoLevel=A}}]),P}(C.default);T.default=E},function(B,T,t){function o(s){return s&&s.__esModule?s:{default:s}}function x(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function f(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||(typeof l>"u"?"undefined":w(l))!=="object"&&typeof l!="function"?s:l}function h(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof l>"u"?"undefined":w(l)));s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol?"symbol":typeof s};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function s(l,S){for(var E=0;E<S.length;E++){var O=S[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(l,O.key,O)}}return function(l,S,E){return S&&s(l.prototype,S),E&&s(l,E),l}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=t(4),u=t(5),g=function(s){function l(S){x(this,l);var E=f(this,Object.getPrototypeOf(l).call(this,S,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.BUFFER_RESET,c.default.BUFFER_APPENDING,c.default.BUFFER_CODECS,c.default.BUFFER_EOS,c.default.BUFFER_FLUSHING,c.default.LEVEL_UPDATED));return E._msDuration=null,E._levelDuration=null,E.onsbue=E.onSBUpdateEnd.bind(E),E.onsbe=E.onSBUpdateError.bind(E),E}return h(l,s),p(l,[{key:"destroy",value:function(){C.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(S){var E=this.media=S.media;if(E){var O=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),O.addEventListener("sourceopen",this.onmso),O.addEventListener("sourceended",this.onmse),O.addEventListener("sourceclose",this.onmsc),E.src=URL.createObjectURL(O)}}},{key:"onMediaDetaching",value:function(){var S=this.mediaSource;if(S){if(S.readyState==="open")try{S.endOfStream()}catch(E){b.logger.warn("onMediaDetaching:"+E.message+" while calling endOfStream")}S.removeEventListener("sourceopen",this.onmso),S.removeEventListener("sourceended",this.onmse),S.removeEventListener("sourceclose",this.onmsc);try{this.media.src="",this.media.removeAttribute("src")}catch(E){b.logger.warn("onMediaDetaching:"+E.message+" while unlinking video.src")}this.mediaSource=null,this.media=null,this.pendingTracks=null,this.sourceBuffer=null}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(c.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){b.logger.log("media source opened"),this.hls.trigger(c.default.MEDIA_ATTACHED,{media:this.media}),this.mediaSource.removeEventListener("sourceopen",this.onmso);var S=this.pendingTracks;S&&(this.onBufferCodecs(S),this.pendingTracks=null,this.doAppending())}},{key:"onMediaSourceClose",value:function(){b.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){b.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){this._needsFlush&&this.doFlush(),this._needsEos&&this.onBufferEos(),this.hls.trigger(c.default.BUFFER_APPENDED),this.doAppending()}},{key:"onSBUpdateError",value:function(S){b.logger.error("sourceBuffer error:"+S),this.hls.trigger(c.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var S=this.sourceBuffer;if(S){for(var E in S){var O=S[E];try{this.mediaSource.removeSourceBuffer(O),O.removeEventListener("updateend",this.onsbue),O.removeEventListener("error",this.onsbe)}catch{}}this.sourceBuffer=null}this.flushRange=[],this.appended=0}},{key:"onBufferCodecs",value:function(S){var E=this.mediaSource;if(!E||E.readyState!=="open")return void(this.pendingTracks=S);if(!this.sourceBuffer){var O={};for(var P in S){var A=S[P],D=A.levelCodec||A.codec,M=A.container+";codecs="+D;b.logger.log("creating sourceBuffer with mimeType:"+M);var L=O[P]=E.addSourceBuffer(M);L.addEventListener("updateend",this.onsbue),L.addEventListener("error",this.onsbe)}this.sourceBuffer=O}}},{key:"onBufferAppending",value:function(S){this.segments?this.segments.push(S):this.segments=[S],this.doAppending()}},{key:"onBufferAppendFail",value:function(S){b.logger.error("sourceBuffer error:"+S.event),this.hls.trigger(c.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(){var S=this.sourceBuffer,E=this.mediaSource;E&&E.readyState==="open"&&(S.audio&&S.audio.updating||S.video&&S.video.updating?this._needsEos=!0:(b.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment"),E.endOfStream(),this._needsEos=!1))}},{key:"onBufferFlushing",value:function(S){this.flushRange.push({start:S.startOffset,end:S.endOffset}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(S){var E=S.details;E.fragments.length!==0&&(this._levelDuration=E.totalduration+E.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){if(this._levelDuration!==null){var S=this.media,E=this.mediaSource;if(S&&E&&S.readyState!==0&&E.readyState==="open"){for(var O in E.sourceBuffers)if(E.sourceBuffers[O].updating)return;this._msDuration===null&&(this._msDuration=E.duration),this._levelDuration>this._msDuration&&(b.logger.log("Updating mediasource duration to "+this._levelDuration),E.duration=this._levelDuration,this._msDuration=this._levelDuration)}}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var S=this.flushRange[0];if(!this.flushBuffer(S.start,S.end))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(this.flushRange.length===0){this._needsFlush=!1;var E=0,O=this.sourceBuffer;if(O)for(var P in O)E+=O[P].buffered.length;this.appended=E,this.hls.trigger(c.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var S=this.hls,E=this.sourceBuffer,O=this.segments;if(E){if(this.media.error)return O=[],void b.logger.error("trying to append although a media error occured, flush segment and abort");for(var P in E)if(E[P].updating)return;if(O.length){var A=O.shift();try{E[A.type].appendBuffer(A.data),this.appendError=0,this.appended++}catch(M){b.logger.error("error while trying to append buffer:"+M.message),O.unshift(A);var D={type:u.ErrorTypes.MEDIA_ERROR};if(M.code===22)return this.segments=[],D.details=u.ErrorDetails.BUFFER_FULL_ERROR,void S.trigger(c.default.ERROR,D);if(this.appendError?this.appendError++:this.appendError=1,D.details=u.ErrorDetails.BUFFER_APPEND_ERROR,D.frag=this.fragCurrent,this.appendError>S.config.appendErrorMaxRetry)return b.logger.log("fail "+S.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),O=[],D.fatal=!0,void S.trigger(c.default.ERROR,D);D.fatal=!1,S.trigger(c.default.ERROR,D)}}}}},{key:"flushBuffer",value:function(S,E){var O,P,A,D,M,L;if(this.flushBufferCounter<this.appended&&this.sourceBuffer)for(var V in this.sourceBuffer){if(O=this.sourceBuffer[V],O.updating)return b.logger.warn("cannot flush, sb updating in progress"),!1;for(P=0;P<O.buffered.length;P++)if(A=O.buffered.start(P),D=O.buffered.end(P),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&E===Number.POSITIVE_INFINITY?(M=S,L=E):(M=Math.max(A,S),L=Math.min(D,E)),Math.min(L,D)-M>.5)return this.flushBufferCounter++,b.logger.log("flush "+V+" ["+M+","+L+"], of ["+A+","+D+"], pos:"+this.media.currentTime),O.remove(M,L),!1}else b.logger.warn("abort flushing too many retries");return b.logger.log("buffer flushed"),!0}}]),l}(C.default);T.default=g},function(B,T,t){function o(u){return u&&u.__esModule?u:{default:u}}function x(u,g){if(!(u instanceof g))throw new TypeError("Cannot call a class as a function")}function f(u,g){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||(typeof g>"u"?"undefined":w(g))!=="object"&&typeof g!="function"?u:g}function h(u,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof g>"u"?"undefined":w(g)));u.prototype=Object.create(g&&g.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(u,g):u.__proto__=g)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol?"symbol":typeof u};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function u(g,s){for(var l=0;l<s.length;l++){var S=s[l];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,s,l){return s&&u(g.prototype,s),l&&u(g,l),g}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=function(u){function g(s){return x(this,g),f(this,Object.getPrototypeOf(g).call(this,s,c.default.MEDIA_ATTACHING,c.default.MANIFEST_PARSED))}return h(g,u),p(g,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onMediaAttaching",value:function(s){this.media=s.media instanceof HTMLVideoElement?s.media:null}},{key:"onManifestParsed",value:function(s){this.hls.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=s.levels,this.hls.firstLevel=this.getMaxLevel(s.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var s=this.levels?this.levels.length:0;s&&(this.hls.autoLevelCapping=this.getMaxLevel(s-1),this.hls.autoLevelCapping>this.autoLevelCapping&&this.hls.streamController.nextLevelSwitch(),this.autoLevelCapping=this.hls.autoLevelCapping)}}},{key:"getMaxLevel",value:function(s){var l=void 0,S=void 0,E=void 0,O=this.mediaWidth,P=this.mediaHeight,A=0,D=0;for(S=0;S<=s&&(E=this.levels[S],l=S,A=E.width,D=E.height,!(O<=A||P<=D));S++);return l}},{key:"contentScaleFactor",get:function(){var s=1;try{s=window.devicePixelRatio}catch{}return s}},{key:"mediaWidth",get:function(){var s=void 0;return this.media&&(s=this.media.width||this.media.clientWidth||this.media.offsetWidth,s*=this.contentScaleFactor),s}},{key:"mediaHeight",get:function(){var s=void 0;return this.media&&(s=this.media.height||this.media.clientHeight||this.media.offsetHeight,s*=this.contentScaleFactor),s}}]),g}(C.default);T.default=b},function(B,T,t){function o(y){return y&&y.__esModule?y:{default:y}}function x(y,c){if(!(y instanceof c))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function y(c,d){for(var C=0;C<d.length;C++){var b=d[C];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,d,C){return d&&y(c.prototype,d),C&&y(c,C),c}}(),h=t(76),w=o(h),p=function(){function y(c,d,C){x(this,y),this.hls=c,this.defaultEstimate_=5e5,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new w.default(d),this.fast_=new w.default(C)}return f(y,[{key:"sample",value:function(c,d){c=Math.max(c,this.minDelayMs_);var C=8e3*d/c,b=c/1e3;this.fast_.sample(b,C),this.slow_.sample(b,C)}},{key:"getEstimate",value:function(){return!this.fast_||this.fast_.getTotalWeight()<this.minWeight_?this.defaultEstimate_:Math.min(this.fast_.getEstimate(),this.slow_.getEstimate())}},{key:"destroy",value:function(){}}]),y}();T.default=p},function(B,T,t){function o(s){return s&&s.__esModule?s:{default:s}}function x(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function f(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||(typeof l>"u"?"undefined":w(l))!=="object"&&typeof l!="function"?s:l}function h(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof l>"u"?"undefined":w(l)));s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol?"symbol":typeof s};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function s(l,S){for(var E=0;E<S.length;E++){var O=S[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(l,O.key,O)}}return function(l,S,E){return S&&s(l.prototype,S),E&&s(l,E),l}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=t(4),u=t(5),g=function(s){function l(S){x(this,l);var E=f(this,Object.getPrototypeOf(l).call(this,S,c.default.MANIFEST_LOADED,c.default.LEVEL_LOADED,c.default.ERROR));return E.ontick=E.tick.bind(E),E._manualLevel=E._autoLevelCapping=-1,E}return h(l,s),p(l,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0,this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(S){var E,O,P=[],A=[],D={},M=!1,L=!1,V=this.hls;if(S.levels.forEach(function(j){j.videoCodec&&(M=!0),j.audioCodec&&(L=!0);var N=D[j.bitrate];N===void 0?(D[j.bitrate]=P.length,j.url=[j.url],j.urlId=0,P.push(j)):P[N].url.push(j.url)}),M&&L?P.forEach(function(j){j.videoCodec&&A.push(j)}):A=P,A=A.filter(function(j){var N=function(J){return MediaSource.isTypeSupported("audio/mp4;codecs="+J)},G=function(J){return MediaSource.isTypeSupported("video/mp4;codecs="+J)},K=j.audioCodec,k=j.videoCodec;return(!K||N(K))&&(!k||G(k))}),A.length){for(E=A[0].bitrate,A.sort(function(j,N){return j.bitrate-N.bitrate}),this._levels=A,O=0;O<A.length;O++)if(A[O].bitrate===E){this._firstLevel=O,b.logger.log("manifest loaded,"+A.length+" level(s) found, first bitrate:"+E);break}V.trigger(c.default.MANIFEST_PARSED,{levels:this._levels,firstLevel:this._firstLevel,stats:S.stats})}else V.trigger(c.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:V.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(S){var E=this._levels;if(S>=0&&S<E.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level=S,b.logger.log("switching to level "+S),this.hls.trigger(c.default.LEVEL_SWITCH,{level:S});var O=E[S];if(O.details===void 0||O.details.live===!0){b.logger.log("(re)loading playlist for level "+S);var P=O.urlId;this.hls.trigger(c.default.LEVEL_LOADING,{url:O.url[P],level:S,id:P})}}else this.hls.trigger(c.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:S,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(S){if(!S.fatal){var E=S.details,O=this.hls,P=void 0,A=void 0,D=!1;switch(E){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:P=S.frag.level;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:P=S.level,D=!0}if(P!==void 0)if(A=this._levels[P],A.urlId<A.url.length-1)A.urlId++,A.details=void 0,b.logger.warn("level controller,"+E+" for level "+P+": switching to redundant stream id "+A.urlId);else{var M=this._manualLevel===-1&&P;M?(b.logger.warn("level controller,"+E+": emergency switch-down for next fragment"),O.abrController.nextAutoLevel=0):A&&A.details&&A.details.live?(b.logger.warn("level controller,"+E+" on live stream, discard"),D&&(this._level=void 0)):E!==u.ErrorDetails.FRAG_LOAD_ERROR&&E!==u.ErrorDetails.FRAG_LOAD_TIMEOUT&&(b.logger.error("cannot recover "+E+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),S.fatal=!0,O.trigger(c.default.ERROR,S))}}}},{key:"onLevelLoaded",value:function(S){if(S.level===this._level){var E=S.details;if(E.live){var O=1e3*E.targetduration,P=this._levels[S.level],A=P.details;A&&E.endSN===A.endSN&&(O/=2,b.logger.log("same live playlist, reload twice faster")),O-=performance.now()-S.stats.trequest,O=Math.max(1e3,Math.round(O)),b.logger.log("live playlist, reload in "+O+" ms"),this.timer=setTimeout(this.ontick,O)}else this.timer=null}}},{key:"tick",value:function(){var S=this._level;if(S!==void 0&&this.canload){var E=this._levels[S],O=E.urlId;this.hls.trigger(c.default.LEVEL_LOADING,{url:E.url[O],level:S,id:O})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(S){var E=this._levels;E&&E.length>S&&(this._level===S&&E[S].details!==void 0||this.setLevelInternal(S))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(S){this._manualLevel=S,this._startLevel===void 0&&(this._startLevel=S),S!==-1&&(this.level=S)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(S){this._firstLevel=S}},{key:"startLevel",get:function(){return this._startLevel===void 0?this._firstLevel:this._startLevel},set:function(S){this._startLevel=S}},{key:"nextLoadLevel",get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(S){this.level=S,this._manualLevel===-1&&(this.hls.abrController.nextAutoLevel=S)}}]),l}(C.default);T.default=g},function(B,T,t){function o(L){return L&&L.__esModule?L:{default:L}}function x(L,V){if(!(L instanceof V))throw new TypeError("Cannot call a class as a function")}function f(L,V){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!V||(typeof V>"u"?"undefined":w(V))!=="object"&&typeof V!="function"?L:V}function h(L,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof V>"u"?"undefined":w(V)));L.prototype=Object.create(V&&V.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(L,V):L.__proto__=V)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol?"symbol":typeof L};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function L(V,j){for(var N=0;N<j.length;N++){var G=j[N];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(V,G.key,G)}}return function(V,j,N){return j&&L(V.prototype,j),N&&L(V,N),V}}(),y=t(60),c=o(y),d=t(2),C=o(d),b=t(12),u=o(b),g=t(4),s=t(74),l=o(s),S=t(31),E=o(S),O=t(64),P=o(O),A=t(5),D={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR"},M=function(L){function V(j){x(this,V);var N=f(this,Object.getPrototypeOf(V).call(this,j,C.default.MEDIA_ATTACHED,C.default.MEDIA_DETACHING,C.default.MANIFEST_LOADING,C.default.MANIFEST_PARSED,C.default.LEVEL_LOADED,C.default.KEY_LOADED,C.default.FRAG_LOADED,C.default.FRAG_LOAD_EMERGENCY_ABORTED,C.default.FRAG_PARSING_INIT_SEGMENT,C.default.FRAG_PARSING_DATA,C.default.FRAG_PARSED,C.default.ERROR,C.default.BUFFER_APPENDED,C.default.BUFFER_FLUSHED));return N.config=j.config,N.audioCodecSwap=!1,N.ticks=0,N.ontick=N.tick.bind(N),N}return h(V,L),p(V,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.default.prototype.destroy.call(this),this.state=D.STOPPED}},{key:"startLoad",value:function(){var j=arguments.length<=0||arguments[0]===void 0?0:arguments[0];if(this.levels){var N=this.media,G=this.lastCurrentTime;this.stopLoad(),this.demuxer=new c.default(this.hls),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,N&&G?(g.logger.log("configure startPosition @"+G),this.lastPaused||(g.logger.log("resuming video"),N.play()),this.state=D.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:j,this.state=D.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else g.logger.warn("cannot start loading as manifest not parsed yet"),this.state=D.STOPPED}},{key:"stopLoad",value:function(){var j=this.fragCurrent;j&&(j.loader&&j.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=D.STOPPED}},{key:"tick",value:function(){this.ticks++,this.ticks===1&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var j,N,G,K=this.hls,k=K.config,J=this.media,se=J&&J.seeking;switch(this.state){case D.ERROR:case D.PAUSED:break;case D.STARTING:var te=K.startLevel;te===-1&&(te=0,this.fragBitrateTest=!0),this.level=K.nextLoadLevel=te,this.state=D.WAITING_LEVEL,this.loadedmetadata=!1;break;case D.IDLE:if(!J&&(this.startFragRequested||!k.startFragPrefetch))break;j=this.loadedmetadata?J.currentTime:this.nextLoadPosition,N=K.nextLoadLevel;var oe,re=E.default.bufferInfo(J,j,k.maxBufferHole),ee=re.len,Z=re.end,ge=this.fragPrevious;if(this.levels[N].hasOwnProperty("bitrate")?(oe=Math.max(8*k.maxBufferSize/this.levels[N].bitrate,k.maxBufferLength),oe=Math.min(oe,k.maxMaxBufferLength)):oe=k.maxBufferLength,ee<oe){if(K.nextLoadLevel=N,this.level=N,G=this.levels[N].details,typeof G>"u"||G.live&&this.levelLastLoaded!==N){this.state=D.WAITING_LEVEL;break}var Te=G.fragments,we=Te.length,Le=Te[0].start,Ce=Te[we-1].start+Te[we-1].duration,be=void 0;if(G.live){var Ge=k.liveMaxLatencyDuration!==void 0?k.liveMaxLatencyDuration:k.liveMaxLatencyDurationCount*G.targetduration;if(Z<Math.max(Le,Ce-Ge)){var Ke=k.liveSyncDuration!==void 0?k.liveSyncDuration:k.liveSyncDurationCount*G.targetduration,je=Le+Math.max(0,G.totalduration-Ke);g.logger.log("buffer end: "+Z+" is located too far from the end of live sliding playlist, reset currentTime to : "+je.toFixed(3)),Z=je,J&&J.readyState&&J.duration>je&&(J.currentTime=je)}if(G.PTSKnown&&Z>Ce)break;if(this.startFragRequested&&!G.PTSKnown){if(ge){var Ze=ge.sn+1;Ze>=G.startSN&&Ze<=G.endSN&&(be=Te[Ze-G.startSN],g.logger.log("live playlist, switching playlist, load frag with next SN: "+be.sn))}be||(be=Te[Math.min(we-1,Math.round(we/2))],g.logger.log("live playlist, switching playlist, unknown, load middle frag : "+be.sn))}}else Z<Le&&(be=Te[0]);if(be||function(){var at=k.maxFragLookUpTolerance;Z<Ce?((Z>Ce-at||se)&&(at=0),be=l.default.search(Te,function(_e){return _e.start+_e.duration-at<=Z?1:_e.start-at>Z?-1:0})):be=Te[we-1]}(),be){if(Le=be.start,ge&&be.level===ge.level&&be.sn===ge.sn){if(!(be.sn<G.endSN)){G.live||(this.hls.trigger(C.default.BUFFER_EOS),se||(this.state=D.ENDED));break}var Be=ge.deltaPTS,Oe=be.sn-G.startSN;Be&&Be>k.maxBufferHole?(be=Te[Oe-1],g.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),ge.loadCounter--):(be=Te[Oe+1],g.logger.log("SN just loaded, load next one: "+be.sn))}if(be.decryptdata.uri!=null&&be.decryptdata.key==null)g.logger.log("Loading key for "+be.sn+" of ["+G.startSN+" ,"+G.endSN+"],level "+N),this.state=D.KEY_LOADING,K.trigger(C.default.KEY_LOADING,{frag:be});else{if(g.logger.log("Loading "+be.sn+" of ["+G.startSN+" ,"+G.endSN+"],level "+N+", currentTime:"+j+",bufferEnd:"+Z.toFixed(3)),this.fragLoadIdx!==void 0?this.fragLoadIdx++:this.fragLoadIdx=0,be.loadCounter){be.loadCounter++;var ze=k.fragLoadingLoopThreshold;if(be.loadCounter>ze&&Math.abs(this.fragLoadIdx-be.loadIdx)<ze)return void K.trigger(C.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:be})}else be.loadCounter=1;be.loadIdx=this.fragLoadIdx,this.fragCurrent=be,this.startFragRequested=!0,be.autoLevel=K.autoLevelEnabled,K.trigger(C.default.FRAG_LOADING,{frag:be}),this.state=D.FRAG_LOADING}}}break;case D.WAITING_LEVEL:N=this.levels[this.level],N&&N.details&&(this.state=D.IDLE);break;case D.FRAG_LOADING_WAITING_RETRY:var We=performance.now(),gt=this.retryDate;(!gt||We>=gt||se)&&(g.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=D.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()}},{key:"getBufferRange",value:function(j){var N,G,K=this.bufferRange;if(K){for(N=K.length-1;N>=0;N--)if(G=K[N],j>=G.start&&j<=G.end)return G}return null}},{key:"followingBufferRange",value:function(j){return j?this.getBufferRange(j.end+.5):null}},{key:"isBuffered",value:function(j){var N=this.media;if(N){for(var G=N.buffered,K=0;K<G.length;K++)if(j>=G.start(K)&&j<=G.end(K))return!0}return!1}},{key:"_checkFragmentChanged",value:function(){var j,N,G=this.media;if(G&&G.seeking===!1&&(N=G.currentTime,N>G.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=N),this.isBuffered(N)?j=this.getBufferRange(N):this.isBuffered(N+.1)&&(j=this.getBufferRange(N+.1)),j)){var K=j.frag;K!==this.fragPlaying&&(this.fragPlaying=K,this.hls.trigger(C.default.FRAG_CHANGED,{frag:K}))}}},{key:"immediateLevelSwitch",value:function(){g.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,this.previouslyPaused=this.media.paused,this.media.pause());var j=this.fragCurrent;j&&j.loader&&j.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=D.PAUSED,this.hls.trigger(C.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})}},{key:"immediateLevelSwitchEnd",value:function(){this.immediateSwitch=!1;var j=this.media;j&&j.readyState&&(j.currentTime-=1e-4,this.previouslyPaused||j.play())}},{key:"nextLevelSwitch",value:function(){var j=this.media;if(j&&j.readyState){var N=void 0,G=void 0,K=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,G=this.getBufferRange(j.currentTime),G&&G.start>1&&(this.state=D.PAUSED,this.hls.trigger(C.default.BUFFER_FLUSHING,{startOffset:0,endOffset:G.start-1})),j.paused)N=0;else{var k=this.hls.nextLoadLevel,J=this.levels[k],se=this.fragLastKbps;N=se&&this.fragCurrent?this.fragCurrent.duration*J.bitrate/(1e3*se)+1:0}if(K=this.getBufferRange(j.currentTime+N),K&&(K=this.followingBufferRange(K))){var te=this.fragCurrent;te&&te.loader&&te.loader.abort(),this.fragCurrent=null,this.state=D.PAUSED,this.hls.trigger(C.default.BUFFER_FLUSHING,{startOffset:K.start,endOffset:Number.POSITIVE_INFINITY})}}}},{key:"onMediaAttached",value:function(j){var N=this.media=j.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),N.addEventListener("seeking",this.onvseeking),N.addEventListener("seeked",this.onvseeked),N.addEventListener("ended",this.onvended),this.levels&&this.config.autoStartLoad&&this.hls.startLoad()}},{key:"onMediaDetaching",value:function(){var j=this.media;j&&j.ended&&(g.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var N=this.levels;N&&N.forEach(function(G){G.details&&G.details.fragments.forEach(function(K){K.loadCounter=void 0})}),j&&(j.removeEventListener("seeking",this.onvseeking),j.removeEventListener("seeked",this.onvseeked),j.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){if(this.state===D.FRAG_LOADING){if(E.default.bufferInfo(this.media,this.media.currentTime,this.config.maxBufferHole).len===0){g.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load");var j=this.fragCurrent;j&&(j.loader&&j.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.state=D.IDLE}}else this.state===D.ENDED&&(this.state=D.IDLE);this.media&&(this.lastCurrentTime=this.media.currentTime),this.fragLoadIdx!==void 0&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaSeeked",value:function(){this.tick()}},{key:"onMediaEnded",value:function(){g.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){g.logger.log("trigger BUFFER_RESET"),this.hls.trigger(C.default.BUFFER_RESET),this.bufferRange=[],this.stalled=!1}},{key:"onManifestParsed",value:function(j){var N,G=!1,K=!1;j.levels.forEach(function(k){N=k.audioCodec,N&&(N.indexOf("mp4a.40.2")!==-1&&(G=!0),N.indexOf("mp4a.40.5")!==-1&&(K=!0))}),this.audioCodecSwitch=G&&K,this.audioCodecSwitch&&g.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=j.levels,this.startLevelLoaded=!1,this.startFragRequested=!1,this.config.autoStartLoad&&this.hls.startLoad()}},{key:"onLevelLoaded",value:function(j){var N=j.details,G=j.level,K=this.levels[G],k=N.totalduration,J=0;if(g.logger.log("level "+G+" loaded ["+N.startSN+","+N.endSN+"],duration:"+k),this.levelLastLoaded=G,N.live){var se=K.details;se?(P.default.mergeDetails(se,N),J=N.fragments[0].start,N.PTSKnown?g.logger.log("live playlist sliding:"+J.toFixed(3)):g.logger.log("live playlist - outdated PTS, unknown sliding")):(N.PTSKnown=!1,g.logger.log("live playlist - first load, unknown sliding"))}else N.PTSKnown=!1;if(K.details=N,this.hls.trigger(C.default.LEVEL_UPDATED,{details:N,level:G}),this.startFragRequested===!1){if(N.live){var te=this.config.liveSyncDuration!==void 0?this.config.liveSyncDuration:this.config.liveSyncDurationCount*N.targetduration;this.startPosition=Math.max(0,J+k-te)}this.nextLoadPosition=this.startPosition}this.state===D.WAITING_LEVEL&&(this.state=D.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===D.KEY_LOADING&&(this.state=D.IDLE,this.tick())}},{key:"onFragLoaded",value:function(j){var N=this.fragCurrent;if(this.state===D.FRAG_LOADING&&N&&j.frag.level===N.level&&j.frag.sn===N.sn)if(g.logger.log("Loaded  "+N.sn+" of level "+N.level),this.fragBitrateTest===!0)this.state=D.IDLE,this.fragBitrateTest=!1,this.startFragRequested=!1,j.stats.tparsed=j.stats.tbuffered=performance.now(),this.hls.trigger(C.default.FRAG_BUFFERED,{stats:j.stats,frag:N});else{this.state=D.PARSING,this.stats=j.stats;var G=this.levels[this.level],K=G.details,k=K.totalduration,J=N.startDTS!==void 0?N.startDTS:N.start,se=N.level,te=N.sn,oe=G.audioCodec||this.config.defaultAudioCodec;this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),oe===void 0&&(oe=this.lastAudioCodec),oe&&(oe=oe.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingAppending=0,g.logger.log("Demuxing "+te+" of ["+K.startSN+" ,"+K.endSN+"],level "+se);var re=this.demuxer;re&&re.push(j.payload,oe,G.videoCodec,J,N.cc,se,te,k,N.decryptdata)}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(j){if(this.state===D.PARSING){var N,G,K=j.tracks;if(G=K.audio){var k=this.levels[this.level].audioCodec,J=navigator.userAgent.toLowerCase();k&&this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),k=k.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&G.metadata.channelCount!==1&&J.indexOf("firefox")===-1&&(k="mp4a.40.5"),J.indexOf("android")!==-1&&(k="mp4a.40.2",g.logger.log("Android: force audio codec to"+k)),G.levelCodec=k}if(G=K.video,G&&(G.levelCodec=this.levels[this.level].videoCodec),j.unique){var se={codec:"",levelCodec:""};for(N in j.tracks)G=K[N],se.container=G.container,se.codec&&(se.codec+=",",se.levelCodec+=","),G.codec&&(se.codec+=G.codec),G.levelCodec&&(se.levelCodec+=G.levelCodec);K={audiovideo:se}}this.hls.trigger(C.default.BUFFER_CODECS,K);for(N in K){G=K[N],g.logger.log("track:"+N+",container:"+G.container+",codecs[level/parsed]=["+G.levelCodec+"/"+G.codec+"]");var te=G.initSegment;te&&(this.pendingAppending++,this.hls.trigger(C.default.BUFFER_APPENDING,{type:N,data:te}))}this.tick()}}},{key:"onFragParsingData",value:function(j){var N=this;if(this.state===D.PARSING){this.tparse2=Date.now();var G=this.levels[this.level],K=this.fragCurrent;g.logger.log("parsed "+j.type+",PTS:["+j.startPTS.toFixed(3)+","+j.endPTS.toFixed(3)+"],DTS:["+j.startDTS.toFixed(3)+"/"+j.endDTS.toFixed(3)+"],nb:"+j.nb);var k=P.default.updateFragPTSDTS(G.details,K.sn,j.startPTS,j.endPTS,j.startDTS,j.endDTS),J=this.hls;J.trigger(C.default.LEVEL_PTS_UPDATED,{details:G.details,level:this.level,drift:k}),[j.data1,j.data2].forEach(function(se){se&&(N.pendingAppending++,J.trigger(C.default.BUFFER_APPENDING,{type:j.type,data:se}))}),this.nextLoadPosition=j.endPTS,this.bufferRange.push({type:j.type,start:j.startPTS,end:j.endPTS,frag:K}),this.tick()}else g.logger.warn("not in PARSING state but "+this.state+", ignoring FRAG_PARSING_DATA event")}},{key:"onFragParsed",value:function(){this.state===D.PARSING&&(this.stats.tparsed=performance.now(),this.state=D.PARSED,this._checkAppendedParsed())}},{key:"onBufferAppended",value:function(){switch(this.state){case D.PARSING:case D.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===D.PARSED&&this.pendingAppending===0){var j=this.fragCurrent,N=this.stats;j&&(this.fragPrevious=j,N.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*N.length/(N.tbuffered-N.tfirst)),this.hls.trigger(C.default.FRAG_BUFFERED,{stats:N,frag:j}),g.logger.log("media buffered : "+this.timeRangesToString(this.media.buffered)),this.state=D.IDLE),this.tick()}}},{key:"onError",value:function(j){switch(j.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!j.fatal){var N=this.fragLoadError;if(N?N++:N=1,N<=this.config.fragLoadingMaxRetry){this.fragLoadError=N,j.frag.loadCounter=0;var G=Math.min(Math.pow(2,N-1)*this.config.fragLoadingRetryDelay,64e3);g.logger.warn("mediaController: frag loading failed, retry in "+G+" ms"),this.retryDate=performance.now()+G,this.state=D.FRAG_LOADING_WAITING_RETRY}else g.logger.error("mediaController: "+j.details+" reaches max retry, redispatch as fatal ..."),j.fatal=!0,this.hls.trigger(C.default.ERROR,j),this.state=D.ERROR}break;case A.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case A.ErrorDetails.LEVEL_LOAD_ERROR:case A.ErrorDetails.LEVEL_LOAD_TIMEOUT:case A.ErrorDetails.KEY_LOAD_ERROR:case A.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==D.ERROR&&(this.state=j.fatal?D.ERROR:D.IDLE,g.logger.warn("mediaController: "+j.details+" while loading frag,switch to "+this.state+" state ..."));break;case A.ErrorDetails.BUFFER_FULL_ERROR:this.state!==D.PARSING&&this.state!==D.PARSED||(this.config.maxMaxBufferLength/=2,g.logger.warn("reduce max buffer length to "+this.config.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=D.IDLE)}}},{key:"_checkBuffer",value:function(){var j=this.media;if(j&&j.readyState){var N=j.currentTime,G=j.buffered;if(!this.loadedmetadata&&G.length){this.loadedmetadata=!0;var K=this.startPosition;if(!N&&N!==K&&K){g.logger.log("target start position:"+K);var k=G.start(0),J=G.end(0);(K<k||K>J)&&(K=k,g.logger.log("target start position not buffered, seek to buffered.start(0) "+k)),g.logger.log("adjust currentTime from "+N+" to "+K),j.currentTime=K}}else{var se=E.default.bufferInfo(j,N,0),te=!(j.paused||j.ended||j.buffered.length===0),oe=.4,re=N>j.playbackRate*this.lastCurrentTime;if(this.stalled&&re&&(this.stalled=!1,g.logger.log("playback not stuck anymore @"+N)),te&&se.len<=oe&&(re?(oe=0,this.seekHoleNudgeDuration=0):this.stalled?this.seekHoleNudgeDuration+=this.config.seekHoleNudgeDuration:(this.seekHoleNudgeDuration=0,g.logger.log("playback seems stuck @"+N),this.hls.trigger(C.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1}),this.stalled=!0),se.len<=oe)){var ee=se.nextStart,Z=ee-N;if(ee&&Z<this.config.maxSeekHole&&Z>0){g.logger.log("adjust currentTime from "+j.currentTime+" to next buffered @ "+ee+" + nudge "+this.seekHoleNudgeDuration);var ge=ee+this.seekHoleNudgeDuration-j.currentTime;j.currentTime=ee+this.seekHoleNudgeDuration,this.hls.trigger(C.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:ge})}}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=D.IDLE,this.tick()}},{key:"onBufferFlushed",value:function(){var j,N,G=[];for(N=0;N<this.bufferRange.length;N++)j=this.bufferRange[N],this.isBuffered((j.start+j.end)/2)&&G.push(j);this.bufferRange=G,this.immediateSwitch&&this.immediateLevelSwitchEnd(),this.state=D.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"timeRangesToString",value:function(j){for(var N="",G=j.length,K=0;K<G;K++)N+="["+j.start(K)+","+j.end(K)+"]";return N}},{key:"currentLevel",get:function(){if(this.media){var j=this.getBufferRange(this.media.currentTime);if(j)return j.frag.level}return-1}},{key:"nextBufferRange",get:function(){return this.media?this.followingBufferRange(this.getBufferRange(this.media.currentTime)):null}},{key:"nextLevel",get:function(){var j=this.nextBufferRange;return j?j.frag.level:-1}}]),V}(u.default);T.default=M},function(B,T,t){function o(s){return s&&s.__esModule?s:{default:s}}function x(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function f(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||(typeof l>"u"?"undefined":w(l))!=="object"&&typeof l!="function"?s:l}function h(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof l>"u"?"undefined":w(l)));s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol?"symbol":typeof s};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function s(l,S){for(var E=0;E<S.length;E++){var O=S[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(l,O.key,O)}}return function(l,S,E){return S&&s(l.prototype,S),E&&s(l,E),l}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=t(75),u=o(b),g=function(s){function l(S){x(this,l);var E=f(this,Object.getPrototypeOf(l).call(this,S,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_USERDATA,c.default.MANIFEST_LOADING,c.default.FRAG_LOADED));return E.hls=S,E.config=S.config,E.config.enableCEA708Captions&&(E.cea708Interpreter=new u.default),E}return h(l,s),p(l,[{key:"destroy",value:function(){C.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(S){var E=this.media=S.media;this.cea708Interpreter.attach(E)}},{key:"onMediaDetaching",value:function(){this.cea708Interpreter.detach()}},{key:"onManifestLoading",value:function(){this.lastPts=Number.POSITIVE_INFINITY}},{key:"onFragLoaded",value:function(S){var E=S.frag.start;E<=this.lastPts&&this.cea708Interpreter.clear(),this.lastPts=E}},{key:"onFragParsingUserdata",value:function(S){for(var E=0;E<S.samples.length;E++)this.cea708Interpreter.push(S.samples[E].pts,S.samples[E].bytes)}}]),l}(C.default);T.default=g},function(B,T){function t(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var o=function(){function f(h,w){for(var p=0;p<w.length;p++){var y=w[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,w,p){return w&&f(h.prototype,w),p&&f(h,p),h}}(),x=function(){function f(h){t(this,f),this._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],this._precompute();var w,p,y,c,d,C=this._tables[0][4],b=this._tables[1],u=h.length,g=1;if(u!==4&&u!==6&&u!==8)throw new Error("Invalid aes key size="+u);for(c=h.slice(0),d=[],this._key=[c,d],w=u;w<4*u+28;w++)y=c[w-1],(w%u===0||u===8&&w%u===4)&&(y=C[y>>>24]<<24^C[y>>16&255]<<16^C[y>>8&255]<<8^C[255&y],w%u===0&&(y=y<<8^y>>>24^g<<24,g=g<<1^283*(g>>7))),c[w]=c[w-u]^y;for(p=0;w;p++,w--)y=c[3&p?w:w-4],w<=4||p<4?d[p]=y:d[p]=b[0][C[y>>>24]]^b[1][C[y>>16&255]]^b[2][C[y>>8&255]]^b[3][C[255&y]]}return o(f,[{key:"_precompute",value:function(){var h,w,p,y,c,d,C,b,u,g=this._tables[0],s=this._tables[1],l=g[4],S=s[4],E=[],O=[];for(h=0;h<256;h++)O[(E[h]=h<<1^283*(h>>7))^h]=h;for(w=p=0;!l[w];w^=y||1,p=O[p]||1)for(C=p^p<<1^p<<2^p<<3^p<<4,C=C>>8^255&C^99,l[w]=C,S[C]=w,d=E[c=E[y=E[w]]],u=16843009*d^65537*c^257*y^16843008*w,b=257*E[C]^16843008*C,h=0;h<4;h++)g[h][w]=b=b<<24^b>>>8,s[h][C]=u=u<<24^u>>>8;for(h=0;h<5;h++)g[h]=g[h].slice(0),s[h]=s[h].slice(0)}},{key:"decrypt",value:function(h,w,p,y,c,d){var C,b,u,g,s=this._key[1],l=h^s[0],S=y^s[1],E=p^s[2],O=w^s[3],P=s.length/4-2,A=4,D=this._tables[1],M=D[0],L=D[1],V=D[2],j=D[3],N=D[4];for(g=0;g<P;g++)C=M[l>>>24]^L[S>>16&255]^V[E>>8&255]^j[255&O]^s[A],b=M[S>>>24]^L[E>>16&255]^V[O>>8&255]^j[255&l]^s[A+1],u=M[E>>>24]^L[O>>16&255]^V[l>>8&255]^j[255&S]^s[A+2],O=M[O>>>24]^L[l>>16&255]^V[S>>8&255]^j[255&E]^s[A+3],A+=4,l=C,S=b,E=u;for(g=0;g<4;g++)c[(3&-g)+d]=N[l>>>24]<<24^N[S>>16&255]<<16^N[E>>8&255]<<8^N[255&O]^s[A++],C=l,l=S,S=E,E=O,O=C}}]),f}();T.default=x},function(B,T,t){function o(y){return y&&y.__esModule?y:{default:y}}function x(y,c){if(!(y instanceof c))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function y(c,d){for(var C=0;C<d.length;C++){var b=d[C];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,d,C){return d&&y(c.prototype,d),C&&y(c,C),c}}(),h=t(55),w=o(h),p=function(){function y(c,d){x(this,y),this.key=c,this.iv=d}return f(y,[{key:"ntoh",value:function(c){return c<<24|(65280&c)<<8|(16711680&c)>>8|c>>>24}},{key:"doDecrypt",value:function(c,d,C){var b,u,g,s,l,S,E,O,P,A=new Int32Array(c.buffer,c.byteOffset,c.byteLength>>2),D=new w.default(Array.prototype.slice.call(d)),M=new Uint8Array(c.byteLength),L=new Int32Array(M.buffer);for(b=~~C[0],u=~~C[1],g=~~C[2],s=~~C[3],P=0;P<A.length;P+=4)l=~~this.ntoh(A[P]),S=~~this.ntoh(A[P+1]),E=~~this.ntoh(A[P+2]),O=~~this.ntoh(A[P+3]),D.decrypt(l,S,E,O,L,P),L[P]=this.ntoh(L[P]^b),L[P+1]=this.ntoh(L[P+1]^u),L[P+2]=this.ntoh(L[P+2]^g),L[P+3]=this.ntoh(L[P+3]^s),b=l,u=S,g=E,s=O;return M}},{key:"localDecrypt",value:function(c,d,C,b){var u=this.doDecrypt(c,d,C);b.set(u,c.byteOffset)}},{key:"decrypt",value:function(c){var d=32e3,C=new Int32Array(c),b=new Uint8Array(c.byteLength),u=0,g=this.key,s=this.iv;for(this.localDecrypt(C.subarray(u,u+d),g,s,b),u=d;u<C.length;u+=d)s=new Uint32Array([this.ntoh(C[u-4]),this.ntoh(C[u-3]),this.ntoh(C[u-2]),this.ntoh(C[u-1])]),this.localDecrypt(C.subarray(u,u+d),g,s,b);return b}}]),y}();T.default=p},function(B,T,t){function o(d){return d&&d.__esModule?d:{default:d}}function x(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function d(C,b){for(var u=0;u<b.length;u++){var g=b[u];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(C,g.key,g)}}return function(C,b,u){return b&&d(C.prototype,b),u&&d(C,u),C}}(),h=t(56),w=o(h),p=t(5),y=t(4),c=function(){function d(C){x(this,d),this.hls=C;try{var b=window?window.crypto:crypto;this.subtle=b.subtle||b.webkitSubtle,this.disableWebCrypto=!this.subtle}catch{this.disableWebCrypto=!0}}return f(d,[{key:"destroy",value:function(){}},{key:"decrypt",value:function(C,b,u,g){this.disableWebCrypto&&this.hls.config.enableSoftwareAES?this.decryptBySoftware(C,b,u,g):this.decryptByWebCrypto(C,b,u,g)}},{key:"decryptByWebCrypto",value:function(C,b,u,g){var s=this;y.logger.log("decrypting by WebCrypto API"),this.subtle.importKey("raw",b,{name:"AES-CBC",length:128},!1,["decrypt"]).then(function(l){s.subtle.decrypt({name:"AES-CBC",iv:u.buffer},l,C).then(g).catch(function(S){s.onWebCryptoError(S,C,b,u,g)})}).catch(function(l){s.onWebCryptoError(l,C,b,u,g)})}},{key:"decryptBySoftware",value:function(C,b,u,g){y.logger.log("decrypting by JavaScript Implementation");var s=new DataView(b.buffer),l=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);s=new DataView(u.buffer);var S=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),E=new w.default(l,S);g(E.decrypt(C).buffer)}},{key:"onWebCryptoError",value:function(C,b,u,g,s){this.hls.config.enableSoftwareAES?(y.logger.log("disabling to use WebCrypto API"),this.disableWebCrypto=!0,this.decryptBySoftware(b,u,g,s)):(y.logger.error("decrypting error : "+C.message),this.hls.trigger(Event.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:C.message}))}}]),d}();T.default=c},function(B,T,t){function o(C){return C&&C.__esModule?C:{default:C}}function x(C,b){if(!(C instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function C(b,u){for(var g=0;g<u.length;g++){var s=u[g];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(b,s.key,s)}}return function(b,u,g){return u&&C(b.prototype,u),g&&C(b,g),b}}(),h=t(29),w=o(h),p=t(4),y=t(62),c=o(y),d=function(){function C(b,u){x(this,C),this.observer=b,this.remuxerClass=u,this.remuxer=new this.remuxerClass(b),this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0}}return f(C,[{key:"push",value:function(b,u,g,s,l,S,E,O){var P,A,D,M,L,V,j,N,G,K=this._aacTrack,k=new c.default(b),J=90*k.timeStamp;for(L=k.length,N=b.length;L<N-1&&(b[L]!==255||(240&b[L+1])!==240);L++);for(K.audiosamplerate||(P=w.default.getAudioConfig(this.observer,b,L,u),K.config=P.config,K.audiosamplerate=P.samplerate,K.channelCount=P.channelCount,K.codec=P.codec,K.duration=O,p.logger.log("parsed codec:"+K.codec+",rate:"+P.samplerate+",nb channel:"+P.channelCount)),M=0,D=9216e4/K.audiosamplerate;L+5<N&&(V=1&b[L+1]?7:9,A=(3&b[L+3])<<11|b[L+4]<<3|(224&b[L+5])>>>5,A-=V,A>0&&L+V+A<=N);)for(j=J+M*D,G={unit:b.subarray(L+V,L+V+A),pts:j,dts:j},K.samples.push(G),K.len+=A,L+=A+V,M++;L<N-1&&(b[L]!==255||(240&b[L+1])!==240);L++);this.remuxer.remux(this._aacTrack,{samples:[]},{samples:[{pts:J,dts:J,unit:k.payload}]},{samples:[]},s)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(b){var u,g,s=new c.default(b);if(s.hasTimeStamp){for(u=s.length,g=b.length;u<g-1;u++)if(b[u]===255&&(240&b[u+1])===240)return!0}return!1}}]),C}();T.default=d},function(B,T,t){function o(d){return d&&d.__esModule?d:{default:d}}Object.defineProperty(T,"__esModule",{value:!0});var x=t(30),f=o(x),h=t(2),w=o(h),p=t(28),y=o(p),c=function(d){var C=new y.default;C.trigger=function(b){for(var u=arguments.length,g=Array(u>1?u-1:0),s=1;s<u;s++)g[s-1]=arguments[s];C.emit.apply(C,[b,b].concat(g))},C.off=function(b){for(var u=arguments.length,g=Array(u>1?u-1:0),s=1;s<u;s++)g[s-1]=arguments[s];C.removeListener.apply(C,[b].concat(g))},d.addEventListener("message",function(b){var u=b.data;switch(u.cmd){case"init":d.demuxer=new f.default(C,u.typeSupported);break;case"demux":d.demuxer.push(new Uint8Array(u.data),u.audioCodec,u.videoCodec,u.timeOffset,u.cc,u.level,u.sn,u.duration)}}),C.on(w.default.FRAG_PARSING_INIT_SEGMENT,function(b,u){d.postMessage({event:b,tracks:u.tracks,unique:u.unique})}),C.on(w.default.FRAG_PARSING_DATA,function(b,u){var g={event:b,type:u.type,startPTS:u.startPTS,endPTS:u.endPTS,startDTS:u.startDTS,endDTS:u.endDTS,data1:u.data1.buffer,data2:u.data2.buffer,nb:u.nb};d.postMessage(g,[g.data1,g.data2])}),C.on(w.default.FRAG_PARSED,function(b){d.postMessage({event:b})}),C.on(w.default.ERROR,function(b,u){d.postMessage({event:b,data:u})}),C.on(w.default.FRAG_PARSING_METADATA,function(b,u){var g={event:b,samples:u.samples};d.postMessage(g)}),C.on(w.default.FRAG_PARSING_USERDATA,function(b,u){var g={event:b,samples:u.samples};d.postMessage(g)})};T.default=c},function(B,T,t){function o(s){return s&&s.__esModule?s:{default:s}}function x(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function s(l,S){for(var E=0;E<S.length;E++){var O=S[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(l,O.key,O)}}return function(l,S,E){return S&&s(l.prototype,S),E&&s(l,E),l}}(),h=t(2),w=o(h),p=t(30),y=o(p),c=t(59),d=o(c),C=t(4),b=t(57),u=o(b),g=function(){function s(l){x(this,s),this.hls=l;var S={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:l.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t")};if(l.config.enableWorker&&typeof Worker<"u"){C.logger.log("demuxing in webworker");try{var E=t(91);this.w=E(d.default),this.onwmsg=this.onWorkerMessage.bind(this),this.w.addEventListener("message",this.onwmsg),this.w.postMessage({cmd:"init",typeSupported:S})}catch{C.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),this.demuxer=new y.default(l,S)}}else this.demuxer=new y.default(l,S);this.demuxInitialized=!0}return f(s,[{key:"destroy",value:function(){this.w?(this.w.removeEventListener("message",this.onwmsg),this.w.terminate(),this.w=null):(this.demuxer.destroy(),this.demuxer=null),this.decrypter&&(this.decrypter.destroy(),this.decrypter=null)}},{key:"pushDecrypted",value:function(l,S,E,O,P,A,D,M){this.w?this.w.postMessage({cmd:"demux",data:l,audioCodec:S,videoCodec:E,timeOffset:O,cc:P,level:A,sn:D,duration:M},[l]):this.demuxer.push(new Uint8Array(l),S,E,O,P,A,D,M)}},{key:"push",value:function(l,S,E,O,P,A,D,M,L){if(l.byteLength>0&&L!=null&&L.key!=null&&L.method==="AES-128"){this.decrypter==null&&(this.decrypter=new u.default(this.hls));var V=this;this.decrypter.decrypt(l,L.key,L.iv,function(j){V.pushDecrypted(j,S,E,O,P,A,D,M)})}else this.pushDecrypted(l,S,E,O,P,A,D,M)}},{key:"onWorkerMessage",value:function(l){var S=l.data;switch(S.event){case w.default.FRAG_PARSING_INIT_SEGMENT:var E={};E.tracks=S.tracks,E.unique=S.unique,this.hls.trigger(w.default.FRAG_PARSING_INIT_SEGMENT,E);break;case w.default.FRAG_PARSING_DATA:this.hls.trigger(w.default.FRAG_PARSING_DATA,{data1:new Uint8Array(S.data1),data2:new Uint8Array(S.data2),startPTS:S.startPTS,endPTS:S.endPTS,startDTS:S.startDTS,endDTS:S.endDTS,type:S.type,nb:S.nb});break;case w.default.FRAG_PARSING_METADATA:this.hls.trigger(w.default.FRAG_PARSING_METADATA,{samples:S.samples});break;case w.default.FRAG_PARSING_USERDATA:this.hls.trigger(w.default.FRAG_PARSING_USERDATA,{samples:S.samples});break;default:this.hls.trigger(S.event,S.data)}}}]),s}();T.default=g},function(B,T,t){function o(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(p,y){for(var c=0;c<y.length;c++){var d=y[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return function(p,y,c){return y&&w(p.prototype,y),c&&w(p,c),p}}(),f=t(4),h=function(){function w(p){o(this,w),this.data=p,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return x(w,[{key:"loadWord",value:function(){var p=this.data.byteLength-this.bytesAvailable,y=new Uint8Array(4),c=Math.min(4,this.bytesAvailable);if(c===0)throw new Error("no bytes available");y.set(this.data.subarray(p,p+c)),this.word=new DataView(y.buffer).getUint32(0),this.bitsAvailable=8*c,this.bytesAvailable-=c}},{key:"skipBits",value:function(p){var y;this.bitsAvailable>p?(this.word<<=p,this.bitsAvailable-=p):(p-=this.bitsAvailable,y=p>>3,p-=y>>3,this.bytesAvailable-=y,this.loadWord(),this.word<<=p,this.bitsAvailable-=p)}},{key:"readBits",value:function(p){var y=Math.min(this.bitsAvailable,p),c=this.word>>>32-y;return p>32&&f.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=y,this.bitsAvailable>0?this.word<<=y:this.bytesAvailable>0&&this.loadWord(),y=p-y,y>0?c<<y|this.readBits(y):c}},{key:"skipLZ",value:function(){var p;for(p=0;p<this.bitsAvailable;++p)if(this.word&2147483648>>>p)return this.word<<=p,this.bitsAvailable-=p,p;return this.loadWord(),p+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var p=this.skipLZ();return this.readBits(p+1)-1}},{key:"readEG",value:function(){var p=this.readUEG();return 1&p?1+p>>>1:-1*(p>>>1)}},{key:"readBoolean",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(p){var y,c,d=8,C=8;for(y=0;y<p;y++)C!==0&&(c=this.readEG(),C=(d+c+256)%256),d=C===0?d:C}},{key:"readSPS",value:function(){var p,y,c,d,C,b,u,g=0,s=0,l=0,S=0,E=1;if(this.readUByte(),p=this.readUByte(),this.readBits(5),this.skipBits(3),this.readUByte(),this.skipUEG(),p===100||p===110||p===122||p===244||p===44||p===83||p===86||p===118||p===128){var O=this.readUEG();if(O===3&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(b=O!==3?8:12,u=0;u<b;u++)this.readBoolean()&&(u<6?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var P=this.readUEG();if(P===0)this.readUEG();else if(P===1)for(this.skipBits(1),this.skipEG(),this.skipEG(),y=this.readUEG(),u=0;u<y;u++)this.skipEG();if(this.skipUEG(),this.skipBits(1),c=this.readUEG(),d=this.readUEG(),C=this.readBits(1),C===0&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(g=this.readUEG(),s=this.readUEG(),l=this.readUEG(),S=this.readUEG()),this.readBoolean()&&this.readBoolean()){var A=void 0,D=this.readUByte();switch(D){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[this.readUByte()<<8|this.readUByte(),this.readUByte()<<8|this.readUByte()]}A&&(E=A[0]/A[1])}return{width:Math.ceil((16*(c+1)-2*g-2*s)*E),height:(2-C)*(d+1)*16-(C?2:4)*(l+S)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),w}();T.default=h},function(B,T,t){function o(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(p,y){for(var c=0;c<y.length;c++){var d=y[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return function(p,y,c){return y&&w(p.prototype,y),c&&w(p,c),p}}(),f=t(4),h=function(){function w(p){o(this,w),this._hasTimeStamp=!1;for(var y,c,d,C,b,u,g,s,l=0;;)if(g=this.readUTF(p,l,3),l+=3,g==="ID3")l+=3,y=127&p[l++],c=127&p[l++],d=127&p[l++],C=127&p[l++],b=(y<<21)+(c<<14)+(d<<7)+C,u=l+b,this._parseID3Frames(p,l,u),l=u;else{if(g!=="3DI")return l-=3,s=l,void(s&&(this.hasTimeStamp||f.logger.warn("ID3 tag found, but no timestamp"),this._length=s,this._payload=p.subarray(0,s)));l+=7,f.logger.log("3DI footer found, end: "+l)}}return x(w,[{key:"readUTF",value:function(p,y,c){var d="",C=y,b=y+c;do d+=String.fromCharCode(p[C++]);while(C<b);return d}},{key:"_parseID3Frames",value:function(p,y,c){for(var d,C,b,u,g;y+8<=c;)switch(d=this.readUTF(p,y,4),y+=4,C=p[y++]<<24+p[y++]<<16+p[y++]<<8+p[y++],u=p[y++]<<8+p[y++],b=y,d){case"PRIV":if(this.readUTF(p,y,44)==="com.apple.streaming.transportStreamTimestamp"){y+=44,y+=4;var s=1&p[y++];this._hasTimeStamp=!0,g=((p[y++]<<23)+(p[y++]<<15)+(p[y++]<<7)+p[y++])/45,s&&(g+=4772185884e-2),g=Math.round(g),f.logger.trace("ID3 timestamp found: "+g),this._timeStamp=g}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),w}();T.default=h},function(B,T,t){function o(g){return g&&g.__esModule?g:{default:g}}function x(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function g(s,l){for(var S=0;S<l.length;S++){var E=l[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,l,S){return l&&g(s.prototype,l),S&&g(s,S),s}}(),h=t(29),w=o(h),p=t(2),y=o(p),c=t(61),d=o(c),C=t(4),b=t(5),u=function(){function g(s,l){x(this,g),this.observer=s,this.remuxerClass=l,this.lastCC=0,this.remuxer=new this.remuxerClass(s)}return f(g,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,nbNalu:0},this._aacTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcNaluState=0,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(s,l,S,E,O,P,A,D){var M,L,V,j,N,G,K,k,J=s.length,se=this.remuxer.passthrough,te=!1;this.audioCodec=l,this.videoCodec=S,this.timeOffset=E,this._duration=D,this.contiguous=!1,O!==this.lastCC&&(C.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=O),P!==this.lastLevel?(C.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=P):A===this.lastSN+1&&(this.contiguous=!0),this.lastSN=A;var oe=this.pmtParsed,re=this._avcTrack.id,ee=this._aacTrack.id,Z=this._id3Track.id;for(J-=J%188,j=0;j<J;j+=188)if(s[j]===71){if(N=!!(64&s[j+1]),G=((31&s[j+1])<<8)+s[j+2],K=(48&s[j+3])>>4,K>1){if(k=j+5+s[j+4],k===j+188)continue}else k=j+4;if(oe)if(G===re){if(N){if(M&&(this._parseAVCPES(this._parsePES(M)),se&&this._avcTrack.codec&&(ee===-1||this._aacTrack.codec)))return void this.remux(s);M={data:[],size:0}}M&&(M.data.push(s.subarray(k,j+188)),M.size+=j+188-k)}else if(G===ee){if(N){if(L&&(this._parseAACPES(this._parsePES(L)),se&&this._aacTrack.codec&&(re===-1||this._avcTrack.codec)))return void this.remux(s);L={data:[],size:0}}L&&(L.data.push(s.subarray(k,j+188)),L.size+=j+188-k)}else G===Z&&(N&&(V&&this._parseID3PES(this._parsePES(V)),V={data:[],size:0}),V&&(V.data.push(s.subarray(k,j+188)),V.size+=j+188-k));else N&&(k+=s[k]+1),G===0?this._parsePAT(s,k):G===this._pmtId?(this._parsePMT(s,k),oe=this.pmtParsed=!0,re=this._avcTrack.id,ee=this._aacTrack.id,Z=this._id3Track.id,te&&(C.logger.log("reparse from beginning"),te=!1,j=-188)):(C.logger.log("unknown PID found before PAT/PMT"),te=!0)}else this.observer.trigger(y.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});M&&this._parseAVCPES(this._parsePES(M)),L&&this._parseAACPES(this._parsePES(L)),V&&this._parseID3PES(this._parsePES(V)),this.remux(null)}},{key:"remux",value:function(s){this.remuxer.remux(this._aacTrack,this._avcTrack,this._id3Track,this._txtTrack,this.timeOffset,this.contiguous,s)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(s,l){this._pmtId=(31&s[l+10])<<8|s[l+11]}},{key:"_parsePMT",value:function(s,l){var S,E,O,P;for(S=(15&s[l+1])<<8|s[l+2],E=l+3+S-4,O=(15&s[l+10])<<8|s[l+11],l+=12+O;l<E;){switch(P=(31&s[l+1])<<8|s[l+2],s[l]){case 15:this._aacTrack.id=P;break;case 21:this._id3Track.id=P;break;case 27:this._avcTrack.id=P;break;default:C.logger.log("unkown stream type:"+s[l])}l+=((15&s[l+3])<<8|s[l+4])+5}}},{key:"_parsePES",value:function(s){var l,S,E,O,P,A,D,M,L,V=0,j=s.data;if(l=j[0],E=(l[0]<<16)+(l[1]<<8)+l[2],E===1){for(O=(l[4]<<8)+l[5],S=l[7],192&S&&(D=536870912*(14&l[9])+4194304*(255&l[10])+16384*(254&l[11])+128*(255&l[12])+(254&l[13])/2,D>4294967295&&(D-=8589934592),64&S?(M=536870912*(14&l[14])+4194304*(255&l[15])+16384*(254&l[16])+128*(255&l[17])+(254&l[18])/2,M>4294967295&&(M-=8589934592)):M=D),P=l[8],L=P+9,s.size-=L,A=new Uint8Array(s.size);j.length;){l=j.shift();var N=l.byteLength;if(L){if(L>N){L-=N;continue}l=l.subarray(L),N-=L,L=0}A.set(l,V),V+=N}return{data:A,pts:D,dts:M,len:O}}return null}},{key:"_parseAVCPES",value:function(s){var l,S,E,O,P=this,A=this._avcTrack,D=A.samples,M=this._parseAVCNALu(s.data),L=[],V=!1,j=0;if(M.length===0&&D.length>0){var N=D[D.length-1],G=N.units.units[N.units.units.length-1],K=new Uint8Array(G.data.byteLength+s.data.byteLength);K.set(G.data,0),K.set(s.data,G.data.byteLength),G.data=K,N.units.length+=s.data.byteLength,A.len+=s.data.byteLength}s.data=null;var k="",J=(function(){L.length&&((V===!0||A.sps&&(D.length||this.contiguous))&&(S={units:{units:L,length:j},pts:s.pts,dts:s.dts,key:V},D.push(S),A.len+=j,A.nbNalu+=L.length),L=[],j=0)}).bind(this);M.forEach(function(se){switch(se.type){case 1:E=!0;break;case 5:E=!0,V=!0;break;case 6:E=!0,l=new d.default(se.data),l.readUByte();var te=l.readUByte();if(te===4){var oe=0;do oe=l.readUByte();while(oe===255);var re=l.readUByte();if(re===181){var ee=l.readUShort();if(ee===49){var Z=l.readUInt();if(Z===1195456820){var ge=l.readUByte();if(ge===3){var Te=l.readUByte(),we=l.readUByte(),Le=31&Te,Ce=[Te,we];for(O=0;O<Le;O++)Ce.push(l.readUByte()),Ce.push(l.readUByte()),Ce.push(l.readUByte());P._txtTrack.samples.push({type:3,pts:s.pts,bytes:Ce})}}}}}break;case 7:if(E=!0,!A.sps){l=new d.default(se.data);var be=l.readSPS();A.width=be.width,A.height=be.height,A.sps=[se.data],A.duration=P._duration;var Ge=se.data.subarray(1,4),Ke="avc1.";for(O=0;O<3;O++){var je=Ge[O].toString(16);je.length<2&&(je="0"+je),Ke+=je}A.codec=Ke}break;case 8:E=!0,A.pps||(A.pps=[se.data]);break;case 9:E=!1,J();break;default:E=!1,k+="unknown NAL "+se.type+" "}E&&(L.push(se),j+=se.data.byteLength)}),k.length&&C.logger.log(k),J()}},{key:"_parseAVCNALu",value:function(s){for(var l,S,E,O,P,A,D=0,M=s.byteLength,L=this.avcNaluState,V=[];D<M;)switch(l=s[D++],L){case 0:l===0&&(L=1);break;case 1:L=l===0?2:0;break;case 2:case 3:if(l===0)L=3;else if(l===1&&D<M){if(O=31&s[D],P)E={data:s.subarray(P,D-L-1),type:A},V.push(E);else{var j=this.avcNaluState;if(j&&D<=4-j){var N=this._avcTrack,G=N.samples;if(G.length){var K=G[G.length-1],k=K.units.units,J=k[k.length-1];J.state&&(J.data=J.data.subarray(0,J.data.byteLength-j),K.units.length-=j,N.len-=j)}}if(S=D-L-1,S>0){var se=this._avcTrack,te=se.samples;if(te.length){var oe=te[te.length-1],re=oe.units.units,ee=re[re.length-1],Z=new Uint8Array(ee.data.byteLength+S);Z.set(ee.data,0),Z.set(s.subarray(0,S),ee.data.byteLength),ee.data=Z,oe.units.length+=S,se.len+=S}}}P=D,A=O,L=0}else L=0}return P&&(E={data:s.subarray(P,M),type:A,state:L},V.push(E),this.avcNaluState=L),V}},{key:"_parseAACPES",value:function(s){var l,S,E,O,P,A,D,M,L,V=this._aacTrack,j=s.data,N=s.pts,G=0,K=this._duration,k=this.audioCodec,J=this.aacOverFlow,se=this.aacLastPTS;if(J){var te=new Uint8Array(J.byteLength+j.byteLength);te.set(J,0),te.set(j,J.byteLength),j=te}for(P=G,M=j.length;P<M-1&&(j[P]!==255||(240&j[P+1])!==240);P++);if(P){var oe,re;if(P<M-1?(oe="AAC PES did not start with ADTS header,offset:"+P,re=!1):(oe="no ADTS header found in AAC PES",re=!0),this.observer.trigger(y.default.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_PARSING_ERROR,fatal:re,reason:oe}),re)return}if(V.audiosamplerate||(l=w.default.getAudioConfig(this.observer,j,P,k),V.config=l.config,V.audiosamplerate=l.samplerate,V.channelCount=l.channelCount,V.codec=l.codec,V.duration=K,C.logger.log("parsed codec:"+V.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)),O=0,E=9216e4/V.audiosamplerate,J&&se){var ee=se+E;Math.abs(ee-N)>1&&(C.logger.log("AAC: align PTS for overlapping frames by "+Math.round((ee-N)/90)),N=ee)}for(;P+5<M&&(A=1&j[P+1]?7:9,S=(3&j[P+3])<<11|j[P+4]<<3|(224&j[P+5])>>>5,S-=A,S>0&&P+A+S<=M);)for(D=N+O*E,L={unit:j.subarray(P+A,P+A+S),pts:D,dts:D},V.samples.push(L),V.len+=S,P+=S+A,O++;P<M-1&&(j[P]!==255||(240&j[P+1])!==240);P++);J=P<M?j.subarray(P,M):null,this.aacOverFlow=J,this.aacLastPTS=D}},{key:"_parseID3PES",value:function(s){this._id3Track.samples.push(s)}}],[{key:"probe",value:function(s){return s.length>=564&&s[0]===71&&s[188]===71&&s[376]===71}}]),g}();T.default=u},function(B,T,t){function o(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(p,y){for(var c=0;c<y.length;c++){var d=y[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return function(p,y,c){return y&&w(p.prototype,y),c&&w(p,c),p}}(),f=t(4),h=function(){function w(){o(this,w)}return x(w,null,[{key:"mergeDetails",value:function(p,y){var c,d=Math.max(p.startSN,y.startSN)-y.startSN,C=Math.min(p.endSN,y.endSN)-y.startSN,b=y.startSN-p.startSN,u=p.fragments,g=y.fragments,s=0;if(C<d)return void(y.PTSKnown=!1);for(var l=d;l<=C;l++){var S=u[b+l],E=g[l];s=S.cc-E.cc,isNaN(S.startPTS)||(E.start=E.startPTS=S.startPTS,E.endPTS=S.endPTS,E.duration=S.duration,c=E)}if(s)for(f.logger.log("discontinuity sliding from playlist, take drift into account"),l=0;l<g.length;l++)g[l].cc+=s;if(c)w.updateFragPTSDTS(y,c.sn,c.startPTS,c.endPTS,c.startDTS,c.endDTS);else if(b>=0&&b<u.length){var O=u[b].start;for(l=0;l<g.length;l++)g[l].start+=O}y.PTSKnown=p.PTSKnown}},{key:"updateFragPTSDTS",value:function(p,y,c,d,C,b){var u,g,s,l;if(y<p.startSN||y>p.endSN)return 0;if(u=y-p.startSN,g=p.fragments,s=g[u],!isNaN(s.startPTS)){var S=Math.abs(s.startPTS-c);isNaN(s.deltaPTS)?s.deltaPTS=S:s.deltaPTS=Math.max(S,s.deltaPTS),c=Math.min(c,s.startPTS),d=Math.max(d,s.endPTS),C=Math.min(C,s.startDTS),b=Math.max(b,s.endDTS)}var E=c-s.start;for(s.start=s.startPTS=c,s.endPTS=d,s.startDTS=C,s.endDTS=b,s.duration=d-c,l=u;l>0;l--)w.updatePTS(g,l,l-1);for(l=u;l<g.length-1;l++)w.updatePTS(g,l,l+1);return p.PTSKnown=!0,E}},{key:"updatePTS",value:function(p,y,c){var d=p[y],C=p[c],b=C.startPTS;isNaN(b)?c>y?C.start=d.start+d.duration:C.start=d.start-C.duration:c>y?(d.duration=b-d.start,d.duration<0&&f.logger.error("negative duration computed for frag "+d.sn+",level "+d.level+", there should be some duration drift between playlist and fragment!")):(C.duration=d.start-b,C.duration<0&&f.logger.error("negative duration computed for frag "+C.sn+",level "+C.level+", there should be some duration drift between playlist and fragment!"))}}]),w}();T.default=h},function(B,T,t){function o(se){return se&&se.__esModule?se:{default:se}}function x(se,te){if(!(se instanceof te))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function se(te,oe){for(var re=0;re<oe.length;re++){var ee=oe[re];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(te,ee.key,ee)}}return function(te,oe,re){return oe&&se(te.prototype,oe),re&&se(te,re),te}}(),h=t(2),w=o(h),p=t(5),y=t(69),c=o(y),d=t(67),C=o(d),b=t(48),u=o(b),g=t(49),s=o(g),l=t(50),S=o(l),E=t(53),O=o(E),P=t(52),A=o(P),D=t(54),M=o(D),L=t(4),V=t(78),j=o(V),N=t(28),G=o(N),K=t(68),k=o(K),J=function(){function se(){var te=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];x(this,se);var oe=se.DefaultConfig;if((te.liveSyncDurationCount||te.liveMaxLatencyDurationCount)&&(te.liveSyncDuration||te.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var re in oe)re in te||(te[re]=oe[re]);if(te.liveMaxLatencyDurationCount!==void 0&&te.liveMaxLatencyDurationCount<=te.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(te.liveMaxLatencyDuration!==void 0&&(te.liveMaxLatencyDuration<=te.liveSyncDuration||te.liveSyncDuration===void 0))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,L.enableLogs)(te.debug),this.config=te;var ee=this.observer=new G.default;ee.trigger=function(Z){for(var ge=arguments.length,Te=Array(ge>1?ge-1:0),we=1;we<ge;we++)Te[we-1]=arguments[we];ee.emit.apply(ee,[Z,Z].concat(Te))},ee.off=function(Z){for(var ge=arguments.length,Te=Array(ge>1?ge-1:0),we=1;we<ge;we++)Te[we-1]=arguments[we];ee.removeListener.apply(ee,[Z].concat(Te))},this.on=ee.on.bind(ee),this.off=ee.off.bind(ee),this.trigger=ee.trigger.bind(ee),this.playlistLoader=new c.default(this),this.fragmentLoader=new C.default(this),this.levelController=new A.default(this),this.abrController=new te.abrController(this),this.bufferController=new te.bufferController(this),this.capLevelController=new te.capLevelController(this),this.streamController=new te.streamController(this),this.timelineController=new te.timelineController(this),this.keyLoader=new k.default(this)}return f(se,null,[{key:"isSupported",value:function(){return window.MediaSource&&typeof window.MediaSource.isTypeSupported=="function"&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"Events",get:function(){return w.default}},{key:"ErrorTypes",get:function(){return p.ErrorTypes}},{key:"ErrorDetails",get:function(){return p.ErrorDetails}},{key:"DefaultConfig",get:function(){return se.defaultConfig||(se.defaultConfig={autoStartLoad:!0,debug:!1,capLevelToPlayerSize:!1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,seekHoleNudgeDuration:.01,stalledInBufferedNudgeThreshold:10,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,appendErrorMaxRetry:3,loader:j.default,fLoader:void 0,pLoader:void 0,abrController:u.default,bufferController:s.default,capLevelController:S.default,streamController:O.default,timelineController:M.default,enableCEA708Captions:!0,enableMP2TPassThrough:!1,abrEwmaFastLive:5,abrEwmaSlowLive:9,abrEwmaFastVoD:4,abrEwmaSlowVoD:15,abrBandWidthFactor:.8,abrBandWidthUpFactor:.7}),se.defaultConfig},set:function(te){se.defaultConfig=te}}]),f(se,[{key:"destroy",value:function(){L.logger.log("destroy"),this.trigger(w.default.DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.streamController.destroy(),this.timelineController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(te){L.logger.log("attachMedia"),this.media=te,this.trigger(w.default.MEDIA_ATTACHING,{media:te})}},{key:"detachMedia",value:function(){L.logger.log("detachMedia"),this.trigger(w.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(te){L.logger.log("loadSource:"+te),this.url=te,this.trigger(w.default.MANIFEST_LOADING,{url:te})}},{key:"startLoad",value:function(){var te=arguments.length<=0||arguments[0]===void 0?0:arguments[0];L.logger.log("startLoad"),this.levelController.startLoad(),this.streamController.startLoad(te)}},{key:"stopLoad",value:function(){L.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad()}},{key:"swapAudioCodec",value:function(){L.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){L.logger.log("recoverMediaError");var te=this.media;this.detachMedia(),this.attachMedia(te)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(te){L.logger.log("set currentLevel:"+te),this.loadLevel=te,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(te){L.logger.log("set nextLevel:"+te),this.levelController.manualLevel=te,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(te){L.logger.log("set loadLevel:"+te),this.levelController.manualLevel=te}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(te){this.levelController.nextLoadLevel=te}},{key:"firstLevel",get:function(){return this.levelController.firstLevel},set:function(te){L.logger.log("set firstLevel:"+te),this.levelController.firstLevel=te}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(te){L.logger.log("set startLevel:"+te),this.levelController.startLevel=te}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(te){L.logger.log("set autoLevelCapping:"+te),this.abrController.autoLevelCapping=te}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}}]),se}();T.default=J},function(B,T,t){B.exports=t(65).default},function(B,T,t){function o(g){return g&&g.__esModule?g:{default:g}}function x(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function f(g,s){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||(typeof s>"u"?"undefined":w(s))!=="object"&&typeof s!="function"?g:s}function h(g,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof s>"u"?"undefined":w(s)));g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(g,s):g.__proto__=s)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol?"symbol":typeof g};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function g(s,l){for(var S=0;S<l.length;S++){var E=l[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,l,S){return l&&g(s.prototype,l),S&&g(s,S),s}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=t(5),u=function(g){function s(l){return x(this,s),f(this,Object.getPrototypeOf(s).call(this,l,c.default.FRAG_LOADING))}return h(s,g),p(s,[{key:"destroy",value:function(){this.loader&&(this.loader.destroy(),this.loader=null),C.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(l){var S=l.frag;this.frag=S,this.frag.loaded=0;var E=this.hls.config;S.loader=this.loader=typeof E.fLoader<"u"?new E.fLoader(E):new E.loader(E),this.loader.load(S.url,"arraybuffer",this.loadsuccess.bind(this),this.loaderror.bind(this),this.loadtimeout.bind(this),E.fragLoadingTimeOut,1,0,this.loadprogress.bind(this),S)}},{key:"loadsuccess",value:function(l,S){var E=l.currentTarget.response;S.length=E.byteLength,this.frag.loader=void 0,this.hls.trigger(c.default.FRAG_LOADED,{payload:E,frag:this.frag,stats:S})}},{key:"loaderror",value:function(l){this.loader&&this.loader.abort(),this.hls.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:this.frag,response:l})}},{key:"loadtimeout",value:function(){this.loader&&this.loader.abort(),this.hls.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:this.frag})}},{key:"loadprogress",value:function(l,S){this.frag.loaded=S.loaded,this.hls.trigger(c.default.FRAG_LOAD_PROGRESS,{frag:this.frag,stats:S})}}]),s}(C.default);T.default=u},function(B,T,t){function o(g){return g&&g.__esModule?g:{default:g}}function x(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function f(g,s){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||(typeof s>"u"?"undefined":w(s))!=="object"&&typeof s!="function"?g:s}function h(g,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof s>"u"?"undefined":w(s)));g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(g,s):g.__proto__=s)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol?"symbol":typeof g};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function g(s,l){for(var S=0;S<l.length;S++){var E=l[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,l,S){return l&&g(s.prototype,l),S&&g(s,S),s}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=t(5),u=function(g){function s(l){x(this,s);var S=f(this,Object.getPrototypeOf(s).call(this,l,c.default.KEY_LOADING));return S.decryptkey=null,S.decrypturl=null,S}return h(s,g),p(s,[{key:"destroy",value:function(){this.loader&&(this.loader.destroy(),this.loader=null),C.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(l){var S=this.frag=l.frag,E=S.decryptdata,O=E.uri;if(O!==this.decrypturl||this.decryptkey===null){var P=this.hls.config;S.loader=this.loader=new P.loader(P),this.decrypturl=O,this.decryptkey=null,S.loader.load(O,"arraybuffer",this.loadsuccess.bind(this),this.loaderror.bind(this),this.loadtimeout.bind(this),P.fragLoadingTimeOut,P.fragLoadingMaxRetry,P.fragLoadingRetryDelay,this.loadprogress.bind(this),S)}else this.decryptkey&&(E.key=this.decryptkey,this.hls.trigger(c.default.KEY_LOADED,{frag:S}))}},{key:"loadsuccess",value:function(l){var S=this.frag;this.decryptkey=S.decryptdata.key=new Uint8Array(l.currentTarget.response),S.loader=void 0,this.hls.trigger(c.default.KEY_LOADED,{frag:S})}},{key:"loaderror",value:function(l){this.loader&&this.loader.abort(),this.hls.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:this.frag,response:l})}},{key:"loadtimeout",value:function(){this.loader&&this.loader.abort(),this.hls.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:this.frag})}},{key:"loadprogress",value:function(){}}]),s}(C.default);T.default=u},function(B,T,t){function o(E){return E&&E.__esModule?E:{default:E}}function x(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}function f(E,O){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||(typeof O>"u"?"undefined":w(O))!=="object"&&typeof O!="function"?E:O}function h(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof O>"u"?"undefined":w(O)));E.prototype=Object.create(O&&O.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(E,O):E.__proto__=O)}var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol?"symbol":typeof E};Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function E(O,P){for(var A=0;A<P.length;A++){var D=P[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}return function(O,P,A){return P&&E(O.prototype,P),A&&E(O,A),O}}(),y=t(2),c=o(y),d=t(12),C=o(d),b=t(5),u=t(77),g=o(u),s=t(73),l=o(s),S=function(E){function O(P){return x(this,O),f(this,Object.getPrototypeOf(O).call(this,P,c.default.MANIFEST_LOADING,c.default.LEVEL_LOADING))}return h(O,E),p(O,[{key:"destroy",value:function(){this.loader&&(this.loader.destroy(),this.loader=null),this.url=this.id=null,C.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(P){this.load(P.url,null)}},{key:"onLevelLoading",value:function(P){this.load(P.url,P.level,P.id)}},{key:"load",value:function(P,A,D){var M,L,V,j=this.hls.config;if(this.loading&&this.loader){if(this.url===P&&this.id===A&&this.id2===D)return;this.loader.abort()}this.url=P,this.id=A,this.id2=D,this.id===null?(M=j.manifestLoadingMaxRetry,L=j.manifestLoadingTimeOut,V=j.manifestLoadingRetryDelay):(M=j.levelLoadingMaxRetry,L=j.levelLoadingTimeOut,V=j.levelLoadingRetryDelay),this.loader=typeof j.pLoader<"u"?new j.pLoader(j):new j.loader(j),this.loading=!0,this.loader.load(P,"",this.loadsuccess.bind(this),this.loaderror.bind(this),this.loadtimeout.bind(this),L,M,V)}},{key:"resolve",value:function(P,A){return g.default.buildAbsoluteURL(A,P)}},{key:"parseMasterPlaylist",value:function(P,A){for(var D=[],M=void 0,L=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g;(M=L.exec(P))!=null;){var V={},j=V.attrs=new l.default(M[1]);V.url=this.resolve(M[2],A);var N=j.decimalResolution("RESOLUTION");N&&(V.width=N.width,V.height=N.height),V.bitrate=j.decimalInteger("AVERAGE-BANDWIDTH")||j.decimalInteger("BANDWIDTH"),V.name=j.NAME;var G=j.CODECS;if(G){G=G.split(",");for(var K=0;K<G.length;K++){var k=G[K];k.indexOf("avc1")!==-1?V.videoCodec=this.avc1toavcoti(k):V.audioCodec=k}}D.push(V)}return D}},{key:"avc1toavcoti",value:function(P){var A,D=P.split(".");return D.length>2?(A=D.shift()+".",A+=parseInt(D.shift()).toString(16),A+=("000"+parseInt(D.shift()).toString(16)).substr(-4)):A=P,A}},{key:"cloneObj",value:function(P){return JSON.parse(JSON.stringify(P))}},{key:"parseLevelPlaylist",value:function(P,A,D){var M,L,V,j,N=0,G=0,K={url:A,fragments:[],live:!0,startSN:0},k={method:null,key:null,iv:null,uri:null},J=0,se=null,te=null;for(L=/(?:#EXT-X-(MEDIA-SEQUENCE):(\d+))|(?:#EXT-X-(TARGETDURATION):(\d+))|(?:#EXT-X-(KEY):(.*))|(?:#EXT(INF):([\d\.]+)[^\r\n]*([\r\n]+[^#|\r\n]+)?)|(?:#EXT-X-(BYTERANGE):([\d]+[@[\d]*)]*[\r\n]+([^#|\r\n]+)?|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.*)[\r\n]+([^#|\r\n]+)?)/g;(M=L.exec(P))!==null;)switch(M.shift(),M=M.filter(function(je){return je!==void 0}),M[0]){case"MEDIA-SEQUENCE":N=K.startSN=parseInt(M[1]);break;case"TARGETDURATION":K.targetduration=parseFloat(M[1]);break;case"ENDLIST":K.live=!1;break;case"DIS":J++;break;case"BYTERANGE":var oe=M[1].split("@");j=oe.length===1?V:parseInt(oe[1]),V=parseInt(oe[0])+j,te&&!te.url&&(te.byteRangeStartOffset=j,te.byteRangeEndOffset=V,te.url=this.resolve(M[2],A));break;case"INF":var re=parseFloat(M[1]);if(!isNaN(re)){var ee,Z=N++;if(k.method&&k.uri&&!k.iv){ee=this.cloneObj(k);for(var ge=new Uint8Array(16),Te=12;Te<16;Te++)ge[Te]=Z>>8*(15-Te)&255;ee.iv=ge}else ee=k;var we=M[2]?this.resolve(M[2],A):null;te={url:we,duration:re,start:G,sn:Z,level:D,cc:J,byteRangeStartOffset:j,byteRangeEndOffset:V,decryptdata:ee,programDateTime:se},K.fragments.push(te),G+=re,j=null,se=null}break;case"KEY":var Le=M[1],Ce=new l.default(Le),be=Ce.enumeratedString("METHOD"),Ge=Ce.URI,Ke=Ce.hexadecimalInteger("IV");be&&(k={method:null,key:null,iv:null,uri:null},Ge&&be==="AES-128"&&(k.method=be,k.uri=this.resolve(Ge,A),k.key=null,k.iv=Ke));break;case"PROGRAM-DATE-TIME":se=new Date(Date.parse(M[1])),te&&!te.url&&M.length>=3&&(te.url=this.resolve(M[2],A),te.programDateTime=se)}return te&&!te.url&&(K.fragments.pop(),G-=te.duration),K.totalduration=G,K.endSN=N-1,K}},{key:"loadsuccess",value:function(P,A){var D,M=P.currentTarget,L=M.responseText,V=M.responseURL,j=this.id,N=this.id2,G=this.hls;if(this.loading=!1,V===void 0&&(V=this.url),A.tload=performance.now(),A.mtime=new Date(M.getResponseHeader("Last-Modified")),L.indexOf("#EXTM3U")===0)if(L.indexOf("#EXTINF:")>0)if(this.id===null)G.trigger(c.default.MANIFEST_LOADED,{levels:[{url:V}],url:V,stats:A});else{var K=this.parseLevelPlaylist(L,V,j);A.tparsed=performance.now(),G.trigger(c.default.LEVEL_LOADED,{details:K,level:j,id:N,stats:A})}else D=this.parseMasterPlaylist(L,V),D.length?G.trigger(c.default.MANIFEST_LOADED,{levels:D,url:V,stats:A}):G.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:V,reason:"no level found in manifest"});else G.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:b.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:V,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(P){var A,D;this.id===null?(A=b.ErrorDetails.MANIFEST_LOAD_ERROR,D=!0):(A=b.ErrorDetails.LEVEL_LOAD_ERROR,D=!1),this.loader&&this.loader.abort(),this.loading=!1,this.hls.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:A,fatal:D,url:this.url,loader:this.loader,response:P.currentTarget,level:this.id,id:this.id2})}},{key:"loadtimeout",value:function(){var P,A;this.id===null?(P=b.ErrorDetails.MANIFEST_LOAD_TIMEOUT,A=!0):(P=b.ErrorDetails.LEVEL_LOAD_TIMEOUT,A=!1),this.loader&&this.loader.abort(),this.loading=!1,this.hls.trigger(c.default.ERROR,{type:b.ErrorTypes.NETWORK_ERROR,details:P,fatal:A,url:this.url,loader:this.loader,level:this.id,id:this.id2})}}]),O}(C.default);T.default=S},function(B,T){function t(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var o=function(){function f(h,w){for(var p=0;p<w.length;p++){var y=w[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,w,p){return w&&f(h.prototype,w),p&&f(h,p),h}}(),x=function(){function f(){t(this,f)}return o(f,null,[{key:"init",value:function(){f.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var h;for(h in f.types)f.types.hasOwnProperty(h)&&(f.types[h]=[h.charCodeAt(0),h.charCodeAt(1),h.charCodeAt(2),h.charCodeAt(3)]);var w=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),p=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);f.HDLR_TYPES={video:w,audio:p};var y=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c=new Uint8Array([0,0,0,0,0,0,0,0]);f.STTS=f.STSC=f.STCO=c,f.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),f.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),f.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),f.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var d=new Uint8Array([105,115,111,109]),C=new Uint8Array([97,118,99,49]),b=new Uint8Array([0,0,0,1]);f.FTYP=f.box(f.types.ftyp,d,b,d,C),f.DINF=f.box(f.types.dinf,f.box(f.types.dref,y))}},{key:"box",value:function(h){for(var w,p=Array.prototype.slice.call(arguments,1),y=8,c=p.length,d=c;c--;)y+=p[c].byteLength;for(w=new Uint8Array(y),w[0]=y>>24&255,w[1]=y>>16&255,w[2]=y>>8&255,w[3]=255&y,w.set(h,4),c=0,y=8;c<d;c++)w.set(p[c],y),y+=p[c].byteLength;return w}},{key:"hdlr",value:function(h){return f.box(f.types.hdlr,f.HDLR_TYPES[h])}},{key:"mdat",value:function(h){return f.box(f.types.mdat,h)}},{key:"mdhd",value:function(h,w){return w*=h,f.box(f.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,h>>24&255,h>>16&255,h>>8&255,255&h,w>>24,w>>16&255,w>>8&255,255&w,85,196,0,0]))}},{key:"mdia",value:function(h){return f.box(f.types.mdia,f.mdhd(h.timescale,h.duration),f.hdlr(h.type),f.minf(h))}},{key:"mfhd",value:function(h){return f.box(f.types.mfhd,new Uint8Array([0,0,0,0,h>>24,h>>16&255,h>>8&255,255&h]))}},{key:"minf",value:function(h){return h.type==="audio"?f.box(f.types.minf,f.box(f.types.smhd,f.SMHD),f.DINF,f.stbl(h)):f.box(f.types.minf,f.box(f.types.vmhd,f.VMHD),f.DINF,f.stbl(h))}},{key:"moof",value:function(h,w,p){return f.box(f.types.moof,f.mfhd(h),f.traf(p,w))}},{key:"moov",value:function(h){for(var w=h.length,p=[];w--;)p[w]=f.trak(h[w]);return f.box.apply(null,[f.types.moov,f.mvhd(h[0].timescale,h[0].duration)].concat(p).concat(f.mvex(h)))}},{key:"mvex",value:function(h){for(var w=h.length,p=[];w--;)p[w]=f.trex(h[w]);return f.box.apply(null,[f.types.mvex].concat(p))}},{key:"mvhd",value:function(h,w){w*=h;var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,h>>24&255,h>>16&255,h>>8&255,255&h,w>>24&255,w>>16&255,w>>8&255,255&w,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return f.box(f.types.mvhd,p)}},{key:"sdtp",value:function(h){var w,p,y=h.samples||[],c=new Uint8Array(4+y.length);for(p=0;p<y.length;p++)w=y[p].flags,c[p+4]=w.dependsOn<<4|w.isDependedOn<<2|w.hasRedundancy;return f.box(f.types.sdtp,c)}},{key:"stbl",value:function(h){return f.box(f.types.stbl,f.stsd(h),f.box(f.types.stts,f.STTS),f.box(f.types.stsc,f.STSC),f.box(f.types.stsz,f.STSZ),f.box(f.types.stco,f.STCO))}},{key:"avc1",value:function(h){var w,p,y,c=[],d=[];for(w=0;w<h.sps.length;w++)p=h.sps[w],y=p.byteLength,c.push(y>>>8&255),c.push(255&y),c=c.concat(Array.prototype.slice.call(p));for(w=0;w<h.pps.length;w++)p=h.pps[w],y=p.byteLength,d.push(y>>>8&255),d.push(255&y),d=d.concat(Array.prototype.slice.call(p));var C=f.box(f.types.avcC,new Uint8Array([1,c[3],c[4],c[5],255,224|h.sps.length].concat(c).concat([h.pps.length]).concat(d))),b=h.width,u=h.height;return f.box(f.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,b>>8&255,255&b,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),C,f.box(f.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(h){var w=h.config.length;return new Uint8Array([0,0,0,0,3,23+w,0,1,0,4,15+w,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([w]).concat(h.config).concat([6,1,2]))}},{key:"mp4a",value:function(h){var w=h.audiosamplerate;return f.box(f.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,h.channelCount,0,16,0,0,0,0,w>>8&255,255&w,0,0]),f.box(f.types.esds,f.esds(h)))}},{key:"stsd",value:function(h){return h.type==="audio"?f.box(f.types.stsd,f.STSD,f.mp4a(h)):f.box(f.types.stsd,f.STSD,f.avc1(h))}},{key:"tkhd",value:function(h){var w=h.id,p=h.duration*h.timescale,y=h.width,c=h.height;return f.box(f.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,w>>24&255,w>>16&255,w>>8&255,255&w,0,0,0,0,p>>24,p>>16&255,p>>8&255,255&p,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,y>>8&255,255&y,0,0,c>>8&255,255&c,0,0]))}},{key:"traf",value:function(h,w){var p=f.sdtp(h),y=h.id;return f.box(f.types.traf,f.box(f.types.tfhd,new Uint8Array([0,0,0,0,y>>24,y>>16&255,y>>8&255,255&y])),f.box(f.types.tfdt,new Uint8Array([0,0,0,0,w>>24,w>>16&255,w>>8&255,255&w])),f.trun(h,p.length+16+16+8+16+8+8),p)}},{key:"trak",value:function(h){return h.duration=h.duration||4294967295,f.box(f.types.trak,f.tkhd(h),f.mdia(h))}},{key:"trex",value:function(h){var w=h.id;return f.box(f.types.trex,new Uint8Array([0,0,0,0,w>>24,w>>16&255,w>>8&255,255&w,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(h,w){var p,y,c,d,C,b,u=h.samples||[],g=u.length,s=12+16*g,l=new Uint8Array(s);for(w+=8+s,l.set([0,0,15,1,g>>>24&255,g>>>16&255,g>>>8&255,255&g,w>>>24&255,w>>>16&255,w>>>8&255,255&w],0),p=0;p<g;p++)y=u[p],c=y.duration,d=y.size,C=y.flags,b=y.cts,l.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,d>>>24&255,d>>>16&255,d>>>8&255,255&d,C.isLeading<<2|C.dependsOn,C.isDependedOn<<6|C.hasRedundancy<<4|C.paddingValue<<1|C.isNonSync,61440&C.degradPrio,15&C.degradPrio,b>>>24&255,b>>>16&255,b>>>8&255,255&b],12+16*p);return f.box(f.types.trun,l)}},{key:"initSegment",value:function(h){f.types||f.init();var w,p=f.moov(h);return w=new Uint8Array(f.FTYP.byteLength+p.byteLength),w.set(f.FTYP),w.set(p,f.FTYP.byteLength),w}}]),f}();T.default=x},function(B,T,t){function o(b){return b&&b.__esModule?b:{default:b}}function x(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function b(u,g){for(var s=0;s<g.length;s++){var l=g[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(u,l.key,l)}}return function(u,g,s){return g&&b(u.prototype,g),s&&b(u,s),u}}(),h=t(2),w=o(h),p=t(4),y=t(70),c=o(y),d=t(5),C=function(){function b(u){x(this,b),this.observer=u,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return f(b,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(u,g,s,l,S,E){this.ISGenerated||this.generateIS(u,g,S),this.ISGenerated&&(g.samples.length&&this.remuxVideo(g,S,E),u.samples.length&&this.remuxAudio(u,S,E)),s.samples.length&&this.remuxID3(s,S),l.samples.length&&this.remuxText(l,S),this.observer.trigger(w.default.FRAG_PARSED)}},{key:"generateIS",value:function(u,g,s){var l,S,E=this.observer,O=u.samples,P=g.samples,A=this.PES_TIMESCALE,D={},M={tracks:D,unique:!1},L=this._initPTS===void 0;L&&(l=S=1/0),u.config&&O.length&&(u.timescale=u.audiosamplerate,u.timescale*u.duration>Math.pow(2,32)&&function(){var V=function j(N,G){return G?j(G,N%G):N};u.timescale=u.audiosamplerate/V(u.audiosamplerate,1024)}(),p.logger.log("audio mp4 timescale :"+u.timescale),D.audio={container:"audio/mp4",codec:u.codec,initSegment:c.default.initSegment([u]),metadata:{channelCount:u.channelCount}},L&&(l=S=O[0].pts-A*s)),g.sps&&g.pps&&P.length&&(g.timescale=this.MP4_TIMESCALE,D.video={container:"video/mp4",codec:g.codec,initSegment:c.default.initSegment([g]),metadata:{width:g.width,height:g.height}},L&&(l=Math.min(l,P[0].pts-A*s),S=Math.min(S,P[0].dts-A*s))),Object.keys(D).length?(E.trigger(w.default.FRAG_PARSING_INIT_SEGMENT,M),this.ISGenerated=!0,L&&(this._initPTS=l,this._initDTS=S)):E.trigger(w.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(u,g,s){var l,S,E,O,P,A,D,M,L,V,j,N,G,K,k,J=8,se=this.PES_TIMESCALE,te=this.PES2MP4SCALEFACTOR,oe=[],re=u.samples.reduce(function(we,Le){return Math.max(Math.min(we,Le.pts-Le.dts),-18e3)},0);for(re<0&&p.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(re/90)+" ms to overcome this issue"),A=new Uint8Array(u.len+4*u.nbNalu+8),l=new DataView(A.buffer),l.setUint32(0,A.byteLength),A.set(c.default.types.mdat,4);u.samples.length;){for(S=u.samples.shift(),O=0;S.units.units.length;)P=S.units.units.shift(),l.setUint32(J,P.data.byteLength),J+=4,A.set(P.data,J),J+=P.data.byteLength,O+=4+P.data.byteLength;if(j=S.pts-this._initDTS,N=S.dts-this._initDTS+re,N=Math.min(j,N),V!==void 0){G=this._PTSNormalize(j,V),K=this._PTSNormalize(N,V);var ee=(K-V)/te;ee<=0&&(p.logger.log("invalid sample duration at PTS/DTS: "+S.pts+"/"+S.dts+":"+ee),ee=1),E.duration=ee}else{var Z=void 0,ge=void 0;Z=s?this.nextAvcDts:g*se,G=this._PTSNormalize(j,Z),K=this._PTSNormalize(N,Z),ge=Math.round((K-Z)/90),s&&ge&&(ge>1?p.logger.log("AVC:"+ge+" ms hole between fragments detected,filling it"):ge<-1&&p.logger.log("AVC:"+-ge+" ms overlapping between fragments detected"),K=Z,G=Math.max(G-ge,K),p.logger.log("Video/PTS/DTS adjusted: "+G+"/"+K+",delta:"+ge)),M=Math.max(0,G),L=Math.max(0,K)}E={size:O,duration:0,cts:(G-K)/te,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0}},k=E.flags,S.key===!0?(k.dependsOn=2,k.isNonSync=0):(k.dependsOn=1,k.isNonSync=1),oe.push(E),V=K}var Te=0;oe.length>=2&&(Te=oe[oe.length-2].duration,E.duration=Te),this.nextAvcDts=K+Te*te,u.len=0,u.nbNalu=0,oe.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(k=oe[0].flags,k.dependsOn=2,k.isNonSync=0),u.samples=oe,D=c.default.moof(u.sequenceNumber++,L/te,u),u.samples=[],this.observer.trigger(w.default.FRAG_PARSING_DATA,{data1:D,data2:A,startPTS:M/se,endPTS:(G+te*Te)/se,startDTS:L/se,endDTS:this.nextAvcDts/se,type:"video",nb:oe.length})}},{key:"remuxAudio",value:function(u,g,s){var l,S,E,O,P,A,D,M,L,V,j,N,G,K=8,k=this.PES_TIMESCALE,J=u.timescale,se=k/J,te=1024*u.timescale/u.audiosamplerate,oe=[],re=[];for(u.samples.sort(function(we,Le){return we.pts-Le.pts}),re=u.samples;re.length;){if(S=re.shift(),O=S.unit,V=S.pts-this._initDTS,j=S.dts-this._initDTS,L!==void 0)N=this._PTSNormalize(V,L),G=this._PTSNormalize(j,L),E.duration=(G-L)/se,Math.abs(E.duration-te)>te/10&&p.logger.log("invalid AAC sample duration at PTS "+Math.round(V/90)+",should be 1024,found :"+Math.round(E.duration*u.audiosamplerate/u.timescale)),E.duration=te,N=G=te*se+L;else{var ee=void 0,Z=void 0;if(ee=s?this.nextAacPts:g*k,N=this._PTSNormalize(V,ee),G=this._PTSNormalize(j,ee),Z=Math.round(1e3*(N-ee)/k),s&&Z){if(Z>0)p.logger.log(Z+" ms hole between AAC samples detected,filling it");else if(Z<-12){p.logger.log(-Z+" ms overlapping between AAC samples detected, drop frame"),u.len-=O.byteLength;continue}N=G=ee}if(D=Math.max(0,N),M=Math.max(0,G),!(u.len>0))return;P=new Uint8Array(u.len+8),l=new DataView(P.buffer),l.setUint32(0,P.byteLength),P.set(c.default.types.mdat,4)}P.set(O,K),K+=O.byteLength,E={size:O.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},oe.push(E),L=G}var ge=0,Te=oe.length;Te>=2&&(ge=oe[Te-2].duration,E.duration=ge),Te&&(this.nextAacPts=N+se*ge,u.len=0,u.samples=oe,A=c.default.moof(u.sequenceNumber++,M/se,u),u.samples=[],this.observer.trigger(w.default.FRAG_PARSING_DATA,{data1:A,data2:P,startPTS:D/k,endPTS:this.nextAacPts/k,startDTS:M/k,endDTS:(G+se*ge)/k,type:"audio",nb:Te}))}},{key:"remuxID3",value:function(u,g){var s,l=u.samples.length;if(l){for(var S=0;S<l;S++)s=u.samples[S],s.pts=(s.pts-this._initPTS)/this.PES_TIMESCALE,s.dts=(s.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(w.default.FRAG_PARSING_METADATA,{samples:u.samples})}u.samples=[]}},{key:"remuxText",value:function(u,g){u.samples.sort(function(E,O){return E.pts-O.pts});var s,l=u.samples.length;if(l){for(var S=0;S<l;S++)s=u.samples[S],s.pts=(s.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(w.default.FRAG_PARSING_USERDATA,{samples:u.samples})}u.samples=[]}},{key:"_PTSNormalize",value:function(u,g){var s;if(g===void 0)return u;for(s=g<u?-8589934592:8589934592;Math.abs(u-g)>4294967296;)u+=s;return u}},{key:"passthrough",get:function(){return!1}}]),b}();T.default=C},function(B,T,t){function o(y){return y&&y.__esModule?y:{default:y}}function x(y,c){if(!(y instanceof c))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=function(){function y(c,d){for(var C=0;C<d.length;C++){var b=d[C];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,d,C){return d&&y(c.prototype,d),C&&y(c,C),c}}(),h=t(2),w=o(h),p=function(){function y(c){x(this,y),this.observer=c,this.ISGenerated=!1}return f(y,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(c,d,C,b,u,g){var s=this.observer;if(!this.ISGenerated){var l={},S={tracks:l,unique:!0},E=d,O=E.codec;O&&(S.tracks.video={container:E.container,codec:O,metadata:{width:E.width,height:E.height}}),E=c,O=E.codec,O&&(S.tracks.audio={container:E.container,codec:O,metadata:{channelCount:E.channelCount}}),this.ISGenerated=!0,s.trigger(w.default.FRAG_PARSING_INIT_SEGMENT,S)}s.trigger(w.default.FRAG_PARSING_DATA,{data1:g,startPTS:u,startDTS:u,type:"audiovideo",nb:1})}},{key:"passthrough",get:function(){return!0}}]),y}();T.default=p},function(B,T){function t(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var o=function(){function f(h,w){for(var p=0;p<w.length;p++){var y=w[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,w,p){return w&&f(h.prototype,w),p&&f(h,p),h}}(),x=function(){function f(h){t(this,f),typeof h=="string"&&(h=f.parseAttrList(h));for(var w in h)h.hasOwnProperty(w)&&(this[w]=h[w])}return o(f,[{key:"decimalInteger",value:function(h){var w=parseInt(this[h],10);return w>Number.MAX_SAFE_INTEGER?1/0:w}},{key:"hexadecimalInteger",value:function(h){if(this[h]){var w=(this[h]||"0x").slice(2);w=(1&w.length?"0":"")+w;for(var p=new Uint8Array(w.length/2),y=0;y<w.length/2;y++)p[y]=parseInt(w.slice(2*y,2*y+2),16);return p}return null}},{key:"hexadecimalIntegerAsNumber",value:function(h){var w=parseInt(this[h],16);return w>Number.MAX_SAFE_INTEGER?1/0:w}},{key:"decimalFloatingPoint",value:function(h){return parseFloat(this[h])}},{key:"enumeratedString",value:function(h){return this[h]}},{key:"decimalResolution",value:function(h){var w=/^(\d+)x(\d+)$/.exec(this[h]);if(w!==null)return{width:parseInt(w[1],10),height:parseInt(w[2],10)}}}],[{key:"parseAttrList",value:function(h){for(var w,p=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,y={};(w=p.exec(h))!==null;){var c=w[2],d='"';c.indexOf(d)===0&&c.lastIndexOf(d)===c.length-1&&(c=c.slice(1,-1)),y[w[1]]=c}return y}}]),f}();T.default=x},function(B,T){var t={search:function(o,x){for(var f=0,h=o.length-1,w=null,p=null;f<=h;){w=(f+h)/2|0,p=o[w];var y=x(p);if(y>0)f=w+1;else{if(!(y<0))return p;h=w-1}}return null}};B.exports=t},function(B,T){function t(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var o=function(){function f(h,w){for(var p=0;p<w.length;p++){var y=w[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,w,p){return w&&f(h.prototype,w),p&&f(h,p),h}}(),x=function(){function f(){t(this,f)}return o(f,[{key:"attach",value:function(h){this.media=h,this.display=[],this.memory=[]}},{key:"detach",value:function(){this.clear()}},{key:"destroy",value:function(){}},{key:"_createCue",value:function(){var h=window.VTTCue||window.TextTrackCue,w=this.cue=new h(-1,-1,"");w.text="",w.pauseOnExit=!1,w.startTime=Number.MAX_VALUE,w.endTime=Number.MAX_VALUE,this.memory.push(w)}},{key:"clear",value:function(){var h=this._textTrack;if(h&&h.cues)for(;h.cues.length>0;)h.removeCue(h.cues[0])}},{key:"push",value:function(h,w){this.cue||this._createCue();for(var p,y,c,d,C,b=31&w[0],u=2,g=0;g<b;g++)if(p=w[u++],y=127&w[u++],c=127&w[u++],d=(4&p)!==0,C=3&p,(y!==0||c!==0)&&d&&C===0){if(32&y||64&y)this.cue.text+=this._fromCharCode(y)+this._fromCharCode(c);else if((y===17||y===25)&&c>=48&&c<=63)switch(c){case 48:this.cue.text+="";break;case 49:this.cue.text+="";break;case 50:this.cue.text+="";break;case 51:this.cue.text+="";break;case 52:this.cue.text+="";break;case 53:this.cue.text+="";break;case 54:this.cue.text+="";break;case 55:this.cue.text+="";break;case 56:this.cue.text+="";break;case 57:this.cue.text+=" ";break;case 58:this.cue.text+="";break;case 59:this.cue.text+="";break;case 60:this.cue.text+="";break;case 61:this.cue.text+="";break;case 62:this.cue.text+="";break;case 63:this.cue.text+=""}if((y===20||y===28)&&c>=32&&c<=47)switch(c){case 32:this._clearActiveCues(h);break;case 33:this.cue.text=this.cue.text.substr(0,this.cue.text.length-1);break;case 34:break;case 35:break;case 36:break;case 37:break;case 38:break;case 39:break;case 40:break;case 41:this._clearActiveCues(h);break;case 42:break;case 43:break;case 44:this._clearActiveCues(h);break;case 45:break;case 46:this._text="";break;case 47:this._flipMemory(h)}}}},{key:"_fromCharCode",value:function(h){switch(h){case 42:return"";case 2:return"";case 2:return"";case 4:return"";case 5:return"";case 6:return"";case 3:return"";case 4:return"";case 5:return"";case 6:return"";case 7:return"";default:return String.fromCharCode(h)}}},{key:"_flipMemory",value:function(h){this._clearActiveCues(h),this._flushCaptions(h)}},{key:"_flushCaptions",value:function(h){this._has708||(this._textTrack=this.media.addTextTrack("captions","English","en"),this._has708=!0);var w=!0,p=!1,y=void 0;try{for(var c,d=this.memory[Symbol.iterator]();!(w=(c=d.next()).done);w=!0){var C=c.value;C.startTime=h,this._textTrack.addCue(C),this.display.push(C)}}catch(b){p=!0,y=b}finally{try{!w&&d.return&&d.return()}finally{if(p)throw y}}this.memory=[],this.cue=null}},{key:"_clearActiveCues",value:function(h){var w=!0,p=!1,y=void 0;try{for(var c,d=this.display[Symbol.iterator]();!(w=(c=d.next()).done);w=!0){var C=c.value;C.endTime=h}}catch(b){p=!0,y=b}finally{try{!w&&d.return&&d.return()}finally{if(p)throw y}}this.display=[]}},{key:"_clearBufferedCues",value:function(){}}]),f}();T.default=x},function(B,T){function t(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var o=function(){function f(h,w){for(var p=0;p<w.length;p++){var y=w[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,w,p){return w&&f(h.prototype,w),p&&f(h,p),h}}(),x=function(){function f(h){t(this,f),this.alpha_=h?Math.exp(Math.log(.5)/h):0,this.estimate_=0,this.totalWeight_=0}return o(f,[{key:"sample",value:function(h,w){var p=Math.pow(this.alpha_,h);this.estimate_=w*(1-p)+p*this.estimate_,this.totalWeight_+=h}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var h=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/h}return this.estimate_}}]),f}();T.default=x},function(B,T){var t={buildAbsoluteURL:function(o,x){if(x=x.trim(),/^[a-z]+:/i.test(x))return x;var f=null,h=null,w=/^([^#]*)(.*)$/.exec(x);w&&(h=w[2],x=w[1]);var p=/^([^\?]*)(.*)$/.exec(x);p&&(f=p[2],x=p[1]);var y=/^([^#]*)(.*)$/.exec(o);y&&(o=y[1]);var c=/^([^\?]*)(.*)$/.exec(o);c&&(o=c[1]);var d=/^(([a-z]+:)?\/\/[a-z0-9\.\-_~]+(:[0-9]+)?)?(\/.*)$/i.exec(o);if(!d)throw new Error("Error trying to parse base URL.");var C=d[2]||"",b=d[1]||"",u=d[4],g=null;return g=/^\/\//.test(x)?C+"//"+t.buildAbsolutePath("",x.substring(2)):/^\//.test(x)?b+"/"+t.buildAbsolutePath("",x.substring(1)):t.buildAbsolutePath(b+u,x),f&&(g+=f),h&&(g+=h),g},buildAbsolutePath:function(o,x){for(var f,h,w=x,p="",y=o.replace(/[^\/]*$/,w.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),c=0;h=y.indexOf("/../",c),h>-1;c=h+f)f=/^\/(?:\.\.\/)*/.exec(y.slice(h))[0].length,p=(p+y.substring(c,h)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(f-1)/3+"}$"),"/");return p+y.substr(c)}};B.exports=t},function(B,T,t){function o(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(p,y){for(var c=0;c<y.length;c++){var d=y[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return function(p,y,c){return y&&w(p.prototype,y),c&&w(p,c),p}}(),f=t(4),h=function(){function w(p){o(this,w),p&&p.xhrSetup&&(this.xhrSetup=p.xhrSetup)}return x(w,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var p=this.loader,y=this.timeoutHandle;p&&p.readyState!==4&&(this.stats.aborted=!0,p.abort()),y&&window.clearTimeout(y)}},{key:"load",value:function(p,y,c,d,C,b,u,g){var s=arguments.length<=8||arguments[8]===void 0?null:arguments[8],l=arguments.length<=9||arguments[9]===void 0?null:arguments[9];this.url=p,!l||isNaN(l.byteRangeStartOffset)||isNaN(l.byteRangeEndOffset)||(this.byteRange=l.byteRangeStartOffset+"-"+(l.byteRangeEndOffset-1)),this.responseType=y,this.onSuccess=c,this.onProgress=s,this.onTimeout=C,this.onError=d,this.stats={trequest:performance.now(),retry:0},this.timeout=b,this.maxRetry=u,this.retryDelay=g,this.loadInternal()}},{key:"loadInternal",value:function(){var p;p=typeof XDomainRequest<"u"?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,p.onloadend=this.loadend.bind(this),p.onprogress=this.loadprogress.bind(this),p.open("GET",this.url,!0),this.byteRange&&p.setRequestHeader("Range","bytes="+this.byteRange),p.responseType=this.responseType;var y=this.stats;y.tfirst=0,y.loaded=0,this.xhrSetup&&this.xhrSetup(p,this.url),this.timeoutHandle=window.setTimeout(this.loadtimeout.bind(this),this.timeout),p.send()}},{key:"loadend",value:function(p){var y=p.currentTarget,c=y.status,d=this.stats;d.aborted||(c>=200&&c<300?(window.clearTimeout(this.timeoutHandle),d.tload=Math.max(d.tfirst,performance.now()),this.onSuccess(p,d)):d.retry<this.maxRetry?(f.logger.warn(c+" while loading "+this.url+", retrying in "+this.retryDelay+"..."),this.destroy(),window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,64e3),d.retry++):(window.clearTimeout(this.timeoutHandle),f.logger.error(c+" while loading "+this.url),this.onError(p)))}},{key:"loadtimeout",value:function(p){f.logger.warn("timeout while loading "+this.url),this.onTimeout(p,this.stats)}},{key:"loadprogress",value:function(p){var y=this.stats;y.tfirst===0&&(y.tfirst=Math.max(performance.now(),y.trequest)),y.loaded=p.loaded,this.onProgress&&this.onProgress(p,y)}}]),w}();T.default=h},function(B,T){function t(ge,Te){for(var we=-1,Le=Array(ge);++we<ge;)Le[we]=Te(we);return Le}function o(ge,Te){return ge&&re(ge,Te,P)}function x(ge,Te){return K.call(ge,Te)||(typeof ge>"u"?"undefined":A(ge))=="object"&&Te in ge&&y(ge)===null}function f(ge){return te(Object(ge))}function h(ge){return function(Te){return Te==null?void 0:Te[ge]}}function w(ge,Te){return function(we,Le){if(we==null)return we;if(!u(we))return ge(we,Le);for(var Ce=we.length,be=-1,Ge=Object(we);++be<Ce&&Le(Ge[be],be,Ge)!==!1;);return we}}function p(ge){return function(Te,we,Le){for(var Ce=-1,be=Object(Te),Ge=Le(Te),Ke=Ge.length;Ke--;){var je=Ge[++Ce];if(we(be[je],je,be)===!1)break}return Te}}function y(ge){return se(Object(ge))}function c(ge){var Te=ge?ge.length:void 0;return l(Te)&&(Z(ge)||O(ge)||b(ge))?t(Te,String):null}function d(ge,Te){return Te=Te??D,!!Te&&(typeof ge=="number"||N.test(ge))&&ge>-1&&ge%1==0&&ge<Te}function C(ge){var Te=ge&&ge.constructor,we=typeof Te=="function"&&Te.prototype||G;return ge===we}function b(ge){return g(ge)&&K.call(ge,"callee")&&(!J.call(ge,"callee")||k.call(ge)==M)}function u(ge){return ge!=null&&l(ee(ge))&&!s(ge)}function g(ge){return E(ge)&&u(ge)}function s(ge){var Te=S(ge)?k.call(ge):"";return Te==L||Te==V}function l(ge){return typeof ge=="number"&&ge>-1&&ge%1==0&&ge<=D}function S(ge){var Te=typeof ge>"u"?"undefined":A(ge);return!!ge&&(Te=="object"||Te=="function")}function E(ge){return!!ge&&(typeof ge>"u"?"undefined":A(ge))=="object"}function O(ge){return typeof ge=="string"||!Z(ge)&&E(ge)&&k.call(ge)==j}function P(ge){var Te=C(ge);if(!Te&&!u(ge))return f(ge);var we=c(ge),Le=!!we,Ce=we||[],be=Ce.length;for(var Ge in ge)!x(ge,Ge)||Le&&(Ge=="length"||d(Ge,be))||Te&&Ge=="constructor"||Ce.push(Ge);return Ce}var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol?"symbol":typeof ge},D=9007199254740991,M="[object Arguments]",L="[object Function]",V="[object GeneratorFunction]",j="[object String]",N=/^(?:0|[1-9]\d*)$/,G=Object.prototype,K=G.hasOwnProperty,k=G.toString,J=G.propertyIsEnumerable,se=Object.getPrototypeOf,te=Object.keys,oe=w(o),re=p(),ee=h("length"),Z=Array.isArray;B.exports=oe},function(B,T){function t(o,x,f,h){var w;return f(o,function(p,y,c){if(x(p,y,c))return w=h?y:p,!1}),w}B.exports=t},function(B,T){function t(o,x,f){for(var h=o.length,w=f?h:-1;f?w--:++w<h;)if(x(o[w],w,o))return w;return-1}B.exports=t},function(B,T,t){function o(F,X){return!!F.length&&f(F,X,0)>-1}function x(F,X,le){for(var ve=-1,Se=F.length;++ve<Se;)if(le(X,F[ve]))return!0;return!1}function f(F,X,le){if(X!==X)return w(F,le);for(var ve=le-1,Se=F.length;++ve<Se;)if(F[ve]===X)return ve;return-1}function h(F,X){return F.has(X)}function w(F,X,le){for(var ve=F.length,Se=X+-1;++Se<ve;){var ye=F[Se];if(ye!==ye)return Se}return-1}function p(F){var X=!1;if(F!=null&&typeof F.toString!="function")try{X=!!(F+"")}catch{}return X}function y(F){var X=-1,le=Array(F.size);return F.forEach(function(ve){le[++X]=ve}),le}function c(F){var X=-1,le=F?F.length:0;for(this.clear();++X<le;){var ve=F[X];this.set(ve[0],ve[1])}}function d(){this.__data__=m?m(null):{}}function C(F){return this.has(F)&&delete this.__data__[F]}function b(F){var X=this.__data__;if(m){var le=X[F];return le===Ge?void 0:le}return gt.call(X,F)?X[F]:void 0}function u(F){var X=this.__data__;return m?X[F]!==void 0:gt.call(X,F)}function g(F,X){var le=this.__data__;return le[F]=m&&X===void 0?Ge:X,this}function s(F){var X=-1,le=F?F.length:0;for(this.clear();++X<le;){var ve=F[X];this.set(ve[0],ve[1])}}function l(){this.__data__=[]}function S(F){var X=this.__data__,le=k(X,F);if(le<0)return!1;var ve=X.length-1;return le==ve?X.pop():Me.call(X,le,1),!0}function E(F){var X=this.__data__,le=k(X,F);return le<0?void 0:X[le][1]}function O(F){return k(this.__data__,F)>-1}function P(F,X){var le=this.__data__,ve=k(le,F);return ve<0?le.push([F,X]):le[ve][1]=X,this}function A(F){var X=-1,le=F?F.length:0;for(this.clear();++X<le;){var ve=F[X];this.set(ve[0],ve[1])}}function D(){this.__data__={hash:new c,map:new(H||s),string:new c}}function M(F){return se(this,F).delete(F)}function L(F){return se(this,F).get(F)}function V(F){return se(this,F).has(F)}function j(F,X){return se(this,F).set(F,X),this}function N(F){var X=-1,le=F?F.length:0;for(this.__data__=new A;++X<le;)this.add(F[X])}function G(F){return this.__data__.set(F,Ge),this}function K(F){return this.__data__.has(F)}function k(F,X){for(var le=F.length;le--;)if(ee(F[le][0],X))return le;return-1}function J(F,X,le){var ve=-1,Se=o,ye=F.length,Re=!0,Ie=[],ke=Ie;if(le)Re=!1,Se=x;else if(ye>=be){var $e=X?null:Le(F);if($e)return y($e);Re=!1,Se=h,ke=new N}else ke=X?[]:Ie;e:for(;++ve<ye;){var qe=F[ve],lt=X?X(qe):qe;if(qe=le||qe!==0?qe:0,Re&&lt===lt){for(var nt=ke.length;nt--;)if(ke[nt]===lt)continue e;X&&ke.push(lt),Ie.push(qe)}else Se(ke,lt,le)||(ke!==Ie&&ke.push(lt),Ie.push(qe))}return Ie}function se(F,X){var le=F.__data__;return oe(X)?le[typeof X=="string"?"string":"hash"]:le.map}function te(F,X){var le=F[X];return Te(le)?le:void 0}function oe(F){var X=typeof F>"u"?"undefined":we(F);return X=="string"||X=="number"||X=="symbol"||X=="boolean"?F!=="__proto__":F===null}function re(F){if(F!=null){try{return We.call(F)}catch{}try{return F+""}catch{}}return""}function ee(F,X){return F===X||F!==F&&X!==X}function Z(F){var X=ge(F)?at.call(F):"";return X==Ke||X==je}function ge(F){var X=typeof F>"u"?"undefined":we(F);return!!F&&(X=="object"||X=="function")}function Te(F){if(!ge(F))return!1;var X=Z(F)||p(F)?_e:Be;return X.test(re(F))}var we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol?"symbol":typeof F},Le=t(83),Ce=t(84),be=200,Ge="__lodash_hash_undefined__",Ke="[object Function]",je="[object GeneratorFunction]",Ze=/[\\^$.*+?()[\]{}|]/g,Be=/^\[object .+?Constructor\]$/,Oe=Array.prototype,ze=Object.prototype,We=Function.prototype.toString,gt=ze.hasOwnProperty,at=ze.toString,_e=RegExp("^"+We.call(gt).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=Oe.splice,H=te(Ce,"Map"),m=te(Object,"create");c.prototype.clear=d,c.prototype.delete=C,c.prototype.get=b,c.prototype.has=u,c.prototype.set=g,s.prototype.clear=l,s.prototype.delete=S,s.prototype.get=E,s.prototype.has=O,s.prototype.set=P,A.prototype.clear=D,A.prototype.delete=M,A.prototype.get=L,A.prototype.has=V,A.prototype.set=j,N.prototype.add=N.prototype.push=G,N.prototype.has=K,B.exports=J},function(B,T,t){(function(o,x){function f(oe){return oe&&oe.Object===Object?oe:null}function h(oe){var re=!1;if(oe!=null&&typeof oe.toString!="function")try{re=!!(oe+"")}catch{}return re}function w(oe){var re=-1,ee=Array(oe.size);return oe.forEach(function(Z){ee[++re]=Z}),ee}function p(oe,re){var ee=oe[re];return C(ee)?ee:void 0}function y(oe){if(oe!=null){try{return G.call(oe)}catch{}try{return oe+""}catch{}}return""}function c(oe){var re=d(oe)?k.call(oe):"";return re==s||re==l}function d(oe){var re=typeof oe>"u"?"undefined":u(oe);return!!oe&&(re=="object"||re=="function")}function C(oe){if(!d(oe))return!1;var re=c(oe)||h(oe)?J:E;return re.test(y(oe))}function b(){}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol?"symbol":typeof oe},g=1/0,s="[object Function]",l="[object GeneratorFunction]",S=/[\\^$.*+?()[\]{}|]/g,E=/^\[object .+?Constructor\]$/,O={function:!0,object:!0},P=O[u(T)]&&T&&!T.nodeType?T:void 0,A=O[u(o)]&&o&&!o.nodeType?o:void 0,D=f(P&&A&&(typeof x>"u"?"undefined":u(x))=="object"&&x),M=f(O[typeof self>"u"?"undefined":u(self)]&&self),L=f(O[typeof window>"u"?"undefined":u(window)]&&window),V=f(O[u(void 0)]&&void 0),j=D||L!==(V&&V.window)&&L||M||V||Function("return this")(),N=Object.prototype,G=Function.prototype.toString,K=N.hasOwnProperty,k=N.toString,J=RegExp("^"+G.call(K).replace(S,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=p(j,"Set"),te=se&&1/w(new se([,-0]))[1]==g?function(oe){return new se(oe)}:b;o.exports=te}).call(T,t(17)(B),function(){return this}())},function(B,T,t){(function(o,x){function f(g){return g&&g.Object===Object?g:null}var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol?"symbol":typeof g},w={function:!0,object:!0},p=w[h(T)]&&T&&!T.nodeType?T:void 0,y=w[h(o)]&&o&&!o.nodeType?o:void 0,c=f(p&&y&&(typeof x>"u"?"undefined":h(x))=="object"&&x),d=f(w[typeof self>"u"?"undefined":h(self)]&&self),C=f(w[typeof window>"u"?"undefined":h(window)]&&window),b=f(w[h(void 0)]&&void 0),u=c||C!==(b&&b.window)&&C||d||b||Function("return this")();o.exports=u}).call(T,t(17)(B),function(){return this}())},function(B,T,t){(function(o,x){function f(L){return L&&L.Object===Object?L:null}function h(L){if(typeof L=="string")return L;if(p(L))return M?M.call(L):"";var V=L+"";return V=="0"&&1/L==-c?"-0":V}function w(L){return!!L&&(typeof L>"u"?"undefined":y(L))=="object"}function p(L){return(typeof L>"u"?"undefined":y(L))=="symbol"||w(L)&&P.call(L)==d}var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol?"symbol":typeof L},c=1/0,d="[object Symbol]",C={function:!0,object:!0},b=C[y(T)]&&T&&!T.nodeType?T:void 0,u=C[y(o)]&&o&&!o.nodeType?o:void 0,g=f(b&&u&&(typeof x>"u"?"undefined":y(x))=="object"&&x),s=f(C[typeof self>"u"?"undefined":y(self)]&&self),l=f(C[typeof window>"u"?"undefined":y(window)]&&window),S=f(C[y(void 0)]&&void 0),E=g||l!==(S&&S.window)&&l||s||S||Function("return this")(),O=Object.prototype,P=O.toString,A=E.Symbol,D=A?A.prototype:void 0,M=D?D.toString:void 0;o.exports=h}).call(T,t(17)(B),function(){return this}())},function(B,T){function t(L,V){var j;if(typeof V!="function")throw new TypeError(d);return L=p(L),function(){return--L>0&&(j=V.apply(this,arguments)),L<=1&&(V=void 0),j}}function o(L){var V=x(L)?M.call(L):"";return V==g||V==s}function x(L){var V=typeof L>"u"?"undefined":c(L);return!!L&&(V=="object"||V=="function")}function f(L){return!!L&&(typeof L>"u"?"undefined":c(L))=="object"}function h(L){return(typeof L>"u"?"undefined":c(L))=="symbol"||f(L)&&M.call(L)==l}function w(L){if(!L)return L===0?L:0;if(L=y(L),L===C||L===-C){var V=L<0?-1:1;return V*b}return L===L?L:0}function p(L){var V=w(L),j=V%1;return V===V?j?V-j:V:0}function y(L){if(typeof L=="number")return L;if(h(L))return u;if(x(L)){var V=o(L.valueOf)?L.valueOf():L;L=x(V)?V+"":V}if(typeof L!="string")return L===0?L:+L;L=L.replace(S,"");var j=O.test(L);return j||P.test(L)?A(L.slice(2),j?2:8):E.test(L)?u:+L}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol?"symbol":typeof L},d="Expected a function",C=1/0,b=17976931348623157e292,u=NaN,g="[object Function]",s="[object GeneratorFunction]",l="[object Symbol]",S=/^\s+|\s+$/g,E=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,P=/^0o[0-7]+$/i,A=parseInt,D=Object.prototype,M=D.toString;B.exports=t},function(B,T){function t(u){var g=!1;if(u!=null&&typeof u.toString!="function")try{g=!!(u+"")}catch{}return g}function o(u){return b(Object(u))}function x(u){return!!u&&(typeof u>"u"?"undefined":h(u))=="object"}function f(u){if(!x(u)||C.call(u)!=w||t(u))return!1;var g=o(u);if(g===null)return!0;var s=c.call(g,"constructor")&&g.constructor;return typeof s=="function"&&s instanceof s&&y.call(s)==d}var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol?"symbol":typeof u},w="[object Object]",p=Object.prototype,y=Function.prototype.toString,c=p.hasOwnProperty,d=y.call(Object),C=p.toString,b=Object.getPrototypeOf;B.exports=f},function(B,T,t){function o(f){return x(2,f)}var x=t(86);B.exports=o},function(B,T,t){function o(A){return P(A)?A:C(A)}function x(A,D){if(P(A))return!1;var M=typeof A>"u"?"undefined":d(A);return!(M!="number"&&M!="symbol"&&M!="boolean"&&A!=null&&!y(A))||S.test(A)||!l.test(A)||D!=null&&A in Object(D)}function f(A){if(typeof A=="string"||y(A))return A;var D=A+"";return D=="0"&&1/A==-b?"-0":D}function h(A){var D=w(A)?O.call(A):"";return D==u||D==g}function w(A){var D=typeof A>"u"?"undefined":d(A);return!!A&&(D=="object"||D=="function")}function p(A){return!!A&&(typeof A>"u"?"undefined":d(A))=="object"}function y(A){return(typeof A>"u"?"undefined":d(A))=="symbol"||p(A)&&O.call(A)==s}function c(A,D,M){D=x(D,A)?[D]:o(D);var L=-1,V=D.length;for(V||(A=void 0,V=1);++L<V;){var j=A==null?void 0:A[f(D[L])];j===void 0&&(L=V,j=M),A=h(j)?j.call(A):j}return A}var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol?"symbol":typeof A},C=t(33),b=1/0,u="[object Function]",g="[object GeneratorFunction]",s="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,E=Object.prototype,O=E.toString,P=Array.isArray;B.exports=c},function(B,T,t){function o(h,w){return h&&h.length?f(h,x(w)):[]}var x=t(32),f=t(82);B.exports=o},function(B,T){var t=arguments[2],o=t.m,x=function(f){function h(y){if(w[y])return w[y].exports;var c=w[y]={exports:{},id:y,loaded:!1};return f[y].call(c.exports,c,c.exports,h),c.loaded=!0,c.exports}var w={};h.m=f,h.c=w,h.oe=function(y){throw y},h.p="";var p=h(h.s=entryModule);return p.default||p};B.exports=function(f){for(var h,w=0,p=o.length;w<p;w++)if(o[w]){var y=o[w].toString(),c=f.toString(),d=t(w);if(d&&(d===f||d.default===f)){h=w;break}if(y.indexOf(c)>-1){o[w]=y.substring(0,y.length-1)+`
`+c.match(/function\s?(.+?)\s?\(.*/)[1]+`();
}`,h=w;break}}var C=`window = {};
var fn = (`+x.toString().replace("entryModule",h)+")(["+o.map(function(u){return u.toString()}).join(",")+`]);
(typeof fn === "function") && fn(self);`,b=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(b.createObjectURL(new Blob([C],{type:"text/javascript"})))}},function(B,T,t){function o(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function f(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?P:A}function h(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function P(A,D){for(var M=0;M<D.length;M++){var L=D[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,D,M){return D&&P(A.prototype,D),M&&P(A,M),A}}(),p=t(1),y=o(p),c=t(14),d=o(c),C=t(8),b=o(C),u=t(131),g=o(u),s=t(15),l=o(s),S=t(6),E=o(S),O=function(P){function A(D){x(this,A);var M=f(this,P.call(this,D));return M.currentTime=0,M.volume=100,M.options=D,M.playback=D.playback,M.settings=E.default.extend({},M.playback.settings),M.isReady=!1,M.mediaControlDisabled=!1,M.plugins=[M.playback],M.bindEvents(),M}return h(A,P),w(A,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",doubleTap:"dblClicked",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}}]),A.prototype.bindEvents=function(){this.listenTo(this.playback,y.default.PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,y.default.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,y.default.PLAYBACK_READY,this.ready),this.listenTo(this.playback,y.default.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,y.default.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,y.default.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,y.default.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,y.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,y.default.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,y.default.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,y.default.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,y.default.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,y.default.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,y.default.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,y.default.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,y.default.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,y.default.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,y.default.PLAYBACK_ERROR,this.error)},A.prototype.playbackStateChanged=function(D){this.trigger(y.default.CONTAINER_PLAYBACKSTATE,D)},A.prototype.playbackDvrStateChanged=function(D){this.settings=this.playback.settings,this.dvrInUse=D,this.trigger(y.default.CONTAINER_PLAYBACKDVRSTATECHANGED,D)},A.prototype.updateBitrate=function(D){this.trigger(y.default.CONTAINER_BITRATE,D)},A.prototype.statsReport=function(D){this.trigger(y.default.CONTAINER_STATS_REPORT,D)},A.prototype.getPlaybackType=function(){return this.playback.getPlaybackType()},A.prototype.isDvrEnabled=function(){return!!this.playback.dvrEnabled},A.prototype.isDvrInUse=function(){return!!this.dvrInUse},A.prototype.destroy=function(){this.trigger(y.default.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.playback.destroy(),this.plugins.forEach(function(D){return D.destroy()}),this.$el.remove()},A.prototype.setStyle=function(D){this.$el.css(D)},A.prototype.animate=function(D,M){return this.$el.animate(D,M).promise()},A.prototype.ready=function(){this.isReady=!0,this.trigger(y.default.CONTAINER_READY,this.name)},A.prototype.isPlaying=function(){return this.playback.isPlaying()},A.prototype.getStartTimeOffset=function(){return this.playback.getStartTimeOffset()},A.prototype.getCurrentTime=function(){return this.currentTime},A.prototype.getDuration=function(){return this.playback.getDuration()},A.prototype.error=function(D){this.isReady||this.ready(),this.trigger(y.default.CONTAINER_ERROR,{error:D,container:this},this.name)},A.prototype.loadedMetadata=function(D){this.trigger(y.default.CONTAINER_LOADEDMETADATA,D)},A.prototype.timeUpdated=function(D){this.currentTime=D.current,this.trigger(y.default.CONTAINER_TIMEUPDATE,D,this.name)},A.prototype.progress=function(D){this.trigger(y.default.CONTAINER_PROGRESS,D,this.name)},A.prototype.playing=function(){this.trigger(y.default.CONTAINER_PLAY,this.name)},A.prototype.paused=function(){this.trigger(y.default.CONTAINER_PAUSE,this.name)},A.prototype.play=function(){this.playback.play()},A.prototype.stop=function(){this.playback.stop(),this.currentTime=0},A.prototype.pause=function(){this.playback.pause()},A.prototype.onEnded=function(){this.trigger(y.default.CONTAINER_ENDED,this,this.name),this.currentTime=0},A.prototype.stopped=function(){this.trigger(y.default.CONTAINER_STOP)},A.prototype.clicked=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.default.CONTAINER_CLICK,this,this.name)},A.prototype.dblClicked=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.default.CONTAINER_DBLCLICK,this,this.name)},A.prototype.onContextMenu=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.default.CONTAINER_CONTEXTMENU,this,this.name)},A.prototype.seek=function(D){this.trigger(y.default.CONTAINER_SEEK,D,this.name),this.playback.seek(D)},A.prototype.seekPercentage=function(D){var M=this.getDuration();if(D>=0&&D<=100){var L=M*(D/100);this.seek(L)}},A.prototype.setVolume=function(D){this.volume=parseInt(D,10),this.trigger(y.default.CONTAINER_VOLUME,D,this.name),this.playback.volume(D)},A.prototype.fullscreen=function(){this.trigger(y.default.CONTAINER_FULLSCREEN,this.name)},A.prototype.onBuffering=function(){this.trigger(y.default.CONTAINER_STATE_BUFFERING,this.name)},A.prototype.bufferfull=function(){this.trigger(y.default.CONTAINER_STATE_BUFFERFULL,this.name)},A.prototype.addPlugin=function(D){this.plugins.push(D)},A.prototype.hasPlugin=function(D){return!!this.getPlugin(D)},A.prototype.getPlugin=function(D){return(0,l.default)(this.plugins,function(M){return M.name===D})},A.prototype.mouseEnter=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.default.CONTAINER_MOUSE_ENTER)},A.prototype.mouseLeave=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(y.default.CONTAINER_MOUSE_LEAVE)},A.prototype.settingsUpdate=function(){this.settings=this.playback.settings,this.trigger(y.default.CONTAINER_SETTINGSUPDATE)},A.prototype.highDefinitionUpdate=function(D){this.trigger(y.default.CONTAINER_HIGHDEFINITIONUPDATE,D)},A.prototype.isHighDefinitionInUse=function(){return this.playback.isHighDefinitionInUse()},A.prototype.disableMediaControl=function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(y.default.CONTAINER_MEDIACONTROL_DISABLE))},A.prototype.enableMediaControl=function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(y.default.CONTAINER_MEDIACONTROL_ENABLE))},A.prototype.updateStyle=function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")},A.prototype.configure=function(D){this.options=E.default.extend(this.options,D),this.updateStyle(),this.trigger(y.default.CONTAINER_OPTIONS_CHANGE)},A.prototype.render=function(){var D=b.default.getStyleFor(g.default);return this.$el.append(D),this.$el.append(this.playback.render().el),this.updateStyle(),this},A}(d.default);T.default=O,B.exports=T.default},function(B,T,t){function o(O){return O&&O.__esModule?O:{default:O}}function x(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}function f(O,P){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?O:P}function h(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(O,P):O.__proto__=P)}Object.defineProperty(T,"__esModule",{value:!0});var w=t(13),p=o(w),y=t(1),c=o(y),d=t(35),C=o(d),b=t(6),u=o(b),g=t(15),s=o(g),l=t(87),S=o(l),E=function(O){function P(A,D){x(this,P);var M=f(this,O.call(this,A));return M.options=A,M.loader=D,M}return h(P,O),P.prototype.createContainers=function(){var A=this;return u.default.Deferred(function(D){D.resolve(A.options.sources.map(function(M){return A.createContainer(M)}))})},P.prototype.findPlaybackPlugin=function(A,D){return(0,s.default)(this.loader.playbackPlugins,function(M){return M.canPlay(A,D)})},P.prototype.createContainer=function(A){var D=null,M=this.options.mimeType;(0,S.default)(A)?(D=A.source.toString(),A.mimeType&&(M=A.mimeType)):D=A.toString(),D.match(/^\/\//)&&(D=window.location.protocol+D);var L=u.default.extend({},this.options,{src:D,mimeType:M}),V=this.findPlaybackPlugin(D,M),j=new V(L);L=u.default.extend(L,{playback:j});var N=new C.default(L),G=u.default.Deferred();return G.promise(N),this.addContainerPlugins(N),this.listenToOnce(N,c.default.CONTAINER_READY,function(){return G.resolve(N)}),N},P.prototype.addContainerPlugins=function(A){this.loader.containerPlugins.forEach(function(D){A.addPlugin(new D(A))})},P}(p.default);T.default=E,B.exports=T.default},function(B,T,t){B.exports=t(93)},function(B,T,t){function o(J){return J&&J.__esModule?J:{default:J}}function x(J,se){if(!(J instanceof se))throw new TypeError("Cannot call a class as a function")}function f(J,se){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!se||typeof se!="object"&&typeof se!="function"?J:se}function h(J,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);J.prototype=Object.create(se&&se.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(J,se):J.__proto__=se)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function J(se,te){for(var oe=0;oe<te.length;oe++){var re=te[oe];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(se,re.key,re)}}return function(se,te,oe){return te&&J(se.prototype,te),oe&&J(se,oe),se}}(),p=t(3),y=t(1),c=o(y),d=t(8),C=o(d),b=t(14),u=o(b),g=t(11),s=o(g),l=t(94),S=o(l),E=t(38),O=o(E),P=t(16),A=o(P),D=t(21),M=o(D),L=t(15),V=o(L),j=t(6),N=o(j),G=t(132),K=o(G),k=function(J){function se(te){x(this,se);var oe=f(this,J.call(this,te));return oe.playerInfo=M.default.getInstance(te.playerId),oe.firstResize=!0,oe.options=te,oe.plugins=[],oe.containers=[],oe.setupMediaControl(null),oe._boundFullscreenHandler=function(){return oe.handleFullscreenChange()},(0,N.default)(document).bind("fullscreenchange",oe._boundFullscreenHandler),(0,N.default)(document).bind("MSFullscreenChange",oe._boundFullscreenHandler),(0,N.default)(document).bind("mozfullscreenchange",oe._boundFullscreenHandler),oe}return h(se,J),w(se,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"showMediaControl",mouseleave:"hideMediaControl"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}}]),se.prototype.createContainers=function(te){var oe=this;this.defer=N.default.Deferred(),this.defer.promise(this),this.containerFactory=new S.default(te,te.loader),this.containerFactory.createContainers().then(function(re){return oe.setupContainers(re)}).then(function(re){return oe.resolveOnContainersReady(re)})},se.prototype.updateSize=function(){p.Fullscreen.isFullscreen()?this.setFullscreen():this.setPlayerSize()},se.prototype.setFullscreen=function(){s.default.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.playerInfo.currentSize={width:(0,N.default)(window).width(),height:(0,N.default)(window).height()})},se.prototype.setPlayerSize=function(){this.$el.removeClass("fullscreen"),this.playerInfo.currentSize=this.playerInfo.previousSize,this.playerInfo.previousSize={width:(0,N.default)(window).width(),height:(0,N.default)(window).height()},this.resize(this.playerInfo.currentSize)},se.prototype.resize=function(te){(0,p.isNumber)(te.height)||(0,p.isNumber)(te.width)?(this.el.style.height=te.height+"px",this.el.style.width=te.width+"px"):(this.el.style.height=""+te.height,this.el.style.width=""+te.width),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.options.width=te.width,this.options.height=te.height,this.playerInfo.currentSize=te,this.triggerResize(this.playerInfo.currentSize)},se.prototype.enableResizeObserver=function(){var te=this,oe=function(){te.playerInfo.computedSize.width==te.el.clientWidth&&te.playerInfo.computedSize.height==te.el.clientHeight||(te.playerInfo.computedSize={width:te.el.clientWidth,height:te.el.clientHeight},te.triggerResize(te.playerInfo.computedSize))};this.resizeObserverInterval=setInterval(oe,500)},se.prototype.triggerResize=function(te){var oe=this.firstResize||this.oldHeight!==te.height||this.oldWidth!==te.width;oe&&(A.default.trigger(this.options.playerId+":"+c.default.PLAYER_RESIZE,te),this.oldHeight=te.height,this.oldWidth=te.width,this.firstResize=!1)},se.prototype.disableResizeObserver=function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)},se.prototype.resolveOnContainersReady=function(te){var oe=this;N.default.when.apply(N.default,te).done(function(){oe.defer.resolve(oe),oe.ready=!0,oe.trigger(c.default.CORE_READY)})},se.prototype.addPlugin=function(te){this.plugins.push(te)},se.prototype.hasPlugin=function(te){return!!this.getPlugin(te)},se.prototype.getPlugin=function(te){return(0,V.default)(this.plugins,function(oe){return oe.name===te})},se.prototype.load=function(te,oe){var re=this;this.options.mimeType=oe,te=te&&te.constructor===Array?te:[te],this.containers.forEach(function(ee){return ee.destroy()}),this.mediaControl.container=null,this.containerFactory.options=N.default.extend(this.options,{sources:te}),this.containerFactory.createContainers().then(function(ee){re.setupContainers(ee)})},se.prototype.destroy=function(){this.disableResizeObserver(),this.containers.forEach(function(te){return te.destroy()}),this.plugins.forEach(function(te){return te.destroy()}),this.$el.remove(),this.mediaControl.destroy(),(0,N.default)(document).unbind("fullscreenchange",this._boundFullscreenHandler),(0,N.default)(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),(0,N.default)(document).unbind("mozfullscreenchange",this._boundFullscreenHandler)},se.prototype.handleFullscreenChange=function(){this.trigger(c.default.CORE_FULLSCREEN,p.Fullscreen.isFullscreen()),this.updateSize(),this.mediaControl.show()},se.prototype.setMediaControlContainer=function(te){this.mediaControl.setContainer(te),this.mediaControl.render()},se.prototype.disableMediaControl=function(){this.mediaControl.disable(),this.$el.removeClass("nocursor")},se.prototype.enableMediaControl=function(){this.mediaControl.enable()},se.prototype.removeContainer=function(te){this.stopListening(te),this.containers=this.containers.filter(function(oe){return oe!==te})},se.prototype.appendContainer=function(te){this.listenTo(te,c.default.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(te)},se.prototype.setupContainers=function(te){return te.map(this.appendContainer.bind(this)),this.trigger(c.default.CORE_CONTAINERS_CREATED),this.renderContainers(),this.setupMediaControl(this.getCurrentContainer()),this.render(),this.$el.appendTo(this.options.parentElement),this.containers},se.prototype.renderContainers=function(){var te=this;this.containers.map(function(oe){return te.el.appendChild(oe.render().el)})},se.prototype.createContainer=function(te,oe){var re=this.containerFactory.createContainer(te,oe);return this.appendContainer(re),this.el.appendChild(re.render().el),re},se.prototype.setupMediaControl=function(te){this.mediaControl?this.mediaControl.setContainer(te):(this.mediaControl=this.createMediaControl(N.default.extend({container:te,focusElement:this.el},this.options)),this.listenTo(this.mediaControl,c.default.MEDIACONTROL_FULLSCREEN,this.toggleFullscreen),this.listenTo(this.mediaControl,c.default.MEDIACONTROL_SHOW,this.onMediaControlShow.bind(this,!0)),this.listenTo(this.mediaControl,c.default.MEDIACONTROL_HIDE,this.onMediaControlShow.bind(this,!1)))},se.prototype.createMediaControl=function(te){return te.mediacontrol&&te.mediacontrol.external?new te.mediacontrol.external(te).render():new O.default(te).render()},se.prototype.getCurrentContainer=function(){return this.mediaControl&&this.mediaControl.container?this.mediaControl.container:this.containers[0]},se.prototype.getCurrentPlayback=function(){var te=this.getCurrentContainer();return te&&te.playback},se.prototype.getPlaybackType=function(){var te=this.getCurrentContainer();return te&&te.getPlaybackType()},se.prototype.toggleFullscreen=function(){p.Fullscreen.isFullscreen()?(p.Fullscreen.cancelFullscreen(),s.default.isiOS||this.$el.removeClass("fullscreen nocursor")):(p.Fullscreen.requestFullscreen(this.el),s.default.isiOS||this.$el.addClass("fullscreen")),this.mediaControl.show()},se.prototype.showMediaControl=function(te){this.mediaControl.show(te)},se.prototype.hideMediaControl=function(){this.mediaControl.hide(this.options.hideMediaControlDelay)},se.prototype.onMediaControlShow=function(te){this.getCurrentContainer().trigger(te?c.default.CONTAINER_MEDIACONTROL_SHOW:c.default.CONTAINER_MEDIACONTROL_HIDE),te?this.$el.removeClass("nocursor"):p.Fullscreen.isFullscreen()&&this.$el.addClass("nocursor")},se.prototype.configure=function(te){var oe=this;this.options=N.default.extend(this.options,te);var re=te.source||te.sources;re?this.load(re,te.mimeType||this.options.mimeType):(this.trigger(c.default.CORE_OPTIONS_CHANGE),this.containers.forEach(function(ee){ee.configure(oe.options)}))},se.prototype.render=function(){var te=C.default.getStyleFor(K.default,{baseUrl:this.options.baseUrl});this.$el.append(te),this.$el.append(this.mediaControl.render().el),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var oe={width:this.options.width,height:this.options.height};return this.playerInfo.previousSize=this.playerInfo.currentSize=this.playerInfo.computedSize=oe,this.updateSize(),this.previousSize={width:this.$el.width(),height:this.$el.height()},this.enableResizeObserver(),this},se}(u.default);T.default=k,B.exports=T.default},function(B,T,t){function o(b){return b&&b.__esModule?b:{default:b}}function x(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}function f(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?b:u}function h(b,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function b(u,g){for(var s=0;s<g.length;s++){var l=g[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(u,l.key,l)}}return function(u,g,s){return g&&b(u.prototype,g),s&&b(u,s),u}}(),p=t(13),y=o(p),c=t(36),d=o(c),C=function(b){function u(g){x(this,u);var s=f(this,b.call(this));return s.player=g,s.options=g.options,s}return h(u,b),w(u,[{key:"loader",get:function(){return this.player.loader}}]),u.prototype.create=function(){return this.options.loader=this.loader,this.core=new d.default(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core},u.prototype.addCorePlugins=function(){var g=this;return this.loader.corePlugins.forEach(function(s){var l=new s(g.core);g.core.addPlugin(l),g.setupExternalInterface(l)}),this.core},u.prototype.setupExternalInterface=function(g){var s=g.getExternalInterface();for(var l in s)this.player[l]=s[l].bind(g)},u}(y.default);T.default=C,B.exports=T.default},function(B,T,t){B.exports=t(96)},function(B,T,t){function o(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function x(Oe,ze){if(!(Oe instanceof ze))throw new TypeError("Cannot call a class as a function")}function f(Oe,ze){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!ze||typeof ze!="object"&&typeof ze!="function"?Oe:ze}function h(Oe,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ze);Oe.prototype=Object.create(ze&&ze.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),ze&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,ze):Oe.__proto__=ze)}Object.defineProperty(T,"__esModule",{value:!0});var w=t(13),p=o(w),y=t(21),c=o(y),d=t(90),C=o(d),b=t(22),u=o(b),g=t(39),s=o(g),l=t(42),S=o(l),E=t(40),O=o(E),P=t(41),A=o(P),D=t(43),M=o(D),L=t(44),V=o(L),j=t(124),N=o(j),G=t(126),K=o(G),k=t(128),J=o(k),se=t(45),te=o(se),oe=t(118),re=o(oe),ee=t(111),Z=o(ee),ge=t(113),Te=o(ge),we=t(116),Le=o(we),Ce=t(121),be=o(Ce),Ge=t(123),Ke=o(Ge),je=t(114),Ze=o(je),Be=function(Oe){function ze(We,gt){x(this,ze);var at=f(this,Oe.call(this));return at.playerId=gt,at.playbackPlugins=[A.default,u.default,S.default,s.default,O.default,M.default,V.default],at.containerPlugins=[N.default,J.default,te.default,K.default,re.default,Z.default],at.corePlugins=[Te.default,Le.default,be.default,Ke.default,Ze.default],We&&(Array.isArray(We)||at.validateExternalPluginsType(We),at.addExternalPlugins(We)),at}return h(ze,Oe),ze.prototype.groupPluginsByType=function(We){return Array.isArray(We)&&(We=We.reduce(function(gt,at){return gt[at.type]||(gt[at.type]=[]),gt[at.type].push(at),gt},{})),We},ze.prototype.addExternalPlugins=function(We){We=this.groupPluginsByType(We);var gt=function(at){return at.prototype.name};We.playback&&(this.playbackPlugins=(0,C.default)(We.playback.concat(this.playbackPlugins),gt)),We.container&&(this.containerPlugins=(0,C.default)(We.container.concat(this.containerPlugins),gt)),We.core&&(this.corePlugins=(0,C.default)(We.core.concat(this.corePlugins),gt)),c.default.getInstance(this.playerId).playbackPlugins=this.playbackPlugins},ze.prototype.validateExternalPluginsType=function(We){var gt=["playback","container","core"];gt.forEach(function(at){(We[at]||[]).forEach(function(_e){var Me="external "+_e.type+" plugin on "+at+" array";if(_e.type!==at)throw new ReferenceError(Me)})})},ze}(p.default);T.default=Be,B.exports=T.default},function(B,T,t){(function(o){function x(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}}function f(Ze,Be){if(!(Ze instanceof Be))throw new TypeError("Cannot call a class as a function")}function h(Ze,Be){if(!Ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Be||typeof Be!="object"&&typeof Be!="function"?Ze:Be}function w(Ze,Be){if(typeof Be!="function"&&Be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Be);Ze.prototype=Object.create(Be&&Be.prototype,{constructor:{value:Ze,enumerable:!1,writable:!0,configurable:!0}}),Be&&(Object.setPrototypeOf?Object.setPrototypeOf(Ze,Be):Ze.__proto__=Be)}Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function Ze(Be,Oe){for(var ze=0;ze<Oe.length;ze++){var We=Oe[ze];We.enumerable=We.enumerable||!1,We.configurable=!0,"value"in We&&(We.writable=!0),Object.defineProperty(Be,We.key,We)}}return function(Be,Oe,ze){return Oe&&Ze(Be.prototype,Oe),ze&&Ze(Be,ze),Be}}(),y=t(3),c=t(26),d=t(1),C=x(d),b=t(8),u=x(b),g=t(14),s=x(g),l=t(11),S=x(l),E=t(16),O=x(E),P=t(9),A=x(P),D=t(7),M=x(D),L=t(6),V=x(L),j=t(133),N=x(j),G=t(143),K=x(G),k=t(27),J=x(k),se=t(46),te=x(se),oe=t(152),re=x(oe),ee=t(153),Z=x(ee),ge=t(154),Te=x(ge),we=t(155),Le=x(we),Ce=t(156),be=x(Ce),Ge=t(157),Ke=x(Ge),je=function(Ze){function Be(Oe){f(this,Be);var ze=h(this,Ze.call(this,Oe));ze.options=Oe,ze.persistConfig=ze.options.persistConfig,ze.container=Oe.container,ze.currentPositionValue=null,ze.currentDurationValue=null;var We=ze.persistConfig?y.Config.restore("volume"):100;return ze.setVolume(ze.options.mute?0:We),ze.keepVisible=!1,ze.addEventListeners(),ze.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},ze.container?V.default.isEmptyObject(ze.container.settings)||(ze.settings=V.default.extend({},ze.container.settings)):ze.settings={},ze.disabled=!1,(ze.container&&ze.container.mediaControlDisabled||ze.options.chromeless)&&ze.disable(),ze.stopDragHandler=function(gt){return ze.stopDrag(gt)},ze.updateDragHandler=function(gt){return ze.updateDrag(gt)},(0,V.default)(document).bind("mouseup",ze.stopDragHandler),(0,V.default)(document).bind("mousemove",ze.updateDragHandler),ze}return w(Be,Ze),p(Be,[{key:"name",get:function(){return"MediaControl"}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return(0,A.default)(K.default)}},{key:"stylesheet",get:function(){return u.default.getStyleFor(N.default,{baseUrl:this.options.baseUrl})}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return this.volume===0}}]),Be.prototype.addEventListeners=function(){this.container&&(O.default.on(this.options.playerId+":"+C.default.PLAYER_RESIZE,this.playerResize,this),this.listenTo(this.container,C.default.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,C.default.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,C.default.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,C.default.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,C.default.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,C.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,C.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,C.default.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,C.default.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,C.default.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,C.default.CONTAINER_ENDED,this.ended),this.listenTo(this.container,C.default.CONTAINER_VOLUME,this.onVolumeChanged))},Be.prototype.disable=function(){this.disabled=!0,this.hide(),this.$el.hide()},Be.prototype.enable=function(){this.options.chromeless||(this.disabled=!1,this.show())},Be.prototype.play=function(){this.container.play()},Be.prototype.pause=function(){this.container.pause()},Be.prototype.stop=function(){this.container.stop()},Be.prototype.onVolumeChanged=function(){this.updateVolumeUI()},Be.prototype.updateVolumeUI=function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var Oe=this.$volumeBarContainer.width(),ze=this.$volumeBarBackground.width(),We=(Oe-ze)/2,gt=ze*this.volume/100+We;this.$volumeBarFill.css({width:this.volume+"%"}),this.$volumeBarScrubber.css({left:gt}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var at=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,at).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(Te.default),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(Z.default),this.applyButtonStyle(this.$volumeIcon)}},Be.prototype.changeTogglePlay=function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(te.default),this.$playStopToggle.append(re.default),this.trigger(C.default.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(J.default),this.$playStopToggle.append(J.default),this.trigger(C.default.MEDIACONTROL_NOTPLAYING)),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)},Be.prototype.mousemoveOnSeekBar=function(Oe){if(this.container.settings.seekEnabled){var ze=Oe.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:ze})}this.trigger(C.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,Oe)},Be.prototype.mouseleaveOnSeekBar=function(Oe){this.trigger(C.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,Oe)},Be.prototype.onVolumeClick=function(Oe){this.setVolume(this.getVolumeFromUIEvent(Oe))},Be.prototype.mousemoveOnVolumeBar=function(Oe){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(Oe))},Be.prototype.playerResize=function(Oe){this.$fullscreenToggle.html(""),y.Fullscreen.isFullscreen()?this.$fullscreenToggle.append(be.default):this.$fullscreenToggle.append(Le.default),this.applyButtonStyle(this.$fullscreenToggle),this.$el.removeClass("w320"),(Oe.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")},Be.prototype.togglePlayPause=function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1},Be.prototype.togglePlayStop=function(){this.container.isPlaying()?this.container.stop():this.container.play()},Be.prototype.startSeekDrag=function(Oe){this.container.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),Oe&&Oe.preventDefault())},Be.prototype.startVolumeDrag=function(Oe){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),Oe&&Oe.preventDefault()},Be.prototype.stopDrag=function(Oe){this.draggingSeekBar&&this.seek(Oe),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1},Be.prototype.updateDrag=function(Oe){if(this.draggingSeekBar){Oe.preventDefault();var ze=Oe.pageX-this.$seekBarContainer.offset().left,We=ze/this.$seekBarContainer.width()*100;We=Math.min(100,Math.max(We,0)),this.setSeekPercentage(We)}else this.draggingVolumeBar&&(Oe.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(Oe)))},Be.prototype.getVolumeFromUIEvent=function(Oe){var ze=Oe.pageX-this.$volumeBarContainer.offset().left,We=ze/this.$volumeBarContainer.width()*100;return We},Be.prototype.toggleMute=function(){this.setVolume(this.muted?100:0)},Be.prototype.setVolume=function(Oe){var ze=this;Oe=Math.min(100,Math.max(Oe,0)),this.intendedVolume=Oe,this.persistConfig&&y.Config.persist("volume",Oe);var We=function(){ze.container.isReady?ze.container.setVolume(Oe):ze.listenToOnce(ze.container,C.default.CONTAINER_READY,function(){ze.container.setVolume(Oe)})};this.container?We():this.listenToOnce(this,C.default.MEDIACONTROL_CONTAINERCHANGED,function(){We()})},Be.prototype.toggleFullscreen=function(){this.trigger(C.default.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.resetUserKeepVisible()},Be.prototype.setContainer=function(Oe){this.container&&this.stopListening(this.container),O.default.off(this.options.playerId+":"+C.default.PLAYER_RESIZE,this.playerResize,this),this.container=Oe,this.setVolume(this.intendedVolume),this.changeTogglePlay(),this.addEventListeners(),this.settingsUpdate(),this.container.trigger(C.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container.mediaControlDisabled&&this.disable(),this.trigger(C.default.MEDIACONTROL_CONTAINERCHANGED)},Be.prototype.showVolumeBar=function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")},Be.prototype.hideVolumeBar=function(){var Oe=this,ze=arguments.length<=0||arguments[0]===void 0?400:arguments[0];this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout(function(){return Oe.hideVolumeBar()},ze):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout(function(){return Oe.$volumeBarContainer.addClass("volume-bar-hide")},ze)))},Be.prototype.ended=function(){this.changeTogglePlay()},Be.prototype.updateProgressBar=function(Oe){var ze=Oe.start/Oe.total*100,We=Oe.current/Oe.total*100;this.$seekBarLoaded.css({left:ze+"%",width:We-ze+"%"})},Be.prototype.onTimeUpdate=function(Oe){if(!this.draggingSeekBar){var ze=Oe.current<0?Oe.total:Oe.current;this.currentPositionValue=ze,this.currentDurationValue=Oe.total,this.renderSeekBar()}},Be.prototype.renderSeekBar=function(){if(this.currentPositionValue!==null&&this.currentDurationValue!==null){this.currentSeekBarPercentage=100,(this.container.getPlaybackType()!==M.default.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var Oe=(0,y.formatTime)(this.currentPositionValue),ze=(0,y.formatTime)(this.currentDurationValue);Oe!==this.displayedPosition&&(this.$position.text(Oe),this.displayedPosition=Oe),ze!==this.displayedDuration&&(this.$duration.text(ze),this.displayedDuration=ze)}},Be.prototype.seek=function(Oe){if(this.container.settings.seekEnabled){var ze=Oe.pageX-this.$seekBarContainer.offset().left,We=ze/this.$seekBarContainer.width()*100;return We=Math.min(100,Math.max(We,0)),this.container.seekPercentage(We),this.setSeekPercentage(We),!1}},Be.prototype.setKeepVisible=function(){this.keepVisible=!0},Be.prototype.resetKeepVisible=function(){this.keepVisible=!1},Be.prototype.setUserKeepVisible=function(){this.userKeepVisible=!0},Be.prototype.resetUserKeepVisible=function(){this.userKeepVisible=!1},Be.prototype.isVisible=function(){return!this.$el.hasClass("media-control-hide")},Be.prototype.show=function(Oe){var ze=this;if(!this.disabled){var We=2e3;(!Oe||Oe.clientX!==this.lastMouseX&&Oe.clientY!==this.lastMouseY||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(C.default.MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout(function(){return ze.hide()},We),Oe&&(this.lastMouseX=Oe.clientX,this.lastMouseY=Oe.clientY))}},Be.prototype.hide=function(){var Oe=this,ze=arguments.length<=0||arguments[0]===void 0?0:arguments[0],We=ze||2e3;clearTimeout(this.hideId),this.isVisible()&&this.options.hideMediaControl!==!1&&(ze||this.userKeepVisible||this.keepVisible||this.draggingSeekBar||this.draggingVolumeBar?this.hideId=setTimeout(function(){return Oe.hide()},We):(this.trigger(C.default.MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0)))},Be.prototype.settingsUpdate=function(){var Oe=JSON.stringify(this.settings)!==JSON.stringify(this.container.settings);this.container.getPlaybackType()&&Oe&&(this.settings=V.default.extend({},this.container.settings),this.render())},Be.prototype.highDefinitionUpdate=function(Oe){var ze=Oe?"addClass":"removeClass";this.$hdIndicator[ze]("enabled")},Be.prototype.createCachedElements=function(){var Oe=this.$el.find(".media-control-layer");this.$duration=Oe.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=Oe.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=Oe.find("button.media-control-button[data-playpause]"),this.$playStopToggle=Oe.find("button.media-control-button[data-playstop]"),this.$position=Oe.find(".media-control-indicator[data-position]"),this.$seekBarContainer=Oe.find(".bar-container[data-seekbar]"),this.$seekBarHover=Oe.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=Oe.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=Oe.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=Oe.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=Oe.find(".bar-container[data-volume]"),this.$volumeContainer=Oe.find(".drawer-container[data-volume]"),this.$volumeIcon=Oe.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()},Be.prototype.resetIndicators=function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()},Be.prototype.initializeIcons=function(){var Oe=this.$el.find(".media-control-layer");Oe.find("button.media-control-button[data-play]").append(J.default),Oe.find("button.media-control-button[data-pause]").append(te.default),Oe.find("button.media-control-button[data-stop]").append(re.default),this.$playPauseToggle.append(J.default),this.$playStopToggle.append(J.default),this.$volumeIcon.append(Z.default),this.$fullscreenToggle.append(Le.default),this.$hdIndicator.append(Ke.default)},Be.prototype.setSeekPercentage=function(Oe){Oe=Math.max(Math.min(Oe,100),0),this.displayedSeekBarPercentage!==Oe&&(this.displayedSeekBarPercentage=Oe,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:Oe+"%"}),this.$seekBarScrubber.css({left:Oe+"%"}))},Be.prototype.seekRelative=function(Oe){if(this.container.settings.seekEnabled){var ze=this.container.getCurrentTime(),We=this.container.getDuration(),gt=Math.min(Math.max(ze+Oe,0),We);gt=Math.min(100*gt/We,100),this.container.seekPercentage(gt)}},Be.prototype.bindKeyEvents=function(){var Oe=this;this.unbindKeyEvents(),this.kibo=new c.Kibo(this.options.focusElement),this.kibo.down(["space"],function(){return Oe.togglePlayPause()}),this.kibo.down(["left"],function(){return Oe.seekRelative(-15)}),this.kibo.down(["right"],function(){return Oe.seekRelative(15)});var ze=[1,2,3,4,5,6,7,8,9,0];ze.forEach(function(We){Oe.kibo.down(We.toString(),function(){return Oe.container.settings.seekEnabled&&Oe.container.seekPercentage(10*We)})})},Be.prototype.unbindKeyEvents=function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off([1,2,3,4,5,6,7,8,9,0]))},Be.prototype.parseColors=function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var Oe=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",Oe),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}},Be.prototype.applyButtonStyle=function(Oe){this.buttonsColor&&Oe&&(0,V.default)(Oe).find("svg path").css("fill",this.buttonsColor)},Be.prototype.destroy=function(){this.remove(),(0,V.default)(document).unbind("mouseup",this.stopDragHandler),(0,V.default)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents()},Be.prototype.render=function(){var Oe=this,ze=1e3;this.$el.html(this.template({settings:this.settings})),this.$el.append(this.stylesheet),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.hideId=setTimeout(function(){return Oe.hide()},ze),this.disabled&&this.hide(),S.default.isSafari&&S.default.isMobile&&this.$volumeContainer.css("display","none"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var We=0;return this.displayedSeekBarPercentage&&(We=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(We),o.nextTick(function(){Oe.container.settings.seekEnabled||Oe.$seekBarContainer.addClass("seek-disabled"),Oe.options.disableKeyboardShortcuts||Oe.bindKeyEvents(),Oe.playerResize({width:Oe.options.width,height:Oe.options.height}),Oe.hideVolumeBar(0)}),this.parseColors(),this.highDefinitionUpdate(),this.rendered=!0,this.updateVolumeUI(),this.trigger(C.default.MEDIACONTROL_RENDERED),this},Be}(s.default);T.default=je,je.extend=function(Ze){return(0,y.extend)(je,Ze)},B.exports=T.default}).call(T,t(34))},function(B,T,t){function o(j){return j&&j.__esModule?j:{default:j}}function x(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function f(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||typeof N!="object"&&typeof N!="function"?j:N}function h(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function j(N,G){for(var K=0;K<G.length;K++){var k=G[K];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(N,k.key,k)}}return function(N,G,K){return G&&j(N.prototype,G),K&&j(N,K),N}}(),p=t(3),y=t(13),c=o(y),d=t(1),C=o(d),b=t(11),u=o(b),g=t(97),s=o(g),l=t(37),S=o(l),E=t(21),O=o(E),P=t(6),A=o(P),D=t(15),M=o(D),L=(0,p.currentScriptUrl)().replace(/\/[^\/]+$/,""),V=function(j){function N(G){x(this,N);var K=f(this,j.call(this,G)),k={playerId:(0,p.uniqueId)(""),persistConfig:!0,width:640,height:360,baseUrl:L,allowUserInteraction:u.default.isMobile};return K.options=A.default.extend(k,G),K.options.sources=K._normalizeSources(G),K.options.chromeless||(K.options.allowUserInteraction=!0),K.options.allowUserInteraction||(K.options.disableKeyboardShortcuts=!0),K._registerOptionEventListeners(),K._coreFactory=new s.default(K),K.playerInfo=O.default.getInstance(K.options.playerId),K.playerInfo.currentSize={width:G.width,height:G.height},K.playerInfo.options=K.options,K.options.parentId?K.setParentId(K.options.parentId):K.options.parent&&K.attachTo(K.options.parent),K}return h(N,j),w(N,[{key:"loader",set:function(G){this._loader=G},get:function(){return this._loader||(this._loader=new S.default(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.mediaControl.container.ended}},{key:"buffering",get:function(){return this.core.mediaControl.container.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:C.default.PLAYER_READY,onResize:C.default.PLAYER_RESIZE,onPlay:C.default.PLAYER_PLAY,onPause:C.default.PLAYER_PAUSE,onStop:C.default.PLAYER_STOP,onEnded:C.default.PLAYER_ENDED,onSeek:C.default.PLAYER_SEEK,onError:C.default.PLAYER_ERROR,onTimeUpdate:C.default.PLAYER_TIMEUPDATE,onVolumeUpdate:C.default.PLAYER_VOLUMEUPDATE}}}]),N.prototype.setParentId=function(G){var K=document.querySelector(G);return K&&this.attachTo(K),this},N.prototype.attachTo=function(G){return this.options.parentElement=G,this.core=this._coreFactory.create(),this._addEventListeners(),this},N.prototype._addEventListeners=function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,C.default.CORE_READY,this._onReady),this.listenTo(this.core.mediaControl,C.default.MEDIACONTROL_CONTAINERCHANGED,this._containerChanged),this.listenTo(this.core,C.default.CORE_FULLSCREEN,this._onFullscreenChange),this},N.prototype._addContainerEventListeners=function(){var G=this.core.mediaControl.container;return G&&(this.listenTo(G,C.default.CONTAINER_PLAY,this._onPlay),this.listenTo(G,C.default.CONTAINER_PAUSE,this._onPause),this.listenTo(G,C.default.CONTAINER_STOP,this._onStop),this.listenTo(G,C.default.CONTAINER_ENDED,this._onEnded),this.listenTo(G,C.default.CONTAINER_SEEK,this._onSeek),this.listenTo(G,C.default.CONTAINER_ERROR,this._onError),this.listenTo(G,C.default.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(G,C.default.CONTAINER_VOLUME,this._onVolumeUpdate)),this},N.prototype._registerOptionEventListeners=function(){var G=this,K=this.options.events||{};return Object.keys(K).forEach(function(k){var J=G.eventsMapping[k];if(J){var se=K[k];se=typeof se=="function"&&se,se&&G.on(J,se)}}),this},N.prototype._containerChanged=function(){this.stopListening(),this._addEventListeners()},N.prototype._onReady=function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(C.default.PLAYER_READY)},N.prototype._onFullscreenChange=function(G){this.trigger(C.default.PLAYER_FULLSCREEN,G)},N.prototype._onVolumeUpdate=function(G){this.trigger(C.default.PLAYER_VOLUMEUPDATE,G)},N.prototype._onPlay=function(){this.trigger(C.default.PLAYER_PLAY)},N.prototype._onPause=function(){this.trigger(C.default.PLAYER_PAUSE)},N.prototype._onStop=function(){this.trigger(C.default.PLAYER_STOP,this.getCurrentTime())},N.prototype._onEnded=function(){this.trigger(C.default.PLAYER_ENDED)},N.prototype._onSeek=function(G){this.trigger(C.default.PLAYER_SEEK,G)},N.prototype._onTimeUpdate=function(G){this.trigger(C.default.PLAYER_TIMEUPDATE,G)},N.prototype._onError=function(G){this.trigger(C.default.PLAYER_ERROR,G)},N.prototype.is=function(G,K){return G.constructor===K},N.prototype._normalizeSources=function(G){var K=G.sources||(G.source!==void 0?[G.source]:[]);return K.length===0?[{source:"",mimeType:""}]:K},N.prototype.resize=function(G){return this.core.resize(G),this},N.prototype.load=function(G,K,k){return k!==void 0&&this.configure({autoPlay:!!k}),this.core.load(G,K),this},N.prototype.destroy=function(){return this.core.destroy(),this},N.prototype.play=function(){return this.core.mediaControl.container.play(),this},N.prototype.pause=function(){return this.core.mediaControl.container.pause(),this},N.prototype.stop=function(){return this.core.mediaControl.container.stop(),this},N.prototype.seek=function(G){return this.core.mediaControl.container.seek(G),this},N.prototype.seekPercentage=function(G){return this.core.mediaControl.container.seekPercentage(G),this},N.prototype.setVolume=function(G){return this.core&&this.core.mediaControl&&this.core.mediaControl.setVolume(G),this},N.prototype.getVolume=function(){return this.core&&this.core.mediaControl?this.core.mediaControl.volume:0},N.prototype.mute=function(){return this._mutedVolume=this.getVolume(),this.setVolume(0),this},N.prototype.unmute=function(){return this.setVolume(typeof this._mutedVolume=="number"?this._mutedVolume:100),this._mutedVolume=null,this},N.prototype.isPlaying=function(){return this.core.mediaControl.container.isPlaying()},N.prototype.isDvrEnabled=function(){return this.core.mediaControl.container.isDvrEnabled()},N.prototype.isDvrInUse=function(){return this.core.mediaControl.container.isDvrInUse()},N.prototype.configure=function(G){return this.core.configure(G),this},N.prototype.getPlugin=function(G){var K=this.core.plugins.concat(this.core.mediaControl.container.plugins);return(0,M.default)(K,function(k){return k.name===G})},N.prototype.getCurrentTime=function(){return this.core.mediaControl.container.getCurrentTime()},N.prototype.getStartTimeOffset=function(){return this.core.mediaControl.container.getStartTimeOffset()},N.prototype.getDuration=function(){return this.core.mediaControl.container.getDuration()},N}(c.default);T.default=V,B.exports=T.default},function(B,T,t){function o(A){return A&&A.__esModule?A:{default:A}}function x(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function f(A,D){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||typeof D!="object"&&typeof D!="function"?A:D}function h(A,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);A.prototype=Object.create(D&&D.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(A,D):A.__proto__=D)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function A(D,M){for(var L=0;L<M.length;L++){var V=M[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}return function(D,M,L){return M&&A(D.prototype,M),L&&A(D,L),D}}(),p=t(7),y=o(p),c=t(8),d=o(c),C=t(9),b=o(C),u=t(11),g=o(u),s=t(144),l=o(s),S=t(134),E=o(S),O="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",P=function(A){function D(){return x(this,D),f(this,A.apply(this,arguments))}return h(D,A),D.prototype.setElement=function(M){this.$el=M,this.el=M[0]},D.prototype._setupFirefox=function(){var M=this.$("embed");M.attr("data-flash-playback",this.name),M.addClass(this.attributes.class),this.setElement(M)},D.prototype.render=function(){return this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,baseUrl:this.baseUrl,playbackId:this.uniqueId,wmode:this.wmode,callbackName:"window.Clappr.flashlsCallbacks."+this.cid})),g.default.isIE&&(this.$("embed").remove(),g.default.isLegacyIE&&this.$el.attr("classid",O)),g.default.isFirefox&&this._setupFirefox(),this.el.id=this.cid,this.$el.append(d.default.getStyleFor(E.default)),this},w(D,[{key:"tagName",get:function(){return"object"}},{key:"swfPath",get:function(){return""}},{key:"wmode",get:function(){return"transparent"}},{key:"template",get:function(){return(0,b.default)(l.default)}},{key:"attributes",get:function(){var M="application/x-shockwave-flash";return g.default.isLegacyIE&&(M=""),{class:"clappr-flash-playback",type:M,width:"100%",height:"100%","data-flash-playback":this.name}}}]),D}(y.default);T.default=P,B.exports=T.default},function(B,T,t){function o(j){return j&&j.__esModule?j:{default:j}}function x(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function f(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||typeof N!="object"&&typeof N!="function"?j:N}function h(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function j(N,G){for(var K=0;K<G.length;K++){var k=G[K];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(N,k.key,k)}}return function(N,G,K){return G&&j(N.prototype,G),K&&j(N,K),N}}(),p=t(3),y=t(24),c=o(y),d=t(11),C=o(d),b=t(16),u=o(b),g=t(9),s=o(g),l=t(6),S=o(l),E=t(1),O=o(E),P=t(7),A=o(P),D=t(159),M=o(D),L=60,V=function(j){function N(G){x(this,N);var K=f(this,j.call(this,G));return K._src=G.src,K._baseUrl=G.baseUrl,K._autoPlay=G.autoPlay,K.settings={default:["seekbar"]},K.settings.left=["playpause","position","duration"],K.settings.right=["fullscreen","volume"],K.settings.seekEnabled=!0,K._isReadyState=!1,K._addListeners(),K}return h(N,j),w(N,[{key:"name",get:function(){return"flash"}},{key:"swfPath",get:function(){return(0,s.default)(M.default)({baseUrl:this._baseUrl})}},{key:"ended",get:function(){return this._currentState==="ENDED"}},{key:"buffering",get:function(){return!!this._bufferingState&&this._currentState!=="ENDED"}}]),N.prototype._bootstrap=function(){var G=this;this.el.playerPlay?(this.el.width="100%",this.el.height="100%",this._currentState==="PLAYING"?this._firstPlay():(this._currentState="IDLE",this._autoPlay&&this.play()),(0,S.default)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el),this.getDuration()>0?this._metadataLoaded():u.default.once(this.uniqueId+":timeupdate",this._metadataLoaded,this)):(this._attempts=this._attempts||0,++this._attempts<=L?setTimeout(function(){return G._bootstrap()},50):this.trigger(O.default.PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},N.prototype._metadataLoaded=function(){this._isReadyState=!0,this.trigger(O.default.PLAYBACK_READY,this.name),this.trigger(O.default.PLAYBACK_SETTINGSUPDATE,this.name)},N.prototype.getPlaybackType=function(){return A.default.VOD},N.prototype.isHighDefinitionInUse=function(){return!1},N.prototype._updateTime=function(){this.trigger(O.default.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name)},N.prototype._addListeners=function(){u.default.on(this.uniqueId+":progress",this._progress,this),u.default.on(this.uniqueId+":timeupdate",this._updateTime,this),u.default.on(this.uniqueId+":statechanged",this._checkState,this),u.default.on(this.uniqueId+":flashready",this._bootstrap,this)},N.prototype.stopListening=function(){j.prototype.stopListening.call(this),u.default.off(this.uniqueId+":progress"),u.default.off(this.uniqueId+":timeupdate"),u.default.off(this.uniqueId+":statechanged"),u.default.off(this.uniqueId+":flashready")},N.prototype._checkState=function(){this._isIdle||this._currentState==="PAUSED"||(this._currentState!=="PLAYING_BUFFERING"&&this.el.getState()==="PLAYING_BUFFERING"?(this._bufferingState=!0,this.trigger(O.default.PLAYBACK_BUFFERING,this.name),this._currentState="PLAYING_BUFFERING"):this.el.getState()==="PLAYING"?(this._bufferingState=!1,this.trigger(O.default.PLAYBACK_BUFFERFULL,this.name),this._currentState="PLAYING"):this.el.getState()==="IDLE"?this._currentState="IDLE":this.el.getState()==="ENDED"&&(this.trigger(O.default.PLAYBACK_ENDED,this.name),this.trigger(O.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.el.getDuration()},this.name),this._currentState="ENDED",this._isIdle=!0))},N.prototype._progress=function(){this._currentState!=="IDLE"&&this._currentState!=="ENDED"&&this.trigger(O.default.PLAYBACK_PROGRESS,{start:0,current:this.el.getBytesLoaded(),total:this.el.getBytesTotal()})},N.prototype._firstPlay=function(){var G=this;this.el.playerPlay?(this._isIdle=!1,this.el.playerPlay(this._src),this.listenToOnce(this,O.default.PLAYBACK_BUFFERFULL,function(){return G._checkInitialSeek()}),this._currentState="PLAYING"):this.listenToOnce(this,O.default.PLAYBACK_READY,this._firstPlay)},N.prototype._checkInitialSeek=function(){var G=(0,p.seekStringToSeconds)(window.location.href);G!==0&&this.seekSeconds(G)},N.prototype.play=function(){this.trigger(O.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"||this._currentState==="PLAYING_BUFFERING"?(this._currentState="PLAYING",this.el.playerResume(),this.trigger(O.default.PLAYBACK_PLAY,this.name)):this._currentState!=="PLAYING"&&(this._firstPlay(),this.trigger(O.default.PLAYBACK_PLAY,this.name))},N.prototype.volume=function(G){var K=this;this.isReady?this.el.playerVolume(G):this.listenToOnce(this,O.default.PLAYBACK_BUFFERFULL,function(){return K.volume(G)})},N.prototype.pause=function(){this._currentState="PAUSED",this.el.playerPause(),this.trigger(O.default.PLAYBACK_PAUSE,this.name)},N.prototype.stop=function(){this.el.playerStop(),this.trigger(O.default.PLAYBACK_STOP),this.trigger(O.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},N.prototype.isPlaying=function(){return!!(this.isReady&&this._currentState.indexOf("PLAYING")>-1)},N.prototype.getDuration=function(){return this.el.getDuration()},N.prototype.seekPercentage=function(G){var K=this;if(this.el.getDuration()>0){var k=this.el.getDuration()*(G/100);this.seek(k)}else this.listenToOnce(this,O.default.PLAYBACK_BUFFERFULL,function(){return K.seekPercentage(G)})},N.prototype.seek=function(G){var K=this;this.isReady&&this.el.playerSeek?(this.el.playerSeek(G),this.trigger(O.default.PLAYBACK_TIMEUPDATE,{current:G,total:this.el.getDuration()},this.name),this._currentState==="PAUSED"&&this.el.playerPause()):this.listenToOnce(this,O.default.PLAYBACK_BUFFERFULL,function(){return K.seek(G)})},N.prototype.destroy=function(){clearInterval(this.bootstrapId),j.prototype.stopListening.call(this),this.$el.remove()},w(N,[{key:"isReady",get:function(){return this._isReadyState}}]),N}(c.default);T.default=V,V.canPlay=function(j){if(C.default.hasFlash&&j&&j.constructor===String){var N=j.split("?")[0].match(/.*\.(.*)$/)||[];return N.length>1&&!C.default.isMobile&&N[1].match(/^(mp4|mov|f4v|3gpp|3gp)$/)}return!1},B.exports=T.default},function(B,T,t){function o(G){return G&&G.__esModule?G:{default:G}}function x(G,K){if(!(G instanceof K))throw new TypeError("Cannot call a class as a function")}function f(G,K){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!K||typeof K!="object"&&typeof K!="function"?G:K}function h(G,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);G.prototype=Object.create(K&&K.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(G,K):G.__proto__=K)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function G(K,k){for(var J=0;J<k.length;J++){var se=k[J];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(K,se.key,se)}}return function(K,k,J){return k&&G(K.prototype,k),J&&G(K,J),K}}(),p=t(24),y=o(p),c=t(1),d=o(c),C=t(9),b=o(C),u=t(7),g=o(u),s=t(16),l=o(s),S=t(11),E=o(S),O=t(104),P=o(O),A=t(160),D=o(A),M=t(6),L=o(M),V=60,j=-1,N=function(G){function K(k){x(this,K);var J=f(this,G.call(this,k));return J._src=k.src,J._baseUrl=k.baseUrl,J._initHlsParameters(k),J.highDefinition=!1,J._autoPlay=k.autoPlay,J._loop=k.loop,J._defaultSettings={left:["playstop"],default:["seekbar"],right:["fullscreen","volume","hd-indicator"],seekEnabled:!1},J.settings=L.default.extend({},J._defaultSettings),J._playbackType=g.default.LIVE,J._hasEnded=!1,J._addListeners(),J}return h(K,G),w(K,[{key:"name",get:function(){return"flashls"}},{key:"swfPath",get:function(){return(0,b.default)(D.default)({baseUrl:this._baseUrl})}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===void 0?j:this._currentLevel},set:function(k){this._currentLevel=k,this.trigger(d.default.PLAYBACK_LEVEL_SWITCH_START),this.el.playerSetCurrentLevel(k)}},{key:"ended",get:function(){return this._hasEnded}},{key:"buffering",get:function(){return!!this._bufferingState&&!this._hasEnded}}]),K.prototype._initHlsParameters=function(k){this._autoStartLoad=k.autoStartLoad===void 0||k.autoStartLoad,this._capLevelToStage=k.capLevelToStage!==void 0&&k.capLevelToStage,this._maxLevelCappingMode=k.maxLevelCappingMode===void 0?"downscale":k.maxLevelCappingMode,this._minBufferLength=k.minBufferLength===void 0?-1:k.minBufferLength,this._minBufferLengthCapping=k.minBufferLengthCapping===void 0?-1:k.minBufferLengthCapping,this._maxBufferLength=k.maxBufferLength===void 0?120:k.maxBufferLength,this._maxBackBufferLength=k.maxBackBufferLength===void 0?30:k.maxBackBufferLength,this._lowBufferLength=k.lowBufferLength===void 0?3:k.lowBufferLength,this._mediaTimePeriod=k.mediaTimePeriod===void 0?100:k.mediaTimePeriod,this._fpsDroppedMonitoringPeriod=k.fpsDroppedMonitoringPeriod===void 0?5e3:k.fpsDroppedMonitoringPeriod,this._fpsDroppedMonitoringThreshold=k.fpsDroppedMonitoringThreshold===void 0?.2:k.fpsDroppedMonitoringThreshold,this._capLevelonFPSDrop=k.capLevelonFPSDrop!==void 0&&k.capLevelonFPSDrop,this._smoothAutoSwitchonFPSDrop=k.smoothAutoSwitchonFPSDrop===void 0?this.capLevelonFPSDrop:k.smoothAutoSwitchonFPSDrop,this._switchDownOnLevelError=k.switchDownOnLevelError===void 0||k.switchDownOnLevelError,this._seekMode=k.seekMode===void 0?"ACCURATE":k.seekMode,this._keyLoadMaxRetry=k.keyLoadMaxRetry===void 0?3:k.keyLoadMaxRetry,this._keyLoadMaxRetryTimeout=k.keyLoadMaxRetryTimeout===void 0?64e3:k.keyLoadMaxRetryTimeout,this._fragmentLoadMaxRetry=k.fragmentLoadMaxRetry===void 0?3:k.fragmentLoadMaxRetry,this._fragmentLoadMaxRetryTimeout=k.fragmentLoadMaxRetryTimeout===void 0?4e3:k.fragmentLoadMaxRetryTimeout,this._fragmentLoadSkipAfterMaxRetry=k.fragmentLoadSkipAfterMaxRetry===void 0||k.fragmentLoadSkipAfterMaxRetry,this._maxSkippedFragments=k.maxSkippedFragments===void 0?5:k.maxSkippedFragments,this._flushLiveURLCache=k.flushLiveURLCache!==void 0&&k.flushLiveURLCache,this._initialLiveManifestSize=k.initialLiveManifestSize===void 0?1:k.initialLiveManifestSize,this._manifestLoadMaxRetry=k.manifestLoadMaxRetry===void 0?3:k.manifestLoadMaxRetry,this._manifestLoadMaxRetryTimeout=k.manifestLoadMaxRetryTimeout===void 0?64e3:k.manifestLoadMaxRetryTimeout,this._manifestRedundantLoadmaxRetry=k.manifestRedundantLoadmaxRetry===void 0?3:k.manifestRedundantLoadmaxRetry,this._startFromBitrate=k.startFromBitrate===void 0?-1:k.startFromBitrate,this._startFromLevel=k.startFromLevel===void 0?-1:k.startFromLevel,this._autoStartMaxDuration=k.autoStartMaxDuration===void 0?-1:k.autoStartMaxDuration,this._seekFromLevel=k.seekFromLevel===void 0?-1:k.seekFromLevel,this._useHardwareVideoDecoder=k.useHardwareVideoDecoder!==void 0&&k.useHardwareVideoDecoder,this._hlsLogEnabled=k.hlsLogEnabled===void 0||k.hlsLogEnabled,this._logDebug=k.logDebug!==void 0&&k.logDebug,this._logDebug2=k.logDebug2!==void 0&&k.logDebug2,this._logWarn=k.logWarn===void 0||k.logWarn,this._logError=k.logError===void 0||k.logError,this._hlsMinimumDvrSize=k.hlsMinimumDvrSize===void 0?60:k.hlsMinimumDvrSize},K.prototype._addListeners=function(){var k=this;l.default.on(this.cid+":flashready",function(){return k._bootstrap()}),l.default.on(this.cid+":timeupdate",function(J){return k._updateTime(J)}),l.default.on(this.cid+":playbackstate",function(J){return k._setPlaybackState(J)}),l.default.on(this.cid+":levelchanged",function(J){return k._levelChanged(J)}),l.default.on(this.cid+":error",function(J,se,te){return k._flashPlaybackError(J,se,te)}),l.default.on(this.cid+":fragmentloaded",function(J){return k._onFragmentLoaded(J)}),l.default.on(this.cid+":levelendlist",function(J){return k._onLevelEndlist(J)})},K.prototype.stopListening=function(){G.prototype.stopListening.call(this),l.default.off(this.cid+":flashready"),l.default.off(this.cid+":timeupdate"),l.default.off(this.cid+":playbackstate"),l.default.off(this.cid+":levelchanged"),l.default.off(this.cid+":playbackerror"),l.default.off(this.cid+":fragmentloaded"),l.default.off(this.cid+":manifestloaded"),l.default.off(this.cid+":levelendlist")},K.prototype._bootstrap=function(){var k=this;this.el.playerLoad?(this.el.width="100%",this.el.height="100%",this._isReadyState=!0,this._srcLoaded=!1,this._currentState="IDLE",this._setFlashSettings(),this._updatePlaybackType(),(this._autoPlay||this._shouldPlayOnManifestLoaded)&&this.play(),this.trigger(d.default.PLAYBACK_READY,this.name)):(this._bootstrapAttempts=this._bootstrapAttempts||0,++this._bootstrapAttempts<=V?setTimeout(function(){return k._bootstrap()},50):this.trigger(d.default.PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},K.prototype._setFlashSettings=function(){this.el.playerSetAutoStartLoad(this._autoStartLoad),this.el.playerSetCapLevelToStage(this._capLevelToStage),this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode),this.el.playerSetMinBufferLength(this._minBufferLength),this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping),this.el.playerSetMaxBufferLength(this._maxBufferLength),this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength),this.el.playerSetLowBufferLength(this._lowBufferLength),this.el.playerSetMediaTimePeriod(this._mediaTimePeriod),this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod),this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold),this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop),this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop),this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError),this.el.playerSetSeekMode(this._seekMode),this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry),this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout),this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry),this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout),this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry),this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments),this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache),this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize),this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry),this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout),this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry),this.el.playerSetStartFromBitrate(this._startFromBitrate),this.el.playerSetStartFromLevel(this._startFromLevel),this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration),this.el.playerSetSeekFromLevel(this._seekFromLevel),this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder),this.el.playerSetLogInfo(this._hlsLogEnabled),this.el.playerSetLogDebug(this._logDebug),this.el.playerSetLogDebug2(this._logDebug2),this.el.playerSetLogWarn(this._logWarn),this.el.playerSetLogError(this._logError)},K.prototype.setAutoStartLoad=function(k){this._autoStartLoad=k,this.el.playerSetAutoStartLoad(this._autoStartLoad)},K.prototype.setCapLevelToStage=function(k){this._capLevelToStage=k,this.el.playerSetCapLevelToStage(this._capLevelToStage)},K.prototype.setMaxLevelCappingMode=function(k){this._maxLevelCappingMode=k,this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)},K.prototype.setSetMinBufferLength=function(k){this._minBufferLength=k,this.el.playerSetMinBufferLength(this._minBufferLength)},K.prototype.setMinBufferLengthCapping=function(k){this._minBufferLengthCapping=k,this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)},K.prototype.setMaxBufferLength=function(k){this._maxBufferLength=k,this.el.playerSetMaxBufferLength(this._maxBufferLength)},K.prototype.setMaxBackBufferLength=function(k){this._maxBackBufferLength=k,this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)},K.prototype.setLowBufferLength=function(k){this._lowBufferLength=k,this.el.playerSetLowBufferLength(this._lowBufferLength)},K.prototype.setMediaTimePeriod=function(k){this._mediaTimePeriod=k,this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)},K.prototype.setFpsDroppedMonitoringPeriod=function(k){this._fpsDroppedMonitoringPeriod=k,this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)},K.prototype.setFpsDroppedMonitoringThreshold=function(k){this._fpsDroppedMonitoringThreshold=k,this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)},K.prototype.setCapLevelonFPSDrop=function(k){this._capLevelonFPSDrop=k,this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)},K.prototype.setSmoothAutoSwitchonFPSDrop=function(k){this._smoothAutoSwitchonFPSDrop=k,this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)},K.prototype.setSwitchDownOnLevelError=function(k){this._switchDownOnLevelError=k,this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)},K.prototype.setSeekMode=function(k){this._seekMode=k,this.el.playerSetSeekMode(this._seekMode)},K.prototype.setKeyLoadMaxRetry=function(k){this._keyLoadMaxRetry=k,this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)},K.prototype.setKeyLoadMaxRetryTimeout=function(k){this._keyLoadMaxRetryTimeout=k,this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)},K.prototype.setFragmentLoadMaxRetry=function(k){this._fragmentLoadMaxRetry=k,this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)},K.prototype.setFragmentLoadMaxRetryTimeout=function(k){this._fragmentLoadMaxRetryTimeout=k,this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)},K.prototype.setFragmentLoadSkipAfterMaxRetry=function(k){this._fragmentLoadSkipAfterMaxRetry=k,this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)},K.prototype.setMaxSkippedFragments=function(k){this._maxSkippedFragments=k,this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)},K.prototype.setFlushLiveURLCache=function(k){this._flushLiveURLCache=k,this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)},K.prototype.setInitialLiveManifestSize=function(k){this._initialLiveManifestSize=k,this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)},K.prototype.setManifestLoadMaxRetry=function(k){this._manifestLoadMaxRetry=k,this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)},K.prototype.setManifestLoadMaxRetryTimeout=function(k){this._manifestLoadMaxRetryTimeout=k,this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)},K.prototype.setManifestRedundantLoadmaxRetry=function(k){this._manifestRedundantLoadmaxRetry=k,this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)},K.prototype.setStartFromBitrate=function(k){this._startFromBitrate=k,this.el.playerSetStartFromBitrate(this._startFromBitrate)},K.prototype.setStartFromLevel=function(k){this._startFromLevel=k,this.el.playerSetStartFromLevel(this._startFromLevel)},K.prototype.setAutoStartMaxDuration=function(k){this._autoStartMaxDuration=k,this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)},K.prototype.setSeekFromLevel=function(k){this._seekFromLevel=k,this.el.playerSetSeekFromLevel(this._seekFromLevel)},K.prototype.setUseHardwareVideoDecoder=function(k){this._useHardwareVideoDecoder=k,this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)},K.prototype.setSetLogInfo=function(k){this._hlsLogEnabled=k,this.el.playerSetLogInfo(this._hlsLogEnabled)},K.prototype.setLogDebug=function(k){this._logDebug=k,this.el.playerSetLogDebug(this._logDebug)},K.prototype.setLogDebug2=function(k){this._logDebug2=k,this.el.playerSetLogDebug2(this._logDebug2)},K.prototype.setLogWarn=function(k){this._logWarn=k,this.el.playerSetLogWarn(this._logWarn)},K.prototype.setLogError=function(k){this._logError=k,this.el.playerSetLogError(this._logError)},K.prototype._levelChanged=function(k){var J=this.el.getLevels()[k];J&&(this.highDefinition=J.height>=720||J.bitrate/1e3>=2e3,this.trigger(d.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this._levels&&this._levels.length!==0||this._fillLevels(),this.trigger(d.default.PLAYBACK_BITRATE,{height:J.height,width:J.width,bandwidth:J.bandwidth,bitrate:J.bitrate,level:k}),this.trigger(d.default.PLAYBACK_LEVEL_SWITCH_END))},K.prototype._updateTime=function(k){if(this._currentState!=="IDLE"){var J=this._normalizeDuration(k.duration),se=Math.min(Math.max(k.position,0),J),te=this._dvrEnabled,oe=this._playbackType===g.default.LIVE;this._dvrEnabled=oe&&J>this._hlsMinimumDvrSize,J!==100&&oe!==void 0&&(this._dvrEnabled!==te&&(this._updateSettings(),this.trigger(d.default.PLAYBACK_SETTINGSUPDATE,this.name)),!oe||this._dvrEnabled&&this._dvrInUse||(se=J),this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:se,total:J},this.name))}},K.prototype.play=function(){this.trigger(d.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"?this.el.playerResume():this._srcLoaded||this._currentState==="PLAYING"?this.el.playerPlay():this._firstPlay()},K.prototype.getPlaybackType=function(){return this._playbackType?this._playbackType:null},K.prototype.getCurrentLevelIndex=function(){return this._currentLevel},K.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},K.prototype.getCurrentBitrate=function(){return this.levels[this.currentLevel].bitrate},K.prototype.setCurrentLevel=function(k){this.currentLevel=k},K.prototype.isHighDefinitionInUse=function(){return this.highDefinition},K.prototype.getLevels=function(){return this.levels},K.prototype._setPlaybackState=function(k){["PLAYING_BUFFERING","PAUSED_BUFFERING"].indexOf(k)>=0?(this._bufferingState=!0,this.trigger(d.default.PLAYBACK_BUFFERING,this.name),this._updateCurrentState(k)):["PLAYING","PAUSED"].indexOf(k)>=0?(["PLAYING_BUFFERING","PAUSED_BUFFERING","IDLE"].indexOf(this._currentState)>=0&&(this._bufferingState=!1,this.trigger(d.default.PLAYBACK_BUFFERFULL,this.name)),this._updateCurrentState(k)):k==="IDLE"&&(this._srcLoaded=!1,this._loop&&["PLAYING_BUFFERING","PLAYING"].indexOf(this._currentState)>=0?(this.play(),this.seek(0)):(this._updateCurrentState(k),this._hasEnded=!0,this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.getDuration()},this.name),this.trigger(d.default.PLAYBACK_ENDED,this.name)))},K.prototype._updateCurrentState=function(k){this._currentState=k,k!=="IDLE"&&(this._hasEnded=!1),this._updatePlaybackType(),k==="PLAYING"?this.trigger(d.default.PLAYBACK_PLAY,this.name):k==="PAUSED"&&this.trigger(d.default.PLAYBACK_PAUSE,this.name)},K.prototype._updatePlaybackType=function(){this._playbackType=this.el.getType(),this._playbackType&&(this._playbackType=this._playbackType.toLowerCase(),this._playbackType===g.default.VOD?this._startReportingProgress():this._stopReportingProgress()),this.trigger(d.default.PLAYBACK_PLAYBACKSTATE,{type:this._playbackType})},K.prototype._startReportingProgress=function(){this._reportingProgress||(this._reportingProgress=!0)},K.prototype._stopReportingProgress=function(){this._reportingProgress=!1},K.prototype._onFragmentLoaded=function(k){if(this.trigger(d.default.PLAYBACK_FRAGMENT_LOADED,k),this._reportingProgress&&this.el.getPosition){var J=this.el.getPosition()+this.el.getbufferLength();this.trigger(d.default.PLAYBACK_PROGRESS,{start:this.el.getPosition(),current:J,total:this.el.getDuration()})}},K.prototype._onLevelEndlist=function(){this._updatePlaybackType()},K.prototype._firstPlay=function(){var k=this;this._shouldPlayOnManifestLoaded=!0,this.el.playerLoad&&(l.default.once(this.cid+":manifestloaded",function(J,se){return k._manifestLoaded(J,se)}),this._setFlashSettings(),this.el.playerLoad(this._src),this._srcLoaded=!0)},K.prototype.volume=function(k){var J=this;this.isReady?this.el.playerVolume(k):this.listenToOnce(this,d.default.PLAYBACK_BUFFERFULL,function(){return J.volume(k)})},K.prototype.pause=function(){(this._playbackType!==g.default.LIVE||this._dvrEnabled)&&(this.el.playerPause(),this._playbackType===g.default.LIVE&&this._dvrEnabled&&this._updateDvr(!0))},K.prototype.stop=function(){this._srcLoaded=!1,this.el.playerStop(),this.trigger(d.default.PLAYBACK_STOP),this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},K.prototype.isPlaying=function(){return!!this._currentState&&!!this._currentState.match(/playing/i)},K.prototype.getDuration=function(){return this._normalizeDuration(this.el.getDuration())},K.prototype._normalizeDuration=function(k){return this._playbackType===g.default.LIVE&&(k=Math.max(0,k-10)),k},K.prototype.seekPercentage=function(k){var J=this.el.getDuration(),se=0;k>0&&(se=J*k/100),this.seek(se)},K.prototype.seek=function(k){var J=this.getDuration();if(this._playbackType===g.default.LIVE){var se=J-k>3;this._updateDvr(se)}this.el.playerSeek(k),this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:k,total:J},this.name)},K.prototype._updateDvr=function(k){var J=!!this._dvrInUse;this._dvrInUse=k,this._dvrInUse!==J&&(this._updateSettings(),this.trigger(d.default.PLAYBACK_DVR,this._dvrInUse),this.trigger(d.default.PLAYBACK_STATS_ADD,{dvr:this._dvrInUse}))},K.prototype._flashPlaybackError=function(k,J,se){this.trigger(d.default.PLAYBACK_ERROR,{code:k,url:J,message:se}),this.trigger(d.default.PLAYBACK_STOP)},K.prototype._manifestLoaded=function(k,J){this._shouldPlayOnManifestLoaded&&(this._shouldPlayOnManifestLoaded=!1,this.el.playerPlay()),this._fillLevels(),this.trigger(d.default.PLAYBACK_LOADEDMETADATA,{duration:k,data:J})},K.prototype._fillLevels=function(){var k=this.el.getLevels(),J=k.length;this._levels=[];for(var se=0;se<J;se++)this._levels.push({id:se,label:k[se].height+"p",level:k[se]});this.trigger(d.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},K.prototype.destroy=function(){this.stopListening(),this.$el.remove()},K.prototype._updateSettings=function(){this.settings=L.default.extend({},this._defaultSettings),this._playbackType===g.default.VOD||this._dvrInUse?(this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=!0):this._dvrEnabled?(this.settings.left=["playpause"],this.settings.seekEnabled=!0):this.settings.seekEnabled=!1},K.prototype._createCallbacks=function(){var k=this;window.Clappr||(window.Clappr={}),window.Clappr.flashlsCallbacks||(window.Clappr.flashlsCallbacks={}),this.flashlsEvents=new P.default(this.cid),window.Clappr.flashlsCallbacks[this.cid]=function(J,se){k.flashlsEvents[J].apply(k.flashlsEvents,se)}},K.prototype.render=function(){return G.prototype.render.call(this),this._createCallbacks(),this},w(K,[{key:"isReady",get:function(){return this._isReadyState}}]),K}(y.default);T.default=N,N.canPlay=function(G,K){var k=G.split("?")[0].match(/.*\.(.*)$/)||[];return E.default.hasFlash&&(k.length>1&&k[1]==="m3u8"||K==="application/x-mpegURL"||K==="application/vnd.apple.mpegurl")},B.exports=T.default},function(B,T,t){function o(p){return p&&p.__esModule?p:{default:p}}function x(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var f=t(16),h=o(f),w=function(){function p(y){x(this,p),this.instanceId=y}return p.prototype.ready=function(){h.default.trigger(this.instanceId+":flashready")},p.prototype.videoSize=function(y,c){h.default.trigger(this.instanceId+":videosizechanged",y,c)},p.prototype.complete=function(){h.default.trigger(this.instanceId+":complete")},p.prototype.error=function(y,c,d){h.default.trigger(this.instanceId+":error",y,c,d)},p.prototype.manifest=function(y,c){h.default.trigger(this.instanceId+":manifestloaded",y,c)},p.prototype.audioLevelLoaded=function(y){h.default.trigger(this.instanceId+":audiolevelloaded",y)},p.prototype.levelLoaded=function(y){h.default.trigger(this.instanceId+":levelloaded",y)},p.prototype.levelEndlist=function(y){h.default.trigger(this.instanceId+":levelendlist",y)},p.prototype.fragmentLoaded=function(y){h.default.trigger(this.instanceId+":fragmentloaded",y)},p.prototype.fragmentPlaying=function(y){h.default.trigger(this.instanceId+":fragmentplaying",y)},p.prototype.position=function(y){h.default.trigger(this.instanceId+":timeupdate",y)},p.prototype.state=function(y){h.default.trigger(this.instanceId+":playbackstate",y)},p.prototype.seekState=function(y){h.default.trigger(this.instanceId+":seekstate",y)},p.prototype.switch=function(y){h.default.trigger(this.instanceId+":levelchanged",y)},p.prototype.audioTracksListChange=function(y){h.default.trigger(this.instanceId+":audiotracklistchanged",y)},p.prototype.audioTrackChange=function(y){h.default.trigger(this.instanceId+":audiotrackchanged",y)},p}();T.default=w,B.exports=T.default},function(B,T,t){function o(A){return A&&A.__esModule?A:{default:A}}function x(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function f(A,D){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||typeof D!="object"&&typeof D!="function"?A:D}function h(A,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);A.prototype=Object.create(D&&D.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(A,D):A.__proto__=D)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function A(D,M){for(var L=0;L<M.length;L++){var V=M[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}return function(D,M,L){return M&&A(D.prototype,M),L&&A(D,L),D}}(),p=t(22),y=o(p),c=t(66),d=o(c),C=t(1),b=o(C),u=t(7),g=o(u),s=t(11),l=o(s),S=t(25),E=o(S),O=-1,P=function(A){function D(M){x(this,D);var L=f(this,A.call(this,M));return L._minDvrSize=M.hlsMinimumDvrSize===void 0?60:M.hlsMinimumDvrSize,L._playbackType=g.default.VOD,L._playableRegionStartTime=0,L._playableRegionDuration=0,L._durationExcludesAfterLiveSyncPoint=!1,M.autoPlay&&L._setupHls(),L._recoverAttemptsRemaining=M.hlsRecoverAttempts||16,L}return h(D,A),w(D,[{key:"name",get:function(){return"hls"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===void 0?O:this._currentLevel},set:function(M){this._currentLevel=M,this.trigger(b.default.PLAYBACK_LEVEL_SWITCH_START),this._hls.currentLevel=this._currentLevel}}]),D.prototype._setupHls=function(){var M=this;this._hls=new d.default(this._options.hlsjsConfig||{}),this._hls.on(d.default.Events.MEDIA_ATTACHED,function(){return M._hls.loadSource(M._options.src)}),this._hls.on(d.default.Events.LEVEL_LOADED,function(L,V){return M._updatePlaybackType(L,V)}),this._hls.on(d.default.Events.LEVEL_UPDATED,function(L,V){return M._onLevelUpdated(L,V)}),this._hls.on(d.default.Events.LEVEL_SWITCH,function(L,V){return M._onLevelSwitch(L,V)}),this._hls.on(d.default.Events.FRAG_LOADED,function(L,V){return M._onFragmentLoaded(L,V)}),this._hls.on(d.default.Events.ERROR,function(L,V){return M._onHLSJSError(L,V)}),this._hls.attachMedia(this.el)},D.prototype._recover=function(M,L){this._recoveredDecodingError?this._recoveredAudioCodecError?(E.default.error("hlsjs: failed to recover"),this.trigger(b.default.PLAYBACK_ERROR,"hlsjs: could not recover from error, evt "+M+", data "+L+" ",this.name)):(this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError()):(this._recoveredDecodingError=!0,this._hls.recoverMediaError())},D.prototype._setupSrc=function(M){},D.prototype.getDuration=function(){return this._playableRegionDuration},D.prototype.getCurrentTime=function(){return this.el.currentTime-this._playableRegionStartTime},D.prototype.getStartTimeOffset=function(){return this._playableRegionStartTime},D.prototype.seekPercentage=function(M){var L=this._playableRegionDuration;M>0&&(L=this._playableRegionDuration*(M/100)),this.seek(L)},D.prototype.seek=function(M){M<0&&(E.default.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),M=this.getDuration()),this.dvrEnabled&&this._updateDvr(M<this.getDuration()-3),M+=this._playableRegionStartTime,A.prototype.seek.call(this,M)},D.prototype.seekToLivePoint=function(){this.seek(this.getDuration())},D.prototype._updateDvr=function(M){this.trigger(b.default.PLAYBACK_DVR,M),this.trigger(b.default.PLAYBACK_STATS_ADD,{dvr:M})},D.prototype._updateSettings=function(){this._playbackType===g.default.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(b.default.PLAYBACK_SETTINGSUPDATE)},D.prototype._onHLSJSError=function(M,L){if(L.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,L.type){case d.default.ErrorTypes.NETWORK_ERROR:E.default.warn("hlsjs: trying to recover from network error, evt "+M+", data "+L+" "),this._hls.startLoad();break;case d.default.ErrorTypes.MEDIA_ERROR:E.default.warn("hlsjs: trying to recover from media error, evt "+M+", data "+L+" "),this._recover(M,L);break;default:E.default.error("hlsjs: trying to recover from error, evt "+M+", data "+L+" "),this.trigger(b.default.PLAYBACK_ERROR,"hlsjs: could not recover from error, evt "+M+", data "+L+" ",this.name)}else E.default.error("hlsjs: could not recover from error after maximum number of attempts, evt "+M+", data "+L+" "),this.trigger(b.default.PLAYBACK_ERROR,{evt:M,data:L},this.name);else E.default.warn("hlsjs: non-fatal error occurred, evt "+M+", data "+L+" ")},D.prototype._onTimeUpdate=function(){this.trigger(b.default.PLAYBACK_TIMEUPDATE,{current:this.getCurrentTime(),total:this.getDuration()},this.name)},D.prototype._onProgress=function(){if(this.el.buffered.length){for(var M=0,L=0;L<this.el.buffered.length;L++)if(this.el.currentTime>=this.el.buffered.start(L)&&this.el.currentTime<=this.el.buffered.end(L)){M=L;break}this.trigger(b.default.PLAYBACK_PROGRESS,{start:Math.max(0,this.el.buffered.start(M)-this._playableRegionStartTime),current:Math.max(0,this.el.buffered.end(M)-this._playableRegionStartTime),total:this.getDuration()})}},D.prototype.play=function(){this._hls||this._setupHls(),A.prototype.play.call(this)},D.prototype.pause=function(){this._hls&&(A.prototype.pause.call(this),this.dvrEnabled&&this._updateDvr(!0))},D.prototype.stop=function(){this._hls&&(A.prototype.stop.call(this),this._hls.destroy(),delete this._hls)},D.prototype._updatePlaybackType=function(M,L){this._playbackType=L.details.live?g.default.LIVE:g.default.VOD,this._fillLevels(),this._onLevelUpdated(M,L)},D.prototype._fillLevels=function(){this._levels=this._hls.levels.map(function(M,L){return{id:L,level:M,label:M.bitrate/1e3+"Kbps"}}),this.trigger(b.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},D.prototype._onLevelUpdated=function(M,L){var V=!1,j=!1,N=L.details.fragments;N.length>0&&this._playableRegionStartTime!==N[0].start&&(V=!0,this._playableRegionStartTime=N[0].start);var G=L.details.totalduration;if(this._playbackType===g.default.LIVE){var K=this._hls.levels[L.level],k=K.details.targetduration,J=this._options.hlsjsConfig||{},se=J.liveSyncDurationCount||d.default.DefaultConfig.liveSyncDurationCount,te=k*se;te<=G?(G-=te,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}G!==this._playableRegionDuration&&(j=!0,this._playableRegionDuration=G),j&&this._onDurationChange(),V&&this._onProgress()},D.prototype._onFragmentLoaded=function(M,L){this.trigger(b.default.PLAYBACK_FRAGMENT_LOADED,L)},D.prototype._onLevelSwitch=function(M,L){this.levels.length||this._fillLevels(),this.trigger(b.default.PLAYBACK_LEVEL_SWITCH_END),this.trigger(b.default.PLAYBACK_LEVEL_SWITCH,L);var V=this._hls.levels[L.level];V&&(this.highDefinition=V.height>=720||V.bitrate/1e3>=2e3,this.trigger(b.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(b.default.PLAYBACK_BITRATE,{height:V.height,width:V.width,bandwidth:V.bandwidth,bitrate:V.bitrate,level:L.level}))},D.prototype.getPlaybackType=function(){return this._playbackType},D.prototype.isSeekEnabled=function(){return this._playbackType===g.default.VOD||this.dvrEnabled},w(D,[{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._playableRegionDuration>=this._minDvrSize&&this.getPlaybackType()===g.default.LIVE}}]),D}(y.default);T.default=P,P.canPlay=function(A,D){var M=A.split("?")[0].match(/.*\.(.*)$/)||[],L=M.length>1&&M[1]==="m3u8"||D==="application/x-mpegURL"||D==="application/vnd.apple.mpegurl";return!(!d.default.isSupported()||!L||l.default.isSafari)},B.exports=T.default},function(B,T,t){function o(g){return g&&g.__esModule?g:{default:g}}function x(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function f(g,s){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||typeof s!="object"&&typeof s!="function"?g:s}function h(g,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(g,s):g.__proto__=s)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function g(s,l){for(var S=0;S<l.length;S++){var E=l[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,l,S){return l&&g(s.prototype,l),S&&g(s,S),s}}(),p=t(1),y=o(p),c=t(7),d=o(c),C=t(22),b=o(C),u=function(g){function s(){return x(this,s),f(this,g.apply(this,arguments))}return h(s,g),s.prototype.updateSettings=function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(y.default.PLAYBACK_SETTINGSUPDATE)},s.prototype.getPlaybackType=function(){return d.default.AOD},w(s,[{key:"name",get:function(){return"html5_audio"}},{key:"tagName",get:function(){return"audio"}}]),s}(b.default);T.default=u,u.canPlay=function(g,s){var l={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return b.default._canPlay("audio",l,g,s)},B.exports=T.default},function(B,T,t){function o(G){return G&&G.__esModule?G:{default:G}}function x(G,K){if(!(G instanceof K))throw new TypeError("Cannot call a class as a function")}function f(G,K){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!K||typeof K!="object"&&typeof K!="function"?G:K}function h(G,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);G.prototype=Object.create(K&&K.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(G,K):G.__proto__=K)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function G(K,k){for(var J=0;J<k.length;J++){var se=k[J];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(K,se.key,se)}}return function(K,k,J){return k&&G(K.prototype,k),J&&G(K,J),K}}(),p=t(3),y=t(7),c=o(y),d=t(9),C=o(d),b=t(8),u=o(b),g=t(11),s=o(g),l=t(1),S=o(l),E=t(135),O=o(E),P=t(145),A=o(P),D=t(15),M=o(D),L=t(6),V=o(L),j={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map(function(G){return'video/mp4; codecs="'+G+', mp4a.40.2"'}),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};j.ogv=j.ogg,j["3gp"]=j["3gpp"];var N=function(G){function K(k){x(this,K);var J=f(this,G.call(this,k));J._loadStarted=!1,J._playheadMoving=!1,J._playheadMovingTimer=null,J._stopped=!1,J._options=k,J._setupSrc(k.src);var se=k.playbackConfig||{},te=se.preload||(s.default.isSafari?"auto":k.preload);return V.default.extend(J.el,{loop:k.loop,autoplay:k.autoPlay,poster:k.poster,preload:te||"metadata",controls:se.controls||k.useVideoTagDefaultControls,crossOrigin:se.crossOrigin}),J.settings={default:["seekbar"]},J.settings.left=["playpause","position","duration"],J.settings.right=["fullscreen","volume","hd-indicator"],J}return h(K,G),w(K,[{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return"video"}},{key:"template",get:function(){return(0,C.default)(A.default)}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeked:"_handleBufferingEvents",seeking:"_handleBufferingEvents",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return!!this._bufferingState}}]),K.prototype._setupSrc=function(k){this._src=k,this.el.src=k},K.prototype._onLoadedMetadata=function(k){this._handleBufferingEvents(),this.trigger(S.default.PLAYBACK_LOADEDMETADATA,{duration:k.target.duration,data:k}),this._updateSettings();var J=typeof this._options.autoSeekFromUrl>"u"||this._options.autoSeekFromUrl;this.getPlaybackType()!==c.default.LIVE&&J&&this._checkInitialSeek()},K.prototype._onDurationChange=function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()},K.prototype._updateSettings=function(){this.getPlaybackType()===c.default.VOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(S.default.PLAYBACK_SETTINGSUPDATE)},K.prototype.isSeekEnabled=function(){return isFinite(this.getDuration())},K.prototype.getPlaybackType=function(){return[0,void 0,1/0].indexOf(this.el.duration)>=0?c.default.LIVE:c.default.VOD},K.prototype.isHighDefinitionInUse=function(){return!1},K.prototype.play=function(){this.trigger(S.default.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._handleBufferingEvents(),this.el.play()},K.prototype.pause=function(){this.el.pause()},K.prototype.stop=function(){this.pause(),this._stopped=!0,this.el.currentTime=0,this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(S.default.PLAYBACK_STOP)},K.prototype.volume=function(k){this.el.volume=k/100},K.prototype.mute=function(){this.el.volume=0},K.prototype.unmute=function(){this.el.volume=1},K.prototype.isMuted=function(){return!!this.el.volume},K.prototype.isPlaying=function(){return!this.el.paused&&!this.el.ended},K.prototype._startPlayheadMovingChecks=function(){this._playheadMovingTimer===null&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))},K.prototype._stopPlayheadMovingChecks=function(){this._playheadMovingTimer!==null&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)},K.prototype._determineIfPlayheadMoving=function(){var k=this._playheadMovingTimeOnCheck,J=this.el.currentTime;this._playheadMoving=k!==J,this._playheadMovingTimeOnCheck=J,this._handleBufferingEvents()},K.prototype._onWaiting=function(){this._loadStarted=!0,this._handleBufferingEvents()},K.prototype._onLoadedData=function(){this._loadStarted=!0,this._handleBufferingEvents()},K.prototype._onCanPlay=function(){this._handleBufferingEvents()},K.prototype._onPlaying=function(){this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(S.default.PLAYBACK_PLAY)},K.prototype._onPause=function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(S.default.PLAYBACK_PAUSE)},K.prototype._onEnded=function(){this._handleBufferingEvents(),this.trigger(S.default.PLAYBACK_ENDED,this.name)},K.prototype._handleBufferingEvents=function(){var k=!this.el.ended&&!this.el.paused,J=this._loadStarted&&!this.el.ended&&!this.stopped&&(k&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._bufferingState!==J&&(this._bufferingState=J,J?this.trigger(S.default.PLAYBACK_BUFFERING,this.name):this.trigger(S.default.PLAYBACK_BUFFERFULL,this.name))},K.prototype._onError=function(){this.trigger(S.default.PLAYBACK_ERROR,this.el.error,this.name)},K.prototype.destroy=function(){this.$el.remove(),this.el.src="",this._src=null},K.prototype.seek=function(k){this.el.currentTime=k},K.prototype.seekPercentage=function(k){var J=this.el.duration*(k/100);this.seek(J)},K.prototype._checkInitialSeek=function(){var k=(0,p.seekStringToSeconds)(window.location.href);k!==0&&this.seek(k)},K.prototype.getCurrentTime=function(){return this.el.currentTime},K.prototype.getDuration=function(){return this.el.duration},K.prototype._onTimeUpdate=function(){this._handleBufferingEvents(),this.getPlaybackType()===c.default.LIVE?this.trigger(S.default.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(S.default.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)},K.prototype._onProgress=function(){if(this.el.buffered.length){for(var k=0,J=0;J<this.el.buffered.length;J++)if(this.el.currentTime>=this.el.buffered.start(J)&&this.el.currentTime<=this.el.buffered.end(J)){k=J;break}this.trigger(S.default.PLAYBACK_PROGRESS,{start:this.el.buffered.start(k),current:this.el.buffered.end(k),total:this.el.duration})}},K.prototype._typeFor=function(k){var J=k.split("?")[0].match(/.*\.(.*)$/)||[],se=J.length>1&&J[1]==="m3u8";return se?"application/vnd.apple.mpegurl":"video/mp4"},K.prototype._ready=function(){this._isReadyState||(this._isReadyState=!0,this.trigger(S.default.PLAYBACK_READY,this.name))},K.prototype.render=function(){var k=u.default.getStyleFor(O.default);return this._src&&this.$el.html(this.template({src:this._src,type:this._typeFor(this._src)})),this._options.useVideoTagDefaultControls&&this.$el.attr("controls","controls"),this._options.disableVideoTagContextMenu&&this.$el.on("contextmenu",function(){return!1}),this.$el.append(k),this._ready(),this},w(K,[{key:"isReady",get:function(){return this._isReadyState}}]),K}(c.default);T.default=N,N._canPlay=function(G,K,k,J){var se=(k.split("?")[0].match(/.*\.(.*)$/)||[])[1],te=J||K[se]||[];te=te.constructor===Array?te:[te];var oe=document.createElement(G);return!!(0,M.default)(te,function(re){return!!oe.canPlayType(re).replace(/no/,"")})},N.canPlay=function(G,K){return N._canPlay("video",j,G,K)},B.exports=N,B.exports=T.default},function(B,T,t){function o(l){return l&&l.__esModule?l:{default:l}}function x(l,S){if(!(l instanceof S))throw new TypeError("Cannot call a class as a function")}function f(l,S){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||typeof S!="object"&&typeof S!="function"?l:S}function h(l,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);l.prototype=Object.create(S&&S.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(l,S):l.__proto__=S)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function l(S,E){for(var O=0;O<E.length;O++){var P=E[O];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,E,O){return E&&l(S.prototype,E),O&&l(S,O),S}}(),p=t(7),y=o(p),c=t(8),d=o(c),C=t(136),b=o(C),u=t(1),g=o(u),s=function(l){function S(E){x(this,S);var O=f(this,l.call(this,E));return O.el.src=E.src,O}return h(S,l),S.prototype.getPlaybackType=function(){return y.default.NO_OP},w(S,[{key:"name",get:function(){return"html_img"}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),S.prototype.render=function(){var E=d.default.getStyleFor(b.default);return this.$el.append(E),this.trigger(g.default.PLAYBACK_READY,this.name),this},S.prototype._onLoad=function(){this.trigger(g.default.PLAYBACK_ENDED,this.name)},S.prototype._onError=function(E){var O=E.type==="error"?"load error":"loading aborted";this.trigger(g.default.PLAYBACK_ERROR,{message:O},this.name)},S}(y.default);T.default=s,s.canPlay=function(l){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(l)},B.exports=T.default},function(B,T,t){function o(A){return A&&A.__esModule?A:{default:A}}function x(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function f(A,D){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||typeof D!="object"&&typeof D!="function"?A:D}function h(A,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);A.prototype=Object.create(D&&D.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(A,D):A.__proto__=D)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function A(D,M){for(var L=0;L<M.length;L++){var V=M[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}return function(D,M,L){return M&&A(D.prototype,M),L&&A(D,L),D}}(),p=t(3),y=t(7),c=o(y),d=t(9),C=o(d),b=t(8),u=o(b),g=t(1),s=o(g),l=t(137),S=o(l),E=t(146),O=o(E),P=function(A){function D(M){x(this,D);var L=f(this,A.call(this,M));return L.options=M,L._noiseFrameNum=-1,L}return h(D,A),D.prototype._getNoOpMessage=function(){var M={en:"Your browser does not support the playback of this video. Please try using a different browser.",es:"Su navegador no soporta la reproduccin de un video. Por favor, trate de usar un navegador diferente.",pt:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente."};M["en-us"]=M.en,M["es-419"]=M.es,M["pt-br"]=M.pt;var L=(0,p.getBrowserLanguage)();return L&&M[L]||M.en},w(D,[{key:"name",get:function(){return"no_op"}},{key:"template",get:function(){return(0,C.default)(O.default)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),D.prototype.render=function(){var M=u.default.getStyleFor(S.default);return this.$el.html(this.template({message:this.options.playbackNotSupportedMessage||this._getNoOpMessage()})),this.$el.append(M),this._animate(),this.trigger(s.default.PLAYBACK_READY,this.name),this},D.prototype._noise=function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var M=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),L=void 0;try{L=new Uint32Array(M.data.buffer)}catch{L=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var V=M.data,j=0;j<V.length;j++)L[j]=V[j]}for(var N=L.length,G=0,K=0,k=6*Math.random()+4,J=0;J<N;){if(G<0){G=k*Math.random();var se=Math.pow(Math.random(),.4);K=255*se<<24}G-=1,L[J++]=K}this.context.putImageData(M,0,0)}},D.prototype._loop=function(){var M=this;this._stop||(this._noise(),this._animationHandle=(0,p.requestAnimationFrame)(function(){return M._loop()}))},D.prototype.destroy=function(){this._animationHandle&&((0,p.cancelAnimationFrame)(this._animationHandle),this._stop=!0)},D.prototype._animate=function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()},D}(c.default);T.default=P,P.canPlay=function(A){return!0},B.exports=T.default},function(B,T,t){function o(g){return g&&g.__esModule?g:{default:g}}function x(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function f(g,s){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||typeof s!="object"&&typeof s!="function"?g:s}function h(g,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(g,s):g.__proto__=s)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function g(s,l){for(var S=0;S<l.length;S++){var E=l[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,l,S){return l&&g(s.prototype,l),S&&g(s,S),s}}(),p=t(18),y=o(p),c=t(1),d=o(c),C=t(7),b=o(C),u=function(g){function s(l){return x(this,s),f(this,g.call(this,l))}return h(s,g),w(s,[{key:"name",get:function(){return"click_to_pause"}}]),s.prototype.bindEvents=function(){this.listenTo(this.container,d.default.CONTAINER_CLICK,this.click),this.listenTo(this.container,d.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)},s.prototype.click=function(){(this.container.getPlaybackType()!==b.default.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())},s.prototype.settingsUpdate=function(){this.container.$el.removeClass("pointer-enabled"),(this.container.getPlaybackType()!==b.default.LIVE||this.container.isDvrEnabled())&&this.container.$el.addClass("pointer-enabled")},s}(y.default);T.default=u,B.exports=T.default},function(B,T,t){B.exports=t(110)},function(B,T,t){function o(D){return D&&D.__esModule?D:{default:D}}function x(D,M){if(!(D instanceof M))throw new TypeError("Cannot call a class as a function")}function f(D,M){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||typeof M!="object"&&typeof M!="function"?D:M}function h(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);D.prototype=Object.create(M&&M.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(D,M):D.__proto__=M)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function D(M,L){for(var V=0;V<L.length;V++){var j=L[V];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(M,j.key,j)}}return function(M,L,V){return L&&D(M.prototype,L),V&&D(M,V),M}}(),p=t(23),y=o(p),c=t(9),d=o(c),C=t(7),b=o(C),u=t(8),g=o(u),s=t(1),l=o(s),S=t(138),E=o(S),O=t(147),P=o(O),A=function(D){function M(L){x(this,M);var V=f(this,D.call(this,L));return V.core=L,V.settingsUpdate(),V}return h(M,D),w(M,[{key:"template",get:function(){return(0,d.default)(P.default)}},{key:"name",get:function(){return"dvr_controls"}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}}]),M.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,l.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,l.default.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,l.default.CORE_OPTIONS_CHANGE,this.render),this.core.getCurrentContainer()&&(this.listenToOnce(this.core.getCurrentContainer(),l.default.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.getCurrentContainer(),l.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))},M.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},M.prototype.dvrChanged=function(L){this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),L?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr")},M.prototype.click=function(){var L=this.core.mediaControl,V=L.container;V.isPlaying()||V.play(),L.$el.hasClass("dvr")&&V.seek(V.getDuration())},M.prototype.settingsUpdate=function(){var L=this;this.stopListening(),this.shouldRender()&&(this.render(),this.$el.click(function(){return L.click()})),this.bindEvents()},M.prototype.shouldRender=function(){var L=this.core.options.useDvrControls===void 0||!!this.core.options.useDvrControls;return L&&this.core.getPlaybackType()===b.default.LIVE},M.prototype.render=function(){return this.style=this.style||g.default.getStyleFor(E.default,{baseUrl:this.core.options.baseUrl}),this.$el.html(this.template()),this.$el.append(this.style),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this},M}(y.default);T.default=A,B.exports=T.default},function(B,T,t){B.exports=t(112)},function(B,T,t){function o(u){return u&&u.__esModule?u:{default:u}}function x(u,g){if(!(u instanceof g))throw new TypeError("Cannot call a class as a function")}function f(u,g){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?u:g}function h(u,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);u.prototype=Object.create(g&&g.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(u,g):u.__proto__=g)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function u(g,s){for(var l=0;l<s.length;l++){var S=s[l];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,s,l){return s&&u(g.prototype,s),l&&u(g,l),g}}(),p=t(1),y=o(p),c=t(19),d=o(c),C=t(3),b=function(u){function g(){return x(this,g),f(this,u.apply(this,arguments))}return h(g,u),g.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,y.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged);var s=this.core.getCurrentContainer();s&&(this.listenTo(s,y.default.CONTAINER_ENDED,this.ended),this.listenTo(s,y.default.CONTAINER_STOP,this.ended))},g.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},g.prototype.ended=function(){var s=typeof this.core.options.exitFullscreenOnEnd>"u"||this.core.options.exitFullscreenOnEnd;s&&C.Fullscreen.isFullscreen()&&this.core.toggleFullscreen()},w(g,[{key:"name",get:function(){return"end_video"}}]),g}(d.default);T.default=b,B.exports=T.default},function(B,T,t){function o(O){return O&&O.__esModule?O:{default:O}}function x(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}function f(O,P){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?O:P}function h(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(O,P):O.__proto__=P)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function O(P,A){for(var D=0;D<A.length;D++){var M=A[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(P,M.key,M)}}return function(P,A,D){return A&&O(P.prototype,A),D&&O(P,D),P}}(),p=t(19),y=o(p),c=t(1),d=o(c),C=t(6),b=o(C),u=t(27),g=o(u),s=t(46),l=o(s),S=(0,b.default)('link[rel="shortcut icon"]'),E=function(O){function P(A){x(this,P);var D=f(this,O.call(this,A));return D.configure(),D}return h(P,O),w(P,[{key:"name",get:function(){return"favicon"}},{key:"oldIcon",get:function(){return S}}]),P.prototype.configure=function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,d.default.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,d.default.CORE_OPTIONS_CHANGE,this.configure))},P.prototype.bindEvents=function(){this.listenTo(this.core,d.default.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core.mediaControl,d.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.core.mediaControl.container&&this.containerChanged()},P.prototype.containerChanged=function(){this.stopListening(this.core.mediaControl.container),this.listenTo(this.core.mediaControl.container,d.default.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this.core.mediaControl.container,d.default.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this.core.mediaControl.container,d.default.CONTAINER_STOP,this.resetIcon),this.listenTo(this.core.mediaControl.container,d.default.CONTAINER_ENDED,this.resetIcon),this.listenTo(this.core.mediaControl.container,d.default.CONTAINER_ERROR,this.resetIcon),this.resetIcon()},P.prototype.disable=function(){O.prototype.disable.call(this),this.resetIcon()},P.prototype.destroy=function(){O.prototype.destroy.call(this),this.resetIcon()},P.prototype.createIcon=function(A){var D=(0,b.default)("<canvas/>");D[0].width=16,D[0].height=16;var M=D[0].getContext("2d");M.fillStyle="#000";var L=(0,b.default)(A).find("path").attr("d"),V=new Path2D(L);M.fill(V);var j=(0,b.default)('<link rel="shortcut icon" type="image/png"/>');return j.attr("href",D[0].toDataURL("image/png")),j},P.prototype.setPlayIcon=function(){this.playIcon||(this.playIcon=this.createIcon(g.default)),this.changeIcon(this.playIcon)},P.prototype.setPauseIcon=function(){this.pauseIcon||(this.pauseIcon=this.createIcon(l.default)),this.changeIcon(this.pauseIcon)},P.prototype.resetIcon=function(){(0,b.default)('link[rel="shortcut icon"]').remove(),(0,b.default)("head").append(this.oldIcon)},P.prototype.changeIcon=function(A){A&&((0,b.default)('link[rel="shortcut icon"]').remove(),(0,b.default)("head").append(A))},P}(y.default);T.default=E,B.exports=T.default},function(B,T,t){B.exports=t(115)},function(B,T,t){function o(b){return b&&b.__esModule?b:{default:b}}function x(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}function f(b,u){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?b:u}function h(b,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(b,u):b.__proto__=u)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function b(u,g){for(var s=0;s<g.length;s++){var l=g[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(u,l.key,l)}}return function(u,g,s){return g&&b(u.prototype,g),s&&b(u,s),u}}(),p=t(18),y=o(p),c=t(1),d=o(c),C=function(b){function u(g){x(this,u);var s=f(this,b.call(this,g));return s.container.options.gaAccount&&(s.account=s.container.options.gaAccount,s.trackerName=s.container.options.gaTrackerName?s.container.options.gaTrackerName+".":"Clappr.",s.domainName=s.container.options.gaDomainName,s.currentHDState=void 0,s.embedScript()),s}return h(u,b),w(u,[{key:"name",get:function(){return"google_analytics"}}]),u.prototype.embedScript=function(){var g=this;if(window._gat)this.addEventListeners();else{var s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("async","async"),s.setAttribute("src","//www.google-analytics.com/ga.js"),s.onload=function(){return g.addEventListeners()},document.body.appendChild(s)}},u.prototype.addEventListeners=function(){var g=this;this.container&&(this.listenTo(this.container,d.default.CONTAINER_READY,this.onReady),this.listenTo(this.container,d.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,d.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,d.default.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,d.default.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,d.default.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,d.default.CONTAINER_ERROR,this.onError),this.listenTo(this.container,d.default.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,d.default.CONTAINER_VOLUME,function(s){return g.onVolumeChanged(s)}),this.listenTo(this.container,d.default.CONTAINER_SEEK,function(s){return g.onSeek(s)}),this.listenTo(this.container,d.default.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,d.default.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,d.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])},u.prototype.onReady=function(){this.push(["Video","Playback",this.container.playback.name])},u.prototype.onPlay=function(){this.push(["Video","Play",this.container.playback.src])},u.prototype.onStop=function(){this.push(["Video","Stop",this.container.playback.src])},u.prototype.onEnded=function(){this.push(["Video","Ended",this.container.playback.src])},u.prototype.onBuffering=function(){this.push(["Video","Buffering",this.container.playback.src])},u.prototype.onBufferFull=function(){this.push(["Video","Bufferfull",this.container.playback.src])},u.prototype.onError=function(){this.push(["Video","Error",this.container.playback.src])},u.prototype.onHD=function(g){var s=g?"ON":"OFF";s!==this.currentHDState&&(this.currentHDState=s,this.push(["Video","HD - "+s,this.container.playback.src]))},u.prototype.onPlaybackChanged=function(g){g.type!==null&&this.push(["Video","Playback Type - "+g.type,this.container.playback.src])},u.prototype.onDVR=function(g){var s=g?"ON":"OFF";this.push(["Interaction","DVR - "+s,this.container.playback.src])},u.prototype.onPause=function(){this.push(["Video","Pause",this.container.playback.src])},u.prototype.onSeek=function(){this.push(["Video","Seek",this.container.playback.src])},u.prototype.onVolumeChanged=function(){this.push(["Interaction","Volume",this.container.playback.src])},u.prototype.onFullscreen=function(){this.push(["Interaction","Fullscreen",this.container.playback.src])},u.prototype.push=function(g){var s=[this.trackerName+"_trackEvent"].concat(g);_gaq.push(s)},u}(y.default);T.default=C,B.exports=T.default},function(B,T,t){B.exports=t(117)},function(B,T,t){function o(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(T,"__esModule",{value:!0});var x=t(26),f="font-weight: bold; font-size: 13px;",h="color: #006600;"+f,w="color: #0000ff;"+f,p="color: #ff8000;"+f,y="color: #ff0000;"+f,c=0,d=1,C=2,b=3,u=b,g=[w,h,p,y,y],s=["debug","info","warn","error","disabled"],l=function(){function S(){var E=this,O=arguments.length<=0||arguments[0]===void 0?d:arguments[0],P=arguments.length<=1||arguments[1]===void 0?u:arguments[1];o(this,S),this.kibo=new x.Kibo,this.kibo.down(["ctrl shift d"],function(){return E.onOff()}),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=O,this.offLevel=P}return S.prototype.debug=function(E){this.log(E,c,Array.prototype.slice.call(arguments,1))},S.prototype.info=function(E){this.log(E,d,Array.prototype.slice.call(arguments,1))},S.prototype.warn=function(E){this.log(E,C,Array.prototype.slice.call(arguments,1))},S.prototype.error=function(E){this.log(E,b,Array.prototype.slice.call(arguments,1))},S.prototype.onOff=function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+s[this.level],p)},S.prototype.level=function(E){this.level=E},S.prototype.log=function(E,O,P){if(!(this.BLACKLIST.indexOf(P[0])>=0||O<this.level)){P||(P=E,E=null);var A="",D=g[O];E&&(A="["+E+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+s[O]+"]"+A,D].concat(P))}},S}();T.default=l,l.LEVEL_DEBUG=c,l.LEVEL_INFO=d,l.LEVEL_WARN=C,l.LEVEL_ERROR=b,l.getInstance=function(){return this._instance===void 0&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},l.setLevel=function(S){this.getInstance().level=S},l.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},l.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},l.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},l.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},B.exports=T.default},function(B,T,t){(function(o){function x(M){return M&&M.__esModule?M:{default:M}}function f(M,L){if(!(M instanceof L))throw new TypeError("Cannot call a class as a function")}function h(M,L){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||typeof L!="object"&&typeof L!="function"?M:L}function w(M,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(M,L):M.__proto__=L)}Object.defineProperty(T,"__esModule",{value:!0});var p=function(){function M(L,V){for(var j=0;j<V.length;j++){var N=V[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(L,N.key,N)}}return function(L,V,j){return V&&M(L.prototype,V),j&&M(L,j),L}}(),y=t(20),c=x(y),d=t(1),C=x(d),b=t(8),u=x(b),g=t(9),s=x(g),l=t(139),S=x(l),E=t(148),O=x(E),P=t(27),A=x(P),D=function(M){function L(V){f(this,L);var j=h(this,M.call(this,V));return j.hasStartedPlaying=!1,j.playRequested=!1,j.render(),o.nextTick(function(){return j.update()}),j}return w(L,M),p(L,[{key:"name",get:function(){return"poster"}},{key:"template",get:function(){return(0,s.default)(O.default)}},{key:"shouldRender",get:function(){return this.container.playback.name!=="html_img"}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}}]),L.prototype.bindEvents=function(){this.listenTo(this.container,C.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,C.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,C.default.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,C.default.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,C.default.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,C.default.CONTAINER_OPTIONS_CHANGE,this.render)},L.prototype.stopListening=function(){M.prototype.stopListening.call(this)},L.prototype.onPlay=function(){this.hasStartedPlaying=!0,this.update()},L.prototype.onStop=function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()},L.prototype.showPlayButton=function(V){!V||this.options.chromeless&&!this.options.allowUserInteraction?(this.$playButton.hide(),this.$el.removeClass("clickable")):(this.$playButton.show(),this.$el.addClass("clickable"))},L.prototype.clicked=function(){return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.play()),!1},L.prototype.shouldHideOnPlay=function(){return!(this.container.playback.name=="html5_audio"||this.options.audioOnly)},L.prototype.update=function(){if(this.shouldRender){var V=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.showPlayButton(V),this.hasStartedPlaying?(this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()):(this.container.disableMediaControl(),this.$el.show())}},L.prototype.render=function(){if(this.shouldRender){var V=u.default.getStyleFor(S.default,{baseUrl:this.options.baseUrl});this.$el.html(this.template()),this.$el.append(V),this.options.poster&&this.$el.css({"background-image":"url("+this.options.poster+")"}),this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(A.default),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var j=this.options.mediacontrol&&this.options.mediacontrol.buttons;return j&&this.$el.find("svg path").css("fill",j),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(j=this.options.mediacontrol.buttons,this.$playButton.css("color",j)),this.update(),this}},L}(c.default);T.default=D,B.exports=T.default}).call(T,t(34))},function(B,T,t){B.exports=t(122)},function(B,T,t){function o(M){return M&&M.__esModule?M:{default:M}}function x(M,L){if(!(M instanceof L))throw new TypeError("Cannot call a class as a function")}function f(M,L){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||typeof L!="object"&&typeof L!="function"?M:L}function h(M,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(M,L):M.__proto__=L)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function M(L,V){for(var j=0;j<V.length;j++){var N=V[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(L,N.key,N)}}return function(L,V,j){return V&&M(L.prototype,V),j&&M(L,j),L}}(),p=t(3),y=t(23),c=o(y),d=t(8),C=o(d),b=t(9),u=o(b),g=t(1),s=o(g),l=t(7),S=o(l),E=t(140),O=o(E),P=t(149),A=o(P),D=function(M){function L(V){x(this,L);var j=f(this,M.call(this,V));return j.hoveringOverSeekBar=!1,j.hoverPosition=null,j.duration=null,j.actualLiveTime=!!j.mediaControl.options.actualLiveTime,j.actualLiveTime&&(j.mediaControl.options.actualLiveServerTime?j.actualLiveServerTimeDiff=new Date().getTime()-new Date(j.mediaControl.options.actualLiveServerTime).getTime():j.actualLiveServerTimeDiff=0),j}return h(L,M),w(L,[{key:"name",get:function(){return"seek_time"}},{key:"template",get:function(){return(0,u.default)(A.default)}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===S.default.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.useActualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]),L.prototype.bindEvents=function(){this.listenTo(this.mediaControl,s.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,s.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,s.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,s.default.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,s.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,s.default.CONTAINER_TIMEUPDATE,this.updateDuration))},L.prototype.onContainerChanged=function(){this.stopListening(),this.bindEvents()},L.prototype.updateDuration=function(V){this.duration=V.total,this.update()},L.prototype.showTime=function(V){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(V),this.update()},L.prototype.hideTime=function(){this.hoveringOverSeekBar=!1,this.update()},L.prototype.calculateHoverPosition=function(V){var j=V.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(j/this.mediaControl.$seekBarContainer.width(),0))},L.prototype.getSeekTime=function(){var V=null;if(this.useActualLiveTime){var j=new Date(new Date().getTime()-this.actualLiveServerTimeDiff),N=new Date(j),G=(N-j.setHours(0,0,0,0))/1e3;V=G-this.duration+this.hoverPosition*this.duration,V<0&&(V+=86400)}else V=this.hoverPosition*this.duration;return{seekTime:V,secondsSinceMidnight:G}},L.prototype.update=function(){if(this.rendered)if(this.shouldBeVisible()){var V=this.getSeekTime(),j=(0,p.formatTime)(V.seekTime,this.useActualLiveTime);if(j!==this.displayedSeekTime&&(this.$seekTimeEl.text(j),this.displayedSeekTime=j),this.durationShown){this.$durationEl.show();var N=(0,p.formatTime)(this.actualLiveTime?V.secondsSinceMidnight:this.duration,this.actualLiveTime);N!==this.displayedDuration&&(this.$durationEl.text(N),this.displayedDuration=N)}else this.$durationEl.hide();this.$el.show();var G=this.mediaControl.$seekBarContainer.width(),K=this.$el.width(),k=this.hoverPosition*G;k-=K/2,k=Math.max(0,Math.min(k,G-K)),this.$el.css("left",k)}else this.$el.hide(),this.$el.css("left","-100%")},L.prototype.shouldBeVisible=function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&this.hoverPosition!==null&&this.duration!==null},L.prototype.render=function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null;var V=C.default.getStyleFor(O.default);this.$el.html(this.template()),this.$el.append(V),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()},L}(c.default);T.default=D,B.exports=T.default},function(B,T,t){function o(g){return g&&g.__esModule?g:{default:g}}function x(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function f(g,s){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||typeof s!="object"&&typeof s!="function"?g:s}function h(g,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(g,s):g.__proto__=s)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function g(s,l){for(var S=0;S<l.length;S++){var E=l[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,l,S){return l&&g(s.prototype,l),S&&g(s,S),s}}(),p=t(19),y=o(p),c=t(1),d=o(c),C=t(15),b=o(C),u=function(g){function s(){return x(this,s),f(this,g.apply(this,arguments))}return h(s,g),s.prototype.bindEvents=function(){this.listenTo(this.core,d.default.CORE_CONTAINERS_CREATED,this.onContainersCreated)},s.prototype.onContainersCreated=function(){var l=(0,b.default)(this.core.containers,function(S){return S.playback.name!=="no_op"})||this.core.containers[0];l&&this.core.containers.forEach(function(S){S!==l&&S.destroy()})},w(s,[{key:"name",get:function(){return"sources"}}]),s}(y.default);T.default=u,B.exports=T.default},function(B,T,t){B.exports=t(125)},function(B,T,t){function o(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function f(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?P:A}function h(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function P(A,D){for(var M=0;M<D.length;M++){var L=D[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,D,M){return D&&P(A.prototype,D),M&&P(A,M),A}}(),p=t(20),y=o(p),c=t(1),d=o(c),C=t(8),b=o(C),u=t(9),g=o(u),s=t(150),l=o(s),S=t(141),E=o(S),O=function(P){function A(D){x(this,A);var M=f(this,P.call(this,D));return M.template=(0,g.default)(l.default),M.showTimeout=null,M.listenTo(M.container,d.default.CONTAINER_STATE_BUFFERING,M.onBuffering),M.listenTo(M.container,d.default.CONTAINER_STATE_BUFFERFULL,M.onBufferFull),M.listenTo(M.container,d.default.CONTAINER_STOP,M.onStop),M.listenTo(M.container,d.default.CONTAINER_ENDED,M.onStop),M.listenTo(M.container,d.default.CONTAINER_ERROR,M.onStop),M.render(),M}return h(A,P),w(A,[{key:"name",get:function(){return"spinner"}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}}]),A.prototype.onBuffering=function(){this.show()},A.prototype.onBufferFull=function(){this.hide()},A.prototype.onStop=function(){this.hide()},A.prototype.show=function(){var D=this;this.showTimeout===null&&(this.showTimeout=setTimeout(function(){return D.$el.show()},300))},A.prototype.hide=function(){this.showTimeout!==null&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()},A.prototype.render=function(){this.$el.html(this.template());var D=b.default.getStyleFor(E.default);return this.container.$el.append(D),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this},A}(y.default);T.default=O,B.exports=T.default},function(B,T,t){B.exports=t(127)},function(B,T,t){function o(g){return g&&g.__esModule?g:{default:g}}function x(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function f(g,s){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||typeof s!="object"&&typeof s!="function"?g:s}function h(g,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(g,s):g.__proto__=s)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function g(s,l){for(var S=0;S<l.length;S++){var E=l[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,l,S){return l&&g(s.prototype,l),S&&g(s,S),s}}(),p=t(18),y=o(p),c=t(1),d=o(c),C=t(6),b=o(C),u=function(g){function s(l){x(this,s);var S=f(this,g.call(this,l));return S.setInitialAttrs(),S.reportInterval=S.options.reportInterval||5e3,S.state="IDLE",S}return h(s,g),w(s,[{key:"name",get:function(){return"stats"}}]),s.prototype.bindEvents=function(){this.listenTo(this.container.playback,d.default.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,d.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,d.default.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,d.default.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,d.default.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,d.default.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,d.default.PLAYBACK_STATS_ADD,this.onStatsAdd)},s.prototype.setInitialAttrs=function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}},s.prototype.onPlay=function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))},s.prototype.onStop=function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"},s.prototype.onBuffering=function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++},s.prototype.onBufferFull=function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"},s.prototype.getRebufferingTime=function(){return Date.now()-this.rebufferingTimeInit},s.prototype.getWatchingTime=function(){var l=Date.now()-this.watchingTimeInit;return l-this.rebufferingTime},s.prototype.isRebuffering=function(){return!!this.rebufferingTimeInit},s.prototype.onStatsAdd=function(l){b.default.extend(this.externalMetrics,l)},s.prototype.getStats=function(){var l={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return b.default.extend(l,this.externalMetrics),l},s.prototype.report=function(){this.container.statsReport(this.getStats())},s}(y.default);T.default=u,B.exports=T.default},function(B,T,t){B.exports=t(129)},function(B,T,t){function o(P){return P&&P.__esModule?P:{default:P}}function x(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function f(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?P:A}function h(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}Object.defineProperty(T,"__esModule",{value:!0});var w=function(){function P(A,D){for(var M=0;M<D.length;M++){var L=D[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,D,M){return D&&P(A.prototype,D),M&&P(A,M),A}}(),p=t(20),y=o(p),c=t(1),d=o(c),C=t(8),b=o(C),u=t(9),g=o(u),s=t(142),l=o(s),S=t(151),E=o(S),O=function(P){function A(D){x(this,A);var M=f(this,P.call(this,D));return M.configure(),M}return h(A,P),w(A,[{key:"name",get:function(){return"watermark"}},{key:"template",get:function(){return(0,g.default)(E.default)}}]),A.prototype.bindEvents=function(){this.listenTo(this.container,d.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,d.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,d.default.CONTAINER_OPTIONS_CHANGE,this.configure)},A.prototype.configure=function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()},A.prototype.onPlay=function(){this.hidden||this.$el.show()},A.prototype.onStop=function(){this.$el.hide()},A.prototype.render=function(){this.$el.hide();var D={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};this.$el.html(this.template(D));var M=b.default.getStyleFor(l.default);return this.container.$el.append(M),this.container.$el.append(this.$el),this},A}(y.default);T.default=O,B.exports=T.default},function(B,T){Object.defineProperty(T,"__esModule",{value:!0});var t=function(o){this.element=o||window.document,this.initialize()};t.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},t.KEY_CODES_BY_NAME={},function(){for(var o in t.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(t.KEY_NAMES_BY_CODE,o)&&(t.KEY_CODES_BY_NAME[t.KEY_NAMES_BY_CODE[o]]=+o)}(),t.MODIFIERS=["shift","ctrl","alt"],t.registerEvent=function(){return document.addEventListener?function(o,x,f){o.addEventListener(x,f,!1)}:document.attachEvent?function(o,x,f){o.attachEvent("on"+x,f)}:void 0}(),t.unregisterEvent=function(){return document.removeEventListener?function(o,x,f){o.removeEventListener(x,f,!1)}:document.detachEvent?function(o,x,f){o.detachEvent("on"+x,f)}:void 0}(),t.stringContains=function(o,x){return o.indexOf(x)!==-1},t.neatString=function(o){return o.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},t.capitalize=function(o){return o.toLowerCase().replace(/^./,function(x){return x.toUpperCase()})},t.isString=function(o){return t.stringContains(Object.prototype.toString.call(o),"String")},t.arrayIncludes=function(){return Array.prototype.indexOf?function(o,x){return o.indexOf(x)!==-1}:function(o,x){for(var f=0;f<o.length;f++)if(o[f]===x)return!0;return!1}}(),t.extractModifiers=function(o){var x,f;for(x=[],f=0;f<t.MODIFIERS.length;f++)t.stringContains(o,t.MODIFIERS[f])&&x.push(t.MODIFIERS[f]);return x},t.extractKey=function(o){var x,f;for(x=t.neatString(o).split(" "),f=0;f<x.length;f++)if(!t.arrayIncludes(t.MODIFIERS,x[f]))return x[f]},t.modifiersAndKey=function(o){var x,f;return t.stringContains(o,"any")?t.neatString(o).split(" ").slice(0,2).join(" "):(x=t.extractModifiers(o),f=t.extractKey(o),f&&!t.arrayIncludes(t.MODIFIERS,f)&&x.push(f),x.join(" "))},t.keyName=function(o){return t.KEY_NAMES_BY_CODE[o+""]},t.keyCode=function(o){return+t.KEY_CODES_BY_NAME[o]},t.prototype.initialize=function(){var o,x=this;for(this.lastKeyCode=-1,this.lastModifiers={},o=0;o<t.MODIFIERS.length;o++)this.lastModifiers[t.MODIFIERS[o]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),t.registerEvent(this.element,"keydown",this.downHandler),t.registerEvent(this.element,"keyup",this.upHandler),t.registerEvent(window,"unload",function f(){t.unregisterEvent(x.element,"keydown",x.downHandler),t.unregisterEvent(x.element,"keyup",x.upHandler),t.unregisterEvent(window,"unload",f)})},t.prototype.handler=function(o){var x=this;return function(f){var h,w,p;for(f=f||window.event,x.lastKeyCode=f.keyCode,h=0;h<t.MODIFIERS.length;h++)x.lastModifiers[t.MODIFIERS[h]]=f[t.MODIFIERS[h]+"Key"];for(t.arrayIncludes(t.MODIFIERS,t.keyName(x.lastKeyCode))&&(x.lastModifiers[t.keyName(x.lastKeyCode)]=!0),w=x["keys"+t.capitalize(o)],h=0;h<w.any.length;h++)w.any[h](f)===!1&&f.preventDefault&&f.preventDefault();if(p=x.lastModifiersAndKey(),w[p])for(h=0;h<w[p].length;h++)w[p][h](f)===!1&&f.preventDefault&&f.preventDefault()}},t.prototype.registerKeys=function(o,x,f){var h,w,p=this["keys"+t.capitalize(o)];for(t.isString(x)&&(x=[x]),h=0;h<x.length;h++)w=x[h],w=t.modifiersAndKey(w+""),p[w]?p[w].push(f):p[w]=[f];return this},t.prototype.unregisterKeys=function(o,x,f){var h,w,p,y=this["keys"+t.capitalize(o)];for(t.isString(x)&&(x=[x]),h=0;h<x.length;h++)if(p=x[h],p=t.modifiersAndKey(p+""),f===null)delete y[p];else if(y[p]){for(w=0;w<y[p].length;w++)if(String(y[p][w])===String(f)){y[p].splice(w,1);break}}return this},t.prototype.off=function(o){return this.unregisterKeys("down",o,null)},t.prototype.delegate=function(o,x,f){return f!==null||f!==void 0?this.registerKeys(o,x,f):this.unregisterKeys(o,x,f)},t.prototype.down=function(o,x){return this.delegate("down",o,x)},t.prototype.up=function(o,x){return this.delegate("up",o,x)},t.prototype.lastKey=function(o){return o?this.lastModifiers[o]:t.keyName(this.lastKeyCode)},t.prototype.lastModifiersAndKey=function(){var o,x;for(o=[],x=0;x<t.MODIFIERS.length;x++)this.lastKey(t.MODIFIERS[x])&&o.push(t.MODIFIERS[x]);return t.arrayIncludes(o,this.lastKey())||o.push(this.lastKey()),o.join(" ")},T.default=t,B.exports=T.default},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,".container[data-container]{position:absolute;background-color:#000;height:100%;width:100%}.container[data-container] .chromeless{cursor:default}[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled{cursor:pointer}",""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,'@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:local("Roboto"),local("Roboto-Regular"),url('+t(158)+') format("truetype")}[data-player]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-transform:translateZ(0);transform:translateZ(0);position:relative;margin:0;padding:0;border:0;font-style:normal;font-weight:400;text-align:center;overflow:hidden;font-size:100%;font-family:Roboto,Open Sans,Arial,sans-serif;text-shadow:0 0 0;box-sizing:border-box}[data-player] a,[data-player] abbr,[data-player] acronym,[data-player] address,[data-player] applet,[data-player] article,[data-player] aside,[data-player] audio,[data-player] b,[data-player] big,[data-player] blockquote,[data-player] canvas,[data-player] caption,[data-player] center,[data-player] cite,[data-player] code,[data-player] dd,[data-player] del,[data-player] details,[data-player] dfn,[data-player] div,[data-player] dl,[data-player] dt,[data-player] em,[data-player] embed,[data-player] fieldset,[data-player] figcaption,[data-player] figure,[data-player] footer,[data-player] form,[data-player] h1,[data-player] h2,[data-player] h3,[data-player] h4,[data-player] h5,[data-player] h6,[data-player] header,[data-player] hgroup,[data-player] i,[data-player] iframe,[data-player] img,[data-player] ins,[data-player] kbd,[data-player] label,[data-player] legend,[data-player] li,[data-player] mark,[data-player] menu,[data-player] nav,[data-player] object,[data-player] ol,[data-player] output,[data-player] p,[data-player] pre,[data-player] q,[data-player] ruby,[data-player] s,[data-player] samp,[data-player] section,[data-player] small,[data-player] span,[data-player] strike,[data-player] strong,[data-player] sub,[data-player] summary,[data-player] sup,[data-player] table,[data-player] tbody,[data-player] td,[data-player] tfoot,[data-player] th,[data-player] thead,[data-player] time,[data-player] tr,[data-player] tt,[data-player] u,[data-player] ul,[data-player] var,[data-player] video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}[data-player] table{border-collapse:collapse;border-spacing:0}[data-player] caption,[data-player] td,[data-player] th{text-align:left;font-weight:400;vertical-align:middle}[data-player] blockquote,[data-player] q{quotes:none}[data-player] blockquote:after,[data-player] blockquote:before,[data-player] q:after,[data-player] q:before{content:"";content:none}[data-player] a img{border:none}[data-player]:focus{outline:0}[data-player] *{max-width:none;box-sizing:inherit;float:none}[data-player] div{display:block}[data-player].fullscreen{width:100%!important;height:100%!important;top:0;left:0}[data-player].nocursor{cursor:none}.clappr-style{display:none!important}',""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,".media-control-notransition{-webkit-transition:none!important;transition:none!important}.media-control[data-media-control]{position:absolute;width:100%;height:100%;z-index:9999;pointer-events:none}.media-control[data-media-control].dragging{pointer-events:auto;cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url("+t(47)+"),move}.media-control[data-media-control].dragging *{cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url("+t(47)+'),move}.media-control[data-media-control] .media-control-background[data-background]{position:absolute;height:40%;width:100%;bottom:0;background:-webkit-linear-gradient(transparent,rgba(0,0,0,.9));background:linear-gradient(transparent,rgba(0,0,0,.9));-webkit-transition:opacity .6s ease-out;transition:opacity .6s ease-out}.media-control[data-media-control] .media-control-icon{line-height:0;letter-spacing:0;speak:none;color:#fff;opacity:.5;vertical-align:middle;text-align:left;-webkit-transition:all .1s ease;transition:all .1s ease}.media-control[data-media-control] .media-control-icon:hover{color:#fff;opacity:.75;text-shadow:hsla(0,0%,100%,.8) 0 0 5px}.media-control[data-media-control].media-control-hide .media-control-background[data-background]{opacity:0}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls]{bottom:-50px}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls]{position:absolute;bottom:7px;width:100%;height:32px;font-size:0;vertical-align:middle;pointer-events:auto;-webkit-transition:bottom .4s ease-out;transition:bottom .4s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control]{position:absolute;top:0;left:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control]{height:100%;text-align:center;line-height:32px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control]{position:absolute;top:0;right:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button{background-color:transparent;border:0;margin:0 6px;padding:0;cursor:pointer;display:inline-block;width:32px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg{width:100%;height:22px}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus{outline:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop]{float:left;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen]{float:right;background-color:transparent;border:0;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator]{cursor:default;float:right;background-color:transparent;border:0;height:100%;display:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled{opacity:1;display:block}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover{opacity:1;text-shadow:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop]{float:left}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration],.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{display:inline-block;font-size:10px;color:#fff;cursor:default;line-height:32px;position:relative}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{margin:0 6px 0 7px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]{color:hsla(0,0%,100%,.5);margin-right:6px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before{content:"|";margin-right:7px}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]{position:absolute;top:-20px;left:0;display:inline-block;vertical-align:middle;width:100%;height:25px;cursor:pointer}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar]{width:100%;height:1px;position:relative;top:12px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled{cursor:default}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:2px;left:0;width:20px;height:20px;opacity:1;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume]{float:right;display:inline-block;height:32px;cursor:pointer;margin:0 6px;box-sizing:border-box}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume]{float:left;bottom:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]{background-color:transparent;border:0;box-sizing:content-box;width:32px;height:32px;opacity:.5}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover{opacity:.75}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg{height:24px;position:relative;top:3px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg{margin-left:2px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume]{float:left;position:relative;overflow:hidden;top:6px;width:42px;height:18px;padding:3px 0;-webkit-transition:width .2s ease-out;transition:width .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume]{height:1px;position:relative;top:7px;margin:0 3px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:0;left:0;width:20px;height:20px;opacity:1;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]{float:left;width:4px;padding-left:2px;height:12px;opacity:.5;box-shadow:inset 2px 0 0 #fff;-webkit-transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill{box-shadow:inset 2px 0 0 #fff;opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1){padding-left:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover{-webkit-transform:scaleY(1.5);transform:scaleY(1.5)}.media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide{width:0;height:12px;top:9px;padding:0}',""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}",""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,"[data-html5-video]{position:absolute;height:100%;width:100%;display:block}",""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,"[data-html-img]{max-width:100%;max-height:100%}",""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,"[data-no-op]{z-index:1000;position:absolute;height:100%;width:100%;text-align:center}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:25px;left:0;right:0;color:#fff;margin:10px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}[data-no-op] canvas[data-no-op-canvas]{background-color:#777;height:100%;width:100%}",""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,'.dvr-controls[data-dvr-controls]{display:inline-block;float:left;color:#fff;line-height:32px;font-size:10px;font-weight:700;margin-left:6px}.dvr-controls[data-dvr-controls] .live-info{cursor:default;font-family:Roboto,Open Sans,Arial,sans-serif}.dvr-controls[data-dvr-controls] .live-info:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#ff0101}.dvr-controls[data-dvr-controls] .live-info.disabled{opacity:.3}.dvr-controls[data-dvr-controls] .live-info.disabled:before{background-color:#fff}.dvr-controls[data-dvr-controls] .live-button{cursor:pointer;outline:none;display:none;border:0;color:#fff;background-color:transparent;height:32px;padding:0;opacity:.7;font-family:Roboto,Open Sans,Arial,sans-serif;-webkit-transition:all .1s ease;transition:all .1s ease}.dvr-controls[data-dvr-controls] .live-button:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#fff}.dvr-controls[data-dvr-controls] .live-button:hover{opacity:1;text-shadow:hsla(0,0%,100%,.75) 0 0 5px}.dvr .dvr-controls[data-dvr-controls] .live-info{display:none}.dvr .dvr-controls[data-dvr-controls] .live-button{display:block}.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#005aff}.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#ff0101}',""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,".player-poster[data-poster]{position:absolute;height:100%;width:100%;z-index:998;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#000;background-size:cover;background-repeat:no-repeat;background-position:50% 50%}.player-poster[data-poster].clickable{cursor:pointer}.player-poster[data-poster]:hover .play-wrapper[data-poster]{opacity:1}.player-poster[data-poster] .play-wrapper[data-poster]{width:100%;height:25%;margin:0 auto;opacity:.75;-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.player-poster[data-poster] .play-wrapper[data-poster] svg{height:100%}.player-poster[data-poster] .play-wrapper[data-poster] svg path{fill:#fff}",""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,'.seek-time[data-seek-time]{position:absolute;white-space:nowrap;height:20px;line-height:20px;font-size:0;left:-100%;bottom:55px;background-color:rgba(2,2,2,.5);z-index:9999;-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.seek-time[data-seek-time].hidden[data-seek-time]{opacity:0}.seek-time[data-seek-time] [data-seek-time]{display:inline-block;color:#fff;font-size:10px;padding-left:7px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]{display:inline-block;color:hsla(0,0%,100%,.5);font-size:10px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]:before{content:"|";margin-right:7px}',""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,".spinner-three-bounce[data-spinner]{position:absolute;margin:0 auto;width:70px;text-align:center;z-index:999;left:0;right:0;margin-left:auto;margin-right:auto;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.spinner-three-bounce[data-spinner]>div{width:18px;height:18px;background-color:#fff;border-radius:100%;display:inline-block;-webkit-animation:bouncedelay 1.4s infinite ease-in-out;animation:bouncedelay 1.4s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.spinner-three-bounce[data-spinner] [data-bounce1]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner-three-bounce[data-spinner] [data-bounce2]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}",""])},function(B,T,t){T=B.exports=t(10)(),T.push([B.id,"[data-watermark]{position:absolute;min-width:70px;max-width:200px;width:12%;text-align:center;z-index:10}[data-watermark] a{outline:none;cursor:pointer}[data-watermark] img{max-width:100%}[data-watermark-bottom-left]{bottom:10px;left:10px}[data-watermark-bottom-right]{bottom:10px;right:42px}[data-watermark-top-left]{top:10px;left:10px}[data-watermark-top-right]{top:10px;right:37px}",""])},function(B,T){B.exports=`<div class="media-control-background" data-background></div>
<div class="media-control-layer" data-controls>
  <%  var renderBar = function(name) { %>
      <div class="bar-container" data-<%= name %>>
        <div class="bar-background" data-<%= name %>>
          <div class="bar-fill-1" data-<%= name %>></div>
          <div class="bar-fill-2" data-<%= name %>></div>
          <div class="bar-hover" data-<%= name %>></div>
        </div>
        <div class="bar-scrubber" data-<%= name %>>
          <div class="bar-scrubber-icon" data-<%= name %>></div>
        </div>
      </div>
  <%  }; %>
  <%  var renderSegmentedBar = function(name, segments) {
      segments = segments || 10; %>
    <div class="bar-container" data-<%= name %>>
    <% for (var i = 0; i < segments; i++) { %>
      <div class="segmented-bar-element" data-<%= name %>></div>
    <% } %>
    </div>
  <% }; %>
  <% var renderDrawer = function(name, renderContent) { %>
      <div class="drawer-container" data-<%= name %>>
        <div class="drawer-icon-container" data-<%= name %>>
          <div class="drawer-icon media-control-icon" data-<%= name %>></div>
          <span class="drawer-text" data-<%= name %>></span>
        </div>
        <% renderContent(name); %>
      </div>
  <% }; %>
  <% var renderIndicator = function(name) { %>
      <div class="media-control-indicator" data-<%= name %>></div>
  <% }; %>
  <% var renderButton = function(name) { %>
      <button class="media-control-button media-control-icon" data-<%= name %>></button>
  <% }; %>
  <%  var templates = {
        bar: renderBar,
        segmentedBar: renderSegmentedBar,
      };
      var render = function(settingsList) {
        settingsList.forEach(function(setting) {
          if(setting === "seekbar") {
            renderBar(setting);
          } else if (setting === "volume") {
            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });
          } else if (setting === "duration" || setting === "position") {
            renderIndicator(setting);
          } else {
            renderButton(setting);
          }
        });
      }; %>
  <% if (settings.default && settings.default.length) { %>
  <div class="media-control-center-panel" data-media-control>
    <% render(settings.default); %>
  </div>
  <% } %>
  <% if (settings.left && settings.left.length) { %>
  <div class="media-control-left-panel" data-media-control>
    <% render(settings.left); %>
  </div>
  <% } %>
  <% if (settings.right && settings.right.length) { %>
  <div class="media-control-right-panel" data-media-control>
    <% render(settings.right); %>
  </div>
  <% } %>
</div>
`},function(B,T){B.exports=`<param name="movie" value="<%= swfPath %>?inline=1">
<param name="quality" value="autohigh">
<param name="swliveconnect" value="true">
<param name="allowScriptAccess" value="always">
<param name="bgcolor" value="#000000">
<param name="allowFullScreen" value="false">
<param name="wmode" value="<%= wmode %>">
<param name="tabindex" value="1">
<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">
<embed
  name="<%= cid %>"
  type="application/x-shockwave-flash"
  disabled="disabled"
  tabindex="-1"
  enablecontextmenu="false"
  allowScriptAccess="always"
  quality="autohigh"
  pluginspage="http://www.macromedia.com/go/getflashplayer"
  wmode="<%= wmode %>"
  swliveconnect="true"
  allowfullscreen="false"
  bgcolor="#000000"
  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"
  src="<%= swfPath %>"
  width="100%"
  height="100%">
</embed>
`},function(B,T){B.exports=`<source src="<%=src%>" type="<%=type%>">
`},function(B,T){B.exports=`<canvas data-no-op-canvas></canvas>
<p data-no-op-msg><%=message%><p>
`},function(B,T){B.exports=`<div class="live-info">LIVE</div>
<button class="live-button">BACK TO LIVE</button>
`},function(B,T){B.exports=`<div class="play-wrapper" data-poster></div>
`},function(B,T){B.exports=`<span data-seek-time></span>
<span data-duration></span>
`},function(B,T){B.exports=`<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>
`},function(B,T){B.exports=`<div data-watermark data-watermark-<%=position %>>
<% if(typeof imageLink !== 'undefined') { %>
<a target=_blank href="<%= imageLink %>">
<% } %>
<img src="<%= imageUrl %>">
<% if(typeof imageLink !== 'undefined') { %>
</a>
<% } %>
</div>
`},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'},function(B,T){B.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'},function(B,T,t){B.exports=t.p+"38861cba61c66739c1452c3a71e39852.ttf"},function(B,T,t){B.exports=t.p+"4b76590b32dab62bc95c1b7951efae78.swf"},function(B,T,t){B.exports=t.p+"d13d9f4847ef9af04b804c465624c7a8.swf"}])})}(wi)),wi.exports}(function($r,Wn){(function(B,T){$r.exports=T(Ui())})(Di,function(B){function T(e,r){for(var i=0;i<r.length;i++){var v=r[i];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(e,v.key,v)}}function t(e){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function o(e,r){return(o=Object.setPrototypeOf||function(i,v){return i.__proto__=v,i})(e,r)}function x(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=function(){var e=/iphone.*(7|8|9)_[0-9]/i.test(navigator.userAgent),r=/(iPhone|iPod).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);return e||r},h=function(){return/trident|edge/i.test(navigator.userAgent)};function w(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function p(e,r){for(var i=0;i<r.length;i++){var v=r[i];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(e,v.key,v)}}function y(e,r,i){return r&&p(e.prototype,r),e}function c(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&C(e,r)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function C(e,r){return(C=Object.setPrototypeOf||function(i,v){return i.__proto__=v,i})(e,r)}function b(e,r){return!r||typeof r!="object"&&typeof r!="function"?function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(e):r}function u(e,r,i){return(u=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(v,I,W){var q=function(ae,me){for(;!Object.prototype.hasOwnProperty.call(ae,me)&&(ae=d(ae))!==null;);return ae}(v,I);if(q){var fe=Object.getOwnPropertyDescriptor(q,I);return fe.get?fe.get.call(W):fe.value}})(e,r,i||e)}var g,s,l,S,E,O,P,A,D,M,L,V,j,N,G,K,k,J,se,te,oe,re,ee,Z,ge,Te,we,Le,Ce,be,Ge,Ke,je,Ze,Be,Oe,ze,We,gt,at,_e,Me,H,m,F,X,le,ve,Se,ye,Re,Ie,ke,$e,qe,lt,nt,ft,_t,Ct,Yt,Gt,mt,jt,St,Zt,er,Qt,ar,ur,yr,dr,Er,mr,cr,hr,qt,Gr,xr,sr,br,_r,kr,Vr,Nr,Dr,Fr,Qe,Lr,Cr,Rr,jr,zr,Ir,Xr,Zr,pr,wr,Jr,en,an,on,sn,$n,xn,In,kn,yn,Ln,Cn,ln,Rn,Yr,Kr,Hr,Xn,rr,un,bn,_n,An,cn,dn,tn,Br,wn,rn,Nn,Qr,qr,Zn,a={REVISION:"75"},tr=a;function Fn(e,r,i){return i<0&&(i+=1),1<i&&--i,i<1/6?e+6*(r-e)*i:i<.5?r:i<2/3?e+6*(r-e)*(2/3-i):e}function jn(e,r,i,v,I,W,q){return a.Triangle.barycoordFromPoint(e,r,i,v,cn),I.multiplyScalar(cn.x),W.multiplyScalar(cn.y),q.multiplyScalar(cn.z),I.add(W).add(q),I.clone()}function Mn(e,r,i,v,I,W,q){var fe=e.material;if((fe.side===a.BackSide?i.intersectTriangle(W,I,v,!0,q):i.intersectTriangle(v,I,W,fe.side!==a.DoubleSide,q))===null)return null;tn.copy(q),tn.applyMatrix4(e.matrixWorld);var ae=r.ray.origin.distanceTo(tn);return ae<r.near||ae>r.far?null:{distance:ae,point:tn.clone(),object:e}}function Jn(e,r,i,v,I,W,q,fe){Yr.fromArray(v,3*W),Kr.fromArray(v,3*q),Hr.fromArray(v,3*fe);var ae=Mn(e,r,i,Yr,Kr,Hr,dn);return ae&&(I&&(bn.fromArray(I,2*W),_n.fromArray(I,2*q),An.fromArray(I,2*fe),ae.uv=jn(dn,Yr,Kr,Hr,bn,_n,An)),ae.face=new a.Face3(W,q,fe,a.Triangle.normal(Yr,Kr,Hr)),ae.faceIndex=W),ae}function Pn(e){switch(e){case a.LinearEncoding:return["Linear","( value )"];case a.sRGBEncoding:return["sRGB","( value )"];case a.RGBEEncoding:return["RGBE","( value )"];case a.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case a.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case a.RGBDEncoding:return["RGBD","( value, 256.0 )"];case a.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function hn(e,r){var i=Pn(r);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function En(e){return e!==""}function On(e,r){return e.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights)}function Tn(e){return e.replace(/#include +<([\w\d.]+)>/g,function(r,i){var v=a.ShaderChunk[i];if(v===void 0)throw new Error("Can not resolve #include <"+i+">");return Tn(v)})}function fn(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(r,i,v,I){for(var W="",q=parseInt(i);q<parseInt(v);q++)W+=I.replace(/\[ i \]/g,"[ "+q+" ]");return W})}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),Function.prototype.name===void 0&&Object.defineProperty!==void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),Object.assign===void 0&&Object.defineProperty(Object,"assign",{writable:!0,configurable:!0,value:function(e){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),i=1,v=arguments.length;i!==v;++i){var I=arguments[i];if(I!=null){I=Object(I);for(var W=Object.keys(I),q=0,fe=W.length;q!==fe;++q){var ae=W[q],me=Object.getOwnPropertyDescriptor(I,ae);me!==void 0&&me.enumerable&&(r[ae]=I[ae])}}}return r}}),a.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},a.CullFaceNone=0,a.CullFaceBack=1,a.CullFaceFront=2,a.CullFaceFrontBack=3,a.FrontFaceDirectionCW=0,a.FrontFaceDirectionCCW=1,a.BasicShadowMap=0,a.PCFShadowMap=1,a.PCFSoftShadowMap=2,a.FrontSide=0,a.BackSide=1,a.DoubleSide=2,a.FlatShading=1,a.SmoothShading=2,a.NoColors=0,a.FaceColors=1,a.VertexColors=2,a.NoBlending=0,a.NormalBlending=1,a.AdditiveBlending=2,a.SubtractiveBlending=3,a.MultiplyBlending=4,a.CustomBlending=5,a.AddEquation=100,a.SubtractEquation=101,a.ReverseSubtractEquation=102,a.MinEquation=103,a.MaxEquation=104,a.ZeroFactor=200,a.OneFactor=201,a.SrcColorFactor=202,a.OneMinusSrcColorFactor=203,a.SrcAlphaFactor=204,a.OneMinusSrcAlphaFactor=205,a.DstAlphaFactor=206,a.OneMinusDstAlphaFactor=207,a.DstColorFactor=208,a.OneMinusDstColorFactor=209,a.SrcAlphaSaturateFactor=210,a.NeverDepth=0,a.AlwaysDepth=1,a.LessDepth=2,a.LessEqualDepth=3,a.EqualDepth=4,a.GreaterEqualDepth=5,a.GreaterDepth=6,a.NotEqualDepth=7,a.MultiplyOperation=0,a.MixOperation=1,a.AddOperation=2,a.NoToneMapping=0,a.LinearToneMapping=1,a.ReinhardToneMapping=2,a.Uncharted2ToneMapping=3,a.CineonToneMapping=4,a.UVMapping=300,a.CubeReflectionMapping=301,a.CubeRefractionMapping=302,a.EquirectangularReflectionMapping=303,a.EquirectangularRefractionMapping=304,a.SphericalReflectionMapping=305,a.CubeUVReflectionMapping=306,a.CubeUVRefractionMapping=307,a.RepeatWrapping=1e3,a.ClampToEdgeWrapping=1001,a.MirroredRepeatWrapping=1002,a.NearestFilter=1003,a.NearestMipMapNearestFilter=1004,a.NearestMipMapLinearFilter=1005,a.LinearFilter=1006,a.LinearMipMapNearestFilter=1007,a.LinearMipMapLinearFilter=1008,a.UnsignedByteType=1009,a.ByteType=1010,a.ShortType=1011,a.UnsignedShortType=1012,a.IntType=1013,a.UnsignedIntType=1014,a.FloatType=1015,a.HalfFloatType=1025,a.UnsignedShort4444Type=1016,a.UnsignedShort5551Type=1017,a.UnsignedShort565Type=1018,a.AlphaFormat=1019,a.RGBFormat=1020,a.RGBAFormat=1021,a.LuminanceFormat=1022,a.LuminanceAlphaFormat=1023,a.RGBEFormat=a.RGBAFormat,a.RGB_S3TC_DXT1_Format=2001,a.RGBA_S3TC_DXT1_Format=2002,a.RGBA_S3TC_DXT3_Format=2003,a.RGBA_S3TC_DXT5_Format=2004,a.RGB_PVRTC_4BPPV1_Format=2100,a.RGB_PVRTC_2BPPV1_Format=2101,a.RGBA_PVRTC_4BPPV1_Format=2102,a.RGBA_PVRTC_2BPPV1_Format=2103,a.RGB_ETC1_Format=2151,a.LoopOnce=2200,a.LoopRepeat=2201,a.LoopPingPong=2202,a.InterpolateDiscrete=2300,a.InterpolateLinear=2301,a.InterpolateSmooth=2302,a.ZeroCurvatureEnding=2400,a.ZeroSlopeEnding=2401,a.WrapAroundEnding=2402,a.TrianglesDrawMode=0,a.TriangleStripDrawMode=1,a.TriangleFanDrawMode=2,a.LinearEncoding=3e3,a.sRGBEncoding=3001,a.GammaEncoding=3007,a.RGBEEncoding=3002,a.LogLuvEncoding=3003,a.RGBM7Encoding=3004,a.RGBM16Encoding=3005,a.RGBDEncoding=3006,a.Math={generateUUID:(S="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),E=new Array(36),O=0,function(){for(var e=0;e<36;e++)e===8||e===13||e===18||e===23?E[e]="-":e===14?E[e]="4":(O<=2&&(O=33554432+16777216*Math.random()|0),l=15&O,O>>=4,E[e]=S[e===19?3&l|8:l]);return E.join("")}),clamp:function(e,r,i){return Math.max(r,Math.min(i,e))},euclideanModulo:function(e,r){return(e%r+r)%r},mapLinear:function(e,r,i,v,I){return v+(e-r)*(I-v)/(i-r)},smoothstep:function(e,r,i){return e<=r?0:i<=e?1:(e=(e-r)/(i-r))*e*(3-2*e)},smootherstep:function(e,r,i){return e<=r?0:i<=e?1:(e=(e-r)/(i-r))*e*e*(e*(6*e-15)+10)},random16:function(){return Math.random()},randInt:function(e,r){return e+Math.floor(Math.random()*(r-e+1))},randFloat:function(e,r){return e+Math.random()*(r-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:(s=Math.PI/180,function(e){return e*s}),radToDeg:(g=180/Math.PI,function(e){return e*g}),isPowerOfTwo:function(e){return(e&e-1)==0&&e!==0},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}},a.Color=function(e){return arguments.length===3?this.fromArray(arguments):this.set(e)},a.Color.prototype={constructor:a.Color,r:1,g:1,b:1,set:function(e){return e instanceof a.Color?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){this.r=e,this.g=e,this.b=e},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,r,i){return this.r=e,this.g=r,this.b=i,this},setHSL:function(e,r,i){if(e=a.Math.euclideanModulo(e,1),r=a.Math.clamp(r,0,1),i=a.Math.clamp(i,0,1),r===0)this.r=this.g=this.b=i;else{var v=i<=.5?i*(1+r):i+r-i*r,I=2*i-v;this.r=Fn(I,v,e+1/3),this.g=Fn(I,v,e),this.b=Fn(I,v,e-1/3)}return this},setStyle:function(e){var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,v=r[1],I=r[2];switch(v){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(I))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,i[5],this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(I))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,i[5],this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(I)){var W=parseFloat(i[1])/360,q=parseInt(i[2],10)/100,fe=parseInt(i[3],10)/100;return i[5],this.setHSL(W,q,fe)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var ae,me=(ae=r[1]).length;if(me===3)return this.r=parseInt(ae.charAt(0)+ae.charAt(0),16)/255,this.g=parseInt(ae.charAt(1)+ae.charAt(1),16)/255,this.b=parseInt(ae.charAt(2)+ae.charAt(2),16)/255,this;if(me===6)return this.r=parseInt(ae.charAt(0)+ae.charAt(1),16)/255,this.g=parseInt(ae.charAt(2)+ae.charAt(3),16)/255,this.b=parseInt(ae.charAt(4)+ae.charAt(5),16)/255,this}return e&&0<e.length&&(ae=a.ColorKeywords[e])!==void 0&&this.setHex(ae),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,r){return r===void 0&&(r=2),this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},copyLinearToGamma:function(e,r){r===void 0&&(r=2);var i=0<r?1/r:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this},convertGammaToLinear:function(){var e=this.r,r=this.g,i=this.b;return this.r=e*e,this.g=r*r,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var r,i,v=e||{h:0,s:0,l:0},I=this.r,W=this.g,q=this.b,fe=Math.max(I,W,q),ae=Math.min(I,W,q),me=(ae+fe)/2;if(ae===fe)i=r=0;else{var pe=fe-ae;switch(i=me<=.5?pe/(fe+ae):pe/(2-fe-ae),fe){case I:r=(W-q)/pe+(W<q?6:0);break;case W:r=(q-I)/pe+2;break;case q:r=(I-W)/pe+4}r/=6}return v.h=r,v.s=i,v.l=me,v},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,r,i){var v=this.getHSL();return v.h+=e,v.s+=r,v.l+=i,this.setHSL(v.h,v.s,v.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,r){return r===void 0&&(r=0),this.r=e[r],this.g=e[r+1],this.b=e[r+2],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}},a.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},a.Vector2=function(e,r){this.x=e||0,this.y=r||0},a.Vector2.prototype={constructor:a.Vector2,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,r){return this.x=e,this.y=r,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,r){return r!==void 0?this.addVectors(e,r):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this},addScaledVector:function(e,r){return this.x+=e.x*r,this.y+=e.y*r,this},sub:function(e,r){return r!==void 0?this.subVectors(e,r):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this},clampScalar:function(e,r){return P===void 0&&(P=new a.Vector2,A=new a.Vector2),P.set(e,e),A.set(r,r),this.clamp(P,A)},clampLength:function(e,r){var i=this.length();return this.multiplyScalar(Math.max(e,Math.min(r,i))/i),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var r=this.x-e.x,i=this.y-e.y;return r*r+i*i},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this},lerpVectors:function(e,r,i){return this.subVectors(r,e).multiplyScalar(i).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,r){return r===void 0&&(r=0),this.x=e[r],this.y=e[r+1],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.x,e[r+1]=this.y,e},fromAttribute:function(e,r,i){return i===void 0&&(i=0),r=r*e.itemSize+i,this.x=e.array[r],this.y=e.array[r+1],this},rotateAround:function(e,r){var i=Math.cos(r),v=Math.sin(r),I=this.x-e.x,W=this.y-e.y;return this.x=I*i-W*v+e.x,this.y=I*v+W*i+e.y,this}},a.Vector3=function(e,r,i){this.x=e||0,this.y=r||0,this.z=i||0},a.Vector3.prototype={constructor:a.Vector3,set:function(e,r,i){return this.x=e,this.y=r,this.z=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,r){return r!==void 0?this.addVectors(e,r):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this},addScaledVector:function(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this},sub:function(e,r){return r!==void 0?this.subVectors(e,r):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this},multiply:function(e,r){return r!==void 0?this.multiplyVectors(e,r):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this},applyEuler:function(e){return J===void 0&&(J=new a.Quaternion),this.applyQuaternion(J.setFromEuler(e)),this},applyAxisAngle:function(e,r){return k===void 0&&(k=new a.Quaternion),this.applyQuaternion(k.setFromAxisAngle(e,r)),this},applyMatrix3:function(e){var r=this.x,i=this.y,v=this.z,I=e.elements;return this.x=I[0]*r+I[3]*i+I[6]*v,this.y=I[1]*r+I[4]*i+I[7]*v,this.z=I[2]*r+I[5]*i+I[8]*v,this},applyMatrix4:function(e){var r=this.x,i=this.y,v=this.z,I=e.elements;return this.x=I[0]*r+I[4]*i+I[8]*v+I[12],this.y=I[1]*r+I[5]*i+I[9]*v+I[13],this.z=I[2]*r+I[6]*i+I[10]*v+I[14],this},applyProjection:function(e){var r=this.x,i=this.y,v=this.z,I=e.elements,W=1/(I[3]*r+I[7]*i+I[11]*v+I[15]);return this.x=(I[0]*r+I[4]*i+I[8]*v+I[12])*W,this.y=(I[1]*r+I[5]*i+I[9]*v+I[13])*W,this.z=(I[2]*r+I[6]*i+I[10]*v+I[14])*W,this},applyQuaternion:function(e){var r=this.x,i=this.y,v=this.z,I=e.x,W=e.y,q=e.z,fe=e.w,ae=fe*r+W*v-q*i,me=fe*i+q*r-I*v,pe=fe*v+I*i-W*r,Ee=-I*r-W*i-q*v;return this.x=ae*fe+Ee*-I+me*-q-pe*-W,this.y=me*fe+Ee*-W+pe*-I-ae*-q,this.z=pe*fe+Ee*-q+ae*-W-me*-I,this},project:function(e){return K===void 0&&(K=new a.Matrix4),K.multiplyMatrices(e.projectionMatrix,K.getInverse(e.matrixWorld)),this.applyProjection(K)},unproject:function(e){return G===void 0&&(G=new a.Matrix4),G.multiplyMatrices(e.matrixWorld,G.getInverse(e.projectionMatrix)),this.applyProjection(G)},transformDirection:function(e){var r=this.x,i=this.y,v=this.z,I=e.elements;return this.x=I[0]*r+I[4]*i+I[8]*v,this.y=I[1]*r+I[5]*i+I[9]*v,this.z=I[2]*r+I[6]*i+I[10]*v,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this},clampScalar:function(e,r){return j===void 0&&(j=new a.Vector3,N=new a.Vector3),j.set(e,e,e),N.set(r,r,r),this.clamp(j,N)},clampLength:function(e,r){var i=this.length();return this.multiplyScalar(Math.max(e,Math.min(r,i))/i),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this},lerpVectors:function(e,r,i){return this.subVectors(r,e).multiplyScalar(i).add(e),this},cross:function(e,r){if(r!==void 0)return this.crossVectors(e,r);var i=this.x,v=this.y,I=this.z;return this.x=v*e.z-I*e.y,this.y=I*e.x-i*e.z,this.z=i*e.y-v*e.x,this},crossVectors:function(e,r){var i=e.x,v=e.y,I=e.z,W=r.x,q=r.y,fe=r.z;return this.x=v*fe-I*q,this.y=I*W-i*fe,this.z=i*q-v*W,this},projectOnVector:function(e){return L===void 0&&(L=new a.Vector3),L.copy(e).normalize(),V=this.dot(L),this.copy(L).multiplyScalar(V)},projectOnPlane:function(e){return M===void 0&&(M=new a.Vector3),M.copy(this).projectOnVector(e),this.sub(M)},reflect:function(e){return D===void 0&&(D=new a.Vector3),this.sub(D.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var r=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(a.Math.clamp(r,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var r=this.x-e.x,i=this.y-e.y,v=this.z-e.z;return r*r+i*i+v*v},setFromSpherical:function(e){var r=Math.sin(e.phi)*e.radius;return this.x=r*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=r*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var r=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),v=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=i,this.z=v,this},setFromMatrixColumn:function(e,r){return typeof e=="number"&&(e=arguments[1],r=arguments[0]),this.fromArray(e.elements,4*r)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,r){return r===void 0&&(r=0),this.x=e[r],this.y=e[r+1],this.z=e[r+2],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e},fromAttribute:function(e,r,i){return i===void 0&&(i=0),r=r*e.itemSize+i,this.x=e.array[r],this.y=e.array[r+1],this.z=e.array[r+2],this}},a.Vector4=function(e,r,i,v){this.x=e||0,this.y=r||0,this.z=i||0,this.w=v!==void 0?v:1},a.Vector4.prototype={constructor:a.Vector4,set:function(e,r,i,v){return this.x=e,this.y=r,this.z=i,this.w=v,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,r){return r!==void 0?this.addVectors(e,r):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this},addScaledVector:function(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this},sub:function(e,r){return r!==void 0?this.subVectors(e,r):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var r=this.x,i=this.y,v=this.z,I=this.w,W=e.elements;return this.x=W[0]*r+W[4]*i+W[8]*v+W[12]*I,this.y=W[1]*r+W[5]*i+W[9]*v+W[13]*I,this.z=W[2]*r+W[6]*i+W[10]*v+W[14]*I,this.w=W[3]*r+W[7]*i+W[11]*v+W[15]*I,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this},setAxisAngleFromRotationMatrix:function(e){var r,i,v,I,W=e.elements,q=W[0],fe=W[4],ae=W[8],me=W[1],pe=W[5],Ee=W[9],xe=W[2],Ne=W[6],De=W[10];if(Math.abs(fe-me)<.01&&Math.abs(ae-xe)<.01&&Math.abs(Ee-Ne)<.01){if(Math.abs(fe+me)<.1&&Math.abs(ae+xe)<.1&&Math.abs(Ee+Ne)<.1&&Math.abs(q+pe+De-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;var Fe=(q+1)/2,Ve=(pe+1)/2,he=(De+1)/2,Je=(fe+me)/4,et=(ae+xe)/4,rt=(Ee+Ne)/4;return Ve<Fe&&he<Fe?I=Fe<.01?(i=0,v=.707106781):(v=Je/(i=Math.sqrt(Fe)),et/i):he<Ve?I=Ve<.01?(v=0,i=.707106781):(i=Je/(v=Math.sqrt(Ve)),rt/v):he<.01?(v=i=.707106781,I=0):(i=et/(I=Math.sqrt(he)),v=rt/I),this.set(i,v,I,r),this}var ht=Math.sqrt((Ne-Ee)*(Ne-Ee)+(ae-xe)*(ae-xe)+(me-fe)*(me-fe));return Math.abs(ht)<.001&&(ht=1),this.x=(Ne-Ee)/ht,this.y=(ae-xe)/ht,this.z=(me-fe)/ht,this.w=Math.acos((q+pe+De-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this.w=Math.max(e.w,Math.min(r.w,this.w)),this},clampScalar:function(e,r){return se===void 0&&(se=new a.Vector4,te=new a.Vector4),se.set(e,e,e,e),te.set(r,r,r,r),this.clamp(se,te)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this},lerpVectors:function(e,r,i){return this.subVectors(r,e).multiplyScalar(i).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,r){return r===void 0&&(r=0),this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e},fromAttribute:function(e,r,i){return i===void 0&&(i=0),r=r*e.itemSize+i,this.x=e.array[r],this.y=e.array[r+1],this.z=e.array[r+2],this.w=e.array[r+3],this}},a.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])},a.Matrix3.prototype={constructor:a.Matrix3,set:function(e,r,i,v,I,W,q,fe,ae){var me=this.elements;return me[0]=e,me[1]=v,me[2]=q,me[3]=r,me[4]=I,me[5]=fe,me[6]=i,me[7]=W,me[8]=ae,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var r=e.elements;return this.set(r[0],r[3],r[6],r[1],r[4],r[7],r[2],r[5],r[8]),this},setFromMatrix4:function(e){var r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this},applyToVector3Array:function(e,r,i){re===void 0&&(re=new a.Vector3),r===void 0&&(r=0),i===void 0&&(i=e.length);for(var v=0,I=r;v<i;v+=3,I+=3)re.fromArray(e,I),re.applyMatrix3(this),re.toArray(e,I);return e},applyToBuffer:function(e,r,i){oe===void 0&&(oe=new a.Vector3),r===void 0&&(r=0),i===void 0&&(i=e.length/e.itemSize);for(var v=0,I=r;v<i;v++,I++)oe.x=e.getX(I),oe.y=e.getY(I),oe.z=e.getZ(I),oe.applyMatrix3(this),e.setXYZ(oe.x,oe.y,oe.z);return e},multiplyScalar:function(e){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this},determinant:function(){var e=this.elements,r=e[0],i=e[1],v=e[2],I=e[3],W=e[4],q=e[5],fe=e[6],ae=e[7],me=e[8];return r*W*me-r*q*ae-i*I*me+i*q*fe+v*I*ae-v*W*fe},getInverse:function(e,r){var i=e.elements,v=this.elements,I=i[0],W=i[1],q=i[2],fe=i[3],ae=i[4],me=i[5],pe=i[6],Ee=i[7],xe=i[8],Ne=xe*ae-me*Ee,De=me*pe-xe*fe,Fe=Ee*fe-ae*pe,Ve=I*Ne+W*De+q*Fe;if(Ve!=0)return v[0]=Ne,v[1]=q*Ee-xe*W,v[2]=me*W-q*ae,v[3]=De,v[4]=xe*I-q*pe,v[5]=q*fe-me*I,v[6]=Fe,v[7]=W*pe-Ee*I,v[8]=ae*I-W*fe,this.multiplyScalar(1/Ve);if(r)throw new Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()},transpose:function(){var e,r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this},flattenToArrayOffset:function(e,r){var i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}},a.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},a.Matrix4.prototype={constructor:a.Matrix4,set:function(e,r,i,v,I,W,q,fe,ae,me,pe,Ee,xe,Ne,De,Fe){var Ve=this.elements;return Ve[0]=e,Ve[4]=r,Ve[8]=i,Ve[12]=v,Ve[1]=I,Ve[5]=W,Ve[9]=q,Ve[13]=fe,Ve[2]=ae,Ve[6]=me,Ve[10]=pe,Ve[14]=Ee,Ve[3]=xe,Ve[7]=Ne,Ve[11]=De,Ve[15]=Fe,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new a.Matrix4().fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var r=this.elements,i=e.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this},extractBasis:function(e,r,i){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,r,i){return this.set(e.x,r.x,i.x,0,e.y,r.y,i.y,0,e.z,r.z,i.z,0,0,0,0,1),this},extractRotation:function(e){Ge===void 0&&(Ge=new a.Vector3);var r=this.elements,i=e.elements,v=1/Ge.setFromMatrixColumn(e,0).length(),I=1/Ge.setFromMatrixColumn(e,1).length(),W=1/Ge.setFromMatrixColumn(e,2).length();return r[0]=i[0]*v,r[1]=i[1]*v,r[2]=i[2]*v,r[4]=i[4]*I,r[5]=i[5]*I,r[6]=i[6]*I,r[8]=i[8]*W,r[9]=i[9]*W,r[10]=i[10]*W,this},makeRotationFromEuler:function(e){var r=this.elements,i=e.x,v=e.y,I=e.z,W=Math.cos(i),q=Math.sin(i),fe=Math.cos(v),ae=Math.sin(v),me=Math.cos(I),pe=Math.sin(I);if(e.order==="XYZ"){var Ee=W*me,xe=W*pe,Ne=q*me,De=q*pe;r[0]=fe*me,r[4]=-fe*pe,r[8]=ae,r[1]=xe+Ne*ae,r[5]=Ee-De*ae,r[9]=-q*fe,r[2]=De-Ee*ae,r[6]=Ne+xe*ae,r[10]=W*fe}else if(e.order==="YXZ"){var Fe=fe*me,Ve=fe*pe,he=ae*me,Je=ae*pe;r[0]=Fe+Je*q,r[4]=he*q-Ve,r[8]=W*ae,r[1]=W*pe,r[5]=W*me,r[9]=-q,r[2]=Ve*q-he,r[6]=Je+Fe*q,r[10]=W*fe}else if(e.order==="ZXY")Fe=fe*me,Ve=fe*pe,he=ae*me,Je=ae*pe,r[0]=Fe-Je*q,r[4]=-W*pe,r[8]=he+Ve*q,r[1]=Ve+he*q,r[5]=W*me,r[9]=Je-Fe*q,r[2]=-W*ae,r[6]=q,r[10]=W*fe;else if(e.order==="ZYX")Ee=W*me,xe=W*pe,Ne=q*me,De=q*pe,r[0]=fe*me,r[4]=Ne*ae-xe,r[8]=Ee*ae+De,r[1]=fe*pe,r[5]=De*ae+Ee,r[9]=xe*ae-Ne,r[2]=-ae,r[6]=q*fe,r[10]=W*fe;else if(e.order==="YZX"){var et=W*fe,rt=W*ae,ht=q*fe,bt=q*ae;r[0]=fe*me,r[4]=bt-et*pe,r[8]=ht*pe+rt,r[1]=pe,r[5]=W*me,r[9]=-q*me,r[2]=-ae*me,r[6]=rt*pe+ht,r[10]=et-bt*pe}else e.order==="XZY"&&(et=W*fe,rt=W*ae,ht=q*fe,bt=q*ae,r[0]=fe*me,r[4]=-pe,r[8]=ae*me,r[1]=et*pe+bt,r[5]=W*me,r[9]=rt*pe-ht,r[2]=ht*pe-rt,r[6]=q*me,r[10]=bt*pe+et);return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromQuaternion:function(e){var r=this.elements,i=e.x,v=e.y,I=e.z,W=e.w,q=i+i,fe=v+v,ae=I+I,me=i*q,pe=i*fe,Ee=i*ae,xe=v*fe,Ne=v*ae,De=I*ae,Fe=W*q,Ve=W*fe,he=W*ae;return r[0]=1-(xe+De),r[4]=pe-he,r[8]=Ee+Ve,r[1]=pe+he,r[5]=1-(me+De),r[9]=Ne-Fe,r[2]=Ee-Ve,r[6]=Ne+Fe,r[10]=1-(me+xe),r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},lookAt:function(e,r,i){Le===void 0&&(Le=new a.Vector3),Ce===void 0&&(Ce=new a.Vector3),be===void 0&&(be=new a.Vector3);var v=this.elements;return be.subVectors(e,r).normalize(),be.lengthSq()===0&&(be.z=1),Le.crossVectors(i,be).normalize(),Le.lengthSq()===0&&(be.x+=1e-4,Le.crossVectors(i,be).normalize()),Ce.crossVectors(be,Le),v[0]=Le.x,v[4]=Ce.x,v[8]=be.x,v[1]=Le.y,v[5]=Ce.y,v[9]=be.y,v[2]=Le.z,v[6]=Ce.z,v[10]=be.z,this},multiply:function(e,r){return r!==void 0?this.multiplyMatrices(e,r):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,r){var i=e.elements,v=r.elements,I=this.elements,W=i[0],q=i[4],fe=i[8],ae=i[12],me=i[1],pe=i[5],Ee=i[9],xe=i[13],Ne=i[2],De=i[6],Fe=i[10],Ve=i[14],he=i[3],Je=i[7],et=i[11],rt=i[15],ht=v[0],bt=v[4],it=v[8],vt=v[12],kt=v[1],Nt=v[5],wt=v[9],Ot=v[13],Pt=v[2],or=v[6],Vt=v[10],Jt=v[14],Kt=v[3],$t=v[7],ir=v[11],Dt=v[15];return I[0]=W*ht+q*kt+fe*Pt+ae*Kt,I[4]=W*bt+q*Nt+fe*or+ae*$t,I[8]=W*it+q*wt+fe*Vt+ae*ir,I[12]=W*vt+q*Ot+fe*Jt+ae*Dt,I[1]=me*ht+pe*kt+Ee*Pt+xe*Kt,I[5]=me*bt+pe*Nt+Ee*or+xe*$t,I[9]=me*it+pe*wt+Ee*Vt+xe*ir,I[13]=me*vt+pe*Ot+Ee*Jt+xe*Dt,I[2]=Ne*ht+De*kt+Fe*Pt+Ve*Kt,I[6]=Ne*bt+De*Nt+Fe*or+Ve*$t,I[10]=Ne*it+De*wt+Fe*Vt+Ve*ir,I[14]=Ne*vt+De*Ot+Fe*Jt+Ve*Dt,I[3]=he*ht+Je*kt+et*Pt+rt*Kt,I[7]=he*bt+Je*Nt+et*or+rt*$t,I[11]=he*it+Je*wt+et*Vt+rt*ir,I[15]=he*vt+Je*Ot+et*Jt+rt*Dt,this},multiplyToArray:function(e,r,i){var v=this.elements;return this.multiplyMatrices(e,r),i[0]=v[0],i[1]=v[1],i[2]=v[2],i[3]=v[3],i[4]=v[4],i[5]=v[5],i[6]=v[6],i[7]=v[7],i[8]=v[8],i[9]=v[9],i[10]=v[10],i[11]=v[11],i[12]=v[12],i[13]=v[13],i[14]=v[14],i[15]=v[15],this},multiplyScalar:function(e){var r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this},applyToVector3Array:function(e,r,i){we===void 0&&(we=new a.Vector3),r===void 0&&(r=0),i===void 0&&(i=e.length);for(var v=0,I=r;v<i;v+=3,I+=3)we.fromArray(e,I),we.applyMatrix4(this),we.toArray(e,I);return e},applyToBuffer:function(e,r,i){Te===void 0&&(Te=new a.Vector3),r===void 0&&(r=0),i===void 0&&(i=e.length/e.itemSize);for(var v=0,I=r;v<i;v++,I++)Te.x=e.getX(I),Te.y=e.getY(I),Te.z=e.getZ(I),Te.applyMatrix4(this),e.setXYZ(Te.x,Te.y,Te.z);return e},determinant:function(){var e=this.elements,r=e[0],i=e[4],v=e[8],I=e[12],W=e[1],q=e[5],fe=e[9],ae=e[13],me=e[2],pe=e[6],Ee=e[10],xe=e[14];return e[3]*(I*fe*pe-v*ae*pe-I*q*Ee+i*ae*Ee+v*q*xe-i*fe*xe)+e[7]*(r*fe*xe-r*ae*Ee+I*W*Ee-v*W*xe+v*ae*me-I*fe*me)+e[11]*(r*ae*pe-r*q*xe-I*W*pe+i*W*xe+I*q*me-i*ae*me)+e[15]*(-v*q*me-r*fe*pe+r*q*Ee+v*W*pe-i*W*Ee+i*fe*me)},transpose:function(){var e,r=this.elements;return e=r[1],r[1]=r[4],r[4]=e,e=r[2],r[2]=r[8],r[8]=e,e=r[6],r[6]=r[9],r[9]=e,e=r[3],r[3]=r[12],r[12]=e,e=r[7],r[7]=r[13],r[13]=e,e=r[11],r[11]=r[14],r[14]=e,this},flattenToArrayOffset:function(e,r){var i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e[r+9]=i[9],e[r+10]=i[10],e[r+11]=i[11],e[r+12]=i[12],e[r+13]=i[13],e[r+14]=i[14],e[r+15]=i[15],e},getPosition:function(){return ge===void 0&&(ge=new a.Vector3),ge.setFromMatrixColumn(this,3)},setPosition:function(e){var r=this.elements;return r[12]=e.x,r[13]=e.y,r[14]=e.z,this},getInverse:function(e,r){var i=this.elements,v=e.elements,I=v[0],W=v[1],q=v[2],fe=v[3],ae=v[4],me=v[5],pe=v[6],Ee=v[7],xe=v[8],Ne=v[9],De=v[10],Fe=v[11],Ve=v[12],he=v[13],Je=v[14],et=v[15],rt=Ne*Je*Ee-he*De*Ee+he*pe*Fe-me*Je*Fe-Ne*pe*et+me*De*et,ht=Ve*De*Ee-xe*Je*Ee-Ve*pe*Fe+ae*Je*Fe+xe*pe*et-ae*De*et,bt=xe*he*Ee-Ve*Ne*Ee+Ve*me*Fe-ae*he*Fe-xe*me*et+ae*Ne*et,it=Ve*Ne*pe-xe*he*pe-Ve*me*De+ae*he*De+xe*me*Je-ae*Ne*Je,vt=I*rt+W*ht+q*bt+fe*it;if(vt!=0)return i[0]=rt,i[1]=he*De*fe-Ne*Je*fe-he*q*Fe+W*Je*Fe+Ne*q*et-W*De*et,i[2]=me*Je*fe-he*pe*fe+he*q*Ee-W*Je*Ee-me*q*et+W*pe*et,i[3]=Ne*pe*fe-me*De*fe-Ne*q*Ee+W*De*Ee+me*q*Fe-W*pe*Fe,i[4]=ht,i[5]=xe*Je*fe-Ve*De*fe+Ve*q*Fe-I*Je*Fe-xe*q*et+I*De*et,i[6]=Ve*pe*fe-ae*Je*fe-Ve*q*Ee+I*Je*Ee+ae*q*et-I*pe*et,i[7]=ae*De*fe-xe*pe*fe+xe*q*Ee-I*De*Ee-ae*q*Fe+I*pe*Fe,i[8]=bt,i[9]=Ve*Ne*fe-xe*he*fe-Ve*W*Fe+I*he*Fe+xe*W*et-I*Ne*et,i[10]=ae*he*fe-Ve*me*fe+Ve*W*Ee-I*he*Ee-ae*W*et+I*me*et,i[11]=xe*me*fe-ae*Ne*fe-xe*W*Ee+I*Ne*Ee+ae*W*Fe-I*me*Fe,i[12]=it,i[13]=xe*he*q-Ve*Ne*q+Ve*W*De-I*he*De-xe*W*Je+I*Ne*Je,i[14]=Ve*me*q-ae*he*q-Ve*W*pe+I*he*pe+ae*W*Je-I*me*Je,i[15]=ae*Ne*q-xe*me*q+xe*W*pe-I*Ne*pe-ae*W*De+I*me*De,this.multiplyScalar(1/vt);if(r)throw new Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()},scale:function(e){var r=this.elements,i=e.x,v=e.y,I=e.z;return r[0]*=i,r[4]*=v,r[8]*=I,r[1]*=i,r[5]*=v,r[9]*=I,r[2]*=i,r[6]*=v,r[10]*=I,r[3]*=i,r[7]*=v,r[11]*=I,this},getMaxScaleOnAxis:function(){var e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],v=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,i,v))},makeTranslation:function(e,r,i){return this.set(1,0,0,e,0,1,0,r,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var r=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this},makeRotationY:function(e){var r=Math.cos(e),i=Math.sin(e);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this},makeRotationZ:function(e){var r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,r){var i=Math.cos(r),v=Math.sin(r),I=1-i,W=e.x,q=e.y,fe=e.z,ae=I*W,me=I*q;return this.set(ae*W+i,ae*q-v*fe,ae*fe+v*q,0,ae*q+v*fe,me*q+i,me*fe-v*W,0,ae*fe-v*q,me*fe+v*W,I*fe*fe+i,0,0,0,0,1),this},makeScale:function(e,r,i){return this.set(e,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this},compose:function(e,r,i){return this.makeRotationFromQuaternion(r),this.scale(i),this.setPosition(e),this},decompose:function(e,r,i){ee===void 0&&(ee=new a.Vector3),Z===void 0&&(Z=new a.Matrix4);var v=this.elements,I=ee.set(v[0],v[1],v[2]).length(),W=ee.set(v[4],v[5],v[6]).length(),q=ee.set(v[8],v[9],v[10]).length();this.determinant()<0&&(I=-I),e.x=v[12],e.y=v[13],e.z=v[14],Z.elements.set(this.elements);var fe=1/I,ae=1/W,me=1/q;return Z.elements[0]*=fe,Z.elements[1]*=fe,Z.elements[2]*=fe,Z.elements[4]*=ae,Z.elements[5]*=ae,Z.elements[6]*=ae,Z.elements[8]*=me,Z.elements[9]*=me,Z.elements[10]*=me,r.setFromRotationMatrix(Z),i.x=I,i.y=W,i.z=q,this},makeFrustum:function(e,r,i,v,I,W){var q=this.elements,fe=2*I/(r-e),ae=2*I/(v-i),me=(r+e)/(r-e),pe=(v+i)/(v-i),Ee=-(W+I)/(W-I),xe=-2*W*I/(W-I);return q[0]=fe,q[4]=0,q[8]=me,q[12]=0,q[1]=0,q[5]=ae,q[9]=pe,q[13]=0,q[2]=0,q[6]=0,q[10]=Ee,q[14]=xe,q[3]=0,q[7]=0,q[11]=-1,q[15]=0,this},makePerspective:function(e,r,i,v){var I=i*Math.tan(a.Math.degToRad(.5*e)),W=-I,q=W*r,fe=I*r;return this.makeFrustum(q,fe,W,I,i,v)},makeOrthographic:function(e,r,i,v,I,W){var q=this.elements,fe=1/(r-e),ae=1/(i-v),me=1/(W-I),pe=(r+e)*fe,Ee=(i+v)*ae,xe=(W+I)*me;return q[0]=2*fe,q[4]=0,q[8]=0,q[12]=-pe,q[1]=0,q[5]=2*ae,q[9]=0,q[13]=-Ee,q[2]=0,q[6]=0,q[10]=-2*me,q[14]=-xe,q[3]=0,q[7]=0,q[11]=0,q[15]=1,this},equals:function(e){for(var r=this.elements,i=e.elements,v=0;v<16;v++)if(r[v]!==i[v])return!1;return!0},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}},a.Plane=function(e,r){this.normal=e!==void 0?e:new a.Vector3(1,0,0),this.constant=r!==void 0?r:0},a.Plane.prototype={constructor:a.Plane,set:function(e,r){return this.normal.copy(e),this.constant=r,this},setComponents:function(e,r,i,v){return this.normal.set(e,r,i),this.constant=v,this},setFromNormalAndCoplanarPoint:function(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this},setFromCoplanarPoints:(Oe=new a.Vector3,ze=new a.Vector3,function(e,r,i){var v=Oe.subVectors(i,r).cross(ze.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(v,e),this}),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,r){return this.orthoPoint(e,r).sub(e).negate()},orthoPoint:function(e,r){var i=this.distanceToPoint(e);return(r||new a.Vector3).copy(this.normal).multiplyScalar(i)},intersectLine:(Be=new a.Vector3,function(e,r){var i=r||new a.Vector3,v=e.delta(Be),I=this.normal.dot(v);if(I===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):void 0;var W=-(e.start.dot(this.normal)+this.constant)/I;return W<0||1<W?void 0:i.copy(v).multiplyScalar(W).add(e.start)}),intersectsLine:function(e){var r=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return r<0&&0<i||i<0&&0<r},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new a.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(Ke=new a.Vector3,je=new a.Vector3,Ze=new a.Matrix3,function(e,r){var i=r||Ze.getNormalMatrix(e),v=Ke.copy(this.normal).applyMatrix3(i),I=this.coplanarPoint(je);return I.applyMatrix4(e),this.setFromNormalAndCoplanarPoint(v,I),this}),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},a.Quaternion=function(e,r,i,v){this._x=e||0,this._y=r||0,this._z=i||0,this._w=v!==void 0?v:1},a.Quaternion.prototype={constructor:a.Quaternion,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,r,i,v){return this._x=e,this._y=r,this._z=i,this._w=v,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,r){if(!(e instanceof a.Euler))throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(e._x/2),v=Math.cos(e._y/2),I=Math.cos(e._z/2),W=Math.sin(e._x/2),q=Math.sin(e._y/2),fe=Math.sin(e._z/2),ae=e.order;return ae==="XYZ"?(this._x=W*v*I+i*q*fe,this._y=i*q*I-W*v*fe,this._z=i*v*fe+W*q*I,this._w=i*v*I-W*q*fe):ae==="YXZ"?(this._x=W*v*I+i*q*fe,this._y=i*q*I-W*v*fe,this._z=i*v*fe-W*q*I,this._w=i*v*I+W*q*fe):ae==="ZXY"?(this._x=W*v*I-i*q*fe,this._y=i*q*I+W*v*fe,this._z=i*v*fe+W*q*I,this._w=i*v*I-W*q*fe):ae==="ZYX"?(this._x=W*v*I-i*q*fe,this._y=i*q*I+W*v*fe,this._z=i*v*fe-W*q*I,this._w=i*v*I+W*q*fe):ae==="YZX"?(this._x=W*v*I+i*q*fe,this._y=i*q*I+W*v*fe,this._z=i*v*fe-W*q*I,this._w=i*v*I-W*q*fe):ae==="XZY"&&(this._x=W*v*I-i*q*fe,this._y=i*q*I-W*v*fe,this._z=i*v*fe+W*q*I,this._w=i*v*I+W*q*fe),r!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,r){var i=r/2,v=Math.sin(i);return this._x=e.x*v,this._y=e.y*v,this._z=e.z*v,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var r,i=e.elements,v=i[0],I=i[4],W=i[8],q=i[1],fe=i[5],ae=i[9],me=i[2],pe=i[6],Ee=i[10],xe=v+fe+Ee;return 0<xe?(r=.5/Math.sqrt(xe+1),this._w=.25/r,this._x=(pe-ae)*r,this._y=(W-me)*r,this._z=(q-I)*r):fe<v&&Ee<v?(r=2*Math.sqrt(1+v-fe-Ee),this._w=(pe-ae)/r,this._x=.25*r,this._y=(I+q)/r,this._z=(W+me)/r):Ee<fe?(r=2*Math.sqrt(1+fe-v-Ee),this._w=(W-me)/r,this._x=(I+q)/r,this._y=.25*r,this._z=(ae+pe)/r):(r=2*Math.sqrt(1+Ee-v-fe),this._w=(q-I)/r,this._x=(W+me)/r,this._y=(ae+pe)/r,this._z=.25*r),this.onChangeCallback(),this},setFromUnitVectors:function(e,r){return We===void 0&&(We=new a.Vector3),(gt=e.dot(r)+1)<1e-6?(gt=0,Math.abs(e.x)>Math.abs(e.z)?We.set(-e.y,e.x,0):We.set(0,-e.z,e.y)):We.crossVectors(e,r),this._x=We.x,this._y=We.y,this._z=We.z,this._w=gt,this.normalize(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,r){return r!==void 0?this.multiplyQuaternions(e,r):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,r){var i=e._x,v=e._y,I=e._z,W=e._w,q=r._x,fe=r._y,ae=r._z,me=r._w;return this._x=i*me+W*q+v*ae-I*fe,this._y=v*me+W*fe+I*q-i*ae,this._z=I*me+W*ae+i*fe-v*q,this._w=W*me-i*q-v*fe-I*ae,this.onChangeCallback(),this},slerp:function(e,r){if(r===0)return this;if(r===1)return this.copy(e);var i=this._x,v=this._y,I=this._z,W=this._w,q=W*e._w+i*e._x+v*e._y+I*e._z;if(q<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,q=-q):this.copy(e),1<=q)return this._w=W,this._x=i,this._y=v,this._z=I,this;var fe=Math.sqrt(1-q*q);if(Math.abs(fe)<.001)return this._w=.5*(W+this._w),this._x=.5*(i+this._x),this._y=.5*(v+this._y),this._z=.5*(I+this._z),this;var ae=Math.atan2(fe,q),me=Math.sin((1-r)*ae)/fe,pe=Math.sin(r*ae)/fe;return this._w=W*me+this._w*pe,this._x=i*me+this._x*pe,this._y=v*me+this._y*pe,this._z=I*me+this._z*pe,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,r){return r===void 0&&(r=0),this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this.onChangeCallback(),this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(a.Quaternion,{slerp:function(e,r,i,v){return i.copy(e).slerp(r,v)},slerpFlat:function(e,r,i,v,I,W,q){var fe=i[v+0],ae=i[v+1],me=i[v+2],pe=i[v+3],Ee=I[W+0],xe=I[W+1],Ne=I[W+2],De=I[W+3];if(pe!==De||fe!==Ee||ae!==xe||me!==Ne){var Fe=1-q,Ve=fe*Ee+ae*xe+me*Ne+pe*De,he=0<=Ve?1:-1,Je=1-Ve*Ve;if(Je>Number.EPSILON){var et=Math.sqrt(Je),rt=Math.atan2(et,Ve*he);Fe=Math.sin(Fe*rt)/et,q=Math.sin(q*rt)/et}var ht=q*he;if(fe=fe*Fe+Ee*ht,ae=ae*Fe+xe*ht,me=me*Fe+Ne*ht,pe=pe*Fe+De*ht,Fe===1-q){var bt=1/Math.sqrt(fe*fe+ae*ae+me*me+pe*pe);fe*=bt,ae*=bt,me*=bt,pe*=bt}}e[r]=fe,e[r+1]=ae,e[r+2]=me,e[r+3]=pe}}),a.Triangle=function(e,r,i){this.a=e!==void 0?e:new a.Vector3,this.b=r!==void 0?r:new a.Vector3,this.c=i!==void 0?i:new a.Vector3},a.Triangle.normal=(at=new a.Vector3,function(e,r,i,v){var I=v||new a.Vector3;I.subVectors(i,r),at.subVectors(e,r),I.cross(at);var W=I.lengthSq();return 0<W?I.multiplyScalar(1/Math.sqrt(W)):I.set(0,0,0)}),a.Triangle.barycoordFromPoint=(_e=new a.Vector3,Me=new a.Vector3,H=new a.Vector3,function(e,r,i,v,I){_e.subVectors(v,r),Me.subVectors(i,r),H.subVectors(e,r);var W=_e.dot(_e),q=_e.dot(Me),fe=_e.dot(H),ae=Me.dot(Me),me=Me.dot(H),pe=W*ae-q*q,Ee=I||new a.Vector3;if(pe==0)return Ee.set(-2,-1,-1);var xe=1/pe,Ne=(ae*fe-q*me)*xe,De=(W*me-q*fe)*xe;return Ee.set(1-Ne-De,De,Ne)}),a.Triangle.containsPoint=(m=new a.Vector3,function(e,r,i,v){var I=a.Triangle.barycoordFromPoint(e,r,i,v,m);return 0<=I.x&&0<=I.y&&I.x+I.y<=1}),a.Triangle.prototype={constructor:a.Triangle,set:function(e,r,i){return this.a.copy(e),this.b.copy(r),this.c.copy(i),this},setFromPointsAndIndices:function(e,r,i,v){return this.a.copy(e[r]),this.b.copy(e[i]),this.c.copy(e[v]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:(F=new a.Vector3,X=new a.Vector3,function(){return F.subVectors(this.c,this.b),X.subVectors(this.a,this.b),.5*F.cross(X).length()}),midpoint:function(e){return(e||new a.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return a.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new a.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,r){return a.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,r)},containsPoint:function(e){return a.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},a.Box3=function(e,r){this.min=e!==void 0?e:new a.Vector3(1/0,1/0,1/0),this.max=r!==void 0?r:new a.Vector3(-1/0,-1/0,-1/0)},a.Box3.prototype={constructor:a.Box3,set:function(e,r){return this.min.copy(e),this.max.copy(r),this},setFromArray:function(e){this.makeEmpty();for(var r=1/0,i=1/0,v=1/0,I=-1/0,W=-1/0,q=-1/0,fe=0,ae=e.length;fe<ae;fe+=3){var me=e[fe],pe=e[fe+1],Ee=e[fe+2];me<r&&(r=me),pe<i&&(i=pe),Ee<v&&(v=Ee),I<me&&(I=me),W<pe&&(W=pe),q<Ee&&(q=Ee)}this.min.set(r,i,v),this.max.set(I,W,q)},setFromPoints:function(e){this.makeEmpty();for(var r=0,i=e.length;r<i;r++)this.expandByPoint(e[r]);return this},setFromCenterAndSize:(Ie=new a.Vector3,function(e,r){var i=Ie.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}),setFromObject:function(e){Re===void 0&&(Re=new a.Box3);var r=this;return this.makeEmpty(),e.updateMatrixWorld(!0),e.traverse(function(i){var v=i.geometry;v!==void 0&&(v.boundingBox===null&&v.computeBoundingBox(),v.boundingBox.isEmpty()===!1&&(Re.copy(v.boundingBox),Re.applyMatrix4(i.matrixWorld),r.union(Re)))}),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new a.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new a.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,r){return(r||new a.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return ye===void 0&&(ye=new a.Vector3),this.clampPoint(e.center,ye),ye.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var r,i;return i=0<e.normal.x?(r=e.normal.x*this.min.x,e.normal.x*this.max.x):(r=e.normal.x*this.max.x,e.normal.x*this.min.x),0<e.normal.y?(r+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(r+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),r<=e.constant&&i>=e.constant},clampPoint:function(e,r){return(r||new a.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:(Se=new a.Vector3,function(e){return Se.copy(e).clamp(this.min,this.max).sub(e).length()}),getBoundingSphere:(ve=new a.Vector3,function(e){var r=e||new a.Sphere;return r.center=this.center(),r.radius=.5*this.size(ve).length(),r}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(le=[new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3],function(e){return le[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),le[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),le[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),le[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),le[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),le[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),le[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),le[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(le),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},a.Euler=function(e,r,i,v){this._x=e||0,this._y=r||0,this._z=i||0,this._order=v||a.Euler.DefaultOrder},a.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],a.Euler.DefaultOrder="XYZ",a.Euler.prototype={constructor:a.Euler,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,r,i,v){return this._x=e,this._y=r,this._z=i,this._order=v||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,r,i){var v=a.Math.clamp,I=e.elements,W=I[0],q=I[4],fe=I[8],ae=I[1],me=I[5],pe=I[9],Ee=I[2],xe=I[6],Ne=I[10];return(r=r||this._order)==="XYZ"?(this._y=Math.asin(v(fe,-1,1)),Math.abs(fe)<.99999?(this._x=Math.atan2(-pe,Ne),this._z=Math.atan2(-q,W)):(this._x=Math.atan2(xe,me),this._z=0)):r==="YXZ"?(this._x=Math.asin(-v(pe,-1,1)),Math.abs(pe)<.99999?(this._y=Math.atan2(fe,Ne),this._z=Math.atan2(ae,me)):(this._y=Math.atan2(-Ee,W),this._z=0)):r==="ZXY"?(this._x=Math.asin(v(xe,-1,1)),Math.abs(xe)<.99999?(this._y=Math.atan2(-Ee,Ne),this._z=Math.atan2(-q,me)):(this._y=0,this._z=Math.atan2(ae,W))):r==="ZYX"?(this._y=Math.asin(-v(Ee,-1,1)),Math.abs(Ee)<.99999?(this._x=Math.atan2(xe,Ne),this._z=Math.atan2(ae,W)):(this._x=0,this._z=Math.atan2(-q,me))):r==="YZX"?(this._z=Math.asin(v(ae,-1,1)),Math.abs(ae)<.99999?(this._x=Math.atan2(-pe,me),this._y=Math.atan2(-Ee,W)):(this._x=0,this._y=Math.atan2(fe,Ne))):r==="XZY"&&(this._z=Math.asin(-v(q,-1,1)),Math.abs(q)<.99999?(this._x=Math.atan2(xe,me),this._y=Math.atan2(fe,W)):(this._x=Math.atan2(-pe,Ne),this._y=0)),this._order=r,i!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(e,r,i){return $e===void 0&&($e=new a.Matrix4),$e.makeRotationFromQuaternion(e),this.setFromRotationMatrix($e,r,i),this},setFromVector3:function(e,r){return this.set(e.x,e.y,e.z,r||this._order)},reorder:(ke=new a.Quaternion,function(e){ke.setFromEuler(this),this.setFromQuaternion(ke,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=0),e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new a.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},a.Ray=function(e,r){this.origin=e!==void 0?e:new a.Vector3,this.direction=r!==void 0?r:new a.Vector3},a.Ray.prototype={constructor:a.Ray,set:function(e,r){return this.origin.copy(e),this.direction.copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,r){return(r||new a.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize()},recast:(St=new a.Vector3,function(e){return this.origin.copy(this.at(e,St)),this}),closestPointToPoint:function(e,r){var i=r||new a.Vector3;i.subVectors(e,this.origin);var v=i.dot(this.direction);return v<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(v).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:(jt=new a.Vector3,function(e){var r=jt.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(jt.copy(this.direction).multiplyScalar(r).add(this.origin),jt.distanceToSquared(e))}),distanceSqToSegment:(Yt=new a.Vector3,Gt=new a.Vector3,mt=new a.Vector3,function(e,r,i,v){Yt.copy(e).add(r).multiplyScalar(.5),Gt.copy(r).sub(e).normalize(),mt.copy(this.origin).sub(Yt);var I,W,q,fe,ae=.5*e.distanceTo(r),me=-this.direction.dot(Gt),pe=mt.dot(this.direction),Ee=-mt.dot(Gt),xe=mt.lengthSq(),Ne=Math.abs(1-me*me);if(0<Ne)if(W=me*pe-Ee,fe=ae*Ne,0<=(I=me*Ee-pe))if(-fe<=W)if(W<=fe){var De=1/Ne;q=(I*=De)*(I+me*(W*=De)+2*pe)+W*(me*I+W+2*Ee)+xe}else W=ae,q=-(I=Math.max(0,-(me*W+pe)))*I+W*(W+2*Ee)+xe;else W=-ae,q=-(I=Math.max(0,-(me*W+pe)))*I+W*(W+2*Ee)+xe;else q=W<=-fe?-(I=Math.max(0,-(-me*ae+pe)))*I+(W=0<I?-ae:Math.min(Math.max(-ae,-Ee),ae))*(W+2*Ee)+xe:W<=fe?(I=0,(W=Math.min(Math.max(-ae,-Ee),ae))*(W+2*Ee)+xe):-(I=Math.max(0,-(me*ae+pe)))*I+(W=0<I?ae:Math.min(Math.max(-ae,-Ee),ae))*(W+2*Ee)+xe;else W=0<me?-ae:ae,q=-(I=Math.max(0,-(me*W+pe)))*I+W*(W+2*Ee)+xe;return i&&i.copy(this.direction).multiplyScalar(I).add(this.origin),v&&v.copy(Gt).multiplyScalar(W).add(Yt),q}),intersectSphere:(Ct=new a.Vector3,function(e,r){Ct.subVectors(e.center,this.origin);var i=Ct.dot(this.direction),v=Ct.dot(Ct)-i*i,I=e.radius*e.radius;if(I<v)return null;var W=Math.sqrt(I-v),q=i-W,fe=i+W;return q<0&&fe<0?null:q<0?this.at(fe,r):this.at(q,r)}),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/r;return 0<=i?i:null},intersectPlane:function(e,r){var i=this.distanceToPlane(e);return i===null?null:this.at(i,r)},intersectsPlane:function(e){var r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0},intersectBox:function(e,r){var i,v,I,W,q,fe,ae=1/this.direction.x,me=1/this.direction.y,pe=1/this.direction.z,Ee=this.origin;return v=0<=ae?(i=(e.min.x-Ee.x)*ae,(e.max.x-Ee.x)*ae):(i=(e.max.x-Ee.x)*ae,(e.min.x-Ee.x)*ae),(W=0<=me?(I=(e.min.y-Ee.y)*me,(e.max.y-Ee.y)*me):(I=(e.max.y-Ee.y)*me,(e.min.y-Ee.y)*me))<i||v<I?null:((i<I||i!=i)&&(i=I),(W<v||v!=v)&&(v=W),(fe=0<=pe?(q=(e.min.z-Ee.z)*pe,(e.max.z-Ee.z)*pe):(q=(e.max.z-Ee.z)*pe,(e.min.z-Ee.z)*pe))<i||v<q?null:((i<q||i!=i)&&(i=q),(fe<v||v!=v)&&(v=fe),v<0?null:this.at(0<=i?i:v,r)))},intersectsBox:(_t=new a.Vector3,function(e){return this.intersectBox(e,_t)!==null}),intersectTriangle:(qe=new a.Vector3,lt=new a.Vector3,nt=new a.Vector3,ft=new a.Vector3,function(e,r,i,v,I){lt.subVectors(r,e),nt.subVectors(i,e),ft.crossVectors(lt,nt);var W,q=this.direction.dot(ft);if(0<q){if(v)return null;W=1}else{if(!(q<0))return null;W=-1,q=-q}qe.subVectors(this.origin,e);var fe=W*this.direction.dot(nt.crossVectors(qe,nt));if(fe<0)return null;var ae=W*this.direction.dot(lt.cross(qe));if(ae<0||q<fe+ae)return null;var me=-W*qe.dot(ft);return me<0?null:this.at(me/q,I)}),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},a.Sphere=function(e,r){this.center=e!==void 0?e:new a.Vector3,this.radius=r!==void 0?r:0},a.Sphere.prototype={constructor:a.Sphere,set:function(e,r){return this.center.copy(e),this.radius=r,this},setFromPoints:(Zt=new a.Box3,function(e,r){var i=this.center;r!==void 0?i.copy(r):Zt.setFromPoints(e).center(i);for(var v=0,I=0,W=e.length;I<W;I++)v=Math.max(v,i.distanceToSquared(e[I]));return this.radius=Math.sqrt(v),this}),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,r){var i=this.center.distanceToSquared(e),v=r||new a.Vector3;return v.copy(e),i>this.radius*this.radius&&(v.sub(this.center).normalize(),v.multiplyScalar(this.radius).add(this.center)),v},getBoundingBox:function(e){var r=e||new a.Box3;return r.set(this.center,this.center),r.expandByScalar(this.radius),r},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},a.Frustum=function(e,r,i,v,I,W){this.planes=[e!==void 0?e:new a.Plane,r!==void 0?r:new a.Plane,i!==void 0?i:new a.Plane,v!==void 0?v:new a.Plane,I!==void 0?I:new a.Plane,W!==void 0?W:new a.Plane]},a.Frustum.prototype={constructor:a.Frustum,set:function(e,r,i,v,I,W){var q=this.planes;return q[0].copy(e),q[1].copy(r),q[2].copy(i),q[3].copy(v),q[4].copy(I),q[5].copy(W),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var r=this.planes,i=0;i<6;i++)r[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var r=this.planes,i=e.elements,v=i[0],I=i[1],W=i[2],q=i[3],fe=i[4],ae=i[5],me=i[6],pe=i[7],Ee=i[8],xe=i[9],Ne=i[10],De=i[11],Fe=i[12],Ve=i[13],he=i[14],Je=i[15];return r[0].setComponents(q-v,pe-fe,De-Ee,Je-Fe).normalize(),r[1].setComponents(q+v,pe+fe,De+Ee,Je+Fe).normalize(),r[2].setComponents(q+I,pe+ae,De+xe,Je+Ve).normalize(),r[3].setComponents(q-I,pe-ae,De-xe,Je-Ve).normalize(),r[4].setComponents(q-W,pe-me,De-Ne,Je-he).normalize(),r[5].setComponents(q+W,pe+me,De+Ne,Je+he).normalize(),this},intersectsObject:(ar=new a.Sphere,function(e){var r=e.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),ar.copy(r.boundingSphere),ar.applyMatrix4(e.matrixWorld),this.intersectsSphere(ar)}),intersectsSphere:function(e){for(var r=this.planes,i=e.center,v=-e.radius,I=0;I<6;I++)if(r[I].distanceToPoint(i)<v)return!1;return!0},intersectsBox:(er=new a.Vector3,Qt=new a.Vector3,function(e){for(var r=this.planes,i=0;i<6;i++){var v=r[i];er.x=0<v.normal.x?e.min.x:e.max.x,Qt.x=0<v.normal.x?e.max.x:e.min.x,er.y=0<v.normal.y?e.min.y:e.max.y,Qt.y=0<v.normal.y?e.max.y:e.min.y,er.z=0<v.normal.z?e.min.z:e.max.z,Qt.z=0<v.normal.z?e.max.z:e.min.z;var I=v.distanceToPoint(er),W=v.distanceToPoint(Qt);if(I<0&&W<0)return!1}return!0}),containsPoint:function(e){for(var r=this.planes,i=0;i<6;i++)if(r[i].distanceToPoint(e)<0)return!1;return!0}},a.EventDispatcher=function(){},a.EventDispatcher.prototype={constructor:a.EventDispatcher,apply:function(e){e.addEventListener=a.EventDispatcher.prototype.addEventListener,e.hasEventListener=a.EventDispatcher.prototype.hasEventListener,e.removeEventListener=a.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=a.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,r){this._listeners===void 0&&(this._listeners={});var i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(r)===-1&&i[e].push(r)},hasEventListener:function(e,r){if(this._listeners===void 0)return!1;var i=this._listeners;return i[e]!==void 0&&i[e].indexOf(r)!==-1},removeEventListener:function(e,r){if(this._listeners!==void 0){var i=this._listeners[e];if(i!==void 0){var v=i.indexOf(r);v!==-1&&i.splice(v,1)}}},dispatchEvent:function(e){if(this._listeners!==void 0){var r=this._listeners[e.type];if(r!==void 0){e.target=this;for(var i=[],v=r.length,I=0;I<v;I++)i[I]=r[I];for(I=0;I<v;I++)i[I].call(this,e)}}}},a.Layers=function(){this.mask=1},a.Layers.prototype={constructor:a.Layers,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return(this.mask&e.mask)!=0}},a.Object3D=function(){Object.defineProperty(this,"id",{value:a.Object3DIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=a.Object3D.DefaultUp.clone();var e=new a.Vector3,r=new a.Euler,i=new a.Quaternion,v=new a.Vector3(1,1,1);r.onChange(function(){i.setFromEuler(r,!1)}),i.onChange(function(){r.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:v},modelViewMatrix:{value:new a.Matrix4},normalMatrix:{value:new a.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new a.Matrix4,this.matrixWorld=new a.Matrix4,this.matrixAutoUpdate=a.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new a.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},a.Object3D.DefaultUp=new a.Vector3(0,1,0),a.Object3D.DefaultMatrixAutoUpdate=!0,a.Object3D.prototype={constructor:a.Object3D,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,r){this.quaternion.setFromAxisAngle(e,r)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Nr=new a.Quaternion,function(e,r){return Nr.setFromAxisAngle(e,r),this.quaternion.multiply(Nr),this}),rotateX:(Vr=new a.Vector3(1,0,0),function(e){return this.rotateOnAxis(Vr,e)}),rotateY:(kr=new a.Vector3(0,1,0),function(e){return this.rotateOnAxis(kr,e)}),rotateZ:(_r=new a.Vector3(0,0,1),function(e){return this.rotateOnAxis(_r,e)}),translateOnAxis:(br=new a.Vector3,function(e,r){return br.copy(e).applyQuaternion(this.quaternion),this.position.add(br.multiplyScalar(r)),this}),translateX:(sr=new a.Vector3(1,0,0),function(e){return this.translateOnAxis(sr,e)}),translateY:(xr=new a.Vector3(0,1,0),function(e){return this.translateOnAxis(xr,e)}),translateZ:(Gr=new a.Vector3(0,0,1),function(e){return this.translateOnAxis(Gr,e)}),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(qt=new a.Matrix4,function(e){return e.applyMatrix4(qt.getInverse(this.matrixWorld))}),lookAt:(hr=new a.Matrix4,function(e){hr.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(hr)}),add:function(e){if(1<arguments.length){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this||e instanceof a.Object3D&&(e.parent!==null&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)),this},remove:function(e){if(1<arguments.length)for(var r=0;r<arguments.length;r++)this.remove(arguments[r]);var i=this.children.indexOf(e);i!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,r){if(this[e]===r)return this;for(var i=0,v=this.children.length;i<v;i++){var I=this.children[i].getObjectByProperty(e,r);if(I!==void 0)return I}},getWorldPosition:function(e){var r=e||new a.Vector3;return this.updateMatrixWorld(!0),r.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(mr=new a.Vector3,cr=new a.Vector3,function(e){var r=e||new a.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(mr,r,cr),r}),getWorldRotation:(Er=new a.Quaternion,function(e){var r=e||new a.Euler;return this.getWorldQuaternion(Er),r.setFromQuaternion(Er,this.rotation.order,!1)}),getWorldScale:(yr=new a.Vector3,dr=new a.Quaternion,function(e){var r=e||new a.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(yr,dr,r),r}),getWorldDirection:(ur=new a.Quaternion,function(e){var r=e||new a.Vector3;return this.getWorldQuaternion(ur),r.set(0,0,1).applyQuaternion(ur)}),raycast:function(){},traverse:function(e){e(this);for(var r=this.children,i=0,v=r.length;i<v;i++)r[i].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var r=this.children,i=0,v=r.length;i<v;i++)r[i].traverseVisible(e)}},traverseAncestors:function(e){var r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&e!==!0||(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var r=0,i=this.children.length;r<i;r++)this.children[r].updateMatrixWorld(e)},toJSON:function(e){var r=e===void 0,i={};r&&(e={geometries:{},materials:{},textures:{},images:{}},i.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var v={};if(v.uuid=this.uuid,v.type=this.type,this.name!==""&&(v.name=this.name),JSON.stringify(this.userData)!=="{}"&&(v.userData=this.userData),this.castShadow===!0&&(v.castShadow=!0),this.receiveShadow===!0&&(v.receiveShadow=!0),this.visible===!1&&(v.visible=!1),v.matrix=this.matrix.toArray(),this.geometry!==void 0&&(e.geometries[this.geometry.uuid]===void 0&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),v.geometry=this.geometry.uuid),this.material!==void 0&&(e.materials[this.material.uuid]===void 0&&(e.materials[this.material.uuid]=this.material.toJSON(e)),v.material=this.material.uuid),0<this.children.length){v.children=[];for(var I=0;I<this.children.length;I++)v.children.push(this.children[I].toJSON(e).object)}if(r){var W=me(e.geometries),q=me(e.materials),fe=me(e.textures),ae=me(e.images);0<W.length&&(i.geometries=W),0<q.length&&(i.materials=q),0<fe.length&&(i.textures=fe),0<ae.length&&(i.images=ae)}return i.object=v,i;function me(pe){var Ee=[];for(var xe in pe){var Ne=pe[xe];delete Ne.metadata,Ee.push(Ne)}return Ee}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,r){if(r===void 0&&(r=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.rotationAutoUpdate=e.rotationAutoUpdate,this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(var i=0;i<e.children.length;i++){var v=e.children[i];this.add(v.clone())}return this}},a.EventDispatcher.prototype.apply(a.Object3D.prototype),a.Object3DIdCount=0,a.Face3=function(e,r,i,v,I,W){this.a=e,this.b=r,this.c=i,this.normal=v instanceof a.Vector3?v:new a.Vector3,this.vertexNormals=Array.isArray(v)?v:[],this.color=I instanceof a.Color?I:new a.Color,this.vertexColors=Array.isArray(I)?I:[],this.materialIndex=W!==void 0?W:0},a.Face3.prototype={constructor:a.Face3,clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var r=0,i=e.vertexNormals.length;r<i;r++)this.vertexNormals[r]=e.vertexNormals[r].clone();for(r=0,i=e.vertexColors.length;r<i;r++)this.vertexColors[r]=e.vertexColors[r].clone();return this}},a.BufferAttribute=function(e,r){this.uuid=a.Math.generateUUID(),this.array=e,this.itemSize=r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},a.BufferAttribute.prototype={constructor:a.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(e){e===!0&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.dynamic=e.dynamic,this},copyAt:function(e,r,i){e*=this.itemSize,i*=r.itemSize;for(var v=0,I=this.itemSize;v<I;v++)this.array[e+v]=r.array[i+v];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var r=this.array,i=0,v=0,I=e.length;v<I;v++){var W=e[v];W===void 0&&(W=new a.Color),r[i++]=W.r,r[i++]=W.g,r[i++]=W.b}return this},copyIndicesArray:function(e){for(var r=this.array,i=0,v=0,I=e.length;v<I;v++){var W=e[v];r[i++]=W.a,r[i++]=W.b,r[i++]=W.c}return this},copyVector2sArray:function(e){for(var r=this.array,i=0,v=0,I=e.length;v<I;v++){var W=e[v];W===void 0&&(W=new a.Vector2),r[i++]=W.x,r[i++]=W.y}return this},copyVector3sArray:function(e){for(var r=this.array,i=0,v=0,I=e.length;v<I;v++){var W=e[v];W===void 0&&(W=new a.Vector3),r[i++]=W.x,r[i++]=W.y,r[i++]=W.z}return this},copyVector4sArray:function(e){for(var r=this.array,i=0,v=0,I=e.length;v<I;v++){var W=e[v];W===void 0&&(W=new a.Vector4),r[i++]=W.x,r[i++]=W.y,r[i++]=W.z,r[i++]=W.w}return this},set:function(e,r){return r===void 0&&(r=0),this.array.set(e,r),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,r){return this.array[e*this.itemSize]=r,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,r){return this.array[e*this.itemSize+1]=r,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,r){return this.array[e*this.itemSize+2]=r,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,r){return this.array[e*this.itemSize+3]=r,this},setXY:function(e,r,i){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=i,this},setXYZ:function(e,r,i,v){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=v,this},setXYZW:function(e,r,i,v,I){return e*=this.itemSize,this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=v,this.array[e+3]=I,this},clone:function(){return new this.constructor().copy(this)}},a.Int8Attribute=function(e,r){return new a.BufferAttribute(new Int8Array(e),r)},a.Uint8Attribute=function(e,r){return new a.BufferAttribute(new Uint8Array(e),r)},a.Uint8ClampedAttribute=function(e,r){return new a.BufferAttribute(new Uint8ClampedArray(e),r)},a.Int16Attribute=function(e,r){return new a.BufferAttribute(new Int16Array(e),r)},a.Uint16Attribute=function(e,r){return new a.BufferAttribute(new Uint16Array(e),r)},a.Int32Attribute=function(e,r){return new a.BufferAttribute(new Int32Array(e),r)},a.Uint32Attribute=function(e,r){return new a.BufferAttribute(new Uint32Array(e),r)},a.Float32Attribute=function(e,r){return new a.BufferAttribute(new Float32Array(e),r)},a.Float64Attribute=function(e,r){return new a.BufferAttribute(new Float64Array(e),r)},a.DynamicBufferAttribute=function(e,r){return new a.BufferAttribute(e,r).setDynamic(!0)},a.InstancedBufferAttribute=function(e,r,i){a.BufferAttribute.call(this,e,r),this.meshPerAttribute=i||1},a.InstancedBufferAttribute.prototype=Object.create(a.BufferAttribute.prototype),a.InstancedBufferAttribute.prototype.constructor=a.InstancedBufferAttribute,a.InstancedBufferAttribute.prototype.copy=function(e){return a.BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},a.BufferGeometry=function(){Object.defineProperty(this,"id",{value:a.GeometryIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},a.BufferGeometry.prototype={constructor:a.BufferGeometry,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,r){if(r instanceof a.BufferAttribute||r instanceof a.InterleavedBufferAttribute){if(e!=="index")return this.attributes[e]=r,this;this.setIndex(r)}else this.addAttribute(e,new a.BufferAttribute(r,arguments[2]))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,r,i){this.groups.push({start:e,count:r,materialIndex:i!==void 0?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,r){this.drawRange.start=e,this.drawRange.count=r},applyMatrix:function(e){var r=this.attributes.position;r!==void 0&&(e.applyToVector3Array(r.array),r.needsUpdate=!0);var i=this.attributes.normal;return i!==void 0&&(new a.Matrix3().getNormalMatrix(e).applyToVector3Array(i.array),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return zr===void 0&&(zr=new a.Matrix4),zr.makeRotationX(e),this.applyMatrix(zr),this},rotateY:function(e){return jr===void 0&&(jr=new a.Matrix4),jr.makeRotationY(e),this.applyMatrix(jr),this},rotateZ:function(e){return Rr===void 0&&(Rr=new a.Matrix4),Rr.makeRotationZ(e),this.applyMatrix(Rr),this},translate:function(e,r,i){return Cr===void 0&&(Cr=new a.Matrix4),Cr.makeTranslation(e,r,i),this.applyMatrix(Cr),this},scale:function(e,r,i){return Lr===void 0&&(Lr=new a.Matrix4),Lr.makeScale(e,r,i),this.applyMatrix(Lr),this},lookAt:function(e){Qe===void 0&&(Qe=new a.Object3D),Qe.lookAt(e),Qe.updateMatrix(),this.applyMatrix(Qe.matrix)},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var r=e.geometry;if(e instanceof a.Points||e instanceof a.Line){var i=new a.Float32Attribute(3*r.vertices.length,3),v=new a.Float32Attribute(3*r.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(r.vertices)),this.addAttribute("color",v.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){var I=new a.Float32Attribute(r.lineDistances.length,1);this.addAttribute("lineDistance",I.copyArray(r.lineDistances))}r.boundingSphere!==null&&(this.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(this.boundingBox=r.boundingBox.clone())}else e instanceof a.Mesh&&r instanceof a.Geometry&&this.fromGeometry(r);return this},updateFromObject:function(e){var r,i=e.geometry;if(e instanceof a.Mesh){var v=i.__directGeometry;if(v===void 0)return this.fromGeometry(i);v.verticesNeedUpdate=i.verticesNeedUpdate,v.normalsNeedUpdate=i.normalsNeedUpdate,v.colorsNeedUpdate=i.colorsNeedUpdate,v.uvsNeedUpdate=i.uvsNeedUpdate,v.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=v}return i.verticesNeedUpdate===!0&&((r=this.attributes.position)!==void 0&&(r.copyVector3sArray(i.vertices),r.needsUpdate=!0),i.verticesNeedUpdate=!1),i.normalsNeedUpdate===!0&&((r=this.attributes.normal)!==void 0&&(r.copyVector3sArray(i.normals),r.needsUpdate=!0),i.normalsNeedUpdate=!1),i.colorsNeedUpdate===!0&&((r=this.attributes.color)!==void 0&&(r.copyColorsArray(i.colors),r.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&((r=this.attributes.uv)!==void 0&&(r.copyVector2sArray(i.uvs),r.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&((r=this.attributes.lineDistance)!==void 0&&(r.copyArray(i.lineDistances),r.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(e.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new a.DirectGeometry().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var r=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new a.BufferAttribute(r,3).copyVector3sArray(e.vertices)),0<e.normals.length){var i=new Float32Array(3*e.normals.length);this.addAttribute("normal",new a.BufferAttribute(i,3).copyVector3sArray(e.normals))}if(0<e.colors.length){var v=new Float32Array(3*e.colors.length);this.addAttribute("color",new a.BufferAttribute(v,3).copyColorsArray(e.colors))}if(0<e.uvs.length){var I=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new a.BufferAttribute(I,2).copyVector2sArray(e.uvs))}if(0<e.uvs2.length){var W=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new a.BufferAttribute(W,2).copyVector2sArray(e.uvs2))}if(0<e.indices.length){var q=new(65535<e.vertices.length?Uint32Array:Uint16Array)(3*e.indices.length);this.setIndex(new a.BufferAttribute(q,1).copyIndicesArray(e.indices))}for(var fe in this.groups=e.groups,e.morphTargets){for(var ae=[],me=e.morphTargets[fe],pe=0,Ee=me.length;pe<Ee;pe++){var xe=me[pe],Ne=new a.Float32Attribute(3*xe.length,3);ae.push(Ne.copyVector3sArray(xe))}this.morphAttributes[fe]=ae}if(0<e.skinIndices.length){var De=new a.Float32Attribute(4*e.skinIndices.length,4);this.addAttribute("skinIndex",De.copyVector4sArray(e.skinIndices))}if(0<e.skinWeights.length){var Fe=new a.Float32Attribute(4*e.skinWeights.length,4);this.addAttribute("skinWeight",Fe.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){return new a.Vector3,function(){this.boundingBox===null&&(this.boundingBox=new a.Box3);var e=this.attributes.position.array;e&&this.boundingBox.setFromArray(e),e!==void 0&&e.length!==0||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}(),computeBoundingSphere:(Dr=new a.Box3,Fr=new a.Vector3,function(){this.boundingSphere===null&&(this.boundingSphere=new a.Sphere);var e=this.attributes.position.array;if(e){var r=this.boundingSphere.center;Dr.setFromArray(e),Dr.center(r);for(var i=0,v=0,I=e.length;v<I;v+=3)Fr.fromArray(e,v),i=Math.max(i,r.distanceToSquared(Fr));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,r=this.attributes,i=this.groups;if(r.position){var v=r.position.array;if(r.normal===void 0)this.addAttribute("normal",new a.BufferAttribute(new Float32Array(v.length),3));else for(var I=r.normal.array,W=0,q=I.length;W<q;W++)I[W]=0;var fe,ae,me,pe=r.normal.array,Ee=new a.Vector3,xe=new a.Vector3,Ne=new a.Vector3,De=new a.Vector3,Fe=new a.Vector3;if(e){var Ve=e.array;i.length===0&&this.addGroup(0,Ve.length);for(var he=0,Je=i.length;he<Je;++he){var et=i[he],rt=et.start;for(W=rt,q=rt+et.count;W<q;W+=3)fe=3*Ve[W+0],ae=3*Ve[W+1],me=3*Ve[W+2],Ee.fromArray(v,fe),xe.fromArray(v,ae),Ne.fromArray(v,me),De.subVectors(Ne,xe),Fe.subVectors(Ee,xe),De.cross(Fe),pe[fe]+=De.x,pe[1+fe]+=De.y,pe[2+fe]+=De.z,pe[ae]+=De.x,pe[1+ae]+=De.y,pe[2+ae]+=De.z,pe[me]+=De.x,pe[1+me]+=De.y,pe[2+me]+=De.z}}else for(W=0,q=v.length;W<q;W+=9)Ee.fromArray(v,W),xe.fromArray(v,W+3),Ne.fromArray(v,W+6),De.subVectors(Ne,xe),Fe.subVectors(Ee,xe),De.cross(Fe),pe[W]=De.x,pe[W+1]=De.y,pe[W+2]=De.z,pe[W+3]=De.x,pe[W+4]=De.y,pe[W+5]=De.z,pe[W+6]=De.x,pe[W+7]=De.y,pe[W+8]=De.z;this.normalizeNormals(),r.normal.needsUpdate=!0}},merge:function(e,r){if(e instanceof a.BufferGeometry){r===void 0&&(r=0);var i=this.attributes;for(var v in i)if(e.attributes[v]!==void 0)for(var I=i[v].array,W=e.attributes[v],q=W.array,fe=0,ae=W.itemSize*r;fe<q.length;fe++,ae++)I[ae]=q[fe];return this}},normalizeNormals:function(){for(var e,r,i,v,I=this.attributes.normal.array,W=0,q=I.length;W<q;W+=3)e=I[W],r=I[W+1],i=I[W+2],v=1/Math.sqrt(e*e+r*r+i*i),I[W]*=v,I[W+1]*=v,I[W+2]*=v},toNonIndexed:function(){if(this.index===null)return this;var e=new a.BufferGeometry,r=this.index.array,i=this.attributes;for(var v in i){for(var I=i[v],W=I.array,q=I.itemSize,fe=new W.constructor(r.length*q),ae=0,me=0,pe=0,Ee=r.length;pe<Ee;pe++){ae=r[pe]*q;for(var xe=0;xe<q;xe++)fe[me++]=W[ae++]}e.addAttribute(v,new a.BufferAttribute(fe,q))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var r=this.parameters;for(var i in r)r[i]!==void 0&&(e[i]=r[i]);return e}e.data={attributes:{}};var v=this.index;if(v!==null){var I=Array.prototype.slice.call(v.array);e.data.index={type:v.array.constructor.name,array:I}}var W=this.attributes;for(var i in W){var q=W[i];I=Array.prototype.slice.call(q.array),e.data.attributes[i]={itemSize:q.itemSize,type:q.array.constructor.name,array:I}}var fe=this.groups;0<fe.length&&(e.data.groups=JSON.parse(JSON.stringify(fe)));var ae=this.boundingSphere;return ae!==null&&(e.data.boundingSphere={center:ae.center.toArray(),radius:ae.radius}),e},clone:function(){return new a.BufferGeometry().copy(this)},copy:function(e){var r=e.index;r!==null&&this.setIndex(r.clone());var i=e.attributes;for(var v in i){var I=i[v];this.addAttribute(v,I.clone())}for(var W=e.groups,q=0,fe=W.length;q<fe;q++){var ae=W[q];this.addGroup(ae.start,ae.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.BufferGeometry.prototype),a.BufferGeometry.MaxIndex=65535,a.InterleavedBufferAttribute=function(e,r,i){this.uuid=a.Math.generateUUID(),this.data=e,this.itemSize=r,this.offset=i},a.InterleavedBufferAttribute.prototype={constructor:a.InterleavedBufferAttribute,get length(){return this.array.length},get count(){return this.data.count},setX:function(e,r){return this.data.array[e*this.data.stride+this.offset]=r,this},setY:function(e,r){return this.data.array[e*this.data.stride+this.offset+1]=r,this},setZ:function(e,r){return this.data.array[e*this.data.stride+this.offset+2]=r,this},setW:function(e,r){return this.data.array[e*this.data.stride+this.offset+3]=r,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=i,this},setXYZ:function(e,r,i,v){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=v,this},setXYZW:function(e,r,i,v,I){return e=e*this.data.stride+this.offset,this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=v,this.data.array[e+3]=I,this}},a.InstancedBufferGeometry=function(){a.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},a.InstancedBufferGeometry.prototype=Object.create(a.BufferGeometry.prototype),a.InstancedBufferGeometry.prototype.constructor=a.InstancedBufferGeometry,a.InstancedBufferGeometry.prototype.addGroup=function(e,r,i){this.groups.push({start:e,count:r,instances:i})},a.InstancedBufferGeometry.prototype.copy=function(e){var r=e.index;r!==null&&this.setIndex(r.clone());var i=e.attributes;for(var v in i){var I=i[v];this.addAttribute(v,I.clone())}for(var W=e.groups,q=0,fe=W.length;q<fe;q++){var ae=W[q];this.addGroup(ae.start,ae.count,ae.instances)}return this},a.EventDispatcher.prototype.apply(a.InstancedBufferGeometry.prototype),a.Geometry=function(){Object.defineProperty(this,"id",{value:a.GeometryIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},a.Geometry.prototype={constructor:a.Geometry,applyMatrix:function(e){for(var r=new a.Matrix3().getNormalMatrix(e),i=0,v=this.vertices.length;i<v;i++)this.vertices[i].applyMatrix4(e);for(i=0,v=this.faces.length;i<v;i++){var I=this.faces[i];I.normal.applyMatrix3(r).normalize();for(var W=0,q=I.vertexNormals.length;W<q;W++)I.vertexNormals[W].applyMatrix3(r).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Jr===void 0&&(Jr=new a.Matrix4),Jr.makeRotationX(e),this.applyMatrix(Jr),this},rotateY:function(e){return wr===void 0&&(wr=new a.Matrix4),wr.makeRotationY(e),this.applyMatrix(wr),this},rotateZ:function(e){return pr===void 0&&(pr=new a.Matrix4),pr.makeRotationZ(e),this.applyMatrix(pr),this},translate:function(e,r,i){return Zr===void 0&&(Zr=new a.Matrix4),Zr.makeTranslation(e,r,i),this.applyMatrix(Zr),this},scale:function(e,r,i){return Xr===void 0&&(Xr=new a.Matrix4),Xr.makeScale(e,r,i),this.applyMatrix(Xr),this},lookAt:function(e){Ir===void 0&&(Ir=new a.Object3D),Ir.lookAt(e),Ir.updateMatrix(),this.applyMatrix(Ir.matrix)},fromBufferGeometry:function(e){var r=this,i=e.index!==null?e.index.array:void 0,v=e.attributes,I=v.position.array,W=v.normal!==void 0?v.normal.array:void 0,q=v.color!==void 0?v.color.array:void 0,fe=v.uv!==void 0?v.uv.array:void 0,ae=v.uv2!==void 0?v.uv2.array:void 0;ae!==void 0&&(this.faceVertexUvs[1]=[]);for(var me=[],pe=[],Ee=[],xe=0,Ne=0;xe<I.length;xe+=3,Ne+=2)r.vertices.push(new a.Vector3(I[xe],I[xe+1],I[xe+2])),W!==void 0&&me.push(new a.Vector3(W[xe],W[xe+1],W[xe+2])),q!==void 0&&r.colors.push(new a.Color(q[xe],q[xe+1],q[xe+2])),fe!==void 0&&pe.push(new a.Vector2(fe[Ne],fe[Ne+1])),ae!==void 0&&Ee.push(new a.Vector2(ae[Ne],ae[Ne+1]));function De(et,rt,ht,bt){var it=W!==void 0?[me[et].clone(),me[rt].clone(),me[ht].clone()]:[],vt=q!==void 0?[r.colors[et].clone(),r.colors[rt].clone(),r.colors[ht].clone()]:[],kt=new a.Face3(et,rt,ht,it,vt,bt);r.faces.push(kt),fe!==void 0&&r.faceVertexUvs[0].push([pe[et].clone(),pe[rt].clone(),pe[ht].clone()]),ae!==void 0&&r.faceVertexUvs[1].push([Ee[et].clone(),Ee[rt].clone(),Ee[ht].clone()])}if(i!==void 0){var Fe=e.groups;if(0<Fe.length)for(xe=0;xe<Fe.length;xe++)for(var Ve=Fe[xe],he=Ve.start,Je=(Ne=he,he+Ve.count);Ne<Je;Ne+=3)De(i[Ne],i[Ne+1],i[Ne+2],Ve.materialIndex);else for(xe=0;xe<i.length;xe+=3)De(i[xe],i[xe+1],i[xe+2])}else for(xe=0;xe<I.length/3;xe+=3)De(xe,xe+1,xe+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,r=this.boundingSphere.radius,i=r===0?1:1/r,v=new a.Matrix4;return v.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix(v),this},computeFaceNormals:function(){for(var e=new a.Vector3,r=new a.Vector3,i=0,v=this.faces.length;i<v;i++){var I=this.faces[i],W=this.vertices[I.a],q=this.vertices[I.b],fe=this.vertices[I.c];e.subVectors(fe,q),r.subVectors(W,q),e.cross(r),e.normalize(),I.normal.copy(e)}},computeVertexNormals:function(e){var r,i,v,I,W,q;for(e===void 0&&(e=!0),q=new Array(this.vertices.length),r=0,i=this.vertices.length;r<i;r++)q[r]=new a.Vector3;if(e){var fe,ae,me,pe=new a.Vector3,Ee=new a.Vector3;for(v=0,I=this.faces.length;v<I;v++)W=this.faces[v],fe=this.vertices[W.a],ae=this.vertices[W.b],me=this.vertices[W.c],pe.subVectors(me,ae),Ee.subVectors(fe,ae),pe.cross(Ee),q[W.a].add(pe),q[W.b].add(pe),q[W.c].add(pe)}else for(v=0,I=this.faces.length;v<I;v++)q[(W=this.faces[v]).a].add(W.normal),q[W.b].add(W.normal),q[W.c].add(W.normal);for(r=0,i=this.vertices.length;r<i;r++)q[r].normalize();for(v=0,I=this.faces.length;v<I;v++){var xe=(W=this.faces[v]).vertexNormals;xe.length===3?(xe[0].copy(q[W.a]),xe[1].copy(q[W.b]),xe[2].copy(q[W.c])):(xe[0]=q[W.a].clone(),xe[1]=q[W.b].clone(),xe[2]=q[W.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,r,i,v,I;for(i=0,v=this.faces.length;i<v;i++)for((I=this.faces[i]).__originalFaceNormal?I.__originalFaceNormal.copy(I.normal):I.__originalFaceNormal=I.normal.clone(),I.__originalVertexNormals||(I.__originalVertexNormals=[]),e=0,r=I.vertexNormals.length;e<r;e++)I.__originalVertexNormals[e]?I.__originalVertexNormals[e].copy(I.vertexNormals[e]):I.__originalVertexNormals[e]=I.vertexNormals[e].clone();var W=new a.Geometry;for(W.faces=this.faces,e=0,r=this.morphTargets.length;e<r;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var q=this.morphNormals[e].faceNormals,fe=this.morphNormals[e].vertexNormals;for(i=0,v=this.faces.length;i<v;i++)ae=new a.Vector3,me={a:new a.Vector3,b:new a.Vector3,c:new a.Vector3},q.push(ae),fe.push(me)}var ae,me,pe=this.morphNormals[e];for(W.vertices=this.morphTargets[e].vertices,W.computeFaceNormals(),W.computeVertexNormals(),i=0,v=this.faces.length;i<v;i++)I=this.faces[i],ae=pe.faceNormals[i],me=pe.vertexNormals[i],ae.copy(I.normal),me.a.copy(I.vertexNormals[0]),me.b.copy(I.vertexNormals[1]),me.c.copy(I.vertexNormals[2])}for(i=0,v=this.faces.length;i<v;i++)(I=this.faces[i]).normal=I.__originalFaceNormal,I.vertexNormals=I.__originalVertexNormals},computeTangents:function(){},computeLineDistances:function(){for(var e=0,r=this.vertices,i=0,v=r.length;i<v;i++)0<i&&(e+=r[i].distanceTo(r[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new a.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new a.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,r,i){if(e instanceof a.Geometry){var v,I=this.vertices.length,W=this.vertices,q=e.vertices,fe=this.faces,ae=e.faces,me=this.faceVertexUvs[0],pe=e.faceVertexUvs[0];i===void 0&&(i=0),r!==void 0&&(v=new a.Matrix3().getNormalMatrix(r));for(var Ee=0,xe=q.length;Ee<xe;Ee++){var Ne=q[Ee].clone();r!==void 0&&Ne.applyMatrix4(r),W.push(Ne)}for(Ee=0,xe=ae.length;Ee<xe;Ee++){var De,Fe,Ve,he=ae[Ee],Je=he.vertexNormals,et=he.vertexColors;(De=new a.Face3(he.a+I,he.b+I,he.c+I)).normal.copy(he.normal),v!==void 0&&De.normal.applyMatrix3(v).normalize();for(var rt=0,ht=Je.length;rt<ht;rt++)Fe=Je[rt].clone(),v!==void 0&&Fe.applyMatrix3(v).normalize(),De.vertexNormals.push(Fe);for(De.color.copy(he.color),rt=0,ht=et.length;rt<ht;rt++)Ve=et[rt],De.vertexColors.push(Ve.clone());De.materialIndex=he.materialIndex+i,fe.push(De)}for(Ee=0,xe=pe.length;Ee<xe;Ee++){var bt=pe[Ee],it=[];if(bt!==void 0){for(rt=0,ht=bt.length;rt<ht;rt++)it.push(bt[rt].clone());me.push(it)}}}},mergeMesh:function(e){e instanceof a.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,r,i,v,I,W,q,fe,ae={},me=[],pe=[],Ee=Math.pow(10,4);for(i=0,v=this.vertices.length;i<v;i++)e=this.vertices[i],ae[r=Math.round(e.x*Ee)+"_"+Math.round(e.y*Ee)+"_"+Math.round(e.z*Ee)]===void 0?(ae[r]=i,me.push(this.vertices[i]),pe[i]=me.length-1):pe[i]=pe[ae[r]];var xe=[];for(i=0,v=this.faces.length;i<v;i++){(I=this.faces[i]).a=pe[I.a],I.b=pe[I.b],I.c=pe[I.c],W=[I.a,I.b,I.c];for(var Ne=0;Ne<3;Ne++)if(W[Ne]===W[(Ne+1)%3]){xe.push(i);break}}for(i=xe.length-1;0<=i;i--){var De=xe[i];for(this.faces.splice(De,1),q=0,fe=this.faceVertexUvs.length;q<fe;q++)this.faceVertexUvs[q].splice(De,1)}var Fe=this.vertices.length-me.length;return this.vertices=me,Fe},sortFacesByMaterialIndex:function(){for(var e=this.faces,r=e.length,i=0;i<r;i++)e[i]._id=i;e.sort(function(ae,me){return ae.materialIndex-me.materialIndex});var v,I,W=this.faceVertexUvs[0],q=this.faceVertexUvs[1];for(W&&W.length===r&&(v=[]),q&&q.length===r&&(I=[]),i=0;i<r;i++){var fe=e[i]._id;v&&v.push(W[fe]),I&&I.push(q[fe])}v&&(this.faceVertexUvs[0]=v),I&&(this.faceVertexUvs[1]=I)},toJSON:function(){var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var r=this.parameters;for(var i in r)r[i]!==void 0&&(e[i]=r[i]);return e}for(var v=[],I=0;I<this.vertices.length;I++){var W=this.vertices[I];v.push(W.x,W.y,W.z)}var q=[],fe=[],ae={},me=[],pe={},Ee=[],xe={};for(I=0;I<this.faces.length;I++){var Ne=this.faces[I],De=this.faceVertexUvs[0][I]!==void 0,Fe=0<Ne.normal.length(),Ve=0<Ne.vertexNormals.length,he=Ne.color.r!==1||Ne.color.g!==1||Ne.color.b!==1,Je=0<Ne.vertexColors.length,et=0;if(et=it(et,0,0),et=it(et,1,!0),et=it(et,2,!1),et=it(et,3,De),et=it(et,4,Fe),et=it(et,5,Ve),et=it(et,6,he),et=it(et,7,Je),q.push(et),q.push(Ne.a,Ne.b,Ne.c),q.push(Ne.materialIndex),De){var rt=this.faceVertexUvs[0][I];q.push(Nt(rt[0]),Nt(rt[1]),Nt(rt[2]))}if(Fe&&q.push(vt(Ne.normal)),Ve){var ht=Ne.vertexNormals;q.push(vt(ht[0]),vt(ht[1]),vt(ht[2]))}if(he&&q.push(kt(Ne.color)),Je){var bt=Ne.vertexColors;q.push(kt(bt[0]),kt(bt[1]),kt(bt[2]))}}function it(wt,Ot,Pt){return Pt?wt|1<<Ot:wt&~(1<<Ot)}function vt(wt){var Ot=wt.x.toString()+wt.y.toString()+wt.z.toString();return ae[Ot]!==void 0||(ae[Ot]=fe.length/3,fe.push(wt.x,wt.y,wt.z)),ae[Ot]}function kt(wt){var Ot=wt.r.toString()+wt.g.toString()+wt.b.toString();return pe[Ot]!==void 0||(pe[Ot]=me.length,me.push(wt.getHex())),pe[Ot]}function Nt(wt){var Ot=wt.x.toString()+wt.y.toString();return xe[Ot]!==void 0||(xe[Ot]=Ee.length/2,Ee.push(wt.x,wt.y)),xe[Ot]}return e.data={},e.data.vertices=v,e.data.normals=fe,0<me.length&&(e.data.colors=me),0<Ee.length&&(e.data.uvs=[Ee]),e.data.faces=q,e},clone:function(){return new a.Geometry().copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var r=e.vertices,i=0,v=r.length;i<v;i++)this.vertices.push(r[i].clone());var I=e.faces;for(i=0,v=I.length;i<v;i++)this.faces.push(I[i].clone());for(i=0,v=e.faceVertexUvs.length;i<v;i++){var W=e.faceVertexUvs[i];this.faceVertexUvs[i]===void 0&&(this.faceVertexUvs[i]=[]);for(var q=0,fe=W.length;q<fe;q++){for(var ae=W[q],me=[],pe=0,Ee=ae.length;pe<Ee;pe++){var xe=ae[pe];me.push(xe.clone())}this.faceVertexUvs[i].push(me)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.Geometry.prototype),a.GeometryIdCount=0,a.DirectGeometry=function(){Object.defineProperty(this,"id",{value:a.GeometryIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},a.DirectGeometry.prototype={constructor:a.DirectGeometry,computeBoundingBox:a.Geometry.prototype.computeBoundingBox,computeBoundingSphere:a.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){},computeVertexNormals:function(){},computeGroups:function(e){for(var r,i,v=[],I=e.faces,W=0;W<I.length;W++){var q=I[W];q.materialIndex!==i&&(i=q.materialIndex,r!==void 0&&(r.count=3*W-r.start,v.push(r)),r={start:3*W,materialIndex:i})}r!==void 0&&(r.count=3*W-r.start,v.push(r)),this.groups=v},fromGeometry:function(e){var r,i=e.faces,v=e.vertices,I=e.faceVertexUvs,W=I[0]&&0<I[0].length,q=I[1]&&0<I[1].length,fe=e.morphTargets,ae=fe.length;if(0<ae){r=[];for(var me=0;me<ae;me++)r[me]=[];this.morphTargets.position=r}var pe,Ee=e.morphNormals,xe=Ee.length;if(0<xe){for(pe=[],me=0;me<xe;me++)pe[me]=[];this.morphTargets.normal=pe}var Ne=e.skinIndices,De=e.skinWeights,Fe=Ne.length===v.length,Ve=De.length===v.length;for(me=0;me<i.length;me++){var he=i[me];this.vertices.push(v[he.a],v[he.b],v[he.c]);var Je=he.vertexNormals;if(Je.length===3)this.normals.push(Je[0],Je[1],Je[2]);else{var et=he.normal;this.normals.push(et,et,et)}var rt,ht=he.vertexColors;if(ht.length===3)this.colors.push(ht[0],ht[1],ht[2]);else{var bt=he.color;this.colors.push(bt,bt,bt)}W===!0&&((rt=I[0][me])!==void 0?this.uvs.push(rt[0],rt[1],rt[2]):this.uvs.push(new a.Vector2,new a.Vector2,new a.Vector2)),q===!0&&((rt=I[1][me])!==void 0?this.uvs2.push(rt[0],rt[1],rt[2]):this.uvs2.push(new a.Vector2,new a.Vector2,new a.Vector2));for(var it=0;it<ae;it++){var vt=fe[it].vertices;r[it].push(vt[he.a],vt[he.b],vt[he.c])}for(it=0;it<xe;it++){var kt=Ee[it].vertexNormals[me];pe[it].push(kt.a,kt.b,kt.c)}Fe&&this.skinIndices.push(Ne[he.a],Ne[he.b],Ne[he.c]),Ve&&this.skinWeights.push(De[he.a],De[he.b],De[he.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.DirectGeometry.prototype),a.Camera=function(){a.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new a.Matrix4,this.projectionMatrix=new a.Matrix4},a.Camera.prototype=Object.create(a.Object3D.prototype),a.Camera.prototype.constructor=a.Camera,a.Camera.prototype.getWorldDirection=(en=new a.Quaternion,function(e){var r=e||new a.Vector3;return this.getWorldQuaternion(en),r.set(0,0,-1).applyQuaternion(en)}),a.Camera.prototype.lookAt=(an=new a.Matrix4,function(e){an.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(an)}),a.Camera.prototype.clone=function(){return new this.constructor().copy(this)},a.Camera.prototype.copy=function(e){return a.Object3D.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},a.PerspectiveCamera=function(e,r,i,v){a.Camera.call(this),this.type="PerspectiveCamera",this.focalLength=10,this.zoom=1,this.fov=e!==void 0?e:50,this.aspect=r!==void 0?r:1,this.near=i!==void 0?i:.1,this.far=v!==void 0?v:2e3,this.updateProjectionMatrix()},a.PerspectiveCamera.prototype=Object.create(a.Camera.prototype),a.PerspectiveCamera.prototype.constructor=a.PerspectiveCamera,a.PerspectiveCamera.prototype.setLens=function(e,r){r===void 0&&(r=24),this.fov=2*a.Math.radToDeg(Math.atan(r/(2*e))),this.updateProjectionMatrix()},a.PerspectiveCamera.prototype.setViewOffset=function(e,r,i,v,I,W){this.fullWidth=e,this.fullHeight=r,this.x=i,this.y=v,this.width=I,this.height=W,this.updateProjectionMatrix()},a.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=a.Math.radToDeg(2*Math.atan(Math.tan(.5*a.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var r=this.fullWidth/this.fullHeight,i=Math.tan(a.Math.degToRad(.5*e))*this.near,v=-i,I=r*v,W=r*i,q=Math.abs(W-I),fe=Math.abs(i-v);this.projectionMatrix.makeFrustum(I+this.x*q/this.fullWidth,I+(this.x+this.width)*q/this.fullWidth,i-(this.y+this.height)*fe/this.fullHeight,i-this.y*fe/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},a.PerspectiveCamera.prototype.copy=function(e){return a.Camera.prototype.copy.call(this,e),this.focalLength=e.focalLength,this.zoom=e.zoom,this.fov=e.fov,this.aspect=e.aspect,this.near=e.near,this.far=e.far,this},a.PerspectiveCamera.prototype.toJSON=function(e){var r=a.Object3D.prototype.toJSON.call(this,e);return r.object.focalLength=this.focalLength,r.object.zoom=this.zoom,r.object.fov=this.fov,r.object.aspect=this.aspect,r.object.near=this.near,r.object.far=this.far,r},a.Light=function(e,r){a.Object3D.call(this),this.type="Light",this.color=new a.Color(e),this.intensity=r!==void 0?r:1,this.receiveShadow=void 0},a.Light.prototype=Object.create(a.Object3D.prototype),a.Light.prototype.constructor=a.Light,a.Light.prototype.copy=function(e){return a.Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},a.Light.prototype.toJSON=function(e){var r=a.Object3D.prototype.toJSON.call(this,e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),r},a.Scene=function(){a.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},a.Scene.prototype=Object.create(a.Object3D.prototype),a.Scene.prototype.constructor=a.Scene,a.Scene.prototype.copy=function(e,r){return a.Object3D.prototype.copy.call(this,e,r),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},a.FogExp2=function(e,r){this.name="",this.color=new a.Color(e),this.density=r!==void 0?r:25e-5},a.FogExp2.prototype.clone=function(){return new a.FogExp2(this.color.getHex(),this.density)},a.ImmediateRenderObject=function(e){a.Object3D.call(this),this.material=e,this.render=function(r){}},a.ImmediateRenderObject.prototype=Object.create(a.Object3D.prototype),a.ImmediateRenderObject.prototype.constructor=a.ImmediateRenderObject,a.SphereBufferGeometry=function(e,r,i,v,I,W,q){a.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:v,phiLength:I,thetaStart:W,thetaLength:q},e=e||50,r=Math.max(3,Math.floor(r)||8),i=Math.max(2,Math.floor(i)||6),v=v!==void 0?v:0,I=I!==void 0?I:2*Math.PI;for(var fe=(W=W!==void 0?W:0)+(q=q!==void 0?q:Math.PI),ae=(r+1)*(i+1),me=new a.BufferAttribute(new Float32Array(3*ae),3),pe=new a.BufferAttribute(new Float32Array(3*ae),3),Ee=new a.BufferAttribute(new Float32Array(2*ae),2),xe=0,Ne=[],De=new a.Vector3,Fe=0;Fe<=i;Fe++){for(var Ve=[],he=Fe/i,Je=0;Je<=r;Je++){var et=Je/r,rt=-e*Math.cos(v+et*I)*Math.sin(W+he*q),ht=e*Math.cos(W+he*q),bt=e*Math.sin(v+et*I)*Math.sin(W+he*q);De.set(rt,ht,bt).normalize(),me.setXYZ(xe,rt,ht,bt),pe.setXYZ(xe,De.x,De.y,De.z),Ee.setXY(xe,et,1-he),Ve.push(xe),xe++}Ne.push(Ve)}var it=[];for(Fe=0;Fe<i;Fe++)for(Je=0;Je<r;Je++){var vt=Ne[Fe][Je+1],kt=Ne[Fe][Je],Nt=Ne[Fe+1][Je],wt=Ne[Fe+1][Je+1];(Fe!==0||0<W)&&it.push(vt,kt,wt),(Fe!==i-1||fe<Math.PI)&&it.push(kt,Nt,wt)}this.setIndex(new(65535<me.count?a.Uint32Attribute:a.Uint16Attribute)(it,1)),this.addAttribute("position",me),this.addAttribute("normal",pe),this.addAttribute("uv",Ee),this.boundingSphere=new a.Sphere(new a.Vector3,e)},a.SphereBufferGeometry.prototype=Object.create(a.BufferGeometry.prototype),a.SphereBufferGeometry.prototype.constructor=a.SphereBufferGeometry,a.SphereGeometry=function(e,r,i,v,I,W,q){a.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:v,phiLength:I,thetaStart:W,thetaLength:q},this.fromBufferGeometry(new a.SphereBufferGeometry(e,r,i,v,I,W,q))},a.SphereGeometry.prototype=Object.create(a.Geometry.prototype),a.SphereGeometry.prototype.constructor=a.SphereGeometry,a.Material=function(){Object.defineProperty(this,"id",{value:a.MaterialIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.type="Material",this.side=a.FrontSide,this.opacity=1,this.transparent=!1,this.blending=a.NormalBlending,this.blendSrc=a.SrcAlphaFactor,this.blendDst=a.OneMinusSrcAlphaFactor,this.blendEquation=a.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=a.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},a.Material.prototype={constructor:a.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(e!==void 0)for(var r in e){var i=e[r];if(i!==void 0){var v=this[r];v!==void 0&&(v instanceof a.Color?v.set(i):v instanceof a.Vector3&&i instanceof a.Vector3?v.copy(i):this[r]=r==="overdraw"?Number(i):i)}}},toJSON:function(e){var r=e===void 0;r&&(e={textures:{},images:{}});var i={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function v(q){var fe=[];for(var ae in q){var me=q[ae];delete me.metadata,fe.push(me)}return fe}if(i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color instanceof a.Color&&(i.color=this.color.getHex()),this.roughness!==.5&&(i.roughness=this.roughness),this.metalness!==.5&&(i.metalness=this.metalness),this.emissive instanceof a.Color&&(i.emissive=this.emissive.getHex()),this.specular instanceof a.Color&&(i.specular=this.specular.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.map instanceof a.Texture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap instanceof a.Texture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap instanceof a.Texture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap instanceof a.Texture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap instanceof a.Texture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap instanceof a.Texture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap instanceof a.Texture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap instanceof a.Texture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap instanceof a.Texture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap instanceof a.Texture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap instanceof a.Texture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),this.size!==void 0&&(i.size=this.size),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.vertexColors!==void 0&&this.vertexColors!==a.NoColors&&(i.vertexColors=this.vertexColors),this.shading!==void 0&&this.shading!==a.SmoothShading&&(i.shading=this.shading),this.blending!==void 0&&this.blending!==a.NormalBlending&&(i.blending=this.blending),this.side!==void 0&&this.side!==a.FrontSide&&(i.side=this.side),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),0<this.alphaTest&&(i.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),r){var I=v(e.textures),W=v(e.images);0<I.length&&(i.textures=I),0<W.length&&(i.images=W)}return i},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.side=e.side,this.opacity=e.opacity,this.transparent=e.transparent,this.blending=e.blending,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.Material.prototype),a.MaterialIdCount=0,a.LineBasicMaterial=function(e){a.Material.call(this),this.type="LineBasicMaterial",this.color=new a.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.blending=a.NormalBlending,this.vertexColors=a.NoColors,this.fog=!0,this.setValues(e)},a.LineBasicMaterial.prototype=Object.create(a.Material.prototype),a.LineBasicMaterial.prototype.constructor=a.LineBasicMaterial,a.LineBasicMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.vertexColors=e.vertexColors,this.fog=e.fog,this},a.LineDashedMaterial=function(e){a.Material.call(this),this.type="LineDashedMaterial",this.color=new a.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.blending=a.NormalBlending,this.vertexColors=a.NoColors,this.fog=!0,this.setValues(e)},a.LineDashedMaterial.prototype=Object.create(a.Material.prototype),a.LineDashedMaterial.prototype.constructor=a.LineDashedMaterial,a.LineDashedMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this.vertexColors=e.vertexColors,this.fog=e.fog,this},a.PointsMaterial=function(e){a.Material.call(this),this.type="PointsMaterial",this.color=new a.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.blending=a.NormalBlending,this.vertexColors=a.NoColors,this.fog=!0,this.setValues(e)},a.PointsMaterial.prototype=Object.create(a.Material.prototype),a.PointsMaterial.prototype.constructor=a.PointsMaterial,a.PointsMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.vertexColors=e.vertexColors,this.fog=e.fog,this},a.MeshDepthMaterial=function(e){a.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},a.MeshDepthMaterial.prototype=Object.create(a.Material.prototype),a.MeshDepthMaterial.prototype.constructor=a.MeshDepthMaterial,a.MeshDepthMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},a.MeshNormalMaterial=function(e){a.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},a.MeshNormalMaterial.prototype=Object.create(a.Material.prototype),a.MeshNormalMaterial.prototype.constructor=a.MeshNormalMaterial,a.MeshNormalMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},a.ShaderMaterial=function(e){a.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.shading=a.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=a.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},(this.index0AttributeName=void 0)!==e&&(e.attributes,this.setValues(e))},a.ShaderMaterial.prototype=Object.create(a.Material.prototype),a.ShaderMaterial.prototype.constructor=a.ShaderMaterial,a.ShaderMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=a.UniformsUtils.clone(e.uniforms),this.defines=e.defines,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},a.ShaderMaterial.prototype.toJSON=function(e){var r=a.Material.prototype.toJSON.call(this,e);return r.uniforms=this.uniforms,r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r},a.MeshBasicMaterial=function(e){a.Material.call(this),this.type="MeshBasicMaterial",this.color=new a.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=a.SmoothShading,this.blending=a.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=a.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},a.MeshBasicMaterial.prototype=Object.create(a.Material.prototype),a.MeshBasicMaterial.prototype.constructor=a.MeshBasicMaterial,a.MeshBasicMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},a.MeshLambertMaterial=function(e){a.Material.call(this),this.type="MeshLambertMaterial",this.color=new a.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.blending=a.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=a.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},a.MeshLambertMaterial.prototype=Object.create(a.Material.prototype),a.MeshLambertMaterial.prototype.constructor=a.MeshLambertMaterial,a.MeshLambertMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},a.MeshStandardMaterial=function(e){a.Material.call(this),this.type="MeshStandardMaterial",this.color=new a.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new a.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.fog=!0,this.shading=a.SmoothShading,this.blending=a.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=a.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},a.MeshStandardMaterial.prototype=Object.create(a.Material.prototype),a.MeshStandardMaterial.prototype.constructor=a.MeshStandardMaterial,a.MeshStandardMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},a.MeshPhongMaterial=function(e){a.Material.call(this),this.type="MeshPhongMaterial",this.color=new a.Color(16777215),this.specular=new a.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new a.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=a.SmoothShading,this.blending=a.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=a.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},a.MeshPhongMaterial.prototype=Object.create(a.Material.prototype),a.MeshPhongMaterial.prototype.constructor=a.MeshPhongMaterial,a.MeshPhongMaterial.prototype.copy=function(e){return a.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},a.MultiMaterial=function(e){this.uuid=a.Math.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0},a.MultiMaterial.prototype={constructor:a.MultiMaterial,toJSON:function(e){for(var r={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=this.materials,v=0,I=i.length;v<I;v++){var W=i[v].toJSON(e);delete W.metadata,r.materials.push(W)}return r.visible=this.visible,r},clone:function(){for(var e=new this.constructor,r=0;r<this.materials.length;r++)e.materials.push(this.materials[r].clone());return e.visible=this.visible,e}},a.RawShaderMaterial=function(e){a.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},a.RawShaderMaterial.prototype=Object.create(a.ShaderMaterial.prototype),a.RawShaderMaterial.prototype.constructor=a.RawShaderMaterial,a.Texture=function(e,r,i,v,I,W,q,fe,ae){Object.defineProperty(this,"id",{value:a.TextureIdCount++}),this.uuid=a.Math.generateUUID(),this.name="",this.sourceFile="",this.image=e!==void 0?e:a.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=r!==void 0?r:a.Texture.DEFAULT_MAPPING,this.wrapS=i!==void 0?i:a.ClampToEdgeWrapping,this.wrapT=v!==void 0?v:a.ClampToEdgeWrapping,this.magFilter=I!==void 0?I:a.LinearFilter,this.minFilter=W!==void 0?W:a.LinearMipMapLinearFilter,this.anisotropy=ae!==void 0?ae:1,this.format=q!==void 0?q:a.RGBAFormat,this.type=fe!==void 0?fe:a.UnsignedByteType,this.offset=new a.Vector2(0,0),this.repeat=new a.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=a.LinearEncoding,this.version=0,this.onUpdate=null},a.Texture.DEFAULT_IMAGE=void 0,a.Texture.DEFAULT_MAPPING=a.UVMapping,a.Texture.prototype={constructor:a.Texture,set needsUpdate(e){e===!0&&this.version++},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(e.textures[this.uuid]!==void 0)return e.textures[this.uuid];var r,i,v={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(this.image!==void 0){var I=this.image;I.uuid===void 0&&(I.uuid=a.Math.generateUUID()),e.images[I.uuid]===void 0&&(e.images[I.uuid]={uuid:I.uuid,url:((r=I).toDataURL!==void 0?i=r:((i=document.createElement("canvas")).width=r.width,i.height=r.height,i.getContext("2d").drawImage(r,0,0,r.width,r.height)),2048<i.width||2048<i.height?i.toDataURL("image/jpeg",.6):i.toDataURL("image/png"))}),v.image=I.uuid}return e.textures[this.uuid]=v},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===a.UVMapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||1<e.x)switch(this.wrapS){case a.RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case a.ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case a.MirroredRepeatWrapping:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case a.RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case a.ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case a.MirroredRepeatWrapping:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},a.EventDispatcher.prototype.apply(a.Texture.prototype),a.TextureIdCount=0,a.DataTexture=function(e,r,i,v,I,W,q,fe,ae,me,pe){a.Texture.call(this,null,W,q,fe,ae,me,v,I,pe),this.image={data:e,width:r,height:i},this.magFilter=ae!==void 0?ae:a.NearestFilter,this.minFilter=me!==void 0?me:a.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},a.DataTexture.prototype=Object.create(a.Texture.prototype),a.DataTexture.prototype.constructor=a.DataTexture,a.CompressedTexture=function(e,r,i,v,I,W,q,fe,ae,me,pe){a.Texture.call(this,null,W,q,fe,ae,me,v,I,pe),this.image={width:r,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},a.CompressedTexture.prototype=Object.create(a.Texture.prototype),a.CompressedTexture.prototype.constructor=a.CompressedTexture,a.CubeTexture=function(e,r,i,v,I,W,q,fe,ae){e=e!==void 0?e:[],r=r!==void 0?r:a.CubeReflectionMapping,a.Texture.call(this,e,r,i,v,I,W,q,fe,ae),this.flipY=!1},a.CubeTexture.prototype=Object.create(a.Texture.prototype),a.CubeTexture.prototype.constructor=a.CubeTexture,Object.defineProperty(a.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),a.VideoTexture=function(e,r,i,v,I,W,q,fe,ae){a.Texture.call(this,e,r,i,v,I,W,q,fe,ae),this.generateMipmaps=!1;var me=this;(function pe(){requestAnimationFrame(pe),e.readyState>=e.HAVE_CURRENT_DATA&&(me.needsUpdate=!0)})()},a.VideoTexture.prototype=Object.create(a.Texture.prototype),a.VideoTexture.prototype.constructor=a.VideoTexture,a.Sprite=(on=new Uint16Array([0,1,2,0,2,3]),sn=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),$n=new Float32Array([0,0,1,0,1,1,0,1]),(xn=new a.BufferGeometry).setIndex(new a.BufferAttribute(on,1)),xn.addAttribute("position",new a.BufferAttribute(sn,3)),xn.addAttribute("uv",new a.BufferAttribute($n,2)),function(e){a.Object3D.call(this),this.type="Sprite",this.geometry=xn,this.material=e!==void 0?e:new a.SpriteMaterial}),a.Sprite.prototype=Object.create(a.Object3D.prototype),a.Sprite.prototype.constructor=a.Sprite,a.Sprite.prototype.raycast=(In=new a.Vector3,function(e,r){In.setFromMatrixPosition(this.matrixWorld);var i=e.ray.distanceSqToPoint(In);this.scale.x*this.scale.y<i||r.push({distance:Math.sqrt(i),point:this.position,face:null,object:this})}),a.Sprite.prototype.clone=function(){return new this.constructor(this.material).copy(this)},a.Particle=a.Sprite,a.LensFlare=function(e,r,i,v,I){a.Object3D.call(this),this.lensFlares=[],this.positionScreen=new a.Vector3,(this.customUpdateCallback=void 0)!==e&&this.add(e,r,i,v,I)},a.LensFlare.prototype=Object.create(a.Object3D.prototype),a.LensFlare.prototype.constructor=a.LensFlare,a.LensFlare.prototype.add=function(e,r,i,v,I,W){r===void 0&&(r=-1),i===void 0&&(i=0),W===void 0&&(W=1),I===void 0&&(I=new a.Color(16777215)),v===void 0&&(v=a.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:r,distance:i,x:0,y:0,z:0,scale:1,rotation:0,opacity:W,color:I,blending:v})},a.LensFlare.prototype.updateLensFlares=function(){var e,r,i=this.lensFlares.length,v=2*-this.positionScreen.x,I=2*-this.positionScreen.y;for(e=0;e<i;e++)(r=this.lensFlares[e]).x=this.positionScreen.x+v*r.distance,r.y=this.positionScreen.y+I*r.distance,r.wantedRotation=r.x*Math.PI*.25,r.rotation+=.25*(r.wantedRotation-r.rotation)},a.LensFlare.prototype.copy=function(e){a.Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var r=0,i=e.lensFlares.length;r<i;r++)this.lensFlares.push(e.lensFlares[r]);return this},a.Line=function(e,r,i){if(i===1)return new a.LineSegments(e,r);a.Object3D.call(this),this.type="Line",this.geometry=e!==void 0?e:new a.Geometry,this.material=r!==void 0?r:new a.LineBasicMaterial({color:16777215*Math.random()})},a.Line.prototype=Object.create(a.Object3D.prototype),a.Line.prototype.constructor=a.Line,a.Line.prototype.raycast=(kn=new a.Matrix4,yn=new a.Ray,Ln=new a.Sphere,function(e,r){var i=e.linePrecision,v=i*i,I=this.geometry,W=this.matrixWorld;if(I.boundingSphere===null&&I.computeBoundingSphere(),Ln.copy(I.boundingSphere),Ln.applyMatrix4(W),e.ray.intersectsSphere(Ln)!==!1){kn.getInverse(W),yn.copy(e.ray).applyMatrix4(kn);var q=new a.Vector3,fe=new a.Vector3,ae=new a.Vector3,me=new a.Vector3,pe=this instanceof a.LineSegments?2:1;if(I instanceof a.BufferGeometry){var Ee=I.index,xe=I.attributes.position.array;if(Ee!==null)for(var Ne=Ee.array,De=0,Fe=Ne.length-1;De<Fe;De+=pe){var Ve=Ne[De],he=Ne[De+1];q.fromArray(xe,3*Ve),fe.fromArray(xe,3*he),v<yn.distanceSqToSegment(q,fe,me,ae)||(me.applyMatrix4(this.matrixWorld),(rt=e.ray.origin.distanceTo(me))<e.near||rt>e.far||r.push({distance:rt,point:ae.clone().applyMatrix4(this.matrixWorld),index:De,face:null,faceIndex:null,object:this}))}else for(De=0,Fe=xe.length/3-1;De<Fe;De+=pe)q.fromArray(xe,3*De),fe.fromArray(xe,3*De+3),v<yn.distanceSqToSegment(q,fe,me,ae)||(me.applyMatrix4(this.matrixWorld),(rt=e.ray.origin.distanceTo(me))<e.near||rt>e.far||r.push({distance:rt,point:ae.clone().applyMatrix4(this.matrixWorld),index:De,face:null,faceIndex:null,object:this}))}else if(I instanceof a.Geometry){var Je=I.vertices,et=Je.length;for(De=0;De<et-1;De+=pe){var rt;v<yn.distanceSqToSegment(Je[De],Je[De+1],me,ae)||(me.applyMatrix4(this.matrixWorld),(rt=e.ray.origin.distanceTo(me))<e.near||rt>e.far||r.push({distance:rt,point:ae.clone().applyMatrix4(this.matrixWorld),index:De,face:null,faceIndex:null,object:this}))}}}}),a.Line.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},a.LineStrip=0,a.LinePieces=1,a.LineSegments=function(e,r){a.Line.call(this,e,r),this.type="LineSegments"},a.LineSegments.prototype=Object.create(a.Line.prototype),a.LineSegments.prototype.constructor=a.LineSegments,a.Mesh=function(e,r){a.Object3D.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new a.Geometry,this.material=r!==void 0?r:new a.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=a.TrianglesDrawMode,this.updateMorphTargets()},a.Mesh.prototype=Object.create(a.Object3D.prototype),a.Mesh.prototype.constructor=a.Mesh,a.Mesh.prototype.setDrawMode=function(e){this.drawMode=e},a.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets!==void 0&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,r=this.geometry.morphTargets.length;e<r;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},a.Mesh.prototype.getMorphTargetIndexByName=function(e){return this.morphTargetDictionary[e]!==void 0?this.morphTargetDictionary[e]:0},a.Mesh.prototype.raycast=(Cn=new a.Matrix4,ln=new a.Ray,Rn=new a.Sphere,Yr=new a.Vector3,Kr=new a.Vector3,Hr=new a.Vector3,Xn=new a.Vector3,rr=new a.Vector3,un=new a.Vector3,bn=new a.Vector2,_n=new a.Vector2,An=new a.Vector2,cn=new a.Vector3,dn=new a.Vector3,tn=new a.Vector3,function(e,r){var i,v,I=this.geometry,W=this.material,q=this.matrixWorld;if(W!==void 0&&(I.boundingSphere===null&&I.computeBoundingSphere(),Rn.copy(I.boundingSphere),Rn.applyMatrix4(q),e.ray.intersectsSphere(Rn)!==!1&&(Cn.getInverse(q),ln.copy(e.ray).applyMatrix4(Cn),I.boundingBox===null||ln.intersectsBox(I.boundingBox)!==!1))){if(I instanceof a.BufferGeometry){var fe,ae,me,pe=I.index,Ee=I.attributes,xe=Ee.position.array;if(Ee.uv!==void 0&&(i=Ee.uv.array),pe!==null)for(var Ne=pe.array,De=0,Fe=Ne.length;De<Fe;De+=3)fe=Ne[De],ae=Ne[De+1],me=Ne[De+2],(v=Jn(this,e,ln,xe,i,fe,ae,me))&&(v.faceIndex=Math.floor(De/3),r.push(v));else for(De=0,Fe=xe.length;De<Fe;De+=9)(v=Jn(this,e,ln,xe,i,fe=De/3,ae=fe+1,me=fe+2))&&(v.index=fe,r.push(v))}else if(I instanceof a.Geometry){var Ve,he,Je,et=W instanceof a.MultiMaterial,rt=et==1?W.materials:null,ht=I.vertices,bt=I.faces,it=I.faceVertexUvs[0];0<it.length&&(i=it);for(var vt=0,kt=bt.length;vt<kt;vt++){var Nt=bt[vt],wt=et==1?rt[Nt.materialIndex]:W;if(wt!==void 0){if(Ve=ht[Nt.a],he=ht[Nt.b],Je=ht[Nt.c],wt.morphTargets===!0){var Ot=I.morphTargets,Pt=this.morphTargetInfluences;Yr.set(0,0,0),Kr.set(0,0,0),Hr.set(0,0,0);for(var or=0,Vt=Ot.length;or<Vt;or++){var Jt=Pt[or];if(Jt!==0){var Kt=Ot[or].vertices;Yr.addScaledVector(Xn.subVectors(Kt[Nt.a],Ve),Jt),Kr.addScaledVector(rr.subVectors(Kt[Nt.b],he),Jt),Hr.addScaledVector(un.subVectors(Kt[Nt.c],Je),Jt)}}Yr.add(Ve),Kr.add(he),Hr.add(Je),Ve=Yr,he=Kr,Je=Hr}if(v=Mn(this,e,ln,Ve,he,Je,dn)){if(i){var $t=i[vt];bn.copy($t[0]),_n.copy($t[1]),An.copy($t[2]),v.uv=jn(dn,Ve,he,Je,bn,_n,An)}v.face=Nt,v.faceIndex=vt,r.push(v)}}}}}}),a.Mesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},a.SkinnedMesh=function(e,r,i){a.Mesh.call(this,e,r),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new a.Matrix4,this.bindMatrixInverse=new a.Matrix4;var v=[];if(this.geometry&&this.geometry.bones!==void 0){for(var I,W,q=0,fe=this.geometry.bones.length;q<fe;++q)W=this.geometry.bones[q],I=new a.Bone(this),v.push(I),I.name=W.name,I.position.fromArray(W.pos),I.quaternion.fromArray(W.rotq),W.scl!==void 0&&I.scale.fromArray(W.scl);for(q=0,fe=this.geometry.bones.length;q<fe;++q)(W=this.geometry.bones[q]).parent!==-1&&W.parent!==null?v[W.parent].add(v[q]):this.add(v[q])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new a.Skeleton(v,void 0,i),this.matrixWorld)},a.SkinnedMesh.prototype=Object.create(a.Mesh.prototype),a.SkinnedMesh.prototype.constructor=a.SkinnedMesh,a.SkinnedMesh.prototype.bind=function(e,r){this.skeleton=e,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.getInverse(r)},a.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},a.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof a.Geometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var r=this.geometry.skinWeights[e];(I=1/r.lengthManhattan())!==1/0?r.multiplyScalar(I):r.set(1,0,0,0)}else if(this.geometry instanceof a.BufferGeometry){var i=new a.Vector4,v=this.geometry.attributes.skinWeight;for(e=0;e<v.count;e++){var I;i.x=v.getX(e),i.y=v.getY(e),i.z=v.getZ(e),i.w=v.getW(e),(I=1/i.lengthManhattan())!==1/0?i.multiplyScalar(I):i.set(1,0,0,0),v.setXYZW(e,i.x,i.y,i.z,i.w)}}},a.SkinnedMesh.prototype.updateMatrixWorld=function(e){a.Mesh.prototype.updateMatrixWorld.call(this,!0),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"&&this.bindMatrixInverse.getInverse(this.bindMatrix)},a.SkinnedMesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)},a.Points=function(e,r){a.Object3D.call(this),this.type="Points",this.geometry=e!==void 0?e:new a.Geometry,this.material=r!==void 0?r:new a.PointsMaterial({color:16777215*Math.random()})},a.Points.prototype=Object.create(a.Object3D.prototype),a.Points.prototype.constructor=a.Points,a.Points.prototype.raycast=(Br=new a.Matrix4,wn=new a.Ray,rn=new a.Sphere,function(e,r){var i=this,v=this.geometry,I=this.matrixWorld,W=e.params.Points.threshold;if(v.boundingSphere===null&&v.computeBoundingSphere(),rn.copy(v.boundingSphere),rn.applyMatrix4(I),e.ray.intersectsSphere(rn)!==!1){Br.getInverse(I),wn.copy(e.ray).applyMatrix4(Br);var q=W/((this.scale.x+this.scale.y+this.scale.z)/3),fe=q*q,ae=new a.Vector3;if(v instanceof a.BufferGeometry){var me=v.index,pe=v.attributes.position.array;if(me!==null)for(var Ee=me.array,xe=0,Ne=Ee.length;xe<Ne;xe++){var De=Ee[xe];ae.fromArray(pe,3*De),he(ae,De)}else{xe=0;for(var Fe=pe.length/3;xe<Fe;xe++)ae.fromArray(pe,3*xe),he(ae,xe)}}else{var Ve=v.vertices;for(xe=0,Fe=Ve.length;xe<Fe;xe++)he(Ve[xe],xe)}}function he(Je,et){var rt=wn.distanceSqToPoint(Je);if(rt<fe){var ht=wn.closestPointToPoint(Je);ht.applyMatrix4(I);var bt=e.ray.origin.distanceTo(ht);if(bt<e.near||bt>e.far)return;r.push({distance:bt,distanceToRay:Math.sqrt(rt),point:ht.clone(),index:et,face:null,object:i})}}}),a.Points.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},a.Light=function(e,r){a.Object3D.call(this),this.type="Light",this.color=new a.Color(e),this.intensity=r!==void 0?r:1,this.receiveShadow=void 0},a.Light.prototype=Object.create(a.Object3D.prototype),a.Light.prototype.constructor=a.Light,a.Light.prototype.copy=function(e){return a.Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},a.Light.prototype.toJSON=function(e){var r=a.Object3D.prototype.toJSON.call(this,e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),r},a.ShaderChunk={},a.ShaderChunk.alphamap_fragment=`#ifdef USE_ALPHAMAP

	diffuseColor.a *= texture2D( alphaMap, vUv ).g;

#endif
`,a.ShaderChunk.alphamap_pars_fragment=`#ifdef USE_ALPHAMAP

	uniform sampler2D alphaMap;

#endif
`,a.ShaderChunk.alphatest_fragment=`#ifdef ALPHATEST

	if ( diffuseColor.a < ALPHATEST ) discard;

#endif
`,a.ShaderChunk.aomap_fragment=`#ifdef USE_AOMAP

	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;

	reflectedLight.indirectDiffuse *= ambientOcclusion;

	#if defined( USE_ENVMAP ) && defined( STANDARD )

		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );

		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );

	#endif

#endif
`,a.ShaderChunk.aomap_pars_fragment=`#ifdef USE_AOMAP

	uniform sampler2D aoMap;
	uniform float aoMapIntensity;

#endif`,a.ShaderChunk.begin_vertex=`
vec3 transformed = vec3( position );
`,a.ShaderChunk.beginnormal_vertex=`
vec3 objectNormal = vec3( normal );
`,a.ShaderChunk.color_fragment=`#ifdef USE_COLOR

	diffuseColor.rgb *= vColor;

#endif`,a.ShaderChunk.color_pars_fragment=`#ifdef USE_COLOR

	varying vec3 vColor;

#endif
`,a.ShaderChunk.color_pars_vertex=`#ifdef USE_COLOR

	varying vec3 vColor;

#endif`,a.ShaderChunk.color_vertex=`#ifdef USE_COLOR

	vColor.xyz = color.xyz;

#endif`,a.ShaderChunk.common=`#define PI 3.14159
#define PI2 6.28318
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6

#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )

float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }


struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};

struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};

struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};


vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

}

// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {

	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );

}

vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {

	float distance = dot( planeNormal, point - pointOnPlane );

	return - distance * planeNormal + point;

}

float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {

	return sign( dot( point - pointOnPlane, planeNormal ) );

}

vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {

	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;

}
`,a.ShaderChunk.defaultnormal_vertex=`#ifdef FLIP_SIDED

	objectNormal = -objectNormal;

#endif

vec3 transformedNormal = normalMatrix * objectNormal;
`,a.ShaderChunk.encodings_fragment=`  gl_FragColor = linearToOutputTexel( gl_FragColor );
`,a.ShaderChunk.encodings_pars_fragment=`// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/

vec4 LinearToLinear( in vec4 value ) {
  return value;
}

vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}

vec4 sRGBToLinear( in vec4 value ) {
  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}

vec4 RGBEToLinear( in vec4 value ) {
  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
  float maxComponent = max( max( value.r, value.g ), value.b );
  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );
}

// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
  return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
  float maxRGB = max( value.x, max( value.g, value.b ) );
  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
  M            = ceil( M * 255.0 ) / 255.0;
  return vec4( value.rgb / ( M * maxRange ), M );
}

// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
    float maxRGB = max( value.x, max( value.g, value.b ) );
    float D      = max( maxRange / maxRGB, 1.0 );
    D            = min( floor( D ) / 255.0, 1.0 );
    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}

// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html

// M matrix, for encoding
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
  vec4 vResult;
  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
  vResult.w = fract(Le);
  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
  return vResult;
}

// Inverse M matrix, for decoding
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
  float Le = value.z * 255.0 + value.w;
  vec3 Xp_Y_XYZp;
  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
  return vec4( max(vRGB, 0.0), 1.0 );
}
`,a.ShaderChunk.envmap_fragment=`#ifdef USE_ENVMAP

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )

		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );

		// Transforming Normal Vectors with the Inverse Transformation
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

		#ifdef ENVMAP_MODE_REFLECTION

			vec3 reflectVec = reflect( cameraToVertex, worldNormal );

		#else

			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );

		#endif

	#else

		vec3 reflectVec = vReflect;

	#endif

	#ifdef DOUBLE_SIDED
		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#else
		float flipNormal = 1.0;
	#endif

	#ifdef ENVMAP_TYPE_CUBE

		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );

	#elif defined( ENVMAP_TYPE_EQUIREC )

		vec2 sampleUV;
		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );
		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );

	#elif defined( ENVMAP_TYPE_SPHERE )

		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );

	#endif

	envColor = envMapTexelToLinear( envColor );

	#ifdef ENVMAP_BLENDING_MULTIPLY

		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_MIX )

		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_ADD )

		outgoingLight += envColor.xyz * specularStrength * reflectivity;

	#endif

#endif
`,a.ShaderChunk.envmap_pars_fragment=`#if defined( USE_ENVMAP ) || defined( STANDARD )
	uniform float reflectivity;
	uniform float envMapIntenstiy;
#endif

#ifdef USE_ENVMAP
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )

		uniform float refractionRatio;

	#else

		varying vec3 vReflect;

	#endif

#endif
`,a.ShaderChunk.envmap_pars_vertex=`#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )

	varying vec3 vReflect;

	uniform float refractionRatio;

#endif
`,a.ShaderChunk.envmap_vertex=`#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )

	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );

	vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );

	#ifdef ENVMAP_MODE_REFLECTION

		vReflect = reflect( cameraToVertex, worldNormal );

	#else

		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );

	#endif

#endif
`,a.ShaderChunk.fog_fragment=`#ifdef USE_FOG

	#ifdef USE_LOGDEPTHBUF_EXT

		float depth = gl_FragDepthEXT / gl_FragCoord.w;

	#else

		float depth = gl_FragCoord.z / gl_FragCoord.w;

	#endif

	#ifdef FOG_EXP2

		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );

	#else

		float fogFactor = smoothstep( fogNear, fogFar, depth );

	#endif

	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );

#endif
`,a.ShaderChunk.fog_pars_fragment=`#ifdef USE_FOG

	uniform vec3 fogColor;

	#ifdef FOG_EXP2

		uniform float fogDensity;

	#else

		uniform float fogNear;
		uniform float fogFar;
	#endif

#endif`,a.ShaderChunk.logdepthbuf_fragment=`#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)

	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;

#endif`,a.ShaderChunk.logdepthbuf_pars_fragment=`#ifdef USE_LOGDEPTHBUF

	uniform float logDepthBufFC;

	#ifdef USE_LOGDEPTHBUF_EXT

		varying float vFragDepth;

	#endif

#endif
`,a.ShaderChunk.logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF

	#ifdef USE_LOGDEPTHBUF_EXT

		varying float vFragDepth;

	#endif

	uniform float logDepthBufFC;

#endif`,a.ShaderChunk.logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF

	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;

	#ifdef USE_LOGDEPTHBUF_EXT

		vFragDepth = 1.0 + gl_Position.w;

	#else

		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;

	#endif

#endif
`,a.ShaderChunk.map_fragment=`#ifdef USE_MAP

	vec4 texelColor = texture2D( map, vUv );

	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;

#endif
`,a.ShaderChunk.map_pars_fragment=`#ifdef USE_MAP

	uniform sampler2D map;

#endif
`,a.ShaderChunk.morphnormal_vertex=`#ifdef USE_MORPHNORMALS

	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];

#endif
`,a.ShaderChunk.morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS

	#ifndef USE_MORPHNORMALS

	uniform float morphTargetInfluences[ 8 ];

	#else

	uniform float morphTargetInfluences[ 4 ];

	#endif

#endif`,a.ShaderChunk.morphtarget_vertex=`#ifdef USE_MORPHTARGETS

	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];

	#ifndef USE_MORPHNORMALS

	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];

	#endif

#endif
`,a.ShaderChunk.premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA

	// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.
	gl_FragColor.rgb *= gl_FragColor.a;

#endif
`,a.ShaderChunk.project_vertex=`#ifdef USE_SKINNING

	vec4 mvPosition = modelViewMatrix * skinned;

#else

	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );

#endif

gl_Position = projectionMatrix * mvPosition;
`,a.ShaderChunk.skinbase_vertex=`#ifdef USE_SKINNING

	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );

#endif`,a.ShaderChunk.skinning_pars_vertex=`#ifdef USE_SKINNING

	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;

	#ifdef BONE_TEXTURE

		uniform sampler2D boneTexture;
		uniform int boneTextureWidth;
		uniform int boneTextureHeight;

		mat4 getBoneMatrix( const in float i ) {

			float j = i * 4.0;
			float x = mod( j, float( boneTextureWidth ) );
			float y = floor( j / float( boneTextureWidth ) );

			float dx = 1.0 / float( boneTextureWidth );
			float dy = 1.0 / float( boneTextureHeight );

			y = dy * ( y + 0.5 );

			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );

			mat4 bone = mat4( v1, v2, v3, v4 );

			return bone;

		}

	#else

		uniform mat4 boneGlobalMatrices[ MAX_BONES ];

		mat4 getBoneMatrix( const in float i ) {

			mat4 bone = boneGlobalMatrices[ int(i) ];
			return bone;

		}

	#endif

#endif
`,a.ShaderChunk.skinning_vertex=`#ifdef USE_SKINNING

	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );

	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	skinned  = bindMatrixInverse * skinned;

#endif
`,a.ShaderChunk.skinnormal_vertex=`#ifdef USE_SKINNING

	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;

	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;

#endif
`,a.ShaderChunk.specularmap_fragment=`float specularStrength;

#ifdef USE_SPECULARMAP

	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;

#else

	specularStrength = 1.0;

#endif`,a.ShaderChunk.specularmap_pars_fragment=`#ifdef USE_SPECULARMAP

	uniform sampler2D specularMap;

#endif`,a.ShaderChunk.tonemapping_fragment=`#if defined( TONE_MAPPING )

  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );

#endif
`,a.ShaderChunk.tonemapping_pars_fragment=`#define saturate(a) clamp( a, 0.0, 1.0 )

uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;

// exposure only
vec3 LinearToneMapping( vec3 color ) {

  return toneMappingExposure * color;

}

// source: https://www.cs.utah.edu/~reinhard/cdrom/
vec3 ReinhardToneMapping( vec3 color ) {

  color *= toneMappingExposure;
  return saturate( color / ( vec3( 1.0 ) + color ) );

}

// source: http://filmicgames.com/archives/75
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {

  // John Hable's filmic operator from Uncharted 2 video game
  color *= toneMappingExposure;
  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );

}

// source: http://filmicgames.com/archives/75
vec3 OptimizedCineonToneMapping( vec3 color ) {

  // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson
  color *= toneMappingExposure;
  color = max( vec3( 0.0 ), color - 0.004 );
  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );

}
`,a.ShaderChunk.uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )

	varying vec2 vUv2;

#endif`,a.ShaderChunk.uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )

	attribute vec2 uv2;
	varying vec2 vUv2;

#endif`,a.ShaderChunk.uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )

	vUv2 = uv2;

#endif`,a.ShaderChunk.uv_pars_fragment=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )

	varying vec2 vUv;

#endif`,a.ShaderChunk.uv_pars_vertex=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )

	varying vec2 vUv;
	uniform vec4 offsetRepeat;

#endif
`,a.ShaderChunk.uv_vertex=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )

	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;

#endif`,a.ShaderChunk.worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )

	#ifdef USE_SKINNING

		vec4 worldPosition = modelMatrix * skinned;

	#else

		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );

	#endif

#endif
`,a.ShaderChunk.meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;

#ifndef FLAT_SHADED

	varying vec3 vNormal;

#endif

#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>

	ReflectedLight reflectedLight;
	reflectedLight.directDiffuse = vec3( 0.0 );
	reflectedLight.directSpecular = vec3( 0.0 );
	reflectedLight.indirectDiffuse = diffuseColor.rgb;
	reflectedLight.indirectSpecular = vec3( 0.0 );

	#include <aomap_fragment>

	vec3 outgoingLight = reflectedLight.indirectDiffuse;

	#include <envmap_fragment>

	gl_FragColor = vec4( outgoingLight, diffuseColor.a );

	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>

}
`,a.ShaderChunk.meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>

	#ifdef USE_ENVMAP

	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>

	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>

	#include <worldpos_vertex>
	#include <envmap_vertex>

}
`,a.UniformsUtils={merge:function(e){for(var r={},i=0;i<e.length;i++){var v=this.clone(e[i]);for(var I in v)r[I]=v[I]}return r},clone:function(e){var r={};for(var i in e)for(var v in r[i]={},e[i]){var I=e[i][v];I instanceof a.Color||I instanceof a.Vector2||I instanceof a.Vector3||I instanceof a.Vector4||I instanceof a.Matrix3||I instanceof a.Matrix4||I instanceof a.Texture?r[i][v]=I.clone():Array.isArray(I)?r[i][v]=I.slice():r[i][v]=I}return r}},a.UniformsLib={common:{diffuse:{type:"c",value:new a.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new a.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new a.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},roughnessmap:{roughnessMap:{type:"t",value:null}},metalnessmap:{metalnessMap:{type:"t",value:null}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new a.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLights:{type:"sa",value:[],properties:{direction:{type:"v3"},color:{type:"c"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},directionalShadowMap:{type:"tv",value:[]},directionalShadowMatrix:{type:"m4v",value:[]},spotLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},direction:{type:"v3"},distance:{type:"f"},coneCos:{type:"f"},penumbraCos:{type:"f"},decay:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},spotShadowMap:{type:"tv",value:[]},spotShadowMatrix:{type:"m4v",value:[]},pointLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},decay:{type:"f"},distance:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},pointShadowMap:{type:"tv",value:[]},pointShadowMatrix:{type:"m4v",value:[]},hemisphereLights:{type:"sa",value:[],properties:{direction:{type:"v3"},skyColor:{type:"c"},groundColor:{type:"c"}}}},points:{diffuse:{type:"c",value:new a.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new a.Vector4(0,0,1,1)}}},a.ShaderLib={basic:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.aomap,a.UniformsLib.fog]),vertexShader:a.ShaderChunk.meshbasic_vert,fragmentShader:a.ShaderChunk.meshbasic_frag},lambert:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{type:"c",value:new a.Color(0)}}]),vertexShader:a.ShaderChunk.meshlambert_vert,fragmentShader:a.ShaderChunk.meshlambert_frag},phong:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{type:"c",value:new a.Color(0)},specular:{type:"c",value:new a.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:a.ShaderChunk.meshphong_vert,fragmentShader:a.ShaderChunk.meshphong_frag},standard:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.aomap,a.UniformsLib.lightmap,a.UniformsLib.emissivemap,a.UniformsLib.bumpmap,a.UniformsLib.normalmap,a.UniformsLib.displacementmap,a.UniformsLib.roughnessmap,a.UniformsLib.metalnessmap,a.UniformsLib.fog,a.UniformsLib.lights,{emissive:{type:"c",value:new a.Color(0)},roughness:{type:"f",value:.5},metalness:{type:"f",value:0},envMapIntensity:{type:"f",value:1}}]),vertexShader:a.ShaderChunk.meshstandard_vert,fragmentShader:a.ShaderChunk.meshstandard_frag},points:{uniforms:a.UniformsUtils.merge([a.UniformsLib.points,a.UniformsLib.fog]),vertexShader:a.ShaderChunk.points_vert,fragmentShader:a.ShaderChunk.points_frag},dashed:{uniforms:a.UniformsUtils.merge([a.UniformsLib.common,a.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:a.ShaderChunk.linedashed_vert,fragmentShader:a.ShaderChunk.linedashed_frag},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:a.ShaderChunk.depth_vert,fragmentShader:a.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:a.ShaderChunk.normal_vert,fragmentShader:a.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:a.ShaderChunk.cube_vert,fragmentShader:a.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:a.ShaderChunk.equirect_vert,fragmentShader:a.ShaderChunk.equirect_frag},depthRGBA:{uniforms:{},vertexShader:a.ShaderChunk.depthRGBA_vert,fragmentShader:a.ShaderChunk.depthRGBA_frag},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new a.Vector3(0,0,0)}},vertexShader:a.ShaderChunk.distanceRGBA_vert,fragmentShader:a.ShaderChunk.distanceRGBA_frag}},a.WebGLRenderer=function(e){var r=(e=e||{}).canvas!==void 0?e.canvas:document.createElement("canvas"),i=e.context!==void 0?e.context:null,v=e.alpha!==void 0&&e.alpha,I=e.depth===void 0||e.depth,W=e.stencil===void 0||e.stencil,q=e.antialias!==void 0&&e.antialias,fe=e.premultipliedAlpha===void 0||e.premultipliedAlpha,ae=e.preserveDrawingBuffer!==void 0&&e.preserveDrawingBuffer,me=[],pe=[],Ee=-1,xe=[],Ne=-1,De=new Float32Array(8),Fe=[],Ve=[];this.domElement=r,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=a.LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var he,Je=this,et=null,rt=null,ht=null,bt=-1,it="",vt=null,kt=new a.Vector4,Nt=null,wt=new a.Vector4,Ot=0,Pt=new a.Color(0),or=0,Vt=r.width,Jt=r.height,Kt=1,$t=new a.Vector4(0,0,Vt,Jt),ir=!1,Dt=new a.Vector4(0,0,Vt,Jt),lr=new a.Frustum,zt=new a.Matrix4,Bt=new a.Vector3,Et={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[],shadowsPointLight:0},Wt={geometries:0,textures:0},He={calls:0,vertices:0,faces:0,points:0};this.info={render:He,memory:Wt,programs:null};try{var Mt={alpha:v,depth:I,stencil:W,antialias:q,premultipliedAlpha:fe,preserveDrawingBuffer:ae};if((he=i||r.getContext("webgl",Mt)||r.getContext("experimental-webgl",Mt))===null)throw r.getContext("webgl")!==null?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";he.getShaderPrecisionFormat===void 0&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),r.addEventListener("webglcontextlost",qn,!1)}catch{}var xt=new a.WebGLExtensions(he);xt.get("OES_texture_float"),xt.get("OES_texture_float_linear"),xt.get("OES_texture_half_float"),xt.get("OES_texture_half_float_linear"),xt.get("OES_standard_derivatives"),xt.get("ANGLE_instanced_arrays"),xt.get("OES_element_index_uint")&&(a.BufferGeometry.MaxIndex=4294967296);var gr=new a.WebGLCapabilities(he,xt,e),pt=new a.WebGLState(he,xt,de),Ft=new a.WebGLProperties,Tr=new a.WebGLObjects(he,Ft,this.info),Sr=new a.WebGLPrograms(this,gr),Mr=new a.WebGLLights;this.info.programs=Sr.programs;var gn=new a.WebGLBufferRenderer(he,xt,He),Un=new a.WebGLIndexedBufferRenderer(he,xt,He);function Gn(){return rt===null?Kt:1}function Vn(Y,ne,ce,ue){fe===!0&&(Y*=ue,ne*=ue,ce*=ue),pt.clearColor(Y,ne,ce,ue)}function Sn(){pt.init(),pt.scissor(kt.copy($t).multiplyScalar(Kt)),pt.viewport(wt.copy(Dt).multiplyScalar(Kt)),Vn(Pt.r,Pt.g,Pt.b,or)}function zn(){vt=et=null,it="",bt=-1,pt.reset()}Sn(),this.context=he,this.capabilities=gr,this.extensions=xt,this.properties=Ft,this.state=pt;var Yn=new a.WebGLShadowMap(this,Et,Tr);this.shadowMap=Yn;var Wr,Kn=new a.SpritePlugin(this,Fe),ci=new a.LensFlarePlugin(this,Ve);function qn(Y){Y.preventDefault(),zn(),Sn(),Ft.clear()}function di(Y){var ne=Y.target;ne.removeEventListener("dispose",di),function(ce){var ue=Ft.get(ce);if(ce.image&&ue.__image__webglTextureCube)he.deleteTexture(ue.__image__webglTextureCube);else{if(ue.__webglInit===void 0)return;he.deleteTexture(ue.__webglTexture)}Ft.delete(ce)}(ne),Wt.textures--}function hi(Y){var ne=Y.target;ne.removeEventListener("dispose",hi),function(ce){var ue=Ft.get(ce),Ae=Ft.get(ce.texture);if(!(!ce||Ae.__webglTexture===void 0)){if(he.deleteTexture(Ae.__webglTexture),ce instanceof a.WebGLRenderTargetCube)for(var Pe=0;Pe<6;Pe++)he.deleteFramebuffer(ue.__webglFramebuffer[Pe]),he.deleteRenderbuffer(ue.__webglDepthbuffer[Pe]);else he.deleteFramebuffer(ue.__webglFramebuffer),he.deleteRenderbuffer(ue.__webglDepthbuffer);Ft.delete(ce.texture),Ft.delete(ce)}}(ne),Wt.textures--}function yi(Y){var ne,ce=Y.target;ce.removeEventListener("dispose",yi),bi(ne=ce),Ft.delete(ne)}function bi(Y){var ne=Ft.get(Y).program;(Y.program=void 0)!==ne&&Sr.releaseProgram(ne)}function xi(Y,ne){return Math.abs(ne[0])-Math.abs(Y[0])}function Li(Y,ne){return Y.object.renderOrder!==ne.object.renderOrder?Y.object.renderOrder-ne.object.renderOrder:Y.material.id!==ne.material.id?Y.material.id-ne.material.id:Y.z!==ne.z?Y.z-ne.z:Y.id-ne.id}function Ci(Y,ne){return Y.object.renderOrder!==ne.object.renderOrder?Y.object.renderOrder-ne.object.renderOrder:Y.z!==ne.z?ne.z-Y.z:Y.id-ne.id}function fi(Y,ne,ce,ue,Ae){var Pe,Ue;Ue=ce.transparent?(Pe=xe,++Ne):(Pe=pe,++Ee);var Ye=Pe[Ue];Ye!==void 0?(Ye.id=Y.id,Ye.object=Y,Ye.geometry=ne,Ye.material=ce,Ye.z=Bt.z,Ye.group=Ae):(Ye={id:Y.id,object:Y,geometry:ne,material:ce,z:Bt.z,group:Ae},Pe.push(Ye))}function ei(Y,ne,ce,ue){for(var Ae=0,Pe=Y.length;Ae<Pe;Ae++){var Ue=Y[Ae],Ye=Ue.object,tt=Ue.geometry,ct=ue===void 0?Ue.material:ue,st=Ue.group;if(Ye.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,Ye.matrixWorld),Ye.normalMatrix.getNormalMatrix(Ye.modelViewMatrix),Ye instanceof a.ImmediateRenderObject){_i(ct);var Xe=Ai(ne,ce,ct,Ye);it="",Ye.render(function(At){Je.renderBufferImmediate(At,Xe,ct)})}else Je.renderBufferDirect(ne,ce,tt,ct,Ye,st)}}function _i(Y){var ne;(ne=Y).side!==a.DoubleSide?pt.enable(he.CULL_FACE):pt.disable(he.CULL_FACE),pt.setFlipSided(ne.side===a.BackSide),Y.transparent===!0?pt.setBlending(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.premultipliedAlpha):pt.setBlending(a.NoBlending),pt.setDepthFunc(Y.depthFunc),pt.setDepthTest(Y.depthTest),pt.setDepthWrite(Y.depthWrite),pt.setColorWrite(Y.colorWrite),pt.setPolygonOffset(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits)}function Ai(Y,ne,ce,ue){Ot=0;var Ae=Ft.get(ce);Ae.program===void 0&&(ce.needsUpdate=!0),Ae.lightsHash!==void 0&&Ae.lightsHash!==Et.hash&&(ce.needsUpdate=!0),ce.needsUpdate&&(function(dt,ot,Xt){var Ht=Ft.get(dt),fr=Sr.getParameters(dt,Et,ot,Xt),Ur=Sr.getProgramCode(dt,fr),Ar=Ht.program,Rt=!0;if(Ar===void 0)dt.addEventListener("dispose",yi);else if(Ar.code!==Ur)bi(dt);else{if(fr.shaderID!==void 0)return;Rt=!1}if(Rt){if(fr.shaderID){var ni=a.ShaderLib[fr.shaderID];Ht.__webglShader={name:dt.type,uniforms:a.UniformsUtils.clone(ni.uniforms),vertexShader:ni.vertexShader,fragmentShader:ni.fragmentShader}}else Ht.__webglShader={name:dt.type,uniforms:dt.uniforms,vertexShader:dt.vertexShader,fragmentShader:dt.fragmentShader};dt.__webglShader=Ht.__webglShader,Ar=Sr.acquireProgram(dt,fr,Ur),Ht.program=Ar,dt.program=Ar}var mn=Ar.getAttributes();if(dt.morphTargets)for(var Pr=dt.numSupportedMorphTargets=0;Pr<Je.maxMorphTargets;Pr++)0<=mn["morphTarget"+Pr]&&dt.numSupportedMorphTargets++;if(dt.morphNormals)for(Pr=dt.numSupportedMorphNormals=0;Pr<Je.maxMorphNormals;Pr++)0<=mn["morphNormal"+Pr]&&dt.numSupportedMorphNormals++;Ht.uniformsList=[];var Or=Ht.__webglShader.uniforms,gi=Ht.program.getUniforms();for(var Si in Or){var mi=gi[Si];mi&&Ht.uniformsList.push([Ht.__webglShader.uniforms[Si],mi])}(dt instanceof a.MeshPhongMaterial||dt instanceof a.MeshLambertMaterial||dt instanceof a.MeshStandardMaterial||dt.lights)&&(Ht.lightsHash=Et.hash,Or.ambientLightColor.value=Et.ambient,Or.directionalLights.value=Et.directional,Or.spotLights.value=Et.spot,Or.pointLights.value=Et.point,Or.hemisphereLights.value=Et.hemi,Or.directionalShadowMap.value=Et.directionalShadowMap,Or.directionalShadowMatrix.value=Et.directionalShadowMatrix,Or.spotShadowMap.value=Et.spotShadowMap,Or.spotShadowMatrix.value=Et.spotShadowMatrix,Or.pointShadowMap.value=Et.pointShadowMap,Or.pointShadowMatrix.value=Et.pointShadowMatrix),Ht.hasDynamicUniforms=!1;for(var ii=0,vi=Ht.uniformsList.length;ii<vi;ii++)if(Ht.uniformsList[ii][0].dynamic===!0){Ht.hasDynamicUniforms=!0;break}}(ce,ne,ue),ce.needsUpdate=!1);var Pe,Ue,Ye,tt,ct,st,Xe,At,It=!1,ut=!1,Ut=!1,Lt=Ae.program,yt=Lt.getUniforms(),Tt=Ae.__webglShader.uniforms;if(Lt.id!==et&&(he.useProgram(Lt.program),et=Lt.id,Ut=ut=It=!0),ce.id!==bt&&(bt=ce.id,ut=!0),!It&&Y===vt||(he.uniformMatrix4fv(yt.projectionMatrix,!1,Y.projectionMatrix.elements),gr.logarithmicDepthBuffer&&he.uniform1f(yt.logDepthBufFC,2/(Math.log(Y.far+1)/Math.LN2)),Y!==vt&&(vt=Y,Ut=ut=!0),(ce instanceof a.ShaderMaterial||ce instanceof a.MeshPhongMaterial||ce instanceof a.MeshStandardMaterial||ce.envMap)&&yt.cameraPosition!==void 0&&(Bt.setFromMatrixPosition(Y.matrixWorld),he.uniform3f(yt.cameraPosition,Bt.x,Bt.y,Bt.z)),(ce instanceof a.MeshPhongMaterial||ce instanceof a.MeshLambertMaterial||ce instanceof a.MeshBasicMaterial||ce instanceof a.MeshStandardMaterial||ce instanceof a.ShaderMaterial||ce.skinning)&&yt.viewMatrix!==void 0&&he.uniformMatrix4fv(yt.viewMatrix,!1,Y.matrixWorldInverse.elements),yt.toneMappingExposure!==void 0&&he.uniform1f(yt.toneMappingExposure,Je.toneMappingExposure),yt.toneMappingWhitePoint!==void 0&&he.uniform1f(yt.toneMappingWhitePoint,Je.toneMappingWhitePoint)),ce.skinning)if(ue.bindMatrix&&yt.bindMatrix!==void 0&&he.uniformMatrix4fv(yt.bindMatrix,!1,ue.bindMatrix.elements),ue.bindMatrixInverse&&yt.bindMatrixInverse!==void 0&&he.uniformMatrix4fv(yt.bindMatrixInverse,!1,ue.bindMatrixInverse.elements),gr.floatVertexTextures&&ue.skeleton&&ue.skeleton.useVertexTexture){if(yt.boneTexture!==void 0){var nr=vr();he.uniform1i(yt.boneTexture,nr),Je.setTexture(ue.skeleton.boneTexture,nr)}yt.boneTextureWidth!==void 0&&he.uniform1i(yt.boneTextureWidth,ue.skeleton.boneTextureWidth),yt.boneTextureHeight!==void 0&&he.uniform1i(yt.boneTextureHeight,ue.skeleton.boneTextureHeight)}else ue.skeleton&&ue.skeleton.boneMatrices&&yt.boneGlobalMatrices!==void 0&&he.uniformMatrix4fv(yt.boneGlobalMatrices,!1,ue.skeleton.boneMatrices);return ut&&((ce instanceof a.MeshPhongMaterial||ce instanceof a.MeshLambertMaterial||ce instanceof a.MeshStandardMaterial||ce.lights)&&(st=Ut,(ct=Tt).ambientLightColor.needsUpdate=st,ct.directionalLights.needsUpdate=st,ct.pointLights.needsUpdate=st,ct.spotLights.needsUpdate=st,ct.hemisphereLights.needsUpdate=st),ne&&ce.fog&&(tt=ne,(Ye=Tt).fogColor.value=tt.color,tt instanceof a.Fog?(Ye.fogNear.value=tt.near,Ye.fogFar.value=tt.far):tt instanceof a.FogExp2&&(Ye.fogDensity.value=tt.density)),(ce instanceof a.MeshBasicMaterial||ce instanceof a.MeshLambertMaterial||ce instanceof a.MeshPhongMaterial||ce instanceof a.MeshStandardMaterial)&&function(dt,ot){dt.opacity.value=ot.opacity,dt.diffuse.value=ot.color,ot.emissive&&dt.emissive.value.copy(ot.emissive).multiplyScalar(ot.emissiveIntensity),dt.map.value=ot.map,dt.specularMap.value=ot.specularMap,dt.alphaMap.value=ot.alphaMap,ot.aoMap&&(dt.aoMap.value=ot.aoMap,dt.aoMapIntensity.value=ot.aoMapIntensity);var Xt;if(ot.map?Xt=ot.map:ot.specularMap?Xt=ot.specularMap:ot.displacementMap?Xt=ot.displacementMap:ot.normalMap?Xt=ot.normalMap:ot.bumpMap?Xt=ot.bumpMap:ot.roughnessMap?Xt=ot.roughnessMap:ot.metalnessMap?Xt=ot.metalnessMap:ot.alphaMap?Xt=ot.alphaMap:ot.emissiveMap&&(Xt=ot.emissiveMap),Xt!==void 0){Xt instanceof a.WebGLRenderTarget&&(Xt=Xt.texture);var Ht=Xt.offset,fr=Xt.repeat;dt.offsetRepeat.value.set(Ht.x,Ht.y,fr.x,fr.y)}dt.envMap.value=ot.envMap,dt.flipEnvMap.value=ot.envMap instanceof a.WebGLRenderTargetCube?1:-1,dt.reflectivity.value=ot.reflectivity,dt.refractionRatio.value=ot.refractionRatio}(Tt,ce),ce instanceof a.LineBasicMaterial?Ei(Tt,ce):ce instanceof a.LineDashedMaterial?(Ei(Tt,ce),Ue=ce,(Pe=Tt).dashSize.value=Ue.dashSize,Pe.totalSize.value=Ue.dashSize+Ue.gapSize,Pe.scale.value=Ue.scale):ce instanceof a.PointsMaterial?function(dt,ot){if(dt.diffuse.value=ot.color,dt.opacity.value=ot.opacity,dt.size.value=ot.size*Kt,dt.scale.value=r.clientHeight/2,dt.map.value=ot.map,ot.map!==null){var Xt=ot.map.offset,Ht=ot.map.repeat;dt.offsetRepeat.value.set(Xt.x,Xt.y,Ht.x,Ht.y)}}(Tt,ce):ce instanceof a.MeshLambertMaterial?function(dt,ot){ot.lightMap&&(dt.lightMap.value=ot.lightMap,dt.lightMapIntensity.value=ot.lightMapIntensity),ot.emissiveMap&&(dt.emissiveMap.value=ot.emissiveMap)}(Tt,ce):ce instanceof a.MeshPhongMaterial?function(dt,ot){dt.specular.value=ot.specular,dt.shininess.value=Math.max(ot.shininess,1e-4),ot.lightMap&&(dt.lightMap.value=ot.lightMap,dt.lightMapIntensity.value=ot.lightMapIntensity),ot.emissiveMap&&(dt.emissiveMap.value=ot.emissiveMap),ot.bumpMap&&(dt.bumpMap.value=ot.bumpMap,dt.bumpScale.value=ot.bumpScale),ot.normalMap&&(dt.normalMap.value=ot.normalMap,dt.normalScale.value.copy(ot.normalScale)),ot.displacementMap&&(dt.displacementMap.value=ot.displacementMap,dt.displacementScale.value=ot.displacementScale,dt.displacementBias.value=ot.displacementBias)}(Tt,ce):ce instanceof a.MeshStandardMaterial?function(dt,ot){dt.roughness.value=ot.roughness,dt.metalness.value=ot.metalness,ot.roughnessMap&&(dt.roughnessMap.value=ot.roughnessMap),ot.metalnessMap&&(dt.metalnessMap.value=ot.metalnessMap),ot.lightMap&&(dt.lightMap.value=ot.lightMap,dt.lightMapIntensity.value=ot.lightMapIntensity),ot.emissiveMap&&(dt.emissiveMap.value=ot.emissiveMap),ot.bumpMap&&(dt.bumpMap.value=ot.bumpMap,dt.bumpScale.value=ot.bumpScale),ot.normalMap&&(dt.normalMap.value=ot.normalMap,dt.normalScale.value.copy(ot.normalScale)),ot.displacementMap&&(dt.displacementMap.value=ot.displacementMap,dt.displacementScale.value=ot.displacementScale,dt.displacementBias.value=ot.displacementBias),ot.envMap&&(dt.envMapIntensity.value=ot.envMapIntensity)}(Tt,ce):ce instanceof a.MeshDepthMaterial?(Tt.mNear.value=Y.near,Tt.mFar.value=Y.far,Tt.opacity.value=ce.opacity):ce instanceof a.MeshNormalMaterial&&(Tt.opacity.value=ce.opacity),pi(Ae.uniformsList)),Xe=yt,At=ue,he.uniformMatrix4fv(Xe.modelViewMatrix,!1,At.modelViewMatrix.elements),Xe.normalMatrix&&he.uniformMatrix3fv(Xe.normalMatrix,!1,At.normalMatrix.elements),yt.modelMatrix!==void 0&&he.uniformMatrix4fv(yt.modelMatrix,!1,ue.matrixWorld.elements),Ae.hasDynamicUniforms===!0&&function(dt,ot,Xt){for(var Ht=[],fr=0,Ur=dt.length;fr<Ur;fr++){var Ar=dt[fr][0],Rt=Ar.onUpdateCallback;Rt!==void 0&&(Rt.bind(Ar)(ot,Xt),Ht.push(dt[fr]))}pi(Ht)}(Ae.uniformsList,ue,Y),Lt}function Ei(Y,ne){Y.diffuse.value=ne.color,Y.opacity.value=ne.opacity}function vr(){var Y=Ot;return Ot+=1,Y}function ti(Y,ne,ce,ue){var Ae,Pe;if(ne==="1i")he.uniform1i(ce,ue);else if(ne==="1f")he.uniform1f(ce,ue);else if(ne==="2f")he.uniform2f(ce,ue[0],ue[1]);else if(ne==="3f")he.uniform3f(ce,ue[0],ue[1],ue[2]);else if(ne==="4f")he.uniform4f(ce,ue[0],ue[1],ue[2],ue[3]);else if(ne==="1iv")he.uniform1iv(ce,ue);else if(ne==="3iv")he.uniform3iv(ce,ue);else if(ne==="1fv")he.uniform1fv(ce,ue);else if(ne==="2fv")he.uniform2fv(ce,ue);else if(ne==="3fv")he.uniform3fv(ce,ue);else if(ne==="4fv")he.uniform4fv(ce,ue);else if(ne==="Matrix2fv")he.uniformMatrix2fv(ce,!1,ue);else if(ne==="Matrix3fv")he.uniformMatrix3fv(ce,!1,ue);else if(ne==="Matrix4fv")he.uniformMatrix4fv(ce,!1,ue);else if(ne==="i")he.uniform1i(ce,ue);else if(ne==="f")he.uniform1f(ce,ue);else if(ne==="v2")he.uniform2f(ce,ue.x,ue.y);else if(ne==="v3")he.uniform3f(ce,ue.x,ue.y,ue.z);else if(ne==="v4")he.uniform4f(ce,ue.x,ue.y,ue.z,ue.w);else if(ne==="c")he.uniform3f(ce,ue.r,ue.g,ue.b);else if(ne==="s"){var Ue=Y.properties;for(var Ye in Ue){var tt=Ue[Ye],ct=ce[Ye],st=ue[Ye];ti(tt,tt.type,ct,st)}}else if(ne==="sa"){Ue=Y.properties;for(var Xe=0,At=ue.length;Xe<At;Xe++)for(var Ye in Ue)tt=Ue[Ye],ct=ce[Xe][Ye],st=ue[Xe][Ye],ti(tt,tt.type,ct,st)}else if(ne==="iv1")he.uniform1iv(ce,ue);else if(ne==="iv")he.uniform3iv(ce,ue);else if(ne==="fv1")he.uniform1fv(ce,ue);else if(ne==="fv")he.uniform3fv(ce,ue);else if(ne==="v2v"){Y._array===void 0&&(Y._array=new Float32Array(2*ue.length)),Xe=0;for(var It=0,ut=ue.length;Xe<ut;Xe++,It+=2)Y._array[It+0]=ue[Xe].x,Y._array[It+1]=ue[Xe].y;he.uniform2fv(ce,Y._array)}else if(ne==="v3v"){Y._array===void 0&&(Y._array=new Float32Array(3*ue.length)),Xe=0;var Ut=0;for(ut=ue.length;Xe<ut;Xe++,Ut+=3)Y._array[Ut+0]=ue[Xe].x,Y._array[Ut+1]=ue[Xe].y,Y._array[Ut+2]=ue[Xe].z;he.uniform3fv(ce,Y._array)}else if(ne==="v4v"){Y._array===void 0&&(Y._array=new Float32Array(4*ue.length)),Xe=0;var Lt=0;for(ut=ue.length;Xe<ut;Xe++,Lt+=4)Y._array[Lt+0]=ue[Xe].x,Y._array[Lt+1]=ue[Xe].y,Y._array[Lt+2]=ue[Xe].z,Y._array[Lt+3]=ue[Xe].w;he.uniform4fv(ce,Y._array)}else if(ne==="m2")he.uniformMatrix2fv(ce,!1,ue.elements);else if(ne==="m3")he.uniformMatrix3fv(ce,!1,ue.elements);else if(ne==="m3v"){for(Y._array===void 0&&(Y._array=new Float32Array(9*ue.length)),Xe=0,ut=ue.length;Xe<ut;Xe++)ue[Xe].flattenToArrayOffset(Y._array,9*Xe);he.uniformMatrix3fv(ce,!1,Y._array)}else if(ne==="m4")he.uniformMatrix4fv(ce,!1,ue.elements);else if(ne==="m4v"){for(Y._array===void 0&&(Y._array=new Float32Array(16*ue.length)),Xe=0,ut=ue.length;Xe<ut;Xe++)ue[Xe].flattenToArrayOffset(Y._array,16*Xe);he.uniformMatrix4fv(ce,!1,Y._array)}else if(ne==="t"){if(Ae=ue,Pe=vr(),he.uniform1i(ce,Pe),!Ae)return;Ae instanceof a.CubeTexture||Array.isArray(Ae.image)&&Ae.image.length===6?U(Ae,Pe):Ae instanceof a.WebGLRenderTargetCube?R(Ae.texture,Pe):Ae instanceof a.WebGLRenderTarget?Je.setTexture(Ae.texture,Pe):Je.setTexture(Ae,Pe)}else if(ne==="tv"){for(Y._array===void 0&&(Y._array=[]),Xe=0,ut=Y.value.length;Xe<ut;Xe++)Y._array[Xe]=vr();for(he.uniform1iv(ce,Y._array),Xe=0,ut=Y.value.length;Xe<ut;Xe++)Ae=Y.value[Xe],Pe=Y._array[Xe],Ae&&(Ae instanceof a.CubeTexture||Ae.image instanceof Array&&Ae.image.length===6?U(Ae,Pe):Ae instanceof a.WebGLRenderTarget?Je.setTexture(Ae.texture,Pe):Ae instanceof a.WebGLRenderTargetCube?R(Ae.texture,Pe):Je.setTexture(Ae,Pe))}}function pi(Y){for(var ne=0,ce=Y.length;ne<ce;ne++){var ue=Y[ne][0];ue.needsUpdate!==!1&&ti(ue,ue.type,Y[ne][1],ue.value)}}function ri(Y,ne,ce){var ue;if(ce?(he.texParameteri(Y,he.TEXTURE_WRAP_S,de(ne.wrapS)),he.texParameteri(Y,he.TEXTURE_WRAP_T,de(ne.wrapT)),he.texParameteri(Y,he.TEXTURE_MAG_FILTER,de(ne.magFilter)),he.texParameteri(Y,he.TEXTURE_MIN_FILTER,de(ne.minFilter))):(he.texParameteri(Y,he.TEXTURE_WRAP_S,he.CLAMP_TO_EDGE),he.texParameteri(Y,he.TEXTURE_WRAP_T,he.CLAMP_TO_EDGE),ne.wrapS!==a.ClampToEdgeWrapping||(ne.wrapT,a.ClampToEdgeWrapping),he.texParameteri(Y,he.TEXTURE_MAG_FILTER,Q(ne.magFilter)),he.texParameteri(Y,he.TEXTURE_MIN_FILTER,Q(ne.minFilter)),ne.minFilter!==a.NearestFilter&&(ne.minFilter,a.LinearFilter)),ue=xt.get("EXT_texture_filter_anisotropic")){if(ne.type===a.FloatType&&xt.get("OES_texture_float_linear")===null||ne.type===a.HalfFloatType&&xt.get("OES_texture_half_float_linear")===null)return;(1<ne.anisotropy||Ft.get(ne).__currentAnisotropy)&&(he.texParameterf(Y,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ne.anisotropy,Je.getMaxAnisotropy())),Ft.get(ne).__currentAnisotropy=ne.anisotropy)}}function Ti(Y,ne,ce){Y.__webglInit===void 0&&(Y.__webglInit=!0,ne.addEventListener("dispose",di),Y.__webglTexture=he.createTexture(),Wt.textures++),pt.activeTexture(he.TEXTURE0+ce),pt.bindTexture(he.TEXTURE_2D,Y.__webglTexture),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,ne.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,ne.unpackAlignment);var ue,Ae=ie(ne.image,gr.maxTextureSize);((ue=ne).wrapS!==a.ClampToEdgeWrapping||ue.wrapT!==a.ClampToEdgeWrapping||ue.minFilter!==a.NearestFilter&&ue.minFilter!==a.LinearFilter)&&$(Ae)===!1&&(Ae=function(At){if(At instanceof HTMLImageElement||At instanceof HTMLCanvasElement){var It=document.createElement("canvas");return It.width=a.Math.nearestPowerOfTwo(At.width),It.height=a.Math.nearestPowerOfTwo(At.height),It.getContext("2d").drawImage(At,0,0,It.width,It.height),It}return At}(Ae));var Pe=$(Ae),Ue=de(ne.format),Ye=de(ne.type);ri(he.TEXTURE_2D,ne,Pe);var tt,ct=ne.mipmaps;if(ne instanceof a.DataTexture)if(0<ct.length&&Pe){for(var st=0,Xe=ct.length;st<Xe;st++)tt=ct[st],pt.texImage2D(he.TEXTURE_2D,st,Ue,tt.width,tt.height,0,Ue,Ye,tt.data);ne.generateMipmaps=!1}else pt.texImage2D(he.TEXTURE_2D,0,Ue,Ae.width,Ae.height,0,Ue,Ye,Ae.data);else if(ne instanceof a.CompressedTexture)for(st=0,Xe=ct.length;st<Xe;st++)tt=ct[st],ne.format!==a.RGBAFormat&&ne.format!==a.RGBFormat?-1<pt.getCompressedTextureFormats().indexOf(Ue)&&pt.compressedTexImage2D(he.TEXTURE_2D,st,Ue,tt.width,tt.height,0,tt.data):pt.texImage2D(he.TEXTURE_2D,st,Ue,tt.width,tt.height,0,Ue,Ye,tt.data);else if(0<ct.length&&Pe){for(st=0,Xe=ct.length;st<Xe;st++)tt=ct[st],pt.texImage2D(he.TEXTURE_2D,st,Ue,Ue,Ye,tt);ne.generateMipmaps=!1}else pt.texImage2D(he.TEXTURE_2D,0,Ue,Ue,Ye,Ae);ne.generateMipmaps&&Pe&&he.generateMipmap(he.TEXTURE_2D),Y.__version=ne.version,ne.onUpdate&&ne.onUpdate(ne)}function ie(Y,ne){if(Y.width>ne||Y.height>ne){var ce=ne/Math.max(Y.width,Y.height),ue=document.createElement("canvas");return ue.width=Math.floor(Y.width*ce),ue.height=Math.floor(Y.height*ce),ue.getContext("2d").drawImage(Y,0,0,Y.width,Y.height,0,0,ue.width,ue.height),ue}return Y}function $(Y){return a.Math.isPowerOfTwo(Y.width)&&a.Math.isPowerOfTwo(Y.height)}function U(Y,ne){var ce=Ft.get(Y);if(Y.image.length===6)if(0<Y.version&&ce.__version!==Y.version){ce.__image__webglTextureCube||(Y.addEventListener("dispose",di),ce.__image__webglTextureCube=he.createTexture(),Wt.textures++),pt.activeTexture(he.TEXTURE0+ne),pt.bindTexture(he.TEXTURE_CUBE_MAP,ce.__image__webglTextureCube),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,Y.flipY);for(var ue=Y instanceof a.CompressedTexture,Ae=Y.image[0]instanceof a.DataTexture,Pe=[],Ue=0;Ue<6;Ue++)!Je.autoScaleCubemaps||ue||Ae?Pe[Ue]=Ae?Y.image[Ue].image:Y.image[Ue]:Pe[Ue]=ie(Y.image[Ue],gr.maxCubemapSize);var Ye=$(Pe[0]),tt=de(Y.format),ct=de(Y.type);for(ri(he.TEXTURE_CUBE_MAP,Y,Ye),Ue=0;Ue<6;Ue++)if(ue)for(var st,Xe=Pe[Ue].mipmaps,At=0,It=Xe.length;At<It;At++)st=Xe[At],Y.format!==a.RGBAFormat&&Y.format!==a.RGBFormat?-1<pt.getCompressedTextureFormats().indexOf(tt)&&pt.compressedTexImage2D(he.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,At,tt,st.width,st.height,0,st.data):pt.texImage2D(he.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,At,tt,st.width,st.height,0,tt,ct,st.data);else Ae?pt.texImage2D(he.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,tt,Pe[Ue].width,Pe[Ue].height,0,tt,ct,Pe[Ue].data):pt.texImage2D(he.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,tt,tt,ct,Pe[Ue]);Y.generateMipmaps&&Ye&&he.generateMipmap(he.TEXTURE_CUBE_MAP),ce.__version=Y.version,Y.onUpdate&&Y.onUpdate(Y)}else pt.activeTexture(he.TEXTURE0+ne),pt.bindTexture(he.TEXTURE_CUBE_MAP,ce.__image__webglTextureCube)}function R(Y,ne){pt.activeTexture(he.TEXTURE0+ne),pt.bindTexture(he.TEXTURE_CUBE_MAP,Ft.get(Y).__webglTexture)}function n(Y,ne,ce,ue){var Ae=de(ne.texture.format),Pe=de(ne.texture.type);pt.texImage2D(ue,0,Ae,ne.width,ne.height,0,Ae,Pe,null),he.bindFramebuffer(he.FRAMEBUFFER,Y),he.framebufferTexture2D(he.FRAMEBUFFER,ce,ue,Ft.get(ne.texture).__webglTexture,0),he.bindFramebuffer(he.FRAMEBUFFER,null)}function _(Y,ne){he.bindRenderbuffer(he.RENDERBUFFER,Y),ne.depthBuffer&&!ne.stencilBuffer?(he.renderbufferStorage(he.RENDERBUFFER,he.DEPTH_COMPONENT16,ne.width,ne.height),he.framebufferRenderbuffer(he.FRAMEBUFFER,he.DEPTH_ATTACHMENT,he.RENDERBUFFER,Y)):ne.depthBuffer&&ne.stencilBuffer?(he.renderbufferStorage(he.RENDERBUFFER,he.DEPTH_STENCIL,ne.width,ne.height),he.framebufferRenderbuffer(he.FRAMEBUFFER,he.DEPTH_STENCIL_ATTACHMENT,he.RENDERBUFFER,Y)):he.renderbufferStorage(he.RENDERBUFFER,he.RGBA4,ne.width,ne.height),he.bindRenderbuffer(he.RENDERBUFFER,null)}function z(Y){var ne=Ft.get(Y),ce=Ft.get(Y.texture);Y.addEventListener("dispose",hi),ce.__webglTexture=he.createTexture(),Wt.textures++;var ue=Y instanceof a.WebGLRenderTargetCube,Ae=a.Math.isPowerOfTwo(Y.width)&&a.Math.isPowerOfTwo(Y.height);if(ue){ne.__webglFramebuffer=[];for(var Pe=0;Pe<6;Pe++)ne.__webglFramebuffer[Pe]=he.createFramebuffer()}else ne.__webglFramebuffer=he.createFramebuffer();if(ue){for(pt.bindTexture(he.TEXTURE_CUBE_MAP,ce.__webglTexture),ri(he.TEXTURE_CUBE_MAP,Y.texture,Ae),Pe=0;Pe<6;Pe++)n(ne.__webglFramebuffer[Pe],Y,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+Pe);Y.texture.generateMipmaps&&Ae&&he.generateMipmap(he.TEXTURE_CUBE_MAP),pt.bindTexture(he.TEXTURE_CUBE_MAP,null)}else pt.bindTexture(he.TEXTURE_2D,ce.__webglTexture),ri(he.TEXTURE_2D,Y.texture,Ae),n(ne.__webglFramebuffer,Y,he.COLOR_ATTACHMENT0,he.TEXTURE_2D),Y.texture.generateMipmaps&&Ae&&he.generateMipmap(he.TEXTURE_2D),pt.bindTexture(he.TEXTURE_2D,null);Y.depthBuffer&&function(Ue){var Ye=Ft.get(Ue);if(Ue instanceof a.WebGLRenderTargetCube){Ye.__webglDepthbuffer=[];for(var tt=0;tt<6;tt++)he.bindFramebuffer(he.FRAMEBUFFER,Ye.__webglFramebuffer[tt]),Ye.__webglDepthbuffer[tt]=he.createRenderbuffer(),_(Ye.__webglDepthbuffer[tt],Ue)}else he.bindFramebuffer(he.FRAMEBUFFER,Ye.__webglFramebuffer),Ye.__webglDepthbuffer=he.createRenderbuffer(),_(Ye.__webglDepthbuffer,Ue);he.bindFramebuffer(he.FRAMEBUFFER,null)}(Y)}function Q(Y){return Y===a.NearestFilter||Y===a.NearestMipMapNearestFilter||Y===a.NearestMipMapLinearFilter?he.NEAREST:he.LINEAR}function de(Y){var ne;if(Y===a.RepeatWrapping)return he.REPEAT;if(Y===a.ClampToEdgeWrapping)return he.CLAMP_TO_EDGE;if(Y===a.MirroredRepeatWrapping)return he.MIRRORED_REPEAT;if(Y===a.NearestFilter)return he.NEAREST;if(Y===a.NearestMipMapNearestFilter)return he.NEAREST_MIPMAP_NEAREST;if(Y===a.NearestMipMapLinearFilter)return he.NEAREST_MIPMAP_LINEAR;if(Y===a.LinearFilter)return he.LINEAR;if(Y===a.LinearMipMapNearestFilter)return he.LINEAR_MIPMAP_NEAREST;if(Y===a.LinearMipMapLinearFilter)return he.LINEAR_MIPMAP_LINEAR;if(Y===a.UnsignedByteType)return he.UNSIGNED_BYTE;if(Y===a.UnsignedShort4444Type)return he.UNSIGNED_SHORT_4_4_4_4;if(Y===a.UnsignedShort5551Type)return he.UNSIGNED_SHORT_5_5_5_1;if(Y===a.UnsignedShort565Type)return he.UNSIGNED_SHORT_5_6_5;if(Y===a.ByteType)return he.BYTE;if(Y===a.ShortType)return he.SHORT;if(Y===a.UnsignedShortType)return he.UNSIGNED_SHORT;if(Y===a.IntType)return he.INT;if(Y===a.UnsignedIntType)return he.UNSIGNED_INT;if(Y===a.FloatType)return he.FLOAT;if((ne=xt.get("OES_texture_half_float"))!==null&&Y===a.HalfFloatType)return ne.HALF_FLOAT_OES;if(Y===a.AlphaFormat)return he.ALPHA;if(Y===a.RGBFormat)return he.RGB;if(Y===a.RGBAFormat)return he.RGBA;if(Y===a.LuminanceFormat)return he.LUMINANCE;if(Y===a.LuminanceAlphaFormat)return he.LUMINANCE_ALPHA;if(Y===a.AddEquation)return he.FUNC_ADD;if(Y===a.SubtractEquation)return he.FUNC_SUBTRACT;if(Y===a.ReverseSubtractEquation)return he.FUNC_REVERSE_SUBTRACT;if(Y===a.ZeroFactor)return he.ZERO;if(Y===a.OneFactor)return he.ONE;if(Y===a.SrcColorFactor)return he.SRC_COLOR;if(Y===a.OneMinusSrcColorFactor)return he.ONE_MINUS_SRC_COLOR;if(Y===a.SrcAlphaFactor)return he.SRC_ALPHA;if(Y===a.OneMinusSrcAlphaFactor)return he.ONE_MINUS_SRC_ALPHA;if(Y===a.DstAlphaFactor)return he.DST_ALPHA;if(Y===a.OneMinusDstAlphaFactor)return he.ONE_MINUS_DST_ALPHA;if(Y===a.DstColorFactor)return he.DST_COLOR;if(Y===a.OneMinusDstColorFactor)return he.ONE_MINUS_DST_COLOR;if(Y===a.SrcAlphaSaturateFactor)return he.SRC_ALPHA_SATURATE;if((ne=xt.get("WEBGL_compressed_texture_s3tc"))!==null){if(Y===a.RGB_S3TC_DXT1_Format)return ne.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Y===a.RGBA_S3TC_DXT1_Format)return ne.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Y===a.RGBA_S3TC_DXT3_Format)return ne.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Y===a.RGBA_S3TC_DXT5_Format)return ne.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((ne=xt.get("WEBGL_compressed_texture_pvrtc"))!==null){if(Y===a.RGB_PVRTC_4BPPV1_Format)return ne.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Y===a.RGB_PVRTC_2BPPV1_Format)return ne.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Y===a.RGBA_PVRTC_4BPPV1_Format)return ne.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Y===a.RGBA_PVRTC_2BPPV1_Format)return ne.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if((ne=xt.get("WEBGL_compressed_texture_etc1"))!==null&&Y===a.RGB_ETC1_Format)return ne.COMPRESSED_RGB_ETC1_WEBGL;if((ne=xt.get("EXT_blend_minmax"))!==null){if(Y===a.MinEquation)return ne.MIN_EXT;if(Y===a.MaxEquation)return ne.MAX_EXT}return 0}this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){xt.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){if(Wr!==void 0)return Wr;var Y=xt.get("EXT_texture_filter_anisotropic");return Wr=Y!==null?he.getParameter(Y.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},this.getPrecision=function(){return gr.precision},this.getPixelRatio=function(){return Kt},this.setPixelRatio=function(Y){Y!==void 0&&(Kt=Y,this.setSize(Dt.z,Dt.w,!1))},this.getSize=function(){return{width:Vt,height:Jt}},this.setSize=function(Y,ne,ce){Vt=Y,Jt=ne,r.width=Y*Kt,r.height=ne*Kt,ce!==!1&&(r.style.width=Y+"px",r.style.height=ne+"px"),this.setViewport(0,0,Y,ne)},this.setViewport=function(Y,ne,ce,ue){pt.viewport(Dt.set(Y,ne,ce,ue))},this.setScissor=function(Y,ne,ce,ue){pt.scissor($t.set(Y,ne,ce,ue))},this.setScissorTest=function(Y){pt.setScissorTest(ir=Y)},this.getClearColor=function(){return Pt},this.setClearColor=function(Y,ne){Pt.set(Y),or=ne!==void 0?ne:1,Vn(Pt.r,Pt.g,Pt.b,or)},this.getClearAlpha=function(){return or},this.setClearAlpha=function(Y){or=Y,Vn(Pt.r,Pt.g,Pt.b,or)},this.clear=function(Y,ne,ce){var ue=0;Y!==void 0&&!Y||(ue|=he.COLOR_BUFFER_BIT),ne!==void 0&&!ne||(ue|=he.DEPTH_BUFFER_BIT),ce!==void 0&&!ce||(ue|=he.STENCIL_BUFFER_BIT),he.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Y,ne,ce,ue){this.setRenderTarget(Y),this.clear(ne,ce,ue)},this.resetGLState=zn,this.dispose=function(){r.removeEventListener("webglcontextlost",qn,!1)},this.renderBufferImmediate=function(Y,ne,ce){pt.initAttributes();var ue=Ft.get(Y);Y.hasPositions&&!ue.position&&(ue.position=he.createBuffer()),Y.hasNormals&&!ue.normal&&(ue.normal=he.createBuffer()),Y.hasUvs&&!ue.uv&&(ue.uv=he.createBuffer()),Y.hasColors&&!ue.color&&(ue.color=he.createBuffer());var Ae=ne.getAttributes();if(Y.hasPositions&&(he.bindBuffer(he.ARRAY_BUFFER,ue.position),he.bufferData(he.ARRAY_BUFFER,Y.positionArray,he.DYNAMIC_DRAW),pt.enableAttribute(Ae.position),he.vertexAttribPointer(Ae.position,3,he.FLOAT,!1,0,0)),Y.hasNormals){if(he.bindBuffer(he.ARRAY_BUFFER,ue.normal),ce.type!=="MeshPhongMaterial"&&ce.type!=="MeshStandardMaterial"&&ce.shading===a.FlatShading)for(var Pe=0,Ue=3*Y.count;Pe<Ue;Pe+=9){var Ye=Y.normalArray,tt=(Ye[Pe+0]+Ye[Pe+3]+Ye[Pe+6])/3,ct=(Ye[Pe+1]+Ye[Pe+4]+Ye[Pe+7])/3,st=(Ye[Pe+2]+Ye[Pe+5]+Ye[Pe+8])/3;Ye[Pe+0]=tt,Ye[Pe+1]=ct,Ye[Pe+2]=st,Ye[Pe+3]=tt,Ye[Pe+4]=ct,Ye[Pe+5]=st,Ye[Pe+6]=tt,Ye[Pe+7]=ct,Ye[Pe+8]=st}he.bufferData(he.ARRAY_BUFFER,Y.normalArray,he.DYNAMIC_DRAW),pt.enableAttribute(Ae.normal),he.vertexAttribPointer(Ae.normal,3,he.FLOAT,!1,0,0)}Y.hasUvs&&ce.map&&(he.bindBuffer(he.ARRAY_BUFFER,ue.uv),he.bufferData(he.ARRAY_BUFFER,Y.uvArray,he.DYNAMIC_DRAW),pt.enableAttribute(Ae.uv),he.vertexAttribPointer(Ae.uv,2,he.FLOAT,!1,0,0)),Y.hasColors&&ce.vertexColors!==a.NoColors&&(he.bindBuffer(he.ARRAY_BUFFER,ue.color),he.bufferData(he.ARRAY_BUFFER,Y.colorArray,he.DYNAMIC_DRAW),pt.enableAttribute(Ae.color),he.vertexAttribPointer(Ae.color,3,he.FLOAT,!1,0,0)),pt.disableUnusedAttributes(),he.drawArrays(he.TRIANGLES,0,Y.count),Y.count=0},this.renderBufferDirect=function(Y,ne,ce,ue,Ae,Pe){_i(ue);var Ue=Ai(Y,ne,ue,Ae),Ye=!1,tt=ce.id+"_"+Ue.id+"_"+ue.wireframe;tt!==it&&(it=tt,Ye=!0);var ct=Ae.morphTargetInfluences;if(ct!==void 0){for(var st=[],Xe=0,At=ct.length;Xe<At;Xe++){var It=ct[Xe];st.push([It,Xe])}st.sort(xi),8<st.length&&(st.length=8);var ut=ce.morphAttributes;for(Xe=0,At=st.length;Xe<At;Xe++)if(It=st[Xe],De[Xe]=It[0],It[0]!==0){var Ut=It[1];ue.morphTargets===!0&&ut.position&&ce.addAttribute("morphTarget"+Xe,ut.position[Ut]),ue.morphNormals===!0&&ut.normal&&ce.addAttribute("morphNormal"+Xe,ut.normal[Ut])}else ue.morphTargets===!0&&ce.removeAttribute("morphTarget"+Xe),ue.morphNormals===!0&&ce.removeAttribute("morphNormal"+Xe);var Lt=Ue.getUniforms();Lt.morphTargetInfluences!==null&&he.uniform1fv(Lt.morphTargetInfluences,De),Ye=!0}Ut=ce.index;var yt,Tt=ce.attributes.position;ue.wireframe===!0&&(Ut=Tr.getWireframeAttribute(ce)),Ut!==null?(yt=Un).setIndex(Ut):yt=gn,Ye&&(function(ni,mn,Pr,Or){var gi;if(!(Pr instanceof a.InstancedBufferGeometry&&(gi=xt.get("ANGLE_instanced_arrays"))===null)){Or===void 0&&(Or=0),pt.initAttributes();var Si=Pr.attributes,mi=mn.getAttributes(),ii=ni.defaultAttributeValues;for(var vi in mi){var nn=mi[vi];if(0<=nn){var vn=Si[vi];if(vn!==void 0){var Ri=vn.itemSize,Mi=Tr.getAttributeBuffer(vn);if(vn instanceof a.InterleavedBufferAttribute){var Hn=vn.data,Pi=Hn.stride,Fi=vn.offset;Hn instanceof a.InstancedInterleavedBuffer?(pt.enableAttributeAndDivisor(nn,Hn.meshPerAttribute,gi),Pr.maxInstancedCount===void 0&&(Pr.maxInstancedCount=Hn.meshPerAttribute*Hn.count)):pt.enableAttribute(nn),he.bindBuffer(he.ARRAY_BUFFER,Mi),he.vertexAttribPointer(nn,Ri,he.FLOAT,!1,Pi*Hn.array.BYTES_PER_ELEMENT,(Or*Pi+Fi)*Hn.array.BYTES_PER_ELEMENT)}else vn instanceof a.InstancedBufferAttribute?(pt.enableAttributeAndDivisor(nn,vn.meshPerAttribute,gi),Pr.maxInstancedCount===void 0&&(Pr.maxInstancedCount=vn.meshPerAttribute*vn.count)):pt.enableAttribute(nn),he.bindBuffer(he.ARRAY_BUFFER,Mi),he.vertexAttribPointer(nn,Ri,he.FLOAT,!1,0,Or*Ri*4)}else if(ii!==void 0){var ai=ii[vi];if(ai!==void 0)switch(ai.length){case 2:he.vertexAttrib2fv(nn,ai);break;case 3:he.vertexAttrib3fv(nn,ai);break;case 4:he.vertexAttrib4fv(nn,ai);break;default:he.vertexAttrib1fv(nn,ai)}}}}pt.disableUnusedAttributes()}}(ue,Ue,ce),Ut!==null&&he.bindBuffer(he.ELEMENT_ARRAY_BUFFER,Tr.getAttributeBuffer(Ut)));var nr=1/0;Ut!==null?nr=Ut.count:Tt!==void 0&&(nr=Tt.count);var dt=ce.drawRange.start,ot=ce.drawRange.count,Xt=Pe!==null?Pe.start:0,Ht=Pe!==null?Pe.count:1/0,fr=Math.max(0,dt,Xt),Ur=Math.min(0+nr,dt+ot,Xt+Ht)-1,Ar=Math.max(0,Ur-fr+1);if(Ae instanceof a.Mesh)if(ue.wireframe===!0)pt.setLineWidth(ue.wireframeLinewidth*Gn()),yt.setMode(he.LINES);else switch(Ae.drawMode){case a.TrianglesDrawMode:yt.setMode(he.TRIANGLES);break;case a.TriangleStripDrawMode:yt.setMode(he.TRIANGLE_STRIP);break;case a.TriangleFanDrawMode:yt.setMode(he.TRIANGLE_FAN)}else if(Ae instanceof a.Line){var Rt=ue.linewidth;Rt===void 0&&(Rt=1),pt.setLineWidth(Rt*Gn()),Ae instanceof a.LineSegments?yt.setMode(he.LINES):yt.setMode(he.LINE_STRIP)}else Ae instanceof a.Points&&yt.setMode(he.POINTS);ce instanceof a.InstancedBufferGeometry?0<ce.maxInstancedCount&&yt.renderInstances(ce,fr,Ar):yt.render(fr,Ar)},this.render=function(Y,ne,ce,ue){if(ne instanceof a.Camera){var Ae,Pe,Ue,Ye=Y.fog;if(it="",bt=-1,!(vt=null)===Y.autoUpdate&&Y.updateMatrixWorld(),ne.parent===null&&ne.updateMatrixWorld(),ne.matrixWorldInverse.getInverse(ne.matrixWorld),zt.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),lr.setFromMatrix(zt),me.length=0,Ne=Ee=-1,Fe.length=0,Ve.length=0,function st(Xe,At){if(Xe.visible!==!1){if(Xe.layers.test(At.layers)){if(Xe instanceof a.Light)me.push(Xe);else if(Xe instanceof a.Sprite)Xe.frustumCulled!==!1&&lr.intersectsObject(Xe)!==!0||Fe.push(Xe);else if(Xe instanceof a.LensFlare)Ve.push(Xe);else if(Xe instanceof a.ImmediateRenderObject)Je.sortObjects===!0&&(Bt.setFromMatrixPosition(Xe.matrixWorld),Bt.applyProjection(zt)),fi(Xe,null,Xe.material,Bt.z,null);else if((Xe instanceof a.Mesh||Xe instanceof a.Line||Xe instanceof a.Points)&&(Xe instanceof a.SkinnedMesh&&Xe.skeleton.update(),Xe.frustumCulled===!1||lr.intersectsObject(Xe)===!0)){var It=Xe.material;if(It.visible===!0){Je.sortObjects===!0&&(Bt.setFromMatrixPosition(Xe.matrixWorld),Bt.applyProjection(zt));var ut=Tr.update(Xe);if(It instanceof a.MultiMaterial)for(var Ut=ut.groups,Lt=It.materials,yt=0,Tt=Ut.length;yt<Tt;yt++){var nr=Ut[yt],dt=Lt[nr.materialIndex];dt.visible===!0&&fi(Xe,ut,dt,Bt.z,nr)}else fi(Xe,ut,It,Bt.z,null)}}}for(var ot=Xe.children,yt=0,Tt=ot.length;yt<Tt;yt++)st(ot[yt],At)}}(Y,ne),pe.length=Ee+1,xe.length=Ne+1,Je.sortObjects===!0&&(pe.sort(Li),xe.sort(Ci)),function(st,Xe){var At,It,ut,Ut,Lt,yt,Tt=0,nr=0,dt=0,ot=Xe.matrixWorldInverse,Xt=0,Ht=0,fr=0,Ur=0,Ar=0;for(Et.shadowsPointLight=0,At=0,It=st.length;At<It;At++)if(ut=st[At],Ut=ut.color,Lt=ut.intensity,yt=ut.distance,ut instanceof a.AmbientLight)Tt+=Ut.r*Lt,nr+=Ut.g*Lt,dt+=Ut.b*Lt;else if(ut instanceof a.DirectionalLight)(Rt=Mr.get(ut)).color.copy(ut.color).multiplyScalar(ut.intensity),Rt.direction.setFromMatrixPosition(ut.matrixWorld),Bt.setFromMatrixPosition(ut.target.matrixWorld),Rt.direction.sub(Bt),Rt.direction.transformDirection(ot),Rt.shadow=ut.castShadow,ut.castShadow&&(Rt.shadowBias=ut.shadow.bias,Rt.shadowRadius=ut.shadow.radius,Rt.shadowMapSize=ut.shadow.mapSize,Et.shadows[Ar++]=ut),Et.directionalShadowMap[Xt]=ut.shadow.map,Et.directionalShadowMatrix[Xt]=ut.shadow.matrix,Et.directional[Xt++]=Rt;else if(ut instanceof a.SpotLight)(Rt=Mr.get(ut)).position.setFromMatrixPosition(ut.matrixWorld),Rt.position.applyMatrix4(ot),Rt.color.copy(Ut).multiplyScalar(Lt),Rt.distance=yt,Rt.direction.setFromMatrixPosition(ut.matrixWorld),Bt.setFromMatrixPosition(ut.target.matrixWorld),Rt.direction.sub(Bt),Rt.direction.transformDirection(ot),Rt.coneCos=Math.cos(ut.angle),Rt.penumbraCos=Math.cos(ut.angle*(1-ut.penumbra)),Rt.decay=ut.distance===0?0:ut.decay,Rt.shadow=ut.castShadow,ut.castShadow&&(Rt.shadowBias=ut.shadow.bias,Rt.shadowRadius=ut.shadow.radius,Rt.shadowMapSize=ut.shadow.mapSize,Et.shadows[Ar++]=ut),Et.spotShadowMap[fr]=ut.shadow.map,Et.spotShadowMatrix[fr]=ut.shadow.matrix,Et.spot[fr++]=Rt;else if(ut instanceof a.PointLight)(Rt=Mr.get(ut)).position.setFromMatrixPosition(ut.matrixWorld),Rt.position.applyMatrix4(ot),Rt.color.copy(ut.color).multiplyScalar(ut.intensity),Rt.distance=ut.distance,Rt.decay=ut.distance===0?0:ut.decay,Rt.shadow=ut.castShadow,ut.castShadow&&(Rt.shadowBias=ut.shadow.bias,Rt.shadowRadius=ut.shadow.radius,Rt.shadowMapSize=ut.shadow.mapSize,Et.shadows[Ar++]=ut),Et.pointShadowMap[Ht]=ut.shadow.map,Et.pointShadowMatrix[Ht]===void 0&&(Et.pointShadowMatrix[Ht]=new a.Matrix4),Bt.setFromMatrixPosition(ut.matrixWorld).negate(),Et.pointShadowMatrix[Ht].identity().setPosition(Bt),Et.point[Ht++]=Rt;else if(ut instanceof a.HemisphereLight){var Rt;(Rt=Mr.get(ut)).direction.setFromMatrixPosition(ut.matrixWorld),Rt.direction.transformDirection(ot),Rt.direction.normalize(),Rt.skyColor.copy(ut.color).multiplyScalar(Lt),Rt.groundColor.copy(ut.groundColor).multiplyScalar(Lt),Et.hemi[Ur++]=Rt}Et.ambient[0]=Tt,Et.ambient[1]=nr,Et.ambient[2]=dt,Et.directional.length=Xt,Et.spot.length=fr,Et.point.length=Ht,Et.hemi.length=Ur,Et.shadows.length=Ar,Et.hash=Xt+","+Ht+","+fr+","+Ur+","+Ar}(me,ne),Yn.render(Y,ne),He.calls=0,He.vertices=0,He.faces=0,void(He.points=0)===ce&&(ce=null),this.setRenderTarget(ce),(this.autoClear||ue)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),Y.overrideMaterial){var tt=Y.overrideMaterial;ei(pe,ne,Ye,tt),ei(xe,ne,Ye,tt)}else pt.setBlending(a.NoBlending),ei(pe,ne,Ye),ei(xe,ne,Ye);if(Kn.render(Y,ne),ci.render(Y,ne,wt),ce){var ct=ce.texture;ct.generateMipmaps&&$(ce)&&ct.minFilter!==a.NearestFilter&&ct.minFilter!==a.LinearFilter&&(Pe=(Ae=ce)instanceof a.WebGLRenderTargetCube?he.TEXTURE_CUBE_MAP:he.TEXTURE_2D,Ue=Ft.get(Ae.texture).__webglTexture,pt.bindTexture(Pe,Ue),he.generateMipmap(Pe),pt.bindTexture(Pe,null))}pt.setDepthTest(!0),pt.setDepthWrite(!0),pt.setColorWrite(!0)}},this.setFaceCulling=function(Y,ne){Y===a.CullFaceNone?pt.disable(he.CULL_FACE):(ne===a.FrontFaceDirectionCW?he.frontFace(he.CW):he.frontFace(he.CCW),Y===a.CullFaceBack?he.cullFace(he.BACK):Y===a.CullFaceFront?he.cullFace(he.FRONT):he.cullFace(he.FRONT_AND_BACK),pt.enable(he.CULL_FACE))},this.setTexture=function(Y,ne){var ce=Ft.get(Y);if(0<Y.version&&ce.__version!==Y.version){var ue=Y.image;if(ue===void 0||ue.complete===!1)return;Ti(ce,Y,ne)}else pt.activeTexture(he.TEXTURE0+ne),pt.bindTexture(he.TEXTURE_2D,ce.__webglTexture)},this.getCurrentRenderTarget=function(){return rt},this.setRenderTarget=function(Y){(rt=Y)&&Ft.get(Y).__webglFramebuffer===void 0&&z(Y);var ne,ce=Y instanceof a.WebGLRenderTargetCube;if(Y){var ue=Ft.get(Y);ne=ce?ue.__webglFramebuffer[Y.activeCubeFace]:ue.__webglFramebuffer,kt.copy(Y.scissor),Nt=Y.scissorTest,wt.copy(Y.viewport)}else ne=null,kt.copy($t).multiplyScalar(Kt),Nt=ir,wt.copy(Dt).multiplyScalar(Kt);if(ht!==ne&&(he.bindFramebuffer(he.FRAMEBUFFER,ne),ht=ne),pt.scissor(kt),pt.setScissorTest(Nt),pt.viewport(wt),ce){var Ae=Ft.get(Y.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+Y.activeCubeFace,Ae.__webglTexture,Y.activeMipMapLevel)}},this.readRenderTargetPixels=function(Y,ne,ce,ue,Ae,Pe){if(Y instanceof a.WebGLRenderTarget){var Ue=Ft.get(Y).__webglFramebuffer;if(Ue){var Ye=!1;Ue!==ht&&(he.bindFramebuffer(he.FRAMEBUFFER,Ue),Ye=!0);try{var tt=Y.texture;if(tt.format!==a.RGBAFormat&&de(tt.format)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_FORMAT)||!(tt.type===a.UnsignedByteType||de(tt.type)===he.getParameter(he.IMPLEMENTATION_COLOR_READ_TYPE)||tt.type===a.FloatType&&xt.get("WEBGL_color_buffer_float")||tt.type===a.HalfFloatType&&xt.get("EXT_color_buffer_half_float")))return;he.checkFramebufferStatus(he.FRAMEBUFFER)===he.FRAMEBUFFER_COMPLETE&&he.readPixels(ne,ce,ue,Ae,de(tt.format),de(tt.type),Pe)}finally{Ye&&he.bindFramebuffer(he.FRAMEBUFFER,ht)}}}}},a.WebGLExtensions=function(e){var r={};this.get=function(i){if(r[i]!==void 0)return r[i];var v;switch(i){case"EXT_texture_filter_anisotropic":v=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":v=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":v=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":v=e.getExtension("WEBGL_compressed_texture_etc1");break;default:v=e.getExtension(i)}return r[i]=v}},a.WebGLCapabilities=function(e,r,i){function v(W){if(W==="highp"){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return"highp";W="mediump"}return W==="mediump"&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=v,this.precision=i.precision!==void 0?i.precision:"highp",this.logarithmicDepthBuffer=i.logarithmicDepthBuffer!==void 0&&i.logarithmicDepthBuffer,this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxCubemapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=e.getParameter(e.MAX_VARYING_VECTORS),this.maxFragmentUniforms=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=0<this.maxVertexTextures,this.floatFragmentTextures=!!r.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var I=v(this.precision);I!==this.precision&&(this.precision=I),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!r.get("EXT_frag_depth"))},a.WebGLProperties=function(){var e={};this.get=function(r){var i=r.uuid,v=e[i];return v===void 0&&(v={},e[i]=v),v},this.delete=function(r){delete e[r.uuid]},this.clear=function(){e={}}},a.WebGLLights=function(){var e={};this.get=function(r){if(e[r.id]!==void 0)return e[r.id];var i;switch(r.type){case"DirectionalLight":i={direction:new a.Vector3,color:new a.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a.Vector2};break;case"SpotLight":i={position:new a.Vector3,direction:new a.Vector3,color:new a.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a.Vector2};break;case"PointLight":i={position:new a.Vector3,color:new a.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a.Vector2};break;case"HemisphereLight":i={direction:new a.Vector3,skyColor:new a.Color,groundColor:new a.Color}}return e[r.id]=i}},a.WebGLState=function(e,r,i){var v=this,I=new a.Vector4,W=new Uint8Array(16),q=new Uint8Array(16),fe=new Uint8Array(16),ae={},me=null,pe=null,Ee=null,xe=null,Ne=null,De=null,Fe=null,Ve=null,he=!1,Je=null,et=null,rt=null,ht=null,bt=null,it=null,vt=null,kt=null,Nt=null,wt=null,Ot=null,Pt=null,or=null,Vt=null,Jt=null,Kt=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),$t=void 0,ir={},Dt=new a.Vector4,lr=null,zt=null,Bt=new a.Vector4,Et=new a.Vector4,Wt=e.createTexture();e.bindTexture(e.TEXTURE_2D,Wt),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGB,1,1,0,e.RGB,e.UNSIGNED_BYTE,new Uint8Array(3)),this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.frontFace(e.CCW),e.cullFace(e.BACK),this.enable(e.CULL_FACE),this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var He=0,Mt=W.length;He<Mt;He++)W[He]=0},this.enableAttribute=function(He){W[He]=1,q[He]===0&&(e.enableVertexAttribArray(He),q[He]=1),fe[He]!==0&&(r.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(He,0),fe[He]=0)},this.enableAttributeAndDivisor=function(He,Mt,xt){W[He]=1,q[He]===0&&(e.enableVertexAttribArray(He),q[He]=1),fe[He]!==Mt&&(xt.vertexAttribDivisorANGLE(He,Mt),fe[He]=Mt)},this.disableUnusedAttributes=function(){for(var He=0,Mt=q.length;He<Mt;He++)q[He]!==W[He]&&(e.disableVertexAttribArray(He),q[He]=0)},this.enable=function(He){ae[He]!==!0&&(e.enable(He),ae[He]=!0)},this.disable=function(He){ae[He]!==!1&&(e.disable(He),ae[He]=!1)},this.getCompressedTextureFormats=function(){if(me===null&&(me=[],r.get("WEBGL_compressed_texture_pvrtc")||r.get("WEBGL_compressed_texture_s3tc")||r.get("WEBGL_compressed_texture_etc1")))for(var He=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),Mt=0;Mt<He.length;Mt++)me.push(He[Mt]);return me},this.setBlending=function(He,Mt,xt,gr,pt,Ft,Tr,Sr){He===a.NoBlending?this.disable(e.BLEND):this.enable(e.BLEND),He===pe&&Sr===he||(He===a.AdditiveBlending?Sr?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):He===a.SubtractiveBlending?Sr?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):He===a.MultiplyBlending?Sr?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.SRC_COLOR,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):Sr?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),pe=He,he=Sr),He===a.CustomBlending?(pt=pt||Mt,Ft=Ft||xt,Tr=Tr||gr,Mt===Ee&&pt===De||(e.blendEquationSeparate(i(Mt),i(pt)),Ee=Mt,De=pt),xt===xe&&gr===Ne&&Ft===Fe&&Tr===Ve||(e.blendFuncSeparate(i(xt),i(gr),i(Ft),i(Tr)),xe=xt,Ne=gr,Fe=Ft,Ve=Tr)):Ve=Fe=De=Ne=xe=Ee=null},this.setDepthFunc=function(He){if(Je!==He){if(He)switch(He){case a.NeverDepth:e.depthFunc(e.NEVER);break;case a.AlwaysDepth:e.depthFunc(e.ALWAYS);break;case a.LessDepth:e.depthFunc(e.LESS);break;case a.LessEqualDepth:e.depthFunc(e.LEQUAL);break;case a.EqualDepth:e.depthFunc(e.EQUAL);break;case a.GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case a.GreaterDepth:e.depthFunc(e.GREATER);break;case a.NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);Je=He}},this.setDepthTest=function(He){He?this.enable(e.DEPTH_TEST):this.disable(e.DEPTH_TEST)},this.setDepthWrite=function(He){et!==He&&(e.depthMask(He),et=He)},this.setColorWrite=function(He){rt!==He&&(e.colorMask(He,He,He,He),rt=He)},this.setStencilFunc=function(He,Mt,xt){bt===He&&it===Mt&&vt===xt||(e.stencilFunc(He,Mt,xt),bt=He,it=Mt,vt=xt)},this.setStencilOp=function(He,Mt,xt){kt===He&&Nt===Mt&&wt===xt||(e.stencilOp(He,Mt,xt),kt=He,Nt=Mt,wt=xt)},this.setStencilTest=function(He){He?this.enable(e.STENCIL_TEST):this.disable(e.STENCIL_TEST)},this.setStencilWrite=function(He){ht!==He&&(e.stencilMask(He),ht=He)},this.setFlipSided=function(He){Ot!==He&&(He?e.frontFace(e.CW):e.frontFace(e.CCW),Ot=He)},this.setLineWidth=function(He){He!==Pt&&(e.lineWidth(He),Pt=He)},this.setPolygonOffset=function(He,Mt,xt){He?this.enable(e.POLYGON_OFFSET_FILL):this.disable(e.POLYGON_OFFSET_FILL),!He||or===Mt&&Vt===xt||(e.polygonOffset(Mt,xt),or=Mt,Vt=xt)},this.getScissorTest=function(){return Jt},this.setScissorTest=function(He){(Jt=He)?this.enable(e.SCISSOR_TEST):this.disable(e.SCISSOR_TEST)},this.activeTexture=function(He){He===void 0&&(He=e.TEXTURE0+Kt-1),$t!==He&&(e.activeTexture(He),$t=He)},this.bindTexture=function(He,Mt){$t===void 0&&v.activeTexture();var xt=ir[$t];xt===void 0&&(xt={type:void 0,texture:void 0},ir[$t]=xt),xt.type===He&&xt.texture===Mt||(e.bindTexture(He,Mt||Wt),xt.type=He,xt.texture=Mt)},this.compressedTexImage2D=function(){try{e.compressedTexImage2D.apply(e,arguments)}catch{}},this.texImage2D=function(){try{e.texImage2D.apply(e,arguments)}catch{}},this.clearColor=function(He,Mt,xt,gr){I.set(He,Mt,xt,gr),Dt.equals(I)===!1&&(e.clearColor(He,Mt,xt,gr),Dt.copy(I))},this.clearDepth=function(He){lr!==He&&(e.clearDepth(He),lr=He)},this.clearStencil=function(He){zt!==He&&(e.clearStencil(He),zt=He)},this.scissor=function(He){Bt.equals(He)===!1&&(e.scissor(He.x,He.y,He.z,He.w),Bt.copy(He))},this.viewport=function(He){Et.equals(He)===!1&&(e.viewport(He.x,He.y,He.z,He.w),Et.copy(He))},this.reset=function(){for(var He=0;He<q.length;He++)q[He]===1&&(e.disableVertexAttribArray(He),q[He]=0);ae={},$t=void 0,ir={},Ot=ht=et=rt=pe=me=null}},a.WebGLGeometries=function(e,r,i){var v={};function I(q){var fe=q.target,ae=v[fe.id];ae.index!==null&&W(ae.index),function(Ee){for(var xe in Ee)W(Ee[xe])}(ae.attributes),fe.removeEventListener("dispose",I),delete v[fe.id];var me=r.get(fe);me.wireframe&&W(me.wireframe),r.delete(fe);var pe=r.get(ae);pe.wireframe&&W(pe.wireframe),r.delete(ae),i.memory.geometries--}function W(q){var fe,ae,me=(fe=q)instanceof a.InterleavedBufferAttribute?r.get(fe.data).__webglBuffer:r.get(fe).__webglBuffer;me!==void 0&&(e.deleteBuffer(me),(ae=q)instanceof a.InterleavedBufferAttribute?r.delete(ae.data):r.delete(ae))}this.get=function(q){var fe,ae=q.geometry;return v[ae.id]!==void 0?v[ae.id]:(ae.addEventListener("dispose",I),ae instanceof a.BufferGeometry?fe=ae:ae instanceof a.Geometry&&(ae._bufferGeometry===void 0&&(ae._bufferGeometry=new a.BufferGeometry().setFromObject(q)),fe=ae._bufferGeometry),v[ae.id]=fe,i.memory.geometries++,fe)}},a.WebGLBufferRenderer=function(e,r,i){var v;this.setMode=function(I){v=I},this.render=function(I,W){e.drawArrays(v,I,W),i.calls++,i.vertices+=W,v===e.TRIANGLES&&(i.faces+=W/3)},this.renderInstances=function(I){var W=r.get("ANGLE_instanced_arrays");if(W!==null){var q=I.attributes.position,fe=0;fe=q instanceof a.InterleavedBufferAttribute?q.data.count:q.count,W.drawArraysInstancedANGLE(v,0,fe,I.maxInstancedCount),i.calls++,i.vertices+=fe*I.maxInstancedCount,v===e.TRIANGLES&&(i.faces+=I.maxInstancedCount*fe/3)}}},a.WebGLIndexedBufferRenderer=function(e,r,i){var v,I,W;this.setMode=function(q){v=q},this.setIndex=function(q){W=q.array instanceof Uint32Array&&r.get("OES_element_index_uint")?(I=e.UNSIGNED_INT,4):(I=e.UNSIGNED_SHORT,2)},this.render=function(q,fe){e.drawElements(v,fe,I,q*W),i.calls++,i.vertices+=fe,v===e.TRIANGLES&&(i.faces+=fe/3)},this.renderInstances=function(q,fe,ae){var me=r.get("ANGLE_instanced_arrays");me!==null&&(me.drawElementsInstancedANGLE(v,ae,I,fe*W,q.maxInstancedCount),i.calls++,i.vertices+=ae*q.maxInstancedCount,v===e.TRIANGLES&&(i.faces+=q.maxInstancedCount*ae/3))}},a.WebGLShader=function(e,r,i){var v=e.createShader(r);return e.shaderSource(v,i),e.compileShader(v),e.getShaderParameter(v,e.COMPILE_STATUS),e.getShaderInfoLog(v),v},a.WebGLShadowMap=function(e,r,i){for(var v=e.context,I=e.state,W=new a.Frustum,q=new a.Matrix4,fe=new a.Vector2,ae=new a.Vector3,me=new a.Vector3,pe=[],Ee=1,xe=2,Ne=1+(Ee|xe),De=new Array(Ne),Fe=new Array(Ne),Ve=[new a.Vector3(1,0,0),new a.Vector3(-1,0,0),new a.Vector3(0,0,1),new a.Vector3(0,0,-1),new a.Vector3(0,1,0),new a.Vector3(0,-1,0)],he=[new a.Vector3(0,1,0),new a.Vector3(0,1,0),new a.Vector3(0,1,0),new a.Vector3(0,1,0),new a.Vector3(0,0,1),new a.Vector3(0,0,-1)],Je=[new a.Vector4,new a.Vector4,new a.Vector4,new a.Vector4,new a.Vector4,new a.Vector4],et=a.ShaderLib.depthRGBA,rt=a.UniformsUtils.clone(et.uniforms),ht=a.ShaderLib.distanceRGBA,bt=a.UniformsUtils.clone(ht.uniforms),it=0;it!==Ne;++it){var vt=(it&Ee)!=0,kt=(it&xe)!=0,Nt=new a.ShaderMaterial({uniforms:rt,vertexShader:et.vertexShader,fragmentShader:et.fragmentShader,morphTargets:vt,skinning:kt});De[it]=Nt;var wt=new a.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:bt,vertexShader:ht.vertexShader,fragmentShader:ht.fragmentShader,morphTargets:vt,skinning:kt});Fe[it]=wt}var Ot=this;function Pt(Vt,Jt,Kt,$t){var ir=Vt.geometry,Dt=null,lr=De,zt=Vt.customDepthMaterial;if(Kt&&(lr=Fe,zt=Vt.customDistanceMaterial),zt)Dt=zt;else{var Bt=ir.morphTargets!==void 0&&0<ir.morphTargets.length&&Jt.morphTargets,Et=Vt instanceof a.SkinnedMesh&&Jt.skinning,Wt=0;Bt&&(Wt|=Ee),Et&&(Wt|=xe),Dt=lr[Wt]}return Dt.visible=Jt.visible,Dt.wireframe=Jt.wireframe,Dt.wireframeLinewidth=Jt.wireframeLinewidth,Kt&&Dt.uniforms.lightPos!==void 0&&Dt.uniforms.lightPos.value.copy($t),Dt}function or(Vt,Jt,Kt){if(Vt.visible!==!1){Vt.layers.test(Jt.layers)&&(Vt instanceof a.Mesh||Vt instanceof a.Line||Vt instanceof a.Points)&&Vt.castShadow&&(Vt.frustumCulled===!1||W.intersectsObject(Vt)===!0)&&Vt.material.visible===!0&&(Vt.modelViewMatrix.multiplyMatrices(Kt.matrixWorldInverse,Vt.matrixWorld),pe.push(Vt));for(var $t=Vt.children,ir=0,Dt=$t.length;ir<Dt;ir++)or($t[ir],Jt,Kt)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=a.PCFShadowMap,this.cullFace=a.CullFaceFront,this.render=function(Vt,Jt){var Kt,$t,ir=r.shadows;if(ir.length!==0&&Ot.enabled!==!1&&(Ot.autoUpdate!==!1||Ot.needsUpdate!==!1)){I.clearColor(1,1,1,1),I.disable(v.BLEND),I.enable(v.CULL_FACE),v.frontFace(v.CCW),v.cullFace(Ot.cullFace===a.CullFaceFront?v.FRONT:v.BACK),I.setDepthTest(!0),I.setScissorTest(!1);for(var Dt=0,lr=ir.length;Dt<lr;Dt++){var zt=ir[Dt],Bt=zt.shadow,Et=Bt.camera;if(fe.copy(Bt.mapSize),zt instanceof a.PointLight){Kt=6,$t=!0;var Wt=fe.x,He=fe.y;Je[0].set(2*Wt,He,Wt,He),Je[1].set(0,He,Wt,He),Je[2].set(3*Wt,He,Wt,He),Je[3].set(Wt,He,Wt,He),Je[4].set(3*Wt,0,Wt,He),Je[5].set(Wt,0,Wt,He),fe.x*=4,fe.y*=2}else $t=!(Kt=1);if(Bt.map===null){var Mt={minFilter:a.NearestFilter,magFilter:a.NearestFilter,format:a.RGBAFormat};Bt.map=new a.WebGLRenderTarget(fe.x,fe.y,Mt),zt instanceof a.SpotLight&&(Et.aspect=fe.x/fe.y),Et.updateProjectionMatrix()}var xt=Bt.map,gr=Bt.matrix;me.setFromMatrixPosition(zt.matrixWorld),Et.position.copy(me),e.setRenderTarget(xt),e.clear();for(var pt=0;pt<Kt;pt++){if($t){ae.copy(Et.position),ae.add(Ve[pt]),Et.up.copy(he[pt]),Et.lookAt(ae);var Ft=Je[pt];I.viewport(Ft)}else ae.setFromMatrixPosition(zt.target.matrixWorld),Et.lookAt(ae);Et.updateMatrixWorld(),Et.matrixWorldInverse.getInverse(Et.matrixWorld),gr.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),gr.multiply(Et.projectionMatrix),gr.multiply(Et.matrixWorldInverse),q.multiplyMatrices(Et.projectionMatrix,Et.matrixWorldInverse),W.setFromMatrix(q),pe.length=0,or(Vt,Jt,Et);for(var Tr=0,Sr=pe.length;Tr<Sr;Tr++){var Mr=pe[Tr],gn=i.update(Mr),Un=Mr.material;if(Un instanceof a.MultiMaterial)for(var Gn=gn.groups,Vn=Un.materials,Sn=0,zn=Gn.length;Sn<zn;Sn++){var Yn=Gn[Sn],Wr=Vn[Yn.materialIndex];if(Wr.visible===!0){var Kn=Pt(Mr,Wr,$t,me);e.renderBufferDirect(Et,null,gn,Kn,Mr,Yn)}}else Kn=Pt(Mr,Un,$t,me),e.renderBufferDirect(Et,null,gn,Kn,Mr,null)}}}var ci=e.getClearColor(),qn=e.getClearAlpha();e.setClearColor(ci,qn),I.enable(v.BLEND),Ot.cullFace===a.CullFaceFront&&v.cullFace(v.BACK),Ot.needsUpdate=!1}}},a.SpritePlugin=function(e,r){var i,v,I,W,q,fe,ae=e.context,me=e.state,pe=new a.Vector3,Ee=new a.Quaternion,xe=new a.Vector3;function Ne(){var Fe,Ve,he,Je=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),et=new Uint16Array([0,1,2,0,2,3]);i=ae.createBuffer(),v=ae.createBuffer(),ae.bindBuffer(ae.ARRAY_BUFFER,i),ae.bufferData(ae.ARRAY_BUFFER,Je,ae.STATIC_DRAW),ae.bindBuffer(ae.ELEMENT_ARRAY_BUFFER,v),ae.bufferData(ae.ELEMENT_ARRAY_BUFFER,et,ae.STATIC_DRAW),Fe=ae.createProgram(),Ve=ae.createShader(ae.VERTEX_SHADER),he=ae.createShader(ae.FRAGMENT_SHADER),ae.shaderSource(Ve,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join(`
`)),ae.shaderSource(he,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join(`
`)),ae.compileShader(Ve),ae.compileShader(he),ae.attachShader(Fe,Ve),ae.attachShader(Fe,he),ae.linkProgram(Fe),I=Fe,W={position:ae.getAttribLocation(I,"position"),uv:ae.getAttribLocation(I,"uv")},q={uvOffset:ae.getUniformLocation(I,"uvOffset"),uvScale:ae.getUniformLocation(I,"uvScale"),rotation:ae.getUniformLocation(I,"rotation"),scale:ae.getUniformLocation(I,"scale"),color:ae.getUniformLocation(I,"color"),map:ae.getUniformLocation(I,"map"),opacity:ae.getUniformLocation(I,"opacity"),modelViewMatrix:ae.getUniformLocation(I,"modelViewMatrix"),projectionMatrix:ae.getUniformLocation(I,"projectionMatrix"),fogType:ae.getUniformLocation(I,"fogType"),fogDensity:ae.getUniformLocation(I,"fogDensity"),fogNear:ae.getUniformLocation(I,"fogNear"),fogFar:ae.getUniformLocation(I,"fogFar"),fogColor:ae.getUniformLocation(I,"fogColor"),alphaTest:ae.getUniformLocation(I,"alphaTest")};var rt=document.createElement("canvas");rt.width=8,rt.height=8;var ht=rt.getContext("2d");ht.fillStyle="white",ht.fillRect(0,0,8,8),(fe=new a.Texture(rt)).needsUpdate=!0}function De(Fe,Ve){return Fe.renderOrder!==Ve.renderOrder?Fe.renderOrder-Ve.renderOrder:Fe.z!==Ve.z?Ve.z-Fe.z:Ve.id-Fe.id}this.render=function(Fe,Ve){if(r.length!==0){I===void 0&&Ne(),ae.useProgram(I),me.initAttributes(),me.enableAttribute(W.position),me.enableAttribute(W.uv),me.disableUnusedAttributes(),me.disable(ae.CULL_FACE),me.enable(ae.BLEND),ae.bindBuffer(ae.ARRAY_BUFFER,i),ae.vertexAttribPointer(W.position,2,ae.FLOAT,!1,16,0),ae.vertexAttribPointer(W.uv,2,ae.FLOAT,!1,16,8),ae.bindBuffer(ae.ELEMENT_ARRAY_BUFFER,v),ae.uniformMatrix4fv(q.projectionMatrix,!1,Ve.projectionMatrix.elements),me.activeTexture(ae.TEXTURE0),ae.uniform1i(q.map,0);var he=0,Je=0,et=Fe.fog;et?(ae.uniform3f(q.fogColor,et.color.r,et.color.g,et.color.b),et instanceof a.Fog?(ae.uniform1f(q.fogNear,et.near),ae.uniform1f(q.fogFar,et.far),ae.uniform1i(q.fogType,1),Je=he=1):et instanceof a.FogExp2&&(ae.uniform1f(q.fogDensity,et.density),ae.uniform1i(q.fogType,2),Je=he=2)):(ae.uniform1i(q.fogType,0),Je=he=0);for(var rt=0,ht=r.length;rt<ht;rt++)(it=r[rt]).modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,it.matrixWorld),it.z=-it.modelViewMatrix.elements[14];r.sort(De);var bt=[];for(rt=0,ht=r.length;rt<ht;rt++){var it,vt=(it=r[rt]).material;ae.uniform1f(q.alphaTest,vt.alphaTest),ae.uniformMatrix4fv(q.modelViewMatrix,!1,it.modelViewMatrix.elements),it.matrixWorld.decompose(pe,Ee,xe),bt[0]=xe.x,bt[1]=xe.y;var kt=0;Fe.fog&&vt.fog&&(kt=Je),he!==kt&&(ae.uniform1i(q.fogType,kt),he=kt),vt.map!==null?(ae.uniform2f(q.uvOffset,vt.map.offset.x,vt.map.offset.y),ae.uniform2f(q.uvScale,vt.map.repeat.x,vt.map.repeat.y)):(ae.uniform2f(q.uvOffset,0,0),ae.uniform2f(q.uvScale,1,1)),ae.uniform1f(q.opacity,vt.opacity),ae.uniform3f(q.color,vt.color.r,vt.color.g,vt.color.b),ae.uniform1f(q.rotation,vt.rotation),ae.uniform2fv(q.scale,bt),me.setBlending(vt.blending,vt.blendEquation,vt.blendSrc,vt.blendDst),me.setDepthTest(vt.depthTest),me.setDepthWrite(vt.depthWrite),vt.map&&vt.map.image&&vt.map.image.width?e.setTexture(vt.map,0):e.setTexture(fe,0),ae.drawElements(ae.TRIANGLES,6,ae.UNSIGNED_SHORT,0)}me.enable(ae.CULL_FACE),e.resetGLState()}}},a.LensFlarePlugin=function(e,r){var i,v,I,W,q,fe,ae,me,pe=e.context,Ee=e.state;function xe(){var Ne,De,Fe,Ve,he,Je,et=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),rt=new Uint16Array([0,1,2,0,2,3]);i=pe.createBuffer(),v=pe.createBuffer(),pe.bindBuffer(pe.ARRAY_BUFFER,i),pe.bufferData(pe.ARRAY_BUFFER,et,pe.STATIC_DRAW),pe.bindBuffer(pe.ELEMENT_ARRAY_BUFFER,v),pe.bufferData(pe.ELEMENT_ARRAY_BUFFER,rt,pe.STATIC_DRAW),ae=pe.createTexture(),me=pe.createTexture(),Ee.bindTexture(pe.TEXTURE_2D,ae),pe.texImage2D(pe.TEXTURE_2D,0,pe.RGB,16,16,0,pe.RGB,pe.UNSIGNED_BYTE,null),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.NEAREST),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.NEAREST),Ee.bindTexture(pe.TEXTURE_2D,me),pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,16,16,0,pe.RGBA,pe.UNSIGNED_BYTE,null),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.NEAREST),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.NEAREST),Ne=(fe=0<pe.getParameter(pe.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join(`
`)}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join(`
`)},De=Ne,Fe=pe.createProgram(),Ve=pe.createShader(pe.FRAGMENT_SHADER),he=pe.createShader(pe.VERTEX_SHADER),Je="precision "+e.getPrecision()+` float;
`,pe.shaderSource(Ve,Je+De.fragmentShader),pe.shaderSource(he,Je+De.vertexShader),pe.compileShader(Ve),pe.compileShader(he),pe.attachShader(Fe,Ve),pe.attachShader(Fe,he),pe.linkProgram(Fe),I=Fe,W={vertex:pe.getAttribLocation(I,"position"),uv:pe.getAttribLocation(I,"uv")},q={renderType:pe.getUniformLocation(I,"renderType"),map:pe.getUniformLocation(I,"map"),occlusionMap:pe.getUniformLocation(I,"occlusionMap"),opacity:pe.getUniformLocation(I,"opacity"),color:pe.getUniformLocation(I,"color"),scale:pe.getUniformLocation(I,"scale"),rotation:pe.getUniformLocation(I,"rotation"),screenPosition:pe.getUniformLocation(I,"screenPosition")}}this.render=function(Ne,De,Fe){if(r.length!==0){var Ve=new a.Vector3,he=Fe.w/Fe.z,Je=.5*Fe.z,et=.5*Fe.w,rt=16/Fe.w,ht=new a.Vector2(rt*he,rt),bt=new a.Vector3(1,1,0),it=new a.Vector2(1,1);I===void 0&&xe(),pe.useProgram(I),Ee.initAttributes(),Ee.enableAttribute(W.vertex),Ee.enableAttribute(W.uv),Ee.disableUnusedAttributes(),pe.uniform1i(q.occlusionMap,0),pe.uniform1i(q.map,1),pe.bindBuffer(pe.ARRAY_BUFFER,i),pe.vertexAttribPointer(W.vertex,2,pe.FLOAT,!1,16,0),pe.vertexAttribPointer(W.uv,2,pe.FLOAT,!1,16,8),pe.bindBuffer(pe.ELEMENT_ARRAY_BUFFER,v),Ee.disable(pe.CULL_FACE),Ee.setDepthWrite(!1);for(var vt=0,kt=r.length;vt<kt;vt++){rt=16/Fe.w,ht.set(rt*he,rt);var Nt=r[vt];if(Ve.set(Nt.matrixWorld.elements[12],Nt.matrixWorld.elements[13],Nt.matrixWorld.elements[14]),Ve.applyMatrix4(De.matrixWorldInverse),Ve.applyProjection(De.projectionMatrix),bt.copy(Ve),it.x=bt.x*Je+Je,it.y=bt.y*et+et,fe||0<it.x&&it.x<Fe.z&&0<it.y&&it.y<Fe.w){Ee.activeTexture(pe.TEXTURE0),Ee.bindTexture(pe.TEXTURE_2D,null),Ee.activeTexture(pe.TEXTURE1),Ee.bindTexture(pe.TEXTURE_2D,ae),pe.copyTexImage2D(pe.TEXTURE_2D,0,pe.RGB,Fe.x+it.x-8,Fe.y+it.y-8,16,16,0),pe.uniform1i(q.renderType,0),pe.uniform2f(q.scale,ht.x,ht.y),pe.uniform3f(q.screenPosition,bt.x,bt.y,bt.z),Ee.disable(pe.BLEND),Ee.enable(pe.DEPTH_TEST),pe.drawElements(pe.TRIANGLES,6,pe.UNSIGNED_SHORT,0),Ee.activeTexture(pe.TEXTURE0),Ee.bindTexture(pe.TEXTURE_2D,me),pe.copyTexImage2D(pe.TEXTURE_2D,0,pe.RGBA,Fe.x+it.x-8,Fe.y+it.y-8,16,16,0),pe.uniform1i(q.renderType,1),Ee.disable(pe.DEPTH_TEST),Ee.activeTexture(pe.TEXTURE1),Ee.bindTexture(pe.TEXTURE_2D,ae),pe.drawElements(pe.TRIANGLES,6,pe.UNSIGNED_SHORT,0),Nt.positionScreen.copy(bt),Nt.customUpdateCallback?Nt.customUpdateCallback(Nt):Nt.updateLensFlares(),pe.uniform1i(q.renderType,2),Ee.enable(pe.BLEND);for(var wt=0,Ot=Nt.lensFlares.length;wt<Ot;wt++){var Pt=Nt.lensFlares[wt];.001<Pt.opacity&&.001<Pt.scale&&(bt.x=Pt.x,bt.y=Pt.y,bt.z=Pt.z,rt=Pt.size*Pt.scale/Fe.w,ht.x=rt*he,ht.y=rt,pe.uniform3f(q.screenPosition,bt.x,bt.y,bt.z),pe.uniform2f(q.scale,ht.x,ht.y),pe.uniform1f(q.rotation,Pt.rotation),pe.uniform1f(q.opacity,Pt.opacity),pe.uniform3f(q.color,Pt.color.r,Pt.color.g,Pt.color.b),Ee.setBlending(Pt.blending,Pt.blendEquation,Pt.blendSrc,Pt.blendDst),e.setTexture(Pt.texture,1),pe.drawElements(pe.TRIANGLES,6,pe.UNSIGNED_SHORT,0))}}}Ee.enable(pe.CULL_FACE),Ee.enable(pe.DEPTH_TEST),Ee.setDepthWrite(!0),e.resetGLState()}}},a.WebGLObjects=function(e,r,i){var v=new a.WebGLGeometries(e,r,i);function I(q,fe){var ae=q instanceof a.InterleavedBufferAttribute?q.data:q,me=r.get(ae);me.__webglBuffer===void 0?function(pe,Ee,xe){pe.__webglBuffer=e.createBuffer(),e.bindBuffer(xe,pe.__webglBuffer);var Ne=Ee.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(xe,Ee.array,Ne),pe.version=Ee.version}(me,ae,fe):me.version!==ae.version&&function(pe,Ee,xe){e.bindBuffer(xe,pe.__webglBuffer),Ee.dynamic===!1||Ee.updateRange.count===-1?e.bufferSubData(xe,0,Ee.array):Ee.updateRange.count===0||(e.bufferSubData(xe,Ee.updateRange.offset*Ee.array.BYTES_PER_ELEMENT,Ee.array.subarray(Ee.updateRange.offset,Ee.updateRange.offset+Ee.updateRange.count)),Ee.updateRange.count=0),pe.version=Ee.version}(me,ae,fe)}function W(q,fe,ae){if(ae<fe){var me=fe;fe=ae,ae=me}var pe=q[fe];return pe===void 0?(q[fe]=[ae],!0):pe.indexOf(ae)===-1&&(pe.push(ae),!0)}this.getAttributeBuffer=function(q){return q instanceof a.InterleavedBufferAttribute?r.get(q.data).__webglBuffer:r.get(q).__webglBuffer},this.getWireframeAttribute=function(q){var fe=r.get(q);if(fe.wireframe!==void 0)return fe.wireframe;var ae,me=[],pe=q.index,Ee=q.attributes,xe=Ee.position;if(pe!==null)for(var Ne={},De=0,Fe=(ae=pe.array).length;De<Fe;De+=3){var Ve=ae[De+0],he=ae[De+1],Je=ae[De+2];W(Ne,Ve,he)&&me.push(Ve,he),W(Ne,he,Je)&&me.push(he,Je),W(Ne,Je,Ve)&&me.push(Je,Ve)}else for(De=0,Fe=(ae=Ee.position.array).length/3-1;De<Fe;De+=3)Ve=De+0,he=De+1,Je=De+2,me.push(Ve,he,he,Je,Je,Ve);var et=65535<xe.count?Uint32Array:Uint16Array,rt=new a.BufferAttribute(new et(me),1);return I(rt,e.ELEMENT_ARRAY_BUFFER),fe.wireframe=rt},this.update=function(q){var fe=v.get(q);q.geometry instanceof a.Geometry&&fe.updateFromObject(q);var ae=fe.index,me=fe.attributes;for(var pe in ae!==null&&I(ae,e.ELEMENT_ARRAY_BUFFER),me)I(me[pe],e.ARRAY_BUFFER);var Ee=fe.morphAttributes;for(var pe in Ee)for(var xe=Ee[pe],Ne=0,De=xe.length;Ne<De;Ne++)I(xe[Ne],e.ARRAY_BUFFER);return fe}},a.WebGLProgram=(Nn=0,Qr=/^([\w\d_]+)\.([\w\d_]+)$/,qr=/^([\w\d_]+)\[(\d+)\]\.([\w\d_]+)$/,Zn=/^([\w\d_]+)\[0\]$/,function(e,r,i,v){var I=e.context,W=i.extensions,q=i.defines,fe=i.__webglShader.vertexShader,ae=i.__webglShader.fragmentShader,me="SHADOWMAP_TYPE_BASIC";v.shadowMapType===a.PCFShadowMap?me="SHADOWMAP_TYPE_PCF":v.shadowMapType===a.PCFSoftShadowMap&&(me="SHADOWMAP_TYPE_PCF_SOFT");var pe="ENVMAP_TYPE_CUBE",Ee="ENVMAP_MODE_REFLECTION",xe="ENVMAP_BLENDING_MULTIPLY";if(v.envMap){switch(i.envMap.mapping){case a.CubeReflectionMapping:case a.CubeRefractionMapping:pe="ENVMAP_TYPE_CUBE";break;case a.CubeUVReflectionMapping:case a.CubeUVRefractionMapping:pe="ENVMAP_TYPE_CUBE_UV";break;case a.EquirectangularReflectionMapping:case a.EquirectangularRefractionMapping:pe="ENVMAP_TYPE_EQUIREC";break;case a.SphericalReflectionMapping:pe="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case a.CubeRefractionMapping:case a.EquirectangularRefractionMapping:Ee="ENVMAP_MODE_REFRACTION"}switch(i.combine){case a.MultiplyOperation:xe="ENVMAP_BLENDING_MULTIPLY";break;case a.MixOperation:xe="ENVMAP_BLENDING_MIX";break;case a.AddOperation:xe="ENVMAP_BLENDING_ADD"}}var Ne,De,Fe,Ve,he,Je,et,rt,ht=0<e.gammaFactor?e.gammaFactor:1,bt=(Ne=W,De=v,Fe=e.extensions,[(Ne=Ne||{}).derivatives||De.envMapCubeUV||De.bumpMap||De.normalMap||De.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(Ne.fragDepth||De.logarithmicDepthBuffer)&&Fe.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",Ne.drawBuffers&&Fe.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(Ne.shaderTextureLOD||De.envMap)&&Fe.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(En).join(`
`)),it=function(Dt){var lr=[];for(var zt in Dt){var Bt=Dt[zt];Bt!==!1&&lr.push("#define "+zt+" "+Bt)}return lr.join(`
`)}(q),vt=I.createProgram();he=i instanceof a.RawShaderMaterial?Ve="":(Ve=["precision "+v.precision+" float;","precision "+v.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,it,v.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ht,"#define MAX_BONES "+v.maxBones,v.map?"#define USE_MAP":"",v.envMap?"#define USE_ENVMAP":"",v.envMap?"#define "+Ee:"",v.lightMap?"#define USE_LIGHTMAP":"",v.aoMap?"#define USE_AOMAP":"",v.emissiveMap?"#define USE_EMISSIVEMAP":"",v.bumpMap?"#define USE_BUMPMAP":"",v.normalMap?"#define USE_NORMALMAP":"",v.displacementMap&&v.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",v.specularMap?"#define USE_SPECULARMAP":"",v.roughnessMap?"#define USE_ROUGHNESSMAP":"",v.metalnessMap?"#define USE_METALNESSMAP":"",v.alphaMap?"#define USE_ALPHAMAP":"",v.vertexColors?"#define USE_COLOR":"",v.flatShading?"#define FLAT_SHADED":"",v.skinning?"#define USE_SKINNING":"",v.useVertexTexture?"#define BONE_TEXTURE":"",v.morphTargets?"#define USE_MORPHTARGETS":"",v.morphNormals&&v.flatShading===!1?"#define USE_MORPHNORMALS":"",v.doubleSided?"#define DOUBLE_SIDED":"",v.flipSided?"#define FLIP_SIDED":"",v.shadowMapEnabled?"#define USE_SHADOWMAP":"",v.shadowMapEnabled?"#define "+me:"",0<v.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",v.sizeAttenuation?"#define USE_SIZEATTENUATION":"",v.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",v.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(En).join(`
`),[bt,"precision "+v.precision+" float;","precision "+v.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,it,v.alphaTest?"#define ALPHATEST "+v.alphaTest:"","#define GAMMA_FACTOR "+ht,v.useFog&&v.fog?"#define USE_FOG":"",v.useFog&&v.fogExp?"#define FOG_EXP2":"",v.map?"#define USE_MAP":"",v.envMap?"#define USE_ENVMAP":"",v.envMap?"#define "+pe:"",v.envMap?"#define "+Ee:"",v.envMap?"#define "+xe:"",v.lightMap?"#define USE_LIGHTMAP":"",v.aoMap?"#define USE_AOMAP":"",v.emissiveMap?"#define USE_EMISSIVEMAP":"",v.bumpMap?"#define USE_BUMPMAP":"",v.normalMap?"#define USE_NORMALMAP":"",v.specularMap?"#define USE_SPECULARMAP":"",v.roughnessMap?"#define USE_ROUGHNESSMAP":"",v.metalnessMap?"#define USE_METALNESSMAP":"",v.alphaMap?"#define USE_ALPHAMAP":"",v.vertexColors?"#define USE_COLOR":"",v.flatShading?"#define FLAT_SHADED":"",v.doubleSided?"#define DOUBLE_SIDED":"",v.flipSided?"#define FLIP_SIDED":"",v.shadowMapEnabled?"#define USE_SHADOWMAP":"",v.shadowMapEnabled?"#define "+me:"",0<v.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",v.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",v.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",v.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",v.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",v.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",v.toneMapping!==a.NoToneMapping?"#define TONE_MAPPING":"",v.toneMapping!==a.NoToneMapping?a.ShaderChunk.tonemapping_pars_fragment:"",v.toneMapping!==a.NoToneMapping?function(Dt,lr){var zt;switch(lr){case a.LinearToneMapping:zt="Linear";break;case a.ReinhardToneMapping:zt="Reinhard";break;case a.Uncharted2ToneMapping:zt="Uncharted2";break;case a.CineonToneMapping:zt="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+lr)}return"vec3 "+Dt+"( vec3 color ) { return "+zt+"ToneMapping( color ); }"}("toneMapping",v.toneMapping):"",v.outputEncoding||v.mapEncoding||v.envMapEncoding||v.emissiveMapEncoding?a.ShaderChunk.encodings_pars_fragment:"",v.mapEncoding?hn("mapTexelToLinear",v.mapEncoding):"",v.envMapEncoding?hn("envMapTexelToLinear",v.envMapEncoding):"",v.emissiveMapEncoding?hn("emissiveMapTexelToLinear",v.emissiveMapEncoding):"",v.outputEncoding?(Je="linearToOutputTexel",et=v.outputEncoding,rt=Pn(et),"vec4 "+Je+"( vec4 value ) { return LinearTo"+rt[0]+rt[1]+"; }"):"",`
`].filter(En).join(`
`)),fe=On(fe=Tn(fe),v),ae=On(ae=Tn(ae),v),i instanceof a.ShaderMaterial==0&&(fe=fn(fe),ae=fn(ae));var kt=Ve+fe,Nt=he+ae,wt=a.WebGLShader(I,I.VERTEX_SHADER,kt),Ot=a.WebGLShader(I,I.FRAGMENT_SHADER,Nt);I.attachShader(vt,wt),I.attachShader(vt,Ot),i.index0AttributeName!==void 0?I.bindAttribLocation(vt,0,i.index0AttributeName):v.morphTargets===!0&&I.bindAttribLocation(vt,0,"position"),I.linkProgram(vt);var Pt,or,Vt=I.getProgramInfoLog(vt),Jt=I.getShaderInfoLog(wt),Kt=I.getShaderInfoLog(Ot),$t=!0,ir=!0;return I.getProgramParameter(vt,I.LINK_STATUS)===!1?$t=!1:Vt!==""||Jt!==""&&Kt!==""||(ir=!1),ir&&(this.diagnostics={runnable:$t,material:i,programLog:Vt,vertexShader:{log:Jt,prefix:Ve},fragmentShader:{log:Kt,prefix:he}}),I.deleteShader(wt),I.deleteShader(Ot),this.getUniforms=function(){return Pt===void 0&&(Pt=function(Dt,lr){for(var zt={},Bt=Dt.getProgramParameter(lr,Dt.ACTIVE_UNIFORMS),Et=0;Et<Bt;Et++){var Wt=Dt.getActiveUniform(lr,Et).name,He=Dt.getUniformLocation(lr,Wt),Mt=Qr.exec(Wt);if(Mt){var xt=Mt[1],gr=Mt[2],pt=zt[xt];(pt=pt||(zt[xt]={}))[gr]=He}else if(Mt=qr.exec(Wt)){var Ft=Mt[1],Tr=Mt[2],Sr=Mt[3],Mr=zt[Ft],gn=(Mr=Mr||(zt[Ft]=[]))[Tr];(gn=gn||(Mr[Tr]={}))[Sr]=He}else(Mt=Zn.exec(Wt))?zt[Ft=Mt[1]]=He:zt[Wt]=He}return zt}(I,vt)),Pt},this.getAttributes=function(){return or===void 0&&(or=function(Dt,lr){for(var zt={},Bt=Dt.getProgramParameter(lr,Dt.ACTIVE_ATTRIBUTES),Et=0;Et<Bt;Et++){var Wt=Dt.getActiveAttrib(lr,Et).name;zt[Wt]=Dt.getAttribLocation(lr,Wt)}return zt}(I,vt)),or},this.destroy=function(){I.deleteProgram(vt),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}}),this.id=Nn++,this.code=r,this.usedTimes=1,this.program=vt,this.vertexShader=wt,this.fragmentShader=Ot,this}),a.WebGLRenderTarget=function(e,r,i){this.uuid=a.Math.generateUUID(),this.width=e,this.height=r,this.scissor=new a.Vector4(0,0,e,r),this.scissorTest=!1,this.viewport=new a.Vector4(0,0,e,r),(i=i||{}).minFilter===void 0&&(i.minFilter=a.LinearFilter),this.texture=new a.Texture(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy),this.depthBuffer=i.depthBuffer===void 0||i.depthBuffer,this.stencilBuffer=i.stencilBuffer===void 0||i.stencilBuffer},a.WebGLRenderTarget.prototype={constructor:a.WebGLRenderTarget,setSize:function(e,r){this.width===e&&this.height===r||(this.width=e,this.height=r,this.dispose()),this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},a.EventDispatcher.prototype.apply(a.WebGLRenderTarget.prototype),a.WebGLRenderTargetCube=function(e,r,i){a.WebGLRenderTarget.call(this,e,r,i),this.activeCubeFace=0,this.activeMipMapLevel=0},a.WebGLRenderTargetCube.prototype=Object.create(a.WebGLRenderTarget.prototype),a.WebGLRenderTargetCube.prototype.constructor=a.WebGLRenderTargetCube,a.WebGLPrograms=function(e,r){var i=[],v={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"standard",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},I=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","pointLightShadows","toneMapping","physicallyCorrectLights","shadowMapType","alphaTest","doubleSided","flipSided"];function W(q,fe){var ae;return q?q instanceof a.Texture?ae=q.encoding:q instanceof a.WebGLRenderTarget&&(ae=q.texture.encoding):ae=a.LinearEncoding,ae===a.LinearEncoding&&fe&&(ae=a.GammaEncoding),ae}this.getParameters=function(q,fe,ae,me){var pe=v[q.type],Ee=function(Ne){if(r.floatVertexTextures&&Ne&&Ne.skeleton&&Ne.skeleton.useVertexTexture)return 1024;var De=r.maxVertexUniforms,Fe=Math.floor((De-20)/4);return Ne!==void 0&&Ne instanceof a.SkinnedMesh&&(Fe=Math.min(Ne.skeleton.bones.length,Fe),Ne.skeleton.bones.length),Fe}(me),xe=e.getPrecision();return q.precision!==null&&(xe=r.getMaxPrecision(q.precision),q.precision),{shaderID:pe,precision:xe,supportsVertexTextures:r.vertexTextures,outputEncoding:W(e.getCurrentRenderTarget(),e.gammaOutput),map:!!q.map,mapEncoding:W(q.map,e.gammaInput),envMap:!!q.envMap,envMapMode:q.envMap&&q.envMap.mapping,envMapEncoding:W(q.envMap,e.gammaInput),envMapCubeUV:!!q.envMap&&(q.envMap.mapping===a.CubeUVReflectionMapping||q.envMap.mapping===a.CubeUVRefractionMapping),lightMap:!!q.lightMap,aoMap:!!q.aoMap,emissiveMap:!!q.emissiveMap,emissiveMapEncoding:W(q.emissiveMap,e.gammaInput),bumpMap:!!q.bumpMap,normalMap:!!q.normalMap,displacementMap:!!q.displacementMap,roughnessMap:!!q.roughnessMap,metalnessMap:!!q.metalnessMap,specularMap:!!q.specularMap,alphaMap:!!q.alphaMap,combine:q.combine,vertexColors:q.vertexColors,fog:ae,useFog:q.fog,fogExp:ae instanceof a.FogExp2,flatShading:q.shading===a.FlatShading,sizeAttenuation:q.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:q.skinning,maxBones:Ee,useVertexTexture:r.floatVertexTextures&&me&&me.skeleton&&me.skeleton.useVertexTexture,morphTargets:q.morphTargets,morphNormals:q.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:fe.directional.length,numPointLights:fe.point.length,numSpotLights:fe.spot.length,numHemiLights:fe.hemi.length,pointLightShadows:fe.shadowsPointLight,shadowMapEnabled:e.shadowMap.enabled&&me.receiveShadow&&0<fe.shadows.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:q.premultipliedAlpha,alphaTest:q.alphaTest,doubleSided:q.side===a.DoubleSide,flipSided:q.side===a.BackSide}},this.getProgramCode=function(q,fe){var ae=[];if(fe.shaderID?ae.push(fe.shaderID):(ae.push(q.fragmentShader),ae.push(q.vertexShader)),q.defines!==void 0)for(var me in q.defines)ae.push(me),ae.push(q.defines[me]);for(var pe=0;pe<I.length;pe++){var Ee=I[pe];ae.push(Ee),ae.push(fe[Ee])}return ae.join()},this.acquireProgram=function(q,fe,ae){for(var me,pe=0,Ee=i.length;pe<Ee;pe++){var xe=i[pe];if(xe.code===ae){++(me=xe).usedTimes;break}}return me===void 0&&(me=new a.WebGLProgram(e,ae,q,fe),i.push(me)),me},this.releaseProgram=function(q){if(--q.usedTimes==0){var fe=i.indexOf(q);i[fe]=i[i.length-1],i.pop(),q.destroy()}},this.programs=i};function Qn(e){return--e*e*(2.70158*e+1.70158)+1}function oi(e){return new(f()?ui:h()?Dn:pn)(e)}var si=function(){function e(r){w(this,e),Object.assign(this,r),this.renderer=new tr.WebGLRenderer,this.renderer.setClearColor(0,0),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.el=this.renderer.domElement}return y(e,[{key:"setTexture",value:function(r){this.texture=r,this.mesh=this.createMesh()}},{key:"setSize",value:function(r){var i=r.height,v=r.width;this.height=i,this.width=v,this.renderer.setSize(v,i)}},{key:"createMesh",value:function(){return this.material=new tr.MeshBasicMaterial({map:this.texture}),this.geometry=new tr.SphereGeometry(1,50,50),this.geometry.scale(-1,1,1),new tr.Mesh(this.geometry,this.material)}},{key:"destroy",value:function(){this.geometry.dispose(),this.material.dispose(),this.renderer.dispose()}},{key:"render",value:function(r,i,v){v&&this.renderer.render(r,i)}}]),e}(),li=function(){function e(r){var i=this;w(this,e),Object.assign(this,r),this.el=this.renderer.el,this.theta=this.initialYaw*Math.PI/180,this.phi=0,this.velo=.02,this.rotateStart=new tr.Vector2,this.rotateEnd=new tr.Vector2,this.rotateDelta=new tr.Vector2,this.orientation=new tr.Quaternion,this.euler=new tr.Euler,this.momentum=!1,this.isUserInteracting=!1,this.addDraggableStyle(),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=function(v){return i.onMouseDown({clientX:v.touches[0].pageX,clientY:v.touches[0].pageY})},this.onTouchMove=function(v){return i.onMouseMove({clientX:v.touches[0].pageX,clientY:v.touches[0].pageY})},this.onTouchEnd=function(v){return i.onMouseUp()},this.onDeviceMotion=this.onDeviceMotion.bind(this),this.onMessage=this.onMessage.bind(this),this.bindEvents()}return y(e,[{key:"bindEvents",value:function(){this.el.addEventListener("mouseleave",this.onMouseUp),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mouseup",this.onMouseUp),this.el.addEventListener("touchstart",this.onTouchStart),this.el.addEventListener("touchmove",this.onTouchMove),this.el.addEventListener("touchend",this.onTouchEnd),this.isInIframe()||window.addEventListener("devicemotion",this.onDeviceMotion),window.addEventListener("message",this.onMessage)}},{key:"centralize",value:function(){var r=this,i=this.initialYaw*Math.PI/180,v=this.theta,I=this.phi,W=Date.now(),q=function fe(){var ae=Date.now()-W,me=ae/750;return me=1<me?1:me,750<=ae?cancelAnimationFrame(q):(r.theta=v+(i-v)*Qn(me),r.phi=I+(0-I)*Qn(me),requestAnimationFrame(fe))}()}},{key:"isInIframe",value:function(){try{return window.self!==window.top}catch{return!0}}},{key:"destroy",value:function(){this.el.removeEventListener("mouseleave",this.onMouseUp),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mousedown",this.onMouseDown),this.el.removeEventListener("mouseup",this.onMouseUp),this.el.removeEventListener("touchstart",this.onTouchStart),this.el.removeEventListener("touchmove",this.onTouchMove),this.el.removeEventListener("touchend",this.onTouchEnd),window.removeEventListener("devicemotion",this.onDeviceMotion),window.removeEventListener("message",this.onMessage)}},{key:"getCurrentStyle",value:function(){return"height: ".concat(parseInt(this.el.style.height,10),"px; width: ").concat(parseInt(this.el.style.width,10),"px; user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; -webkit-tap-highlight-color: rgba(0,0,0,0);")}},{key:"addDraggingStyle",value:function(){this.el.setAttribute("style","".concat(this.getCurrentStyle()," cursor: -webkit-grabbing; cursor: -moz-grabbing; cursor: grabbing;"))}},{key:"addDraggableStyle",value:function(){this.el.setAttribute("style","".concat(this.getCurrentStyle()," cursor: -webkit-grab; cursor: -moz-grab; cursor: grab;"))}},{key:"onMessage",value:function(r){var i=r.data,v=i.orientation,I=i.portrait,W=i.rotationRate;W&&this.onDeviceMotion({orientation:v,portrait:I,rotationRate:W})}},{key:"onDeviceMotion",value:function(r){var i,v=r.portrait!==void 0?r.portrait:window.matchMedia("(orientation: portrait)").matches;i=r.orientation!==void 0?r.orientation:window.orientation!==void 0?window.orientation:-90;var I=tr.Math.degToRad(r.rotationRate.alpha),W=tr.Math.degToRad(r.rotationRate.beta);v?(this.phi=this.verticalPanning?this.phi+I*this.velo:this.phi,this.theta=this.theta-W*this.velo*-1):(this.verticalPanning&&(this.phi=i===-90?this.phi+W*this.velo:this.phi-W*this.velo),this.theta=i===-90?this.theta-I*this.velo:this.theta+I*this.velo),this.adjustPhi()}},{key:"onMouseMove",value:function(r){this.isUserInteracting&&(this.rotateEnd.set(r.clientX,r.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),this.phi=this.verticalPanning?this.phi+2*Math.PI*this.rotateDelta.y/this.renderer.height*.3:this.phi,this.theta+=2*Math.PI*this.rotateDelta.x/this.renderer.width*.5,this.adjustPhi())}},{key:"adjustPhi",value:function(){this.phi=tr.Math.clamp(this.phi,-Math.PI/1.95,Math.PI/1.95)}},{key:"onMouseDown",value:function(r){this.addDraggingStyle(),this.rotateStart.set(r.clientX,r.clientY),this.isUserInteracting=!0,this.momentum=!1,this.onDragStart&&this.onDragStart()}},{key:"inertia",value:function(){this.momentum&&(this.rotateDelta.y*=.9,this.rotateDelta.x*=.9,this.theta+=.005*this.rotateDelta.x,this.phi=this.verticalPanning?this.phi+.005*this.rotateDelta.y:this.phi,this.adjustPhi())}},{key:"onMouseUp",value:function(){this.isUserInteracting&&this.onDragStop&&this.onDragStop(),this.addDraggableStyle(),this.isUserInteracting=!1,this.momentum=!0,this.inertia()}},{key:"update",value:function(){return(this.phi!==this.previousPhi||this.theta!==this.previousTheta)&&(this.previousPhi=this.phi,this.previousTheta=this.theta,this.euler.set(this.phi,this.theta,0,"YXZ"),this.orientation.setFromEuler(this.euler),this.camera.quaternion.copy(this.orientation),this.inertia(),!0)}}]),e}(),Bn=function(){function e(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};w(this,e),Object.assign(this,{height:360,width:640,initialYaw:90,verticalPanning:!0},r);var i=this.height,v=this.width,I=(this.container,this.containerId,this.initialYaw),W=this.verticalPanning,q=this.onDragStart,fe=this.onDragStop;this.renderer=new si({height:i,width:v}),this.camera=new tr.PerspectiveCamera(80,this.width/this.height,.1,100),this.controls=new li({camera:this.camera,renderer:this.renderer,initialYaw:I,verticalPanning:W,onDragStart:q,onDragStop:fe}),this.stopVideoLoop=this.stopVideoLoop.bind(this),this.onError=this.onError.bind(this),this.startVideoLoop=this.startVideoLoop.bind(this),this.needsUpdate=!1,this.scene=this.createScene(),this.scene.add(this.camera),this.element=this.getElement(),this.elementReady=!1,this.element.addEventListener("playing",this.startVideoLoop),this.element.addEventListener("pause",this.stopVideoLoop),this.element.addEventListener("ended",this.stopVideoLoop),this.element.addEventListener("loadedmetadata",this.initAfterLoadedMetadata.bind(this)),this.target=this.container?this.container:document.querySelector(this.containerId)}return y(e,[{key:"initAfterLoadedMetadata",value:function(){1<=this.element.readyState&&!this.elementReady&&(this.texture=this.createTexture(),this.renderer.setTexture(this.texture),this.scene.getObjectByName("photo").children=[this.renderer.mesh],this.elementReady=!0)}},{key:"play",value:function(){this.element.play&&this.element.play()}},{key:"pause",value:function(){this.element.pause&&this.element.pause()}},{key:"centralize",value:function(){this.controls.centralize()}},{key:"stopVideoLoop",value:function(){clearTimeout(this.videoLoopId),this.videoLoopId=null,this.needsUpdate=!1}},{key:"destroy",value:function(){this.element.style.display="",clearTimeout(this.videoLoopId),cancelAnimationFrame(this.animationFrameId),this.element.pause&&this.element.pause(),this.target.removeChild(this.renderer.el),this.controls.destroy(),this.renderer.destroy()}},{key:"setSize",value:function(r){var i=r.height,v=r.width;this.camera.aspect=v/i,this.camera.updateProjectionMatrix(),this.renderer.setSize({height:i,width:v})}},{key:"getElement",value:function(){if(this.source&&this.source.tagName)return this.source;var r=document.createElement("video");return r.loop=this.loop||!1,r.muted=this.muted||!1,r.setAttribute("crossorigin","anonymous"),r.setAttribute("webkit-playsinline","true"),r.setAttribute("playsinline","true"),r.setAttribute("src",this.source),r.autoplay=this.autoplay===void 0||this.autoplay,r.addEventListener("error",this.onError),r}},{key:"createTexture",value:function(){var r=new tr.Texture(this.element);return r.minFilter=tr.LinearFilter,r.magFilter=tr.LinearFilter,r.format=tr.RGBFormat,r.generateMipmaps=!1,r.needsUpdate=!0,r}},{key:"createScene",value:function(){var r=new tr.Scene,i=new tr.Object3D;return i.name="photo",r.add(i),r}},{key:"onError",value:function(){}},{key:"startVideoLoop",value:function(){var r=this;this.videoLoopId&&(clearTimeout(this.videoLoopId),this.videoLoopId=null),function i(){r.needsUpdate=!0,r.videoLoopId=setTimeout(i,40)}()}},{key:"render",value:function(){var r=this;this.target.appendChild(this.renderer.el),this.element.style.display="none",this.startVideoLoop(),function i(){r.animationFrameId=requestAnimationFrame(i);var v=r.controls.update();r.renderer.render(r.scene,r.camera,r.needsUpdate||v),r.needsUpdate=!1}()}}]),e}(),pn=function(){function e(r){return w(this,e),b(this,d(e).call(this,r))}return c(e,Bn),y(e,[{key:"createTexture",value:function(){var r=new tr.VideoTexture(this.element);return r.minFilter=tr.LinearFilter,r.magFilter=tr.LinearFilter,r.format=tr.RGBFormat,r.generateMipmaps=!1,r.needsUpdate=!0,r}}]),e}(),Dn=function(){function e(r){var i;return w(this,e),(i=b(this,d(e).call(this,r))).context=i.element.getContext("2d"),i}return c(e,Bn),y(e,[{key:"play",value:function(){this.video.play&&this.video.play()}},{key:"pause",value:function(){this.video.pause&&this.video.pause()}},{key:"destroy",value:function(){this.video.style.display="",u(d(e.prototype),"destroy",this).call(this)}},{key:"getElement",value:function(){this.video=u(d(e.prototype),"getElement",this).call(this),this.video.addEventListener("playing",this.startVideoLoop),this.video.addEventListener("pause",this.stopVideoLoop),this.video.addEventListener("ended",this.stopVideoLoop);var r=document.createElement("canvas");return r.height=this.video.videoHeight,r.width=this.video.videoWidth,r}},{key:"render",value:function(){var r=this;this.target.appendChild(this.renderer.el),this.video.style.display="none",this.startVideoLoop(),function i(){r.animationFrameId=requestAnimationFrame(i);var v=r.video.videoHeight,I=r.video.videoWidth;r.element.height!=v&&(r.element.height=v),r.element.width!=I&&(r.element.width=I),r.context.clearRect(0,0,I,v),r.context.drawImage(r.video,0,0,I,v);var W=r.controls.update();r.renderer.render(r.scene,r.camera,r.needsUpdate||W),r.renderer.mesh.material.map.needsUpdate=!0,r.needsUpdate=!1}()}}]),e}(),ui=function(){function e(r){var i;return w(this,e),(i=b(this,d(e).call(this,r))).driver.addEventListener("playing",i.startVideoLoop),i.driver.addEventListener("pause",i.stopVideoLoop),i.driver.addEventListener("ended",i.stopVideoLoop),i.driver.addEventListener("stalled",i.stopVideoLoop),i.driverInitialized=!1,i}return c(e,Bn),y(e,[{key:"play",value:function(){this.driver.play()}},{key:"pause",value:function(){this.driver.pause()}},{key:"getElement",value:function(){this.source&&this.source.tagName?this.driver=this.source:(this.driver=document.createElement("audio"),this.driver.src=this.source,this.driver.loop=this.loop||!1,this.driver.muted=this.muted||!1,this.driver.setAttribute("crossorigin","anonymous"),this.driver.autoplay=this.autoplay||!0),this.source=this.driver.src,this.driver.src="",this.driver.load();var r=document.createElement("video");return r.setAttribute("crossorigin","anonymous"),r.src=this.source,r.load(),r.addEventListener("error",this.onError),r}},{key:"createTexture",value:function(){var r=new tr.VideoTexture(this.element);return r.minFilter=tr.LinearFilter,r.magFilter=tr.LinearFilter,r.format=tr.RGBFormat,r.generateMipmaps=!1,r.needsUpdate=!0,r}},{key:"startVideoLoop",value:function(){var r=this;this.videoLoopId&&(clearTimeout(this.videoLoopId),this.videoLoopId=null),function i(){r.element.currentTime=r.driver.currentTime,r.needsUpdate=!0,r.videoLoopId=setTimeout(i,40)}()}},{key:"destroy",value:function(){this.driver.style.display="",u(d(e.prototype),"destroy",this).call(this)}},{key:"render",value:function(){var r=this;this.target.appendChild(this.renderer.el),this.element.style.display="none",this.driver.style.display="none",function i(){var v=r.controls.update();r.renderer.render(r.scene,r.camera,r.needsUpdate||v),r.needsUpdate=!1,r.animationFrameId=requestAnimationFrame(i),r.element.readyState>=r.element.HAVE_FUTURE_DATA&&!r.driverInitialized&&(r.driver.src=r.source,r.driver.load(),r.onDriverReady&&r.onDriverReady(),r.driverInitialized=!0)}()}}]),e}();return function(){function e(I){var W,q,fe;(function(Ee,xe){if(!(Ee instanceof xe))throw new TypeError("Cannot call a class as a function")})(this,e),q=this,W=!(fe=t(e).call(this,I))||typeof fe!="object"&&typeof fe!="function"?x(q):fe,B.Mediator.on("".concat(W.options.playerId,":").concat(B.Events.PLAYER_RESIZE),W.updateSize,x(W));var ae=I.options,me=ae.height,pe=ae.width;return ae.autoplay,I.playback.el.setAttribute("crossorigin","anonymous"),I.playback.el.setAttribute("preload","metadata"),I.playback.el.setAttribute("playsinline","true"),I.el.style.touchAction="none",I.el.addEventListener("touchmove",function(Ee){Ee.preventDefault()},!1),W.viewer=new oi({height:isNaN(me)?300:me,width:isNaN(pe)?400:pe,container:W.container.el,source:W.container.playback.el}),W.viewer.render(),W}return function(I,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(W&&W.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),W&&o(I,W)}(e,B.ContainerPlugin),r=e,(i=[{key:"updateSize",value:function(){var I=this;setTimeout(function(){return I.viewer.setSize({height:I.container.$el.height(),width:I.container.$el.width()})},250)}},{key:"name",get:function(){return"Video360"}}])&&T(r.prototype,i),v&&T(r,v),e;var r,i,v}()})})(Ni);var Gi=Ni.exports;const Vi=Ii(Gi),zi="videoVr.mp4",Yi=new Bi.Player({source:zi,plugins:{container:[Vi]},parentId:"#player"});Yi.getPlugin("click_to_pause").disable();
